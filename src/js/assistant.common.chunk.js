(window.webpackChunk=window.webpackChunk||[]).push([[721],{26479:(e,t,i)=>{var s=i(66740),a="chrome-extension://__MSG_@@extension_id__/",r="moz-extension://__MSG_@@extension_id__/",n=window.GR_RESOURCE_ROOT||a,o=window.GR_RESOURCE_ROOT||r;e.exports={__css:s.toString().replace(new RegExp(a,"g"),n).replace(new RegExp(r,"g"),o),...s.locals}},83765:(e,t,i)=>{var s=i(55271),a="chrome-extension://__MSG_@@extension_id__/",r="moz-extension://__MSG_@@extension_id__/",n=window.GR_RESOURCE_ROOT||a,o=window.GR_RESOURCE_ROOT||r;e.exports={__css:s.toString().replace(new RegExp(a,"g"),n).replace(new RegExp(r,"g"),o),...s.locals}},65669:(e,t,i)=>{var s=i(20532),a="chrome-extension://__MSG_@@extension_id__/",r="moz-extension://__MSG_@@extension_id__/",n=window.GR_RESOURCE_ROOT||a,o=window.GR_RESOURCE_ROOT||r;e.exports={__css:s.toString().replace(new RegExp(a,"g"),n).replace(new RegExp(r,"g"),o),...s.locals}},57108:(e,t,i)=>{var s=i(80111),a="chrome-extension://__MSG_@@extension_id__/",r="moz-extension://__MSG_@@extension_id__/",n=window.GR_RESOURCE_ROOT||a,o=window.GR_RESOURCE_ROOT||r;e.exports={__css:s.toString().replace(new RegExp(a,"g"),n).replace(new RegExp(r,"g"),o),...s.locals}},20271:(e,t,i)=>{"use strict";i.d(t,{O:()=>s,I:()=>c});var s,a=i(27378),r=i(79844),n=i(88056),o=i(87088),l=i(35407);!function(e){e.Context=a.createContext(n.Y.invariantContent("AssistantTextResources")),e.holder=o.asks((()=>({setGoalsTooltip:"Set goals to get tailored writing suggestions",proofitTooltip:"Expert writing help"})))}(s||(s={}));const c=l.P(l.G({denali:r.m.holder,assistant:s.holder}))((()=>({denali:{}})))},27994:(e,t,i)=>{"use strict";i.r(t),i.d(t,{AssistantController:()=>fn,AssistantControllerInjectedParams:()=>s.AssistantControllerInjectedParams,AssistantService:()=>ao,AssistantServiceInjectedParams:()=>a.AssistantServiceInjectedParams,LocalAssistantHighlightCollection:()=>n});var s={};i.r(s),i.d(s,{e:()=>fn});var a={};i.r(a),i.d(a,{e:()=>ao});var r=i(41186);class n{constructor(e,t){this._textObserver=e,this._highlights=t}addHighlight(e,t,i){return this._highlights.addHighlight(e,t,this._textObserver.getCurrentTextMap(),i)}updateHighlight(e,t,i){return this._highlights.updateHighlight(e,t,this._textObserver.getCurrentTextMap(),i)}removeHighlights(e){return this._highlights.removeHighlights(e)}recalculateHighlight(e){return this._highlights.recalculateHighlight(e)}recalculateAllHighlights(){return this._highlights.recalculateAllHighlights()}maintainConsistency(e,t=(e=>e),i=!1){return this._highlights.maintainConsistency(e,this._textObserver.getCurrentTextMap(),t,i)}hasHighlight(e){return this._highlights.hasHighlight(e)}getSelectedHighlightsTracker(e){return(0,r.H)({...e,highlights:this._highlights,textObserver:this._textObserver})}getGeometryByHighlightId(e){return this._highlights.geometry.get().get(e)}}var o=i(73805),l=i(27378),c=i(32952),d=i(76974),p=i(49708),h=i(66310),m=i(93508),u=i(41398),g=i(77176),f=i(2768),v=i(2834),_=i(16118),w=i(85985),y=i(74850),E=i(69699),b=i(46861),C=i(79921),k=i(19217);const S=({message:e,emoji:t,icon:i})=>l.createElement("div",{className:k.insight},t&&l.createElement("div",{className:k.insight__inline_icon},l.createElement(C.dy,{unicodeHexArray:null,unicodeLiteral:t})),i&&l.createElement("div",{className:k.insight__inline_icon},i),l.createElement("div",{className:k.insight__inline_text},e));var A=i(53112);const M=()=>l.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:A.Z.green50}),l.createElement("path",{d:"M5.03033 8.46967C4.73744 8.17678 4.26256 8.17678 3.96967 8.46967C3.67678 8.76256 3.67678 9.23744 3.96967 9.53033L5.03033 8.46967ZM7 11.5L6.46967 12.0303L7 12.5607L7.53033 12.0303L7 11.5ZM13.0303 6.53033C13.3232 6.23744 13.3232 5.76256 13.0303 5.46967C12.7374 5.17678 12.2626 5.17678 11.9697 5.46967L13.0303 6.53033ZM3.96967 9.53033L6.46967 12.0303L7.53033 10.9697L5.03033 8.46967L3.96967 9.53033ZM7.53033 12.0303L13.0303 6.53033L11.9697 5.46967L6.46967 10.9697L7.53033 12.0303Z",fill:A.Z.neutral0})),x=()=>l.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 16C12.4183 16 16 12.4183 16 8C16 3.58172 12.4183 0 8 0C3.58172 0 0 3.58172 0 8C0 12.4183 3.58172 16 8 16Z",fill:A.Z.red50}),l.createElement("path",{d:"M8.94827 4H7.05196L7.22242 10.1108H8.78208L8.94827 4ZM8.00225 12.8381C8.5477 12.8381 9.02071 12.3821 9.02498 11.8153C9.02071 11.2571 8.5477 10.8011 8.00225 10.8011C7.43975 10.8011 6.97526 11.2571 6.97952 11.8153C6.97526 12.3821 7.43975 12.8381 8.00225 12.8381Z",fill:A.Z.neutral0}));var I,L=i(67584),T=i(88326),F=i(45836),R=i(51465),V=i(18208),P=i(42726),O=i(98029);!function(e){e.hidden="hidden",e.zero="zero",e.visible="visible"}(I||(I={}));const H=({predictionsVM:e})=>R.UI.mount(Z,e.previewFlow),N=R.UI.Grid.make((({slots:e})=>l.createElement("div",{className:O.predictions},l.createElement("div",{className:O.predictions__header},"Predictions"),e.children))),U=({children:e,count:t,countFormatter:i=(e=>String(e)),dataPartGrammarly:s})=>l.createElement(P.F.div,{className:O.predictions__card,"data-grammarly-part":s},e,t>0&&l.createElement("div",{className:O.counterContainer},l.createElement(F.CL,null,i(t)))),B=R.UI.Node.make((({state:e,notify:t})=>l.createElement(T.M,{clickHandler:t("select")},l.createElement(P.F.Fragment,null,e.pipe(g.U((e=>l.createElement(U,{count:e.alertsCount,countFormatter:e=>`+${e} more`,dataPartGrammarly:"emogenie-prediction-card"},l.createElement(S,{key:"tone",message:"Sounds "+e.emotion.name,emoji:e.emotion.emoji}),e.brandToneOffImageUrl?l.createElement("div",{className:O.predictions__emogenie_pulsing},l.createElement(L.e,{pulsing:P.hg.create(!0)})):null)))))))),D=R.UI.Node.make((({state:e,notify:t})=>l.createElement(T.M,{clickHandler:t("select")},l.createElement(P.F.Fragment,null,e.pipe(g.U((e=>l.createElement(U,{count:e.alertsCount,dataPartGrammarly:"readers-attention-prediction-card"},l.createElement(S,{key:"readersAttention",message:V.kC(e.message),icon:e.easyToRead?l.createElement(M,null):l.createElement(x,null)}))))))))),q=R.UI.Group.make({tone:G(B),readersAttention:G(D)}),Z=R.UI.Union.make("kind",{[I.hidden]:R.UI.Node.empty,[I.zero]:R.UI.Node.empty,[I.visible]:R.UI.Composite.make(N,q)});function G(e){return{tag:"_tag",members:{Some:(0,o.pipe)(e,R.UI.contramapState((e=>e.value))),None:R.UI.Node.empty}}}var W,z=i(45980),j=i(22902),X=i(22788),Y=i(51139),K=i(65875),Q=i(14196),$=i(23124),J=i(40644),ee=i(15066),te=i(89881),ie=i(62712),se=i(91473),ae=i(38524),re=i(31346),ne=i(8125),oe=i(83078),le=i(42654),ce=i(64909);!function(e){function t(e,t,i,s){return ae.nL.Items.mapper((e=>e.kind),{[J.X.Kind]:e,[se.a.Kind]:t,[se.$.Kind]:i,[ie.J.Kind]:s})}function i(e){return e.kind===J.X.Kind}function s(e){return e.kind===ie.J.Kind}function a(){return{viewState:({activeCard:e,isLastItem:t,ord:i})=>s=>{const a=(0,o.pipe)(e,ce.exists((e=>e===s.id)));return{cell:{item:r(t)(s),root:{height:{value:s.positionState.height,watched:s.positionState.watched&&!s.scheduledToDispose,isValid:s.positionState.isHeightValid},position:{top:s.positionState.absTop,animationInProgress:s.positionState.animationInProgress},layer:a||s.visualState.incomplete&&!(0,o.pipe)(s.visualState.from,ce.exists((e=>"focused"===e)))?$.H.Layer.front:$.H.Layer.back}},root:s.id,hashCode:s.hashCode.bind(s),equals:e=>s.equals(e.cell.item.view),compare:e=>i.compare(s,e.cell.item.view)}}}}function r(e){return t((t=>({view:t,isLastCard:e,kind:"alertCard"})),(e=>({view:e,kind:"priorityToggle"})),(e=>({view:e,kind:"priorityToggleHint"})),(e=>({view:e,kind:"bulkAccept"})))}function n(e){return{changePosition:i=>t((t=>e.changePosition(t,i)),(e=>se.a.changePosition(e,i)),(e=>se.$.changePosition(e,i)),(e=>ie.J.changePosition(e)(i)))}}function l(e){return{transitionTo:i=>t((t=>e.transitionTo(t,i)),(e=>se.a.transitionTo(e,i)),(e=>se.$.transitionTo(e,i)),(e=>ie.J.transitionTo(e,i)))}}function c(e){return{completeTransition:i=>t((t=>e.completeTransition(t,i)),z.identity,z.identity,(e=>ie.J.completeTransition(e,i)))}}function d(e){return{select:({previousCard:i,ord:s,meta:a})=>t((t=>e.selectFirstAlert(t,(0,z.unsafeCoerce)(i),s,(0,o.pipe)(a,ce.map((e=>()=>e)),ce.toUndefined))),z.identity,z.identity,(e=>ie.J.select(e,i))),selectByAlert:({alertHighlight:i,previousCard:s,ord:a,meta:r})=>t((t=>e.select(t,i,(0,z.unsafeCoerce)(s),a,(0,o.pipe)(r,ce.map((e=>()=>e)),ce.toUndefined))),z.identity,z.identity,(e=>ie.J.select(e,s))),unselect:({nextCard:i,ord:s})=>t((t=>e.unselect(t,(0,z.unsafeCoerce)(i),s)),z.identity,z.identity,(e=>ie.J.unselect(e,i)))}}function p(e){return{removeAlertFromItem:({alerts:s,state:a})=>t((t=>J.X.getRemoveAlertsCapability(e,a.itemsOrd,ee.R.getRemoveAlertsCapability(e))(s,ae.In.getActiveItemOfType(i)(a))(t)),z.identity,z.identity,z.identity)}}function h(e){return{remove:(i,s)=>t((t=>i(t)?e.remove(t,[t.activeAlert],s(t)):t),z.identity,z.identity,z.identity)}}function m(e){return{updateWithAlert:i=>t((t=>e.updateWith(t,i)),z.identity,z.identity,z.identity)}}function u(e){return{nextAlert:t((t=>e.nextAlert(t)),(()=>ce.none),(()=>ce.none),(()=>ce.none)),prevAlert:t((t=>e.prevAlert(t)),(()=>ce.none),(()=>ce.none),(()=>ce.none))}}e.getActiveItemWithAlert=ae.In.getActiveItemOfType(i),e.getActiveAlignableItem=ae.In.getActiveItemOfType((0,ne.Kg)(i,s)),e.checksFeedItemsMapper=t,e.isAlertCard=i,e.isBulkAcceptItem=s,e.isPriorityToggle=function(e){return e.kind===se.a.Kind},e.eq=le.fromEquals(((e,t)=>e.kind===t.kind&&(i(e)&&i(t)?J.X.eq.equals(e,t):te.c.eqById.equals(e,t)))),e.view=e=>R.UI.Union.make("kind",{alertCard:Y.p.Card(e),priorityToggle:Q.e.Toggle,priorityToggleHint:Q.e.Hint,bulkAccept:K.o.Card(e)}),e.viewState=a,e.listItemOrd=e=>(0,X.contramap)((e=>e.cell.item.view))(e).compare,e.changePosition=n,e.transitionTo=l,e.completeTransition=c,e.queries={isSelectableByAlert:e=>t(J.X.hasAlert(e.alert.id),z.constFalse,z.constFalse,z.constFalse),hasAlert:e=>t(J.X.hasAlert(e),z.constFalse,z.constFalse,ie.J.hasAlert(e))},e.select=d,e.removeAlert=p,e.remove=h,e.updateWithAlert=m,e.releaseAlert=e=>re.v.getAlertReleaser(p(e)),e.unselectable=e=>re.v.getUnselectable(ae.In.getActiveItem,d(e)),e.selectableByAlert=t=>re.v.getSelectableByAlert(ae.In.getActiveItem,{...e.queries,...d(t)}),e.selectableById=e=>re.v.getSelectableById(ae.In.getActiveItem,d(e)),e.updateMeta=e=>({updateMeta:t=>g([re.v.Plagiarism.updateCardsWithLensMeta(e),re.v.getMetaUpdatable().updateMeta(t)])}),e.animatable=t=>re.v.getAnimatable(t,{...p(t),...e.queries}),e.hasPriorityToggle=e=>re.v.Priority.getHasPriorityToggle(l(e)),e.alertIterator=u,e.hasAlerts=re.v.getHasAlerts,e.getDefaultNextAlertItemFilter=e=>(0,ne.W9)(i,J.X.canBeFocused(e)),e.verifiable=()=>re.v.getVerifiable();e.referenceHeightItemGetter=()=>({getReferenceHeightItem:e=>{return(0,o.pipe)(e.items.find((t=ae.In.getActiveItem(e),e=>e.positionState.watched&&"hidden"!==e.visualState.transition.type&&(0,o.pipe)(t,oe.wo((t=>t.id!==e.id))))),ce.map((({value:e,index:t})=>({index:t,value:(0,o.pipe)(e,ce.fromPredicate((e=>e.positionState.isHeightValid&&!e.scheduledToDispose)))}))));var t}});const g=(0,j.fold)((0,j.getEndomorphismMonoid)());e.getCapabilities=(t,i)=>({...a(),...n(t),...l(t),...c(t),...d(t),...h(t),...m(t),...e.queries,...e.releaseAlert(t),...e.unselectable(t),...e.selectableByAlert(t),...e.selectableById(t),...e.updateMeta(t),...e.animatable(t),...e.hasPriorityToggle(t),...e.verifiable(),...e.hasAlerts(u(t),(()=>e.getDefaultNextAlertItemFilter(i))),...e.referenceHeightItemGetter()})}(W||(W={}));var de=i(2027),pe=i(5304),he=i(81766),me=i(52479),ue=i(66265),ge=i(78259),fe=i(99391),ve=i(2844),_e=i(24209),we=i(18625),ye=i(40151),Ee=i(95093),be=i(24713),Ce=i(17343),ke=i(78090),Se=i(32917),Ae=i(71517),Me=i(13338),xe=i(90600),Ie=i(19962),Le=i(92932),Te=i(47476);const Fe=R.UI.Grid.make((({slots:e,view:t})=>l.createElement(P.F.div,{className:t("isBundle").pipe(g.U((e=>e?Te.bundleCardWrapper:Te.cardWrapper)))},e.children))),Re=l.forwardRef((({state:e,cardsViewModel:t,cardsListScrollManager:i,connectorElements:s,header:a,footer:r,cardsListFlow:n,capabilities:p,comparator:h},u)=>{const g=me.jw((e=>{let t=7;return t=31*t+(0,ke.AC)(e.currentLens.id),t=31*t+(ae.nL.hasCards(e)?1231:1237),t}),e).view((e=>ae.nL.hasCards(e.get())?e.view(ae.nL.Prism.getLens()):null)),f=(0,o.pipe)(pe.A.cardList(W.view(t.actionEvents)),R.UI.patch("content","cell","item")((e=>(0,o.pipe)(R.UI.Knot.make(Fe,{children:e.child}),R.UI.squash,R.UI.contramapState((e=>({children:e,root:{isBundle:"alertCard"===e.kind&&ce.isSome(e.view.meta.bundleInfo)}}))))))),v=l.useContext(de.Dg).state;return l.createElement(xe.d,{className:d.of(""),name:"cardlist",stateSyncListener:Pe(i,s,v),height:Ve(e,i),isMaster:!0},l.createElement(l.Fragment,null,a?l.createElement(P.F.div,{className:Te.cardWrapper,mount:e=>s.lens("title").set(ce.fromNullable(e))},a):null,l.createElement(P.F.div,{mount:u},g.view((e=>e?R.UI.mount(f,(e=>n||(0,he._F)(t,e,new c.xQ,Se.i$(i).pipe(m.O(!1)),p,h))(e)):null))),r?l.createElement(P.F.div,{className:Te.cardWrapper},r):null))})),Ve=(e,t)=>{const i=(0,Me.Sd)(e.view(ae.nL.mapper((({currentLens:e,alertSource:t})=>ce.some({currentLens:e,alertSource:t})))));return ve.aj([i.pipe(ue.oA,g.U((({currentLens:e})=>e.cardsHeight)),m.O(0)),t.paddingTop]).pipe(g.U((([e,t])=>e+t)))},Pe=(e,t,i)=>{const s=Le.C8.Logging.getLogger("view_models");return _e.T(we.P((()=>{e.paddingTop.set(0)})),t.view("viewport").pipe(h.w(ce.fold((()=>ye.E),(e=>ge.YC(e).pipe(v.b((()=>s.debug("update card list viewport due to viewport resize event"))),Ee.T(i.pipe(be.j("dragging"),w.h((e=>!e)),h.w(me.b2.rafScheduler),v.b((()=>s.debug("update card list viewport due to drag end event"))))),g.U((()=>e.getBoundingClientRect())),g.U((e=>({top:Ae.r.FromWindowTop.ISO.wrap(e.top),height:e.height}))))))),v.b(me.wW(e.viewport))),t.view("scrollProvider").pipe(h.w(ce.fold((()=>ye.E),(t=>p.R(t,"scroll").pipe(g.U((()=>t.scrollTop)),m.O(t.scrollTop),v.b(me.wW(e.scrollTop)),Ce.h(me.PU)))))),t.view("title").pipe(h.w(ce.fold((()=>d.of(Ie.UL.empty)),(e=>ge.YC(e)))),g.U((e=>e.height)),fe.shareReplay({bufferSize:1,refCount:!0}),v.b(me.wW(e.paddingTop))),t.view("scrollConsumer").pipe(h.w(ce.fold((()=>ye.E),(t=>e.scrollOffset.pipe(v.b((e=>{t.scrollTop+=e})))))))).pipe(Ce.h(void 0))};var Oe,He=i(65421),Ne=i(39354),Ue=i(10002),Be=i(17753),De=i(69551),qe=i(76779),Ze=i(95574),Ge=i(65772);!function(e){let t;!function(e){e.gdocsSidebarCardList="gdocsSidebarCardList",e.gdocsSidebarSuccessView="gdocsSidebarSuccessView",e.gdocsGoals="gdocsGoals",e.assistantCardList="assistantCardList",e.extensionSettingsAssistant="extensionSettingsAssistant"}(t=e.Place||(e.Place={}))}(Oe||(Oe={}));class We{constructor(e,t,i){this._alertsList=e,this._lensPreviewVM=t,this._maxAlertCategories=i,this._log=Le.C8.Logging.getLogger("UpgradeViewModel"),this.advancedAlerts=this._lensPreviewVM.getLens(Ue.R.SpecialId.Premium).view("count").view((e=>e>0?(0,o.pipe)(ce.some({count:e,alerts:()=>this._formatLiteAlerts(this.getAdvancedGroupedLiteAlerts())})):ce.none)),this._formatLiteAlerts=e=>{const t=e.slice(0,this._maxAlertCategories),i=e.slice(this._maxAlertCategories).map((e=>e.count)).reduce(ne.Sm,0);return i>0?[...t,{group:"",category:"",categoryHuman:"more...",count:i}]:t},this.getAdvancedGroupedLiteAlerts=()=>this._getGroupedLiteAlerts(Be.bZ.isPremium),this._getAdvancedLiteAlerts=()=>(0,o.pipe)(this._alertsList.state.get(),qe.p.reduce([],((e,{alert:t})=>(Be.bZ.isRegistered(t)&&e.push(t),e)))).filter(Be.bZ.isPremium).map((e=>(0,He.fe)(this._toRawAlertWithPossibleWrongId(e),"sidebar"))),this._toRawAlertWithPossibleWrongId=e=>({...e.toRawAlert(),id:(0,o.pipe)(e.rawId,ce.getOrElse((()=>e.id)))})}openUpgradeUrl(e){(0,o.pipe)(Ze.vM((()=>{(0,Ne.P4)().openSubscriptionDialog({currentAlerts:this._getAdvancedLiteAlerts(),isAnonymousUser:!1,showPlanComparison:!0,isFromEmail:!1,forceUtmCampaign:e})})),Ge.getOrElse((e=>this._log.fatal("unexpected error on open upgrade page",e))))}_getGroupedLiteAlerts(e){return De.Q.group((0,o.pipe)(this._alertsList.state.get(),qe.p.reduce([],((e,{alert:t})=>(Be.bZ.isRegistered(t)&&e.push(t),e)))).filter(e).map((e=>e.toLiteAlert())))}}var ze,je=i(90361),Xe=i(45442),Ye=i(79126),Ke=i(79176),Qe=i(73510),$e=i(95300),Je=i(28043),et=i(16782),tt=i(78674),it=i(57091),st=i(50628),at=i(15228);!function(e){let t;!function(e){e.clickOnEmpty="clickOnEmpty",e.clickOnFakeCard="clickOnFakeCard"}(t=e.Type||(e.Type={}))}(ze||(ze={}));class rt{constructor(e,t,i,s,a){this._lensState=e,this._predictionsVM=t,this._upgradeViewModel=i,this._capabilities=s,this._gnar=a,this._subs=new Qe.w.Keeper,this.successView=P.hg.combine(this._lensState,this._predictionsVM.previewState,((e,t)=>re.v.State.isInSuccess(e)?ce.some(t.kind===I.visible?at.g.SuccessType.applied:at.g.SuccessType.small):ce.none)),this._premiumAlertsCount=this._upgradeViewModel.advancedAlerts.view((0,z.flow)(ce.map((e=>e.count)),ce.getOrElse((()=>0)))),this.havePremiumAlerts=this._premiumAlertsCount.view((e=>e>0)),this._upgradeHookExpanded=new $e.X(!1),this.upgradeHookExpanded=(0,o.pipe)(this._upgradeHookExpanded,Je.x()),this.upgradeHookFlow=(0,o.pipe)((0,Ye.Q)(this._upgradeViewModel.advancedAlerts),Xe.Z.extendActions(v.b((e=>{e.key===Ke.n.State.expanded?"upgrade"===e.action.kind?(this._upgradeViewModel.openUpgradeUrl(Oe.Place.assistantCardList),this._gnar.assistantExpandedUpgradeHookClick(this._premiumAlertsCount.get())):"onUpgradeButtonMount"===e.action.kind&&this._onUpgradeButtonMount.next(e.action.element):e.key===Ke.n.State.minimized&&"onClick"===e.action.action&&this._upgradeHookExpandReason.next("click")}))),Xe.Z.patchState(Ee.T(this._autoOpenUpgradeHook())),Xe.Z.patchState(v.b((e=>this._onUpgradeHookShown.next(function(e){switch(e){case"hidden":return Ke.n.State.hidden;case"expanded":return Ke.n.State.expanded;case"minimized":return Ke.n.State.minimized;default:(0,je.vE)(e)}}(e.kind))))),Xe.Z.patchState(v.b((e=>this._upgradeHookExpanded.next("expanded"===e.kind))))),this.cardListContext=new $e.X(ce.none),this.assistantActions=new c.xQ,this.autoFocusEnabled=P.hg.create(!0),this._onUpgradeButtonMount=new et.t,this._upgradeHookExpandReason=new et.t,this._onUpgradeHookShown=new c.xQ,this._unselectActiveAlert=this.assistantActions.pipe(w.h((e=>e.type===ze.Type.clickOnEmpty||e.type===ze.Type.clickOnFakeCard)),v.b((()=>this.autoFocusEnabled.set(!1))),g.U((()=>e=>e.patch({currentLens:(0,o.pipe)(ae.In.getActiveItem(e.currentLens),ce.fold((()=>e.currentLens),(t=>ae.nL.hasItems(e)?this._capabilities.unselectItem()(e.currentLens):e.currentLens))),switchOrder:"lensOrder",alertSource:Be.l$.sidebar})))),this.applicatorEffects={id:"assistantCardListViewModel.effects",when:Ue.R.isWithAlertsId,what:ae.nL.Effect.Applicator.create(_e.T(this._unselectActiveAlert))},this._subs.push(this._onUpgradeHookShown.pipe(tt.b(1),Je.x(),w.h((e=>e===Ke.n.State.minimized))).subscribe((()=>this._gnar.assistantCollapsedUpgradeHookShow())),this._onUpgradeButtonMount.pipe(ue.oA,it.a(this.cardListContext.pipe(ue.oA,st.P())),h.w((([e,t])=>ge.n(e,{root:t}).pipe(st.P()))),w.h(ne.Dw),g.U((e=>Math.trunc(100*e[0].intersectionRatio))),u.M(this._upgradeHookExpandReason,this._premiumAlertsCount)).subscribe((([e,t,i])=>this._gnar.assistantExpandedUpgradeHookShow(i,t,e))),this._lensState.pipe(w.h(ae.nL.hasCards),g.U((e=>ae.In.getActiveItem(e.currentLens))),_.G(),w.h((([e,t])=>ce.isNone(e)&&ce.isSome(t)))).subscribe((e=>{this.autoFocusEnabled.set(!0)})))}dispose(){this._subs.dispose()}_autoOpenUpgradeHook(){return this._lensState.pipe(w.h((e=>(0,o.pipe)(e.currentLens.id,(0,ne.Kg)(Ue.R.isPriority,Ue.R.isAllAlerts)))),g.U(re.v.State.isInSuccess),it.a(this.havePremiumAlerts,((e,t)=>e&&t)),Je.x(),v.b((e=>{e&&this._upgradeHookExpandReason.next("alertsAddressed")})),u.M(this._upgradeViewModel.advancedAlerts),g.U((([e,t])=>(0,o.pipe)(t,ce.fold((()=>({kind:Ke.n.State.hidden})),(t=>e?{kind:Ke.n.State.expanded,showCloseButton:!0,alertsState:{count:t.count,alerts:t.alerts()}}:{kind:Ke.n.State.minimized,alertsCount:t.count}))))))}}var nt=i(75003);class ot{constructor(e,t,i){this._assistantLayoutViewModel=e,this._domain=t,this._gnar=i,this._caller=this._assistantLayoutViewModel.activeView.get()}getDomain(){return this._domain}openFeedback(){this._caller=this._assistantLayoutViewModel.activeView.get(),this._gnar.assistantFeedbackButtonClick(lt(this._caller)),this._assistantLayoutViewModel.pushActiveView({type:nt.a.Type.feedback})}submitFeedback(e){this._gnar.assistantFeedbackSubmitButtonClick(lt(this._caller),e.score,e.domain,e.text)}}function lt(e){switch(e.type){case nt.a.Type.readersAttention:return"readers_attention";case nt.a.Type.settings:return"settings";default:(0,je.vE)(e.type)}}var ct,dt=i(80900),pt=i(5817),ht=i(79961);!function(e){let t;!function(e){e.HIDE=pt.m9(.15),e.THANK=pt.m9(3)}(t=e.WaitTime||(e.WaitTime={})),e.THANK_YOU_ICON_UNICODE="1f64c",e.defaultState={isExpanded:!1,isHidden:!1,voteValue:null}}(ct||(ct={}));class mt{constructor(e,t){this._model=e,this._gnar=t,this._subs=[],this._state=P.hg.create(ct.defaultState),this._shownLabels=[],this._cardLookedIds=[],this.onCardShow=e=>{this._model.onFeedback(ht.l.Intent.FeedbackType.INTENT_ALERT,e.id),this._gnar.intentShow(e.id,e.label)},this.onCardExpanded=e=>this._gnar.intentCardExpanded(e.id,e.label),this.onMiniCardClick=e=>{this._state.lens("isExpanded").set(!0),this._onCardLook(e.id)},this.onVote=(e,t)=>{this._shownLabels.push(e.label),this._state.lens("voteValue").set(t),t===ht.l.Intent.FeedbackType.INTENT_ACCEPTED?(this._subs.push((0,dt.H)(ct.WaitTime.THANK).subscribe((()=>this.onHide()))),this._gnar.intentYesButtonClick(e.id,e.label)):(this.onHide(!1),this._gnar.intentNoButtonClick(e.id,e.label)),this._onCardLook(e.id),this._model.onFeedback(t,e.id)},this.onHide=(e=!0)=>{this._state.lens("isHidden").set(!0),this.unsubscribe(),this._subs.push((0,dt.H)(ct.WaitTime.HIDE).subscribe((()=>{e?this._model.onHideAllIntent():this._model.onHideTopIntent(),this._state.set(ct.defaultState),this.unsubscribe()})))},this.unsubscribe=()=>{this._subs.forEach((e=>e.unsubscribe())),this._subs=[]}}_onCardLook(e){this._cardLookedIds.includes(e)||(this._cardLookedIds.push(e),this._model.onFeedback(ht.l.Intent.FeedbackType.INTENT_LOOKED,e))}get _intentState(){return this._model.intent.view((e=>{if(!e)return null;const[t]=e.aggregated.filter((e=>!this._shownLabels.includes(e.prediction.label)));return t?{unicode:t.prediction.bundle.title_icon_id,title:t.prediction.bundle.title,label:t.prediction.label,id:t.id}:null}))}get haveIntent(){return this._intentState.view((e=>null!==e))}get state(){return P.hg.combine(this._state,this._intentState,((e,t)=>({...e,intent:t})))}}var ut,gt,ft=i(26001),vt=i(41552),_t=i(93162),wt=i(22232);!function(e){e.equals=(e,t)=>"score"in e&&"score"in t?e.score===t.score:e.type===t.type}(ut||(ut={}));class yt{constructor(e,t,i,s,a,r,n,l,c,d,p,h){this._sessionModel=e,this._layoutVM=t,this._predictionsVM=i,this._importanceSurveyVM=s,this._modalManager=a,this._lensPreviewVM=r,this._currentLensId=n,this._lensChanged=l,this._cardsListScrollManager=c,this._user=d,this._gnar=p,this._closeAssistant=h,this.showSetGoalsActionButton=P.hg.create(!0),this.showSettingsActionButton=P.hg.create(!0),this.close=()=>{const e=this._layoutVM.activeView.get();e.type===nt.a.Type.popup&&e.popupType===nt.a.PopupType.importanceSurvey?this._importanceSurveyVM.dismiss():this._closeAssistant()},this.score=(0,o.pipe)(this._sessionModel.score.view(ce.map((e=>e.rank))),g.U((e=>(0,ft.Yt)(ce.option)({capiScore:e}))),it.a(this._sessionModel.checkingState,((e,t)=>(0,o.pipe)(e,ce.map((e=>({...e,isLoading:"idle"!==t}))))))),this.summary=this._sessionModel.textInfo.view((0,z.flow)(ce.chain((e=>e.messages)),ce.map((e=>e.assistantHeader)),ce.getOrElse((()=>"Looking good so far")),(e=>({content:e})))),this.logoScore=(0,ve.aj)([this._cardsListScrollManager.scrollTop,this._layoutVM.activeView,this.score]).pipe(g.U((([e,t,i])=>(0,o.pipe)(i,ce.fold((()=>({type:"logo"})),(i=>e<66||t.type!==nt.a.Type.default?{type:"logo"}:{type:"score",score:i}))))),Je.x(ut.equals)),this.visibility=this._layoutVM.activeView.view((e=>e.type===nt.a.Type.default?"visible":"hidden")),this.lensSwitchFlow=Xe.Z.fromSideEffect((e=>{switch(e.action.action){case _t.n.Actions.switchToAll:this._lensChanged.next({lensId:Ue.R.SpecialId.AllAlerts,focusFirstCard:!0}),this._gnar.assistantPriorityDropdownClick("all");break;case _t.n.Actions.switchToPriority:this._lensChanged.next({lensId:Ue.R.SpecialId.Priority,focusFirstCard:!0}),this._gnar.assistantPriorityDropdownClick("priority");break;case _t.n.Actions.openSetGoals:break;default:(0,wt.vE)(e.action.action)}}),ve.aj(this._currentLensId.pipe(w.h((e=>e!==Ue.R.SpecialId.Premium)),g.U((e=>e===Ue.R.SpecialId.Priority?"priority":"all")),Je.x()),this._lensPreviewVM.getLens(Ue.R.SpecialId.AllAlerts).pipe(be.j("count"),Je.x()),this._lensPreviewVM.getLens(Ue.R.SpecialId.Priority).pipe(be.j("count"),Je.x()),this._predictionsVM.previewState,((e,t,i,s)=>(0,o.pipe)({allAlertsCount:t,priorityAlertsCount:i,selectedLens:e},ce.fromPredicate((()=>s.kind!==I.hidden)))))),this._subs=new Qe.w.Keeper,this._trackHeaderMessageChanges(),this._trackToShowActionButtons()}open(e){switch(e){case"setGoals":this._subs.push(this._modalManager.show(vt.Iy.setGoals("user")).subscribe());break;default:(0,wt.vE)(e)}}_trackHeaderMessageChanges(){const e=this.summary.pipe(_.G()).subscribe((([e,t])=>{var i,s;this._gnar.assistantHeaderMessageUpdate(e.content,t.content,null===(i=(0,o.pipe)(this._sessionModel.textInfo.get(),ce.toUndefined))||void 0===i?void 0:i.wordsCount,null===(s=(0,o.pipe)(this._sessionModel.score.get(),oe.Fc))||void 0===s?void 0:s.rank)}));this._subs.push(e)}_trackToShowActionButtons(){const e=(0,ve.aj)([this._layoutVM.activeView,this._user]).subscribe((([e,t])=>{t.isAnonymous||e.type===nt.a.Type.popup?(this.showSetGoalsActionButton.set(!1),this.showSettingsActionButton.set(!1)):(this.showSetGoalsActionButton.set(!0),this.showSettingsActionButton.set(!0))}));this._subs.push(e)}dispose(){this._subs.dispose()}}!function(e){e.importance="importance",e.kindOfFeedback="kindOfFeedback",e.thankYou="thankYou"}(gt||(gt={}));class Et{constructor(e,t,i){this._closeAssistant=e,this._gnar=t,this._bgActions=i,this.hideBackButton=P.hg.create(!0),this.step=P.hg.create(gt.importance),this._onCompleteAllQuestions=()=>{this.step.set(gt.thankYou),this._bgActions.hideImportanceSurvey()},this.done=()=>{this._closeAssistant()},this.dismiss=()=>{this._closeAssistant(),this._bgActions.dismissImportanceSurvey()},this.submit=e=>{const t=this.step.get();switch(this._gnar.importanceSurveySubmitButtonClick(e,t),t){case gt.importance:"extremelyImportant"===e[0]||"somewhatImportant"===e[0]?this.step.set(gt.kindOfFeedback):this._onCompleteAllQuestions();break;case gt.kindOfFeedback:default:this._onCompleteAllQuestions()}}}}var bt=i(63919);const Ct=e=>{const t=e.initialPositionOffset.get();return{initialPositionOffset:t,onDrag:i=>{e.updateInitialPositionOffset(bt.E9.plus(t,function({x:e,y:t}){return bt.E9.create({top:t,left:e})}(i.translate)))}}};class kt{constructor(e,t,i,s,a,r,n){this._lensPreviewVM=e,this._layoutVM=t,this._readersAttentionVM=i,this._emogenieService=s,this._session=a,this._readersAttentionPredictionCardState=r,this._gnar=n,this._subs=new Qe.w.Keeper,this.previewState=P.hg.create({kind:I.hidden}),this.previewFlow=Xe.Z.fromSideEffect((e=>{switch(e.action.key){case"tone":const t=this._emogenieService.viewState.view("prevalentEmotion").get();return t&&this._gnar.emogeniePredictionButtonClick(t.name),this._layoutVM.pushActiveView({type:nt.a.Type.emogenie});case"readersAttention":return this._readersAttentionVM.open({type:nt.a.ReadersAttention.Caller.Type.predictionWidget});default:(0,wt.vE)(e.action)}}),this.previewState),this._previewState=(0,o.pipe)(ve.aj([this._emogenieService.viewState.view((e=>ce.fromNullable(e.settings.hiddenReport?void 0:e.prevalentEmotion))),this._emogenieService.viewState.view("brandToneOffImageUrl"),this._readersAttentionPredictionCardState,this._session.documentLength,this._lensPreviewVM.getLens(Ue.R.SpecialId.PredictionEmogenie),this._lensPreviewVM.getLens(Ue.R.SpecialId.PredictionTakeaways)]),g.U((([e,t,i,s,a,r])=>(ce.isSome(e)||ce.isSome(i))&&s.trimmed>0?{kind:I.visible,tone:(0,o.pipe)(e,ce.map((e=>({emotion:e,alertsCount:a.count,brandToneOffImageUrl:t})))),readersAttention:(0,o.pipe)(i,ce.map((e=>({...e,alertsCount:r.count}))))}:s.trimmed>0?{kind:I.zero}:{kind:I.hidden}))),this._subs.push(this._previewState.subscribe(me.wW(this.previewState)))}dispose(){this._subs.dispose()}}var St=i(77843),At=i(72923);class Mt{constructor(e,t,i,s){this.feature=t,this._closeAssistant=i,this._gnar=s,this._subs=[],this._subs.push(this.feature.requestInfo.view("status").pipe((0,Je.x)(),(0,_.G)(),(0,u.M)(e.activeView)).subscribe((([[t,i],s])=>{t===At.u.RequestStatus.REVIEWING&&s.type===nt.a.Type.proofitReview&&e.popActiveView()}))),this._subs.push(this.feature.layoutCreated.pipe((0,u.M)(e.activeView)).subscribe((([t,i])=>{i.type!==nt.a.Type.proofitRequest&&i.type!==nt.a.Type.proofitReview||t||e.popActiveView()})))}onSubmitRequest(e){this.feature.submitRequest(),this._gnar.proofitRequestFormSubmit();const t=this.feature.requestInfo.lens("status").pipe((0,w.h)((e=>e===At.u.RequestStatus.ACCEPTED)));(0,St.F)(100).pipe((0,f.R)(t)).subscribe({complete:()=>this._closeAssistant(e)})}onCompleteRequest(e){this.feature.resetRequest(),this._gnar.proofitOrderDone(),this._closeAssistant(e)}dispose(){this._subs.forEach((e=>e.unsubscribe()))}}var xt,It=i(489);!function(e){let t;!function(e){e.eq=le.getStructEq({message:le.eqString,checked:le.eqBoolean})}(t=e.ChecklistItem||(e.ChecklistItem={}))}(xt||(xt={}));var Lt,Tt=i(14601);!function(e){e.eq=le.getStructEq({collapsed:le.eqBoolean,items:(0,It.getEq)(xt.ChecklistItem.eq)})}(Lt||(Lt={}));class Ft{constructor(e,t,i,s){this._readersAttentionFeature=e,this._assistantLayoutVM=t,this._onChecklistExpand=s,this._subs=new Tt.w,this._cardSelected=new $e.X(!1),this._height=P.hg.create(ce.none),this._items=(0,o.pipe)(this._readersAttentionFeature,ce.map((e=>e.attentionInfo)),ce.getOrElse((()=>P.hg.create(ce.none)))).view((0,z.flow)(ce.map((e=>e.checklist)),ce.getOrElse((()=>[])))),this._state=P.hg.create({items:this._items.get(),collapsed:this._cardSelected.value}),this.state=this._state.pipe(Je.x(((e,t)=>Lt.eq.equals(e,t)))),this.height=this._height.view(),this._subs.add(i.view((e=>ae.nL.hasItems(e)?ae.In.getActiveItem(e.currentLens):ce.none)).subscribe((e=>{this._cardSelected.next(ce.isSome(e))}))),this._subs.add(this._cardSelected.subscribe((e=>this._state.lens("collapsed").set(e)))),this._subs.add(this._items.subscribe((e=>this._state.lens("items").set(e)))),this._subs.add(this._assistantLayoutVM.activeView.subscribe((e=>{e.type===nt.a.Type.readersAttention&&this._height.set(ce.none)})))}expand(){this._state.lens("collapsed").set(!1),this._onChecklistExpand()}changeHeight(e){this._height.set(ce.some(e))}dispose(){this._subs.unsubscribe()}}class Rt{constructor(e){this._readersAttentionFeature=e,this.message=(0,o.pipe)(this._readersAttentionFeature,ce.map((e=>e.attentionInfo)),ce.getOrElse((()=>P.hg.create(ce.none)))).view((0,z.flow)(ce.map((e=>e.headerMessage)),ce.getOrElse((()=>""))))}}function Vt(e){return nt.a.isReadersAttention(e)||nt.a.isReadersAttentionHelp(e)}function Pt(e){return Vt(e)||nt.a.isReadersAttentionOnboarding(e)}class Ot{constructor(e,t,i){this._readersAttentionFeature=e,this._assistantLayoutVM=t,this._alertsCollection=i,this._subs=new Tt.w,this._viewCaller=ce.none,this._subs.add(this._assistantLayoutVM.activeView.pipe(Je.x(((e,t)=>e.type===t.type)),m.O(null),_.G()).subscribe((([e,t])=>{(0,o.pipe)(this._readersAttentionFeature,oe.bw((e=>{Pt(t)&&!e.heatmapVisible.get()?e.heatmapVisible.set(!0):!Pt(t)&&e.heatmapVisible.get()&&e.heatmapVisible.set(!1)}))),!nt.a.isReadersAttention(t)||e&&nt.a.isReadersAttentionHelp(e)?!Vt(t)&&e&&Vt(e)&&this._trackOnReadersAttentionHide():this._trackOnReadersAttentionShow(t.caller)})))}open(e){(0,o.pipe)(this._readersAttentionFeature,oe.bw((t=>{this._viewCaller=ce.some(e),t.seenReadersAttentionOnboarding?this._assistantLayoutVM.pushActiveView({type:nt.a.Type.readersAttention,caller:e}):(this._assistantLayoutVM.pushActiveView({type:nt.a.Type.readersAttentionOnboarding,caller:e}),this._trackOnOnboardingShow(e))})))}getStarted(){(0,o.pipe)(this._readersAttentionFeature,oe.bw((e=>{e.markReadersAttentionOnboardingAsSeen()})));const e=(0,o.pipe)(this._viewCaller,ce.getOrElse((()=>({type:nt.a.ReadersAttention.Caller.Type.navigation}))));this._assistantLayoutVM.replaceActiveView({type:nt.a.Type.readersAttention,caller:e}),this._trackOnGetStarted(e)}showHelp(e){this._assistantLayoutVM.pushActiveView({type:nt.a.Type.readersAttentionHelp,caller:e}),this._trackOnShowHelp(e)}dispose(){Pt(this._assistantLayoutVM.activeView.get())&&(0,o.pipe)(this._readersAttentionFeature,oe.bw((e=>e.heatmapVisible.set(!1)))),Vt(this._assistantLayoutVM.activeView.get())&&this._trackOnReadersAttentionHide(),this._subs.unsubscribe()}_trackOnReadersAttentionShow(e){(0,o.pipe)(this._readersAttentionFeature,ce.chain((e=>(0,o.pipe)(e.attentionInfo.get(),ce.map((t=>({feature:e,info:t})))))),oe.bw((({feature:t,info:i})=>{t.tracking.onOpen(i.checklist,i.predictionMessage,this._getNumAlerts(),e)})))}_trackOnReadersAttentionHide(){(0,o.pipe)(this._readersAttentionFeature,ce.chain((e=>(0,o.pipe)(e.attentionInfo.get(),ce.map((t=>({feature:e,info:t})))))),oe.bw((({feature:e,info:t})=>{e.tracking.onClose(t.checklist,this._getNumAlerts())})))}_trackOnOnboardingShow(e){(0,o.pipe)(this._readersAttentionFeature,ce.chain((e=>(0,o.pipe)(e.attentionInfo.get(),ce.map((t=>({feature:e,info:t})))))),oe.bw((({feature:t,info:i})=>{t.tracking.onOnboardingShow(i.predictionMessage,e)})))}_trackOnGetStarted(e){(0,o.pipe)(this._readersAttentionFeature,ce.chain((e=>(0,o.pipe)(e.attentionInfo.get(),ce.map((t=>({feature:e,info:t})))))),oe.bw((({feature:t,info:i})=>{t.tracking.onOnboardingGetStartedClick(i.predictionMessage,e)})))}_trackOnShowHelp(e){(0,o.pipe)(this._readersAttentionFeature,oe.bw((t=>{t.tracking.onHelpScreenShow(e)})))}_getNumAlerts(){return(0,o.pipe)(this._alertsCollection.get(),qe.p.reduce({takeaway:0,nonTakeaway:0},((e,t)=>{const i=Be.bZ.isTakeaway(t.alert),s=Be.bZ.belongsToPredictionTakeaways(t.alert)&&!i;return{takeaway:e.takeaway+(i?1:0),nonTakeaway:e.nonTakeaway+(s?1:0)}})))}}var Ht=i(38040);class Nt{constructor(e,t,i){this._contentScriptState=e,this._contentScriptActions=t,this.domain=i,this.state=this._contentScriptState.view((e=>({user:e.user,commonSettings:e.page}))),this.actions={toggleSite:(e,t)=>this._contentScriptActions.toggleSite(e,t,(0,Ht.IJ)(this.state.view("user").get())),toggleDefs:this._contentScriptActions.toggleDefs,toggleAutocomplete:this._contentScriptActions.toggleAutocomplete,toggleAutocorrect:this._contentScriptActions.toggleAutocorrect,toggleHotkeys:this._contentScriptActions.toggleHotkeys,changeStrongDialect:this._contentScriptActions.changeStrongDialect,disableLlama:this._contentScriptActions.disableLlama}}}var Ut=i(53073),Bt=i(59443),Dt=i(91224),qt=i(38194),Zt=i(83401),Gt=i(598),Wt=i(45429),zt=i(36473);class jt{constructor(e,t){this._cardPositions=e,this._markPositions=t,this._log=y.Y.create(jt.name)}alignCardToMark({id:e,renderOptions:{features:t},activeAlert:i,activeHighlightIndex:s},a){return we.P((()=>d.of(this._markPositions.getMarkAlertPosition({alert:i,highlightIndex:s})))).pipe(ue.oA,g.U((i=>(0,o.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(zt.j.Features.showLabel),ce.some(i),"cardContentTop"),ce.fromEither))),ue.oA,h.w((i=>this._cardPositions.setCardPosition(e,t.has(zt.j.Features.showLabel),!0,i.top))),Ce.h(me.PU),Dt.K((e=>(this._log.error("Cannot align card to mark",e),ye.E))),qt.B())}alignMarkTo(e,t,i,s){return we.P((()=>d.of((0,o.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e.id,e.renderOptions.features.has(zt.j.Features.showLabel),ce.some(i),"cardContentTop"),ce.fromEither)).pipe(ue.oA))).pipe(h.w((i=>_e.T(this._markPositions.moveAlertHighlightInViewport(t,Ae.r.FromWindowTop.ISO.modify(Ae.L.concatC(i.contentOffset))(i.top),Bt.uq.initial),this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(zt.j.Features.showLabel),!0,i.top)))),Ce.h(me.PU),Dt.K((e=>(this._log.error("Cannot align mark to suggested position",e),ye.E))),qt.B())}alignMarkToCard({id:e,renderOptions:{features:t},activeHighlightIndex:i,activeAlert:s},a,r=ce.none){return we.P((()=>d.of((0,o.pipe)(this._cardPositions.getCardSuggestedPositionInViewport(e,t.has(zt.j.Features.showLabel),r,"cardContentTop"),ce.fromEither)).pipe(ue.oA))).pipe(h.w((a=>_e.T(this._markPositions.moveAlertHighlightInViewport({alert:s,highlightIndex:i},Ae.r.FromWindowTop.ISO.modify(Ae.L.concatC(a.contentOffset))(a.top),Bt.uq.initial),this._cardPositions.setCardPosition(e,t.has(zt.j.Features.showLabel),!0,a.top)))),Ce.h(me.PU),Dt.K((e=>(this._log.error("Cannot align mark to card",e),ye.E))),qt.B())}alignCardTo(e,t,i){const s=i!==Wt.DV.NO_ANIMATION;return we.P((()=>d.of((0,o.pipe)(this._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(zt.j.Features.showLabel),ce.some(t),"cardTop"),ce.fromEither)).pipe(ue.oA))).pipe(h.w((t=>this._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(zt.j.Features.showLabel),s,t.top))),Ce.h(me.PU),Dt.K((e=>(this._log.error("Cannot align card to required top",e),ye.E))),qt.B())}}var Xt;!function(e){e.skip="skip"}(Xt||(Xt={}));const Yt=(e,t,i,s,a=me.b2.rafScheduler)=>{const r=(e,i,s,a)=>{if(s===Be.l$.text)return t.alignCardToMark(e,i?Wt.DV.ANIMATE_ALL:Wt.DV.NO_ANIMATION,!0);if(s===ae.h8.forceText)return t.alignCardToMark(e,Wt.DV.NO_ANIMATION,!1);{const r=s===Be.l$.sidebar;return t.alignMarkToCard(e,r?i?Wt.DV.ANIMATE_ALL:Wt.DV.ANIMATE_MARK:Wt.DV.NO_ANIMATION,a)}},n=_e.T(e.view(ae.nL.mapper((({currentLens:e,alertSource:t})=>ce.some({currentLens:e,alertSource:t})))).pipe(m.O(ce.none),g.U(ce.map((e=>e.currentLens.id))),_.G(),w.h((([e,t])=>(0,o.pipe)(oe.vB(((e,t)=>e!==t))(e,t),ce.exists(z.identity)))),Ce.h(ce.none)),e.view(ae.nL.mapper((({currentLens:e,alertSource:t})=>ce.some({currentLens:e,alertSource:t})))).pipe(w.h(ce.exists((({currentLens:e})=>(0,Me.Bk)(e)))),g.U(ce.chain((({currentLens:e,alertSource:t})=>(0,o.pipe)(s(e),ce.filter(Me.S4),ce.map((i=>({card:i,source:t,lensId:e.id}))))))))).pipe(Je.x((0,z.flow)(oe.vB(((e,t)=>e.lensId===t.lensId&&e.card.activeAlert.id===t.card.activeAlert.id&&e.card.visualState.transition.type===t.card.visualState.transition.type&&e.card.activeHighlightIndex===t.card.activeHighlightIndex)),ce.exists(z.identity))),m.O(ce.none),_.G(),g.U((([e,t])=>(0,o.pipe)(t,ce.map((i=>({card:i.card,source:i.source,animate:(0,o.pipe)(e,oe.wo((({lensId:e})=>e===i.lensId))),suggestedPosition:(0,o.pipe)(e,ce.filter((e=>!e.card.scheduledToDispose)),ce.chain((e=>(0,o.pipe)(t,ce.map((t=>[e.card,t.card]))))),ce.filter((([e,t])=>t.lensId===e.lensId&&t.positionState.absTop>e.positionState.absTop)),ce.map((([e,t])=>Ae.r.FromWindowTop.ISO.wrap(t.positionState.absTop))))})))))),h.w(ce.fold((()=>ye.E),a)),u.M(i),h.w((([{card:e,source:t,animate:s,suggestedPosition:a},n])=>(0,o.pipe)(n,ce.fold((()=>r(e,s,t,a)),(t=>(i.set(ce.none),t===Xt.skip?Zt.C:r(e,s,t,a))))))));return{id:"alignmentSideEffect",when:Ue.R.isWithAlertsId,what:ae.nL.Effect.Applicator.create(n.pipe(Gt.c(Zt.C)))}};var Kt=i(91402),Qt=i(66910),$t=i(26268);function Jt(e,t,i,s,a){return{id:"changeAlertEffect",when:Ue.R.isWithAlertsId,what:ae.nL.Effect.SwitchAlert.create(e.actionEvents.pipe(h.w((e=>{const r=t.get();if(!ae.nL.hasCards(r))return Kt._(new wt.ej("Cannot update state without cards"));switch(e.type){case Qt.l.Type.alertMinicardButtonClick:return(0,o.pipe)(i.getRegistered(e.alertHighlight.alert.id),ce.fold((()=>(a.warn("somehow we got click on non registered alert",e.alertHighlight.alert),ye.E)),(()=>d.of(e.alertHighlight))));case Qt.l.Type.cardMatchesNavigationButtonClick:const t=e.transitionTo;switch(t.kind){case"anotherAlert":return(0,o.pipe)("right"===e.direction?s.nextAlert(t.card):(0,o.pipe)(s.prevAlert(t.card),oe.vx(s.anyRegisteredAlert(t.card))),ce.fold((()=>ye.E),(e=>d.of({alert:e,highlightIndex:0}))));case"sameAlert":return(0,o.pipe)(i.getRegistered(t.card.activeAlert.id),ce.fold((()=>ye.E),(()=>d.of({alert:t.card.activeAlert,highlightIndex:t.highlightIndex}))));default:return(0,wt.vE)(t)}default:return ye.E}})),g.U((e=>({alertHighlight:e,alertSource:Be.l$.sidebar,options:{order:"lensOrder"}})))))}}function ei(e,t,i){const s=e.pipe(w.h(ae.nL.hasCards),tt.b(0),g.U((e=>e)),w.h((e=>e.currentLens.items.size>0&&ce.isNone(ae.In.getActiveItem(e.currentLens))&&i.get())),g.U((e=>(0,o.pipe)(e.currentLens.items.getAt(0),ce.chain(W.checksFeedItemsMapper((e=>ce.some(e.activeAlert)),(()=>ce.none),(()=>ce.none),(()=>ce.none))),oe.bw((()=>t.set(ce.some(Xt.skip))))))),ue.oA,w.h((e=>e.state.type===Be.bZ.State.Type.REGISTERED)),Je.x());return{id:"focusFirstCardSideEffect",when:e=>e!==Ue.R.SpecialId.PredictionTakeaways&&e!==Ue.R.SpecialId.PredictionEmogenie,what:ae.nL.Effect.SwitchLens.create(s.pipe(u.M(e),g.U((([e,t])=>({lensId:t.currentLens.id,alertSource:Be.l$.text,options:{order:"lensOrder",toFocus:ae.nL.Effect.FocusBehavior.focusAlert({alert:e,highlightIndex:0})}})))))}}function ti(e,t,i){const s=e.pipe(g.U((e=>s=>e.type===$t.tn.Type.AppliedAlertAnimationFinished&&s.currentLens.meta.filter(e.alert)&&ae.nL.hasItems(s)?s.patch({currentLens:(0,o.pipe)(Ge.tryCatch((()=>Be.bZ.isApplicableAlert(e.alert)?t.finishApplyAnimation([e.alert])(s.currentLens):s.currentLens),(e=>i.error("could not update lens state on applied animation finish",e))),Ge.getOrElse((()=>s.currentLens))),alertSource:e.alert.state.source}):s)));return{id:"onAlertApply",when:z.constTrue,what:ae.nL.Effect.Applicator.create(s)}}function ii(e,t){return{id:"lensChangeEffect",when:z.constTrue,what:ae.nL.Effect.SwitchLens.create(e.pipe(u.M(t),w.h((([e,t])=>e.lensId!==t)),g.U((([e])=>({lensId:e.lensId,alertSource:Be.l$.sidebar,options:{order:"lensOrder",toFocus:e.focusFirstCard?ae.nL.Effect.FocusBehavior.focusFirst:ae.nL.Effect.FocusBehavior.noFocus}})))))}}const si=(e,t)=>{const i=(0,o.pipe)(e,g.U(ae.nL.mapper((({currentLens:e,alertSource:t})=>ce.some({currentLens:e,alertSource:t})))),ai,h.w(me.b2.rafScheduler),v.b((e=>t.moveCardsBy(e,"freezeActiveCardOnCardsListUpdate"))));return{id:"freezeActiveCardOnCardsListUpdate",when:Ue.R.isWithAlertsId,what:ae.nL.Effect.Applicator.create(_e.T(_e.T(i).pipe(Gt.c(Zt.C))))}},ai=e=>e.pipe(Me.Sd,g.U(ce.map((e=>e.currentLens))),_.G(),w.h((([e,t])=>(0,o.pipe)((0,z.tuple)(e,t),(0,z.tupled)(oe.vB(((e,t)=>e.id===t.id&&(0,o.pipe)((0,z.tuple)(ae.In.getActiveItem(e),e.cardIndex,ae.In.getActiveItem(t),t.cardIndex),(0,z.tupled)((0,ft.gz)(ce.option)),ce.map((([e,t,i,s])=>e.id===i.id&&t!==s)),ce.getOrElse((()=>!1)))))),ce.getOrElse((()=>!1))))),g.U((0,z.flow)(Ut.bimap(ce.chain(ae.In.getActiveItem),ce.chain(ae.In.getActiveItem)),(0,z.tupled)(oe.vB(((e,t)=>t.positionState.absTop-e.positionState.absTop))),ce.getOrElse((()=>0)))));var ri=i(77394),ni=i(55935);function oi(e,t){return{id:"alertSwitchingByClickSideEffect",when:z.constTrue,what:ae.nL.Effect.SwitchAlert.create(e.alertClicked.pipe(ni.T(1),h.w(ce.fold((()=>ye.E),d.of)),u.M(t.pipe(w.h(ae.nL.hasCards),g.U((e=>e.currentLens.id))),((e,t)=>({...e,lensId:t}))),g.U((({alert:e,highlightIndex:t,lensId:i})=>({alertHighlight:{alert:e,highlightIndex:t},alertSource:Be.l$.text,options:{lensId:i,order:"textOrder"}})))))}}var li=i(93283),ci=i(79932),di=i(58199),pi=i(65247),hi=i(64510);class mi{constructor(e,t){this._lensesList=e,this._alertsFilterService=t,this.getLens=(0,ne.HP)((function(e){switch(e){case Ue.R.SpecialId.AllAlerts:return this._lensesList.view(ui(Ue.R.Info.allAlerts,Ue.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(Ue.R.SpecialId.AllAlerts)));case Ue.R.SpecialId.Priority:return this._lensesList.view(ui(Ue.R.Info.priority,Ue.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(Ue.R.SpecialId.Priority)));case Ue.R.SpecialId.PredictionTakeaways:return this._lensesList.view(ui(Ue.R.Info.predictionTakeaways,Ue.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(Ue.R.SpecialId.PredictionTakeaways)));case Ue.R.SpecialId.PredictionEmogenie:return this._lensesList.view(ui(Ue.R.Info.predictionEmogenie,Ue.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(Ue.R.SpecialId.PredictionEmogenie)));case Ue.R.SpecialId.RealTimeProofit:return this._lensesList.view(ui(Ue.R.Info.realTimeProofit,Ue.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(Ue.R.SpecialId.RealTimeProofit)));case Ue.R.SpecialId.Plagiarism:return this._lensesList.view(this._getPlagiarismLens);case Ue.R.SpecialId.Premium:return this._lensesList.view(ui(Ue.R.Info.premium,Ue.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(Ue.R.SpecialId.Premium)));case Ue.R.SpecialId.Correctness:case Ue.R.SpecialId.Clarity:case Ue.R.SpecialId.Engagement:case Ue.R.SpecialId.Delivery:case Ue.R.SpecialId.Vox:case Ue.R.SpecialId.CorrectnessPriority:case Ue.R.SpecialId.ClarityPriority:case Ue.R.SpecialId.EngagementPriority:case Ue.R.SpecialId.DeliveryPriority:case Ue.R.SpecialId.VoxPriority:return this._lensesList.view(ui(Ue.R.Info.createOutcome(e),Ue.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));case Ue.R.SpecialId.RealTimeProofit:return this._lensesList.view(ui(Ue.R.Info.realTimeProofit,Ue.R.Meta.group.empty,this._alertsFilterService.getLensesFilter(e)));default:return(0,wt.vE)(e)}})),this._outcomes=[Ue.R.SpecialId.Correctness,Ue.R.SpecialId.Clarity,Ue.R.SpecialId.Engagement,Ue.R.SpecialId.Delivery],this._previews=(0,ne.HP)((()=>li.fromFoldableMap((0,ci.getFirstSemigroup)(),It.array)(this._outcomes,(e=>[e,this._getPreview(e)])))),this._isDocumentEmpty=P.hg.create(!1),this._isFree=P.hg.create(!1),this._outcomeStatusMask=P.hg.combine(this._isDocumentEmpty,this._isFree,((e,t)=>{let i=0;return e&&(i|=pi.x.IsDocumentEmpty),t&&(i|=pi.x.IsFreeUser),i})),this._getPlagiarismLens=(0,z.flow)(ui(Ue.R.Info.plagiarism,{...Ue.R.Meta.group.empty,percentile:di.T.MAX},this._alertsFilterService.getLensesFilter(Ue.R.SpecialId.Plagiarism)),Ue.R.WithAlerts.modifyMeta((e=>({...e,percentile:di.T.groupSum.concat(di.T.MAX,di.T.groupSum.inverse(e.percentile))}))))}findLens(e){return(0,o.pipe)(ce.fromNullable([this.getLens(Ue.R.SpecialId.AllAlerts),this.getLens(Ue.R.SpecialId.Premium)].find((t=>e(t.get())))),ce.map((e=>e.get().id)))}_getPreview(e){return{...Ue.R.Info.base,logo:ce.none,...this._getOutcomeButtonData(e)}}get lensPreviews(){return this._previews()}_getOutcomeButtonData(e){const t=this.getLens(e),i=t.get().title,s=this._isFree.view((t=>t&&(e===Ue.R.SpecialId.Engagement||e===Ue.R.SpecialId.Delivery))),a=P.hg.combine(t.view("count").view((e=>0===e)),s,((e,t)=>e&&!t)),{description:r,stateMessage:n}=(0,pi.O)(e),o=P.hg.combine(this._isDocumentEmpty,a,t.view("percentile"),((e,t,i)=>e?di.T.MIN:t?di.T.MAX:i)).view(di.g.fromRatio),l=P.hg.create(!1),c=P.hg.combine(t,o,this._outcomeStatusMask,l,n);return{id:e,title:i,description:r,status:c,progress:o,isUnavailable:s}}get nonEmptyLensId(){return(0,o.pipe)(ce.fromNullable([this.getLens(Ue.R.SpecialId.AllAlerts),this.getLens(Ue.R.SpecialId.Premium)].find((e=>e.get().count>0))),ce.map((e=>e.get().id)))}}function ui(e,t,i){return s=>{return new Ue.R.LensImpl(e,(a=e.id,r=t,e=>(0,o.pipe)(hi.lookup(Ue.R.Id.ord)(a,e),ce.getOrElse((()=>r))))(s),i);var a,r}}var gi,fi,vi=i(95572),_i=i(95384),wi=i(41120),yi=i(95722),Ei=i(20892),bi=i(41199),Ci=i(92843),ki=i(55415);!function(e){e.create=(e,t,i,s)=>(a,r)=>_i.sO.Change.getCreateAction({range:a,capiAlertId:e,visualState:r.to.visualState===yi.Bd.highlighted?{type:_i.sO.Change.VisualState.Type.highlighted,source:t()}:{type:_i.sO.Change.VisualState.Type.visible},extensionDisplayType:i,order:s}),e.update=(e,t,i,s)=>(a,r)=>_i.sO.Change.getUpdateAction({range:a,capiAlertId:e,visualState:r.to.visualState===yi.Bd.highlighted?{type:_i.sO.Change.VisualState.Type.highlighted,source:t()}:{type:_i.sO.Change.VisualState.Type.visible},extensionDisplayType:i,order:s}),e.remove=e=>t=>_i.sO.Change.getRemoveAction({range:t,capiAlertId:e})}(gi||(gi={}));class Si{constructor(e,t,i,s,a,r,n,l,p=d.of(void 0),h=!1){this._alertList=e,this._alertsReader=t,this._positionManager=i,this._alertsService=s,this._ded=a,this._lensState=r,this._alertsFilterService=n,this._getActiveItemWithAlert=l,this._readyObs=p,this._emulateAppliedAlertAnimation=h,this._highlightedAlert=ce.none,this._focusedAlert=ce.none,this._marksMap=new Map,this._subs=new Qe.w.Keeper,this.events=new c.xQ,this._alertStateDiff=this._alertList.state.pipe(_.G(),g.U((([e,t])=>qe.p.diff(e,t))),w.h((0,ne.ff)(Ci.v.isEmpty))),this._alertsFilter=P.hg.create(z.constFalse),this._filteredAlerts=P.hg.create(ce.none),this._ready=!1,this._log=Le.C8.Logging.getLogger("marks_view_model"),this.getMarkByAlert=e=>(0,o.pipe)(this._marksMap.get(e.alert.id),ce.fromNullable,ce.chain((t=>t.markByIndex(e.highlightIndex)))),this.getAlertByMark=e=>(0,o.pipe)(this._alertsReader.getRegistered(wi.P.fromRangeIdToAlertId(e.id)),ce.chain((t=>(0,o.pipe)($t.$A.getHighlightIndex(t,e.range()),Ge.map((e=>({alert:bi.$.fromModel(t),highlightIndex:e}))),ce.fromEither)))),this.ensureAlertHighlightInViewport=(e,t,i)=>(0,o.pipe)(this.getMarkByAlert(e),ce.fold((()=>ye.E),(e=>this._ded.scrollToMark(e,{animate:i,paddingTop:t})))),this._createMA=e=>{const t=oe.MH(e.rawId),{impact:i,cardLayout:{outcome:s}}=e.toRawAlert(),a=vi.DD.createOutcomeType(s),r="critical"===i?vi.Hg.critical:vi.Hg.advanced,n=vi.DD.createExtensionType(r,a),l=Ue.R.getSortOrder(e.lensType),c=new Ei.v((t=>(0,o.pipe)(this._alertsReader.getById(e.id),ce.alt((()=>(t&&this._log.warn("Could not find alert for provided MarkAlert",{alert:e,source:t}),ce.some(e)))),ce.map(bi.$.fromModel),oe.MH)),this._alertsService,this._alertsService,(e=>this._ded.changeMarks(e)),gi.create(t,(()=>_i.sO.Change.VisualState.Source.api),n,l),gi.update(t,(()=>fi.getAlertSource(e,this._lensState.get(),this._getActiveItemWithAlert)),n,l),gi.remove(t),(t=>{t.to.visualState===yi.Bd.applied&&(this.events.next({type:$t.tn.Type.AppliedAlertAnimationFinished,alert:e}),this._handleRemovedAlerts([e]).forEach((e=>e.apply())))}));return this._marksMap.set(e.id,c),c},this._handleRemovedAlerts=e=>e.map((({id:e})=>{const t=this._marksMap.get(e);return this._marksMap.delete(e),t.scheduleApply(yi.Bd.disposed),t})),this._handleAlertUpdate=e=>e.map((e=>Be.bZ.isRegistered(e)?(0,o.pipe)(ce.fromNullable(this._marksMap.get(e.id)),ce.fold((()=>this._alertsFilter.get()(e)?this._createMA(e):null),(e=>(e.scheduleUpdate(),yi.Oe.isOrWillBe(yi.Bd.success)(e)&&e.scheduleApply(yi.Bd.highlighted),e)))):(0,o.pipe)(ce.fromNullable(this._marksMap.get(e.id)),ce.fold((()=>{}),(t=>(e.allowUpdate&&Be.bZ.isCapiDone(e)&&Be.bZ.isRated(e)&&yi.Oe.isOrWillBe(yi.Bd.highlighted)(t)?(t.scheduleUpdate(),t.scheduleApply(yi.Bd.success)):(t.scheduleApply(yi.Bd.disposed),this._marksMap.delete(t.alert.id)),t)))))).filter((e=>Boolean(e))),this._subs.push(this._readyObs.subscribe((()=>{this._subs.push(this._listenAlertsUpdates(),this._listenRangesUpdates(),this._listenFilterChange(),this._listenFilteredAlerts()),this._ready=!0})))}focusAlertHighlight(e){return this._ready?(0,o.pipe)(this._marksMap.get(e.alert.id),ce.fromNullable,ce.map((t=>{this._focusedAlert=ce.some(e.alert.id),t.scheduleApply(yi.Bd.highlighted),t.scheduleForceUpdate(),t.apply()})),Ge.fromOption((()=>new Error("Unknown alert"))),Ge.map((()=>({dispose:()=>{ce.exists((t=>t===e.alert.id))(this._focusedAlert)&&(this._highlightedAlert=ce.none),(0,o.pipe)(this._marksMap.get(e.alert.id),ce.fromNullable,ce.filter((()=>!(0,o.pipe)(this._highlightedAlert,ce.exists((t=>t===e.alert.id))))),ce.map((e=>{e.scheduleApply(yi.Bd.visible),e.apply()})))}})))):Ge.left(new Error("marks view model is not ready yet"))}highlightAlertHighlight(e){return this._ready?(0,o.pipe)(this._marksMap.get(e.id),ce.fromNullable,ce.map((t=>{this._highlightedAlert=ce.some(e.id),t.scheduleApply(yi.Bd.highlighted),t.apply()})),Ge.fromOption((()=>new Error("Unknwn alert"))),Ge.map((()=>({dispose:()=>{ce.exists((t=>t===e.id))(this._highlightedAlert)&&(this._highlightedAlert=ce.none),(0,o.pipe)(this._marksMap.get(e.id),ce.fromNullable,ce.filter((()=>!(0,o.pipe)(this._focusedAlert,ce.exists((t=>t===e.id))))),ce.map((e=>{e.scheduleApply(yi.Bd.visible),e.apply()})))}})))):Ge.left(new Error("marks view model is not ready yet"))}moveCursorToHighlight(e,t){return this._ready?(0,o.pipe)(this._marksMap.get(e.alert.id),ce.fromNullable,ce.chain((t=>t.markByIndex(e.highlightIndex))),ce.chain((e=>ce.fromEither(e.range()))),ce.fold((()=>Ge.left(new Error("Cannot find mark for given range"))),(e=>{const{index:i,length:s}=this._ded.getCursor();if(0===s&&(i<e.start||i>e.end)){const i=Math.min(e[t],this._ded.getLastPossibleCursorPosition());return(0,o.pipe)(this._ded.setCursor(i,0),Ge.orElse(Ge.left))}return Ge.right(void 0)}))):Ge.left(new Error("marks view model is not ready yet"))}dispose(){this._subs.dispose()}_listenAlertsUpdates(){const e=e=>({activeAlerts:[],updatedAlerts:[],removedAlerts:[],acceptedAlerts:[],hiddenMarkAlerts:[],...e});return _e.T(this._filteredAlerts.pipe(ue.cp((({visible:t,hidden:i})=>d.of(e({activeAlerts:ki.qo(t),removedAlerts:ki.qo(i)}))))),this._alertStateDiff.pipe(u.M(this._alertsFilter),g.U((([t,i])=>(0,o.pipe)(t,Ci.v.reduce(e({}),((e,t)=>(this._marksMap.has(t.alert.id)&&e.removedAlerts.push(t.alert),e)),((e,t,i)=>(Be.bZ.isAccepted(i.alert)?e.acceptedAlerts.push(i.alert):e.updatedAlerts.push(i.alert),e)),((e,t)=>(i(t.alert)&&e.activeAlerts.push(t.alert),e)))))))).pipe(g.U((({activeAlerts:e,removedAlerts:t,updatedAlerts:i,acceptedAlerts:s})=>{let a=[];return a=a.concat(e.filter((0,ne.W9)((0,ne.ff)(Be.bZ.isPremium),(e=>ce.isSome(e.rawId)))).map((e=>{const t=this._marksMap.get(e.id);return void 0!==t?(t.scheduleForceUpdate(),t):this._createMA(e)}))),this._emulateAppliedAlertAnimation&&setTimeout((()=>{s.forEach((e=>{this.events.next({type:$t.tn.Type.AppliedAlertAnimationFinished,alert:e})}))}),3*(0,pt.Xd)(20)),a=a.concat(this._handleRemovedAlerts(t.concat(s).filter((e=>this._marksMap.has(e.id))))),a=a.concat(this._handleAlertUpdate(i)),a}))).subscribe((e=>{if(e.length>0){const[t,...i]=e;t.applyWith(i)}}))}_listenRangesUpdates(){return this._positionManager.rangeChanged.pipe(be.j("changed"),g.U((e=>e.filter((e=>wi.P.is(e)&&wi.x.isVisible(e)&&this._marksMap.has(e.meta.alertId))))),w.h((e=>e.length>0))).subscribe((e=>{const t=Array.from(e.values()).filter((e=>ce.isSome(this._alertsReader.getById(e.meta.alertId)))).reduce(((e,t)=>((0,o.pipe)(this._alertsReader.getRegistered(t.meta.alertId),ce.chain((e=>ce.fromNullable(this._marksMap.get(e.id)))),ce.fold(ne.ZT,(t=>{t.scheduleForceUpdate(),e.push(t)}))),e)),[]);if(t.length>0){const[e,...i]=t;e.applyWith(i)}}))}_listenFilterChange(){return this._lensState.pipe(w.h((e=>e.currentLens.id!==Ue.R.SpecialId.Premium)),Je.x(((e,t)=>!(e.currentLens.id!==t.currentLens.id||re.v.State.isWithPriorityList(e)&&re.v.State.isWithPriorityList(t)&&re.v.Priority.isNonPriorityListOpened(e.currentLens)!==re.v.Priority.isNonPriorityListOpened(t.currentLens)))),Je.x(),g.U((e=>this._alertsFilterService.alertVisibleInText(e.currentLens.id,re.v.Priority.nonPriorityAlertsVisible(e))))).subscribe(me.wW(this._alertsFilter))}_listenFilteredAlerts(){return this._alertsFilter.pipe(u.M(this._alertList.state),g.U((([e,t])=>(0,o.pipe)(t,qe.p.reduce({visible:{},hidden:{}},((t,i)=>(e(i.alert)&&Be.bZ.isRegistered(i.alert)?t.visible[i.alert.id]=i.alert:t.hidden[i.alert.id]=i.alert,t))),(e=>ce.some(e)))))).subscribe(me.wW(this._filteredAlerts))}}!function(e){e.toSidebarFluidMarkSource=e=>{switch(e){case Be.l$.text:case ae.h8.forceText:return _i.sO.Change.VisualState.Source.text;case Be.l$.sidebar:case ae.h8.forceSidebar:return _i.sO.Change.VisualState.Source.sidebar;case Be.l$.api:return _i.sO.Change.VisualState.Source.api;default:return(0,wt.vE)(e)}},e.getAlertSource=(t,i,s)=>ae.nL.hasCards(i)?(0,o.pipe)(s(i.currentLens),ce.fold((()=>_i.sO.Change.VisualState.Source.api),(s=>s.activeAlert.id===t.id?e.toSidebarFluidMarkSource(i.alertSource):_i.sO.Change.VisualState.Source.api))):_i.sO.Change.VisualState.Source.api}(fi||(fi={}));var Ai=i(13444),Mi=i(48403),xi=i(95343),Ii=i(87325);class Li{constructor(e,t){this._documentModel=e,this._modalOperations=t,this.reportViewModel=ce.none,this.state=we.P((()=>me.GQ((()=>this._documentModel.calculateStats())))).pipe(it.a(this._documentModel.checkingState,((e,t)=>(0,o.pipe)(e,ce.filter((()=>"idle"===t))))),h.w(ce.fold((()=>d.of({type:Ii.g.State.Type.LOADING}).pipe(Ai.g(150))),Ge.fold((e=>(Le.C8.Logging.getLogger("editor.toolbar").error("Error on requesting document stats",e),this.onModalClose(),d.of({type:Ii.g.State.Type.ERROR}))),(e=>P.hg.combine(this._documentModel.score,this._documentModel.counters,this._documentModel.documentLength.view("trimmed"),((t,i,s)=>(0,o.pipe)(t,ce.fold((()=>({type:Ii.g.State.Type.SHORT_CONTENT})),(t=>({type:Ii.g.State.Type.READY,documentIsEmpty:0===s,score:t,counters:i,stats:e})))))))))),m.O({type:Ii.g.State.Type.EMPTY}),Mi._(1),xi.x()),this.onModalClose=()=>{this._modalOperations.onClose()}}}var Ti=i(57588),Fi=i(82578),Ri=i(17082),Vi=i(71831),Pi=i(51100),Oi=i(17128);class Hi{constructor(e,t,i,s){this._documentModel=e,this._upgradeViewModel=t,this._isPremiumUser=i,this._mutedCategoriesVM=s}load(e){switch(e.type){case vt.dC.SetGoals:return this._loadSetGoals(e.source);case vt.dC.Performance:return this._loadPerformance();case vt.dC.MutedAlerts:return this._loadMutedAlerts();default:return(0,wt.vE)(e)}}_loadSetGoals(e){return Promise.resolve((t=>{const i={demoMode:!1,isRedesign:!1,isFree:!this._isPremiumUser,defaultAudience:"knowledgeable"},s=Fi._.create(this._documentModel.context.get(),(0,o.pipe)(this._documentModel.defaultContext.get(),ce.fold((()=>Ti.R$.defaultContextFallback),z.identity)),i,!1),a=P.hg.combine(s.showSetGoalsLoader,s.localContext,((t,a)=>({blocks:s.blocks,context:a,showOnLoad:t,features:i,source:e}))),r=Xe.Z.fromSideEffect((e=>{switch(e.kind){case Pi.R.ActionsKind.open:break;case Pi.R.ActionsKind.upgrade:this._upgradeViewModel.openUpgradeUrl(Oe.Place.gdocsGoals);break;case Pi.R.ActionsKind.close:t.onClose(),this._documentModel.updateContext(e.context);break;case Pi.R.ActionsKind.reset:s.localContext.set(Ti.R$.unset);break;case Pi.R.ActionsKind.showOnLoadChanged:s.showSetGoalsLoader.set(e.value);break;default:(0,wt.vE)(e)}}),a);return{instance:{type:vt.dC.SetGoals,source:e},component:R.UI.mount(Pi.R.Modal,r)}}))}_loadPerformance(){return Promise.resolve((e=>{const t=new Li(this._documentModel,e),i=R.UI.Knot.make(Oi.q.ModalView,{downloadButton:R.UI.Node.empty}),s=Xe.Z.fromSideEffect((t=>{switch(t.action.kind){case Oi.q.ActionsKind.close:e.onClose();break;default:(0,wt.vE)(t.action.kind)}}),t.state.pipe(g.U((e=>({root:e})))));return{instance:{type:vt.dC.Performance},component:R.UI.mount(i,s)}}))}_loadMutedAlerts(){return Promise.resolve((e=>(0,o.pipe)(this._mutedCategoriesVM,ce.fold((()=>{throw new Error("Tried to load Muted Alerts Dialogue, but Muted Alerts Model was absent")}),(t=>{const i=R.UI.mount(Ri.B,(0,Vi.g)(t,e));return{instance:{type:vt.dC.MutedAlerts},component:i}})))))}}var Ni=i(44618),Ui=i(926),Bi=i(19787),Di=i(73343),qi=i(38264),Zi=i(24740),Gi=i(78264),Wi=i(50536),zi=i(41394),ji=i(10584),Xi=i(78792),Yi=i(20490),Ki=i(55969);const Qi=(e,t,i,s,a,r,n,l,p,h,u,f,v,_,y,E,b,C,k,S,A)=>{const M=Le.C8.Logging.getLogger("view_models"),x=P.hg.create(Ui.A.defaultState),I=Di.t.create(Di.t.defaultLensFilters,{...Di.t.defaultTextFilters,[Ue.R.SpecialId.Closed]:z.constFalse}),L=Ui.A.get(e.alertsList.state,e.alertsList.lensesScores,I).subscribe(me.wW(x)),T=new mi(x.view("lenses"),I),F=(0,Zi.$)((0,Ni.a)(t).getContents),R={features:new Set([Wi.IG.Features.showCardLabelInOutcomes]),cardLayoutDensityMode:zt.j.Density.minimal,shouldAnimateAlertApply:Wi.IG.Default.shouldAnimateAlertApply,upgradeDemoPremiumNotice:zt.Y.gray},V=(0,Wi.Ls)(F,e.alertsReader,R,(()=>d.of(ce.none)),ce.none,!1,(0,o.pipe)(r,ce.map((t=>t.takeawaysFeedbackService.getFeedbackReader(e.alertsReader))),ce.getOrElse((()=>Wi.Nf.mock)))),O=W.getCapabilities(V,e.alertsReader),H=new Yi.oq(e.alertsList.state,e.alertsReader,x.view("lenses"),e.positionManager,T,new Ki.ad(V,I,(e=>e.id===Ue.R.SpecialId.Priority),new Ki.gi(V,I,W.eq),W.eq),(0,Ki.kn)(V,(e=>e===Ue.R.SpecialId.Priority),(0,Ki.is)(V,O),O),O,I),N=new mt(a,_),U=i.get(),B=P.hg.create(H.emptyState(U).patch({alertSource:Be.l$.sidebar}));p.next({kind:ri.R.ChangeLens,selectedLens:U===Ue.R.SpecialId.Priority?"priority":"all"});const D=(0,Gi.u0)((()=>t.getCursor().index),H),q=new We(e.alertsList,T,3),Z=new vt.EQ(new Hi(e.sessionModel,q,E.get().isPremium,ce.none)),G=new qi.Xx({flush:()=>t.flushChanges()},new c.xQ,V,e.alertsService,(()=>Promise.resolve()),(()=>Promise.resolve()),ce.none,ce.none,ce.none,(()=>!1),W.getActiveItemWithAlert,O,B),X=new zi.o((()=>Ge.right(void 0))),Y=new Si(e.alertsList,e.alertsReader,e.positionManager,e.alertsService,t,B,I,W.getActiveItemWithAlert,h,!0),K=((e,t,i,s,a,r)=>new jt(Wt.eZ.getSuperScrollMapper(e,s,P.hg.create(16)),Wt.UC.getMapper(t,a,r)))(B,Y,P.hg.create(16),X,t,M),Q=new nt.D(v,_,C,k,A),$=new Et(b,_,v),J=new c.xQ,ee=B.pipe(g.U((e=>e.currentLens.id))),te=new Ot(r,Q,e.alertsList.state),ie=new kt(T,Q,te,s,e.sessionModel,function(e){return(0,o.pipe)(e,ce.map((e=>ve.aj([e.attentionInfo,e.heatmapReceived]).pipe(w.h((([e,t])=>ce.some(e)&&t)),g.U((([e,t])=>e)),g.U((0,z.flow)(ce.map((e=>({message:e.predictionMessage,easyToRead:e.checklist.every((e=>e.checked))}))))),m.O(ce.none)))),ce.getOrElse((()=>d.of(ce.none))))}(r),_),se=new yt(e.sessionModel,Q,ie,$,Z,T,ee,J,X,E,_,b),le=new rt(B,ie,q,O,_),de=new ot(Q,y,_),pe=(0,o.pipe)(l,ce.map((e=>new Mt(Q,e,b,_)))),he=new Bi.m(t,B,Y,e.alertsReader,W.getActiveItemWithAlert),ue=P.hg.create((0,o.pipe)(u,ce.fold((()=>Xt.skip),(()=>Be.l$.text)),ce.some)),ge=[oi(he,B),(0,o.pipe)($t.EQ.focusMarkByActiveAlert(B,Y,e.alertsReader,W.getActiveItemWithAlert,M.getLogger("MarksEffects.focusMarkByActiveAlert")),ae.nL.Effect.Producer.delayed(h)),$t.EQ.highlightMarkByHighlightedCard(G,B,Y,e.alertsReader,M.getLogger("MarksEffects.highlightMarkByHighlightedCard")),ti(Y.events,O,M.getLogger("createOnAlertApplySideEffect")),Jt(G,B,e.alertsReader,V,M),ei(B,ue,le.autoFocusEnabled),...G.getApplicatorEffects(),le.applicatorEffects,ji.R7(B,X,O,G.actionEvents,{cardsAroundActive:10,cardsBeyondViewport:10}),(0,o.pipe)(Yt(B,K,ue,W.getActiveItemWithAlert),ae.nL.Effect.Producer.delayed(h)),si(B,X),ii(J,ee),qi.dv.createSendActiveAlertFeedbacksEffect(B,W.getActiveItemWithAlert,e.alertsService,e.alertsReader,M.getLogger("MarksEffects.highlightMarkByHighlightedCard"))],fe=P.hg.create(Ue.R.SpecialId.AllAlerts),_e=B.view((e=>e.currentLens.id)).pipe(w.h((e=>e===Ue.R.SpecialId.Priority||e===Ue.R.SpecialId.AllAlerts))).subscribe(me.wW(fe)),we=(0,Gi.VC)(H,D,fe,W.getActiveItemWithAlert,O),ye=P.hg.create(u),Ee=(0,Gi.Dv)((e=>Ue.R.isPriority(e.currentLens.id)),we,O),be=new Gi.vM(e.sessionModel.checkingState,B),Ce=(0,o.pipe)([(0,o.pipe)(Gi.Py.whenShouldVerifyCurrentLens(W.getActiveItemWithAlert,O),Gi.Py.behaviorToEffect((()=>ce.some(ae.nL.Effect.FocusBehavior.focusNext)))),(0,o.pipe)((0,ne.W9)((()=>ce.isSome(ye.get())),Gi.Py.whenNoActiveCard),Gi.Py.behaviorToEffect((e=>(0,o.pipe)((e=>{const t=W.checksFeedItemsMapper(ce.some,(()=>ce.none),(()=>ce.none),(()=>ce.none));return(0,o.pipe)(ye.get(),ce.chain((i=>(ye.set(ce.none),ae.nL.hasCards(e)?(0,o.pipe)(e.currentLens.items.reduce(((e,s)=>(0,o.pipe)(e,ce.alt((()=>(0,o.pipe)(s,t,ce.chain((e=>ce.fromNullable(e.alerts.find((e=>e.id.startsWith(i+"_"))))))))))),ce.none),ce.map((t=>({alert:t,highlightIndex:0,lensId:e.currentLens.id})))):ce.none))))})(e),ce.map((e=>ae.nL.Effect.FocusBehavior.focusAlert(e))))))),(0,o.pipe)((0,ne.W9)((()=>le.autoFocusEnabled.get()),(0,ne.W9)(Gi.Py.whenFirstOpeningDocumentWithAlerts(be),Gi.Py.whenNoActiveCard)),Gi.Py.behaviorToEffect((()=>ce.some(ae.nL.Effect.FocusBehavior.focusFirst))))],(0,j.fold)((0,j.getFunctionMonoid)(ce.getFirstMonoid())())),ke=Gi.Py.getStateTransformer(Ce,Ee,e.alertsReader,O,le.autoFocusEnabled,z.constVoid,fe),Se=re.v.getItemsPositionsUpdateTransformer(O),Ae=(0,z.flow)(ke,Ze.L9(Se)),Me=new Xi.l(B,H,e.alertsReader,e.alertsService,ge,W.getActiveItemWithAlert,Ae),xe=J.pipe(g.U((({lensId:e})=>e)),w.h((e=>e===Ue.R.SpecialId.AllAlerts||e===Ue.R.SpecialId.Priority)),Je.x()).subscribe((e=>{i.set(e),p.next({kind:ri.R.ChangeLens,selectedLens:e===Ue.R.SpecialId.Priority?"priority":"all"})})),Ie=Q.activeView.pipe(g.U((e=>{switch(e.type){case nt.a.Type.default:return i.get();case nt.a.Type.emogenie:return Ue.R.SpecialId.PredictionEmogenie;case nt.a.Type.readersAttention:return Ue.R.SpecialId.PredictionTakeaways;case nt.a.Type.readersAttentionOnboarding:case nt.a.Type.readersAttentionHelp:return Ue.R.SpecialId.Closed;case nt.a.Type.proofitReview:return Ue.R.SpecialId.RealTimeProofit;default:return null}})),w.h(je.fQ),Je.x(),g.U((e=>[e,e===Ue.R.SpecialId.AllAlerts||e===Ue.R.SpecialId.Priority]))).subscribe((([e,t])=>J.next({lensId:e,focusFirstCard:t}))),Te=new Nt(f,v,y),Fe=(0,o.pipe)(r,ce.map((t=>t.initAssistantSessionTracking(G.actionEvents,B,e.alertsList.state,(t=>e.alertsReader.getById(t)),e.alertsService,e.positionManager,W.getActiveItemWithAlert)))),Re=new Ft(r,Q,B,(()=>le.assistantActions.next({type:ze.Type.clickOnFakeCard}))),Ve=new Rt(r);(0,o.pipe)(n,oe.bw((t=>t.initCardActionsProcessing(G.actionEvents,e.alertsReader))));const Pe=Ct(S);return{lensState:B,cardsViewModel:G,lensPreviewViewModel:T,cardsListScrollManager:X,upgradeViewModel:q,assistantHeaderViewModel:se,assistantLayoutViewModel:Q,assistantCardListViewModel:le,lensChanged:J,predictionsPreviewViewModel:ie,assistantFeedbackViewModel:de,assistantSettingsViewModel:Te,assistantProofitViewModel:pe,readersAttentionViewModel:te,readersAttentionChecklistViewModel:Re,readersAttentionHeaderViewModel:Ve,importanceSurveyViewModel:$,assistantModalManager:Z,goalPredictionViewModel:N,marksViewModel:Y,gnar:_,positionViewModel:Pe,user:E,capabilities:O,dispose:()=>{G.dispose(),Me.dispose(),Y.dispose(),ie.dispose(),xe.unsubscribe(),L.unsubscribe(),Ie.unsubscribe(),se.dispose(),le.dispose(),Z.hideAll(),N.unsubscribe(),te.dispose(),Re.dispose(),_e.unsubscribe(),(0,o.pipe)(pe,oe.bw((e=>e.dispose()))),(0,o.pipe)(Fe,oe.bw((e=>e.dispose())))}}};var $i=i(20271),Ji=i(18756),es=i(8213),ts=i(80895);const is=({browser:e,className:t})=>"safari"!==e?l.createElement(ts.C,{title:"BETA",kind:"success",className:t}):null;var ss=i(1620),as=i(45666),rs=i.n(as);const ns=({intent:e,isExpanded:t,isHidden:i,voteValue:s,goalPredictionVM:a,layoutVM:r})=>{const n=s===ht.l.Intent.FeedbackType.INTENT_ACCEPTED;return l.useEffect((()=>a.onCardShow(e)),[e.id]),l.useEffect((()=>{t&&a.onCardExpanded(e)}),[e.id,t]),l.createElement("div",Object.assign({},(0,P.Sh)(rs().card,i&&rs().hide,n?rs().thank:t&&rs().expand),{onClick:()=>!t&&a.onMiniCardClick(e),role:"intent-card"}),l.createElement("div",{className:rs().content},l.createElement("div",{className:rs().emojiAndTitle},l.createElement(C.dy,{className:rs().emoji,unicodeHexArray:n?[ct.THANK_YOU_ICON_UNICODE]:[e.unicode],unicodeLiteral:null}),l.createElement("div",null,n?l.createElement("div",null,"Thanks for helping us build new suggestions!"):l.createElement(l.Fragment,null,l.createElement("div",null,e.title),t?l.createElement("div",{className:rs().expandedInfo},"Your input helps us develop more tailored suggestions for you."):null))),n?l.createElement("div",{className:rs().betaBadgeAndCloseButton},l.createElement(ss.P,{onClick:()=>a.onHide(),size:"small",containerClassName:rs().closeButton}),l.createElement(is,{browser:r.browser,className:rs().betaBadge})):l.createElement("div",{className:rs().voteAndBetaBadge},l.createElement(es.A,{ariaLabel:e.title,voteNoAriaLabel:"No",voteYesAriaLabel:"Yes",voteNoTooltipMessage:"No",voteYesTooltipMessage:"Yes",onVote:t=>{t===es.x.YES?a.onVote(e,ht.l.Intent.FeedbackType.INTENT_ACCEPTED):a.onVote(e,ht.l.Intent.FeedbackType.INTENT_IGNORED)}}),t?l.createElement(is,{browser:r.browser,className:rs().expandedInfo}):null)))},os=({goalPredictionVM:e,layoutVM:t})=>l.createElement(P.F.Fragment,null,e.state.view((({intent:i,...s})=>i?l.createElement(ns,Object.assign({layoutVM:t,goalPredictionVM:e,intent:i},s)):null)));var ls=i(39742),cs=i(79073),ds=i(19526),ps=i(68370),hs=i(57108);const ms=l.memo((({width:e,strokeWidth:t,generalScore:i,componentStyle:s,fontSize:a=9,isLoading:r})=>{const n=e/2,o=n-t/2,c=2*o*Math.PI,d=(r?75:i)/100*c,p=c-d,h=(e=>{const{red40:t,yellow50:i,green50:s}=A.Z;return e<65?t:e<95?i:s})(i);return l.createElement(ds.j.div,null,l.createElement(ps.b,null,hs.__css),l.createElement("div",Object.assign({},(0,P.Sh)(hs.scoreRing,r&&hs.loading),{style:s}),l.createElement("svg",{width:e,height:e,viewBox:`0 0 ${e} ${e}`},l.createElement("circle",{fill:"white",r:o,cx:n,cy:n}),l.createElement("circle",{stroke:A.Z.neutral20,fill:"transparent",strokeWidth:t,style:{strokeDashoffset:d},r:o,cx:n,cy:n}),l.createElement("circle",{stroke:h,fill:"transparent",strokeWidth:t,strokeDasharray:`${c} ${c}`,style:{strokeDashoffset:p},r:o,cx:n,cy:n}),l.createElement("text",{className:hs.scoreText,x:"50%",y:"-35%",fontSize:a,fill:"black",textAnchor:"middle",transform:"rotate(90)"},i>0&&!r?i:""))))}));var us=i(75039),gs=i(88903),fs=i(35327);const vs=e=>l.createElement("div",Object.assign({},(0,P.Sh)(fs.summary_wrapper,e.className)),R.UI.mount(Es,Xe.Z.animatingFlow((()=>e.summaryVM.summary),_s))),_s=(e,t)=>(0,o.pipe)(e,ce.filter((e=>e.content!==t.content)),ce.map((()=>gs.both("fadeout","fadein")))),ws=R.UI.Node.make((({view:e})=>l.createElement(P.F.div,{className:fs.summary_heading},e("content")))),ys=R.UI.Transition.make({fadein:fs.summary_fadein},{fadeout:fs.summary_fadeout}),Es=R.UI.Animated.make(ys,ws),bs=({headerVM:e})=>l.createElement(P.F.div,{style:{visibility:e.visibility}},l.createElement("div",{className:us.panel},l.createElement(vs,{summaryVM:e}),l.createElement(P.F.div,{className:us.score_container,"data-grammarly-part":"assistant-score"},(0,o.pipe)(e.score,g.U(ce.map((({capiScore:e,isLoading:t})=>l.createElement(l.Fragment,null,l.createElement(ms,{generalScore:e,strokeWidth:3,width:38,fontSize:e<100?16:14,isLoading:t,componentStyle:{margin:"-3px -3px 0 0",cursor:"default"}}),l.createElement(ls.u,{message:`Text score: ${e} out of 100. This score represents the quality of writing.`},l.createElement("div",{className:us.info_icon},l.createElement(cs.s,{color:A.Z.neutral40,size:9}))))))),g.U(oe.QP)))),l.createElement("div",{className:us.lens_switch,"data-grammarly-part":"assistant-lens-switch"},R.UI.mount(Cs,e.lensSwitchFlow))),Cs=R.UI.Union.asOption(_t.n.Switch);var ks=i(22168),Ss=i(74880),As=i(45440),Ms=i(30509);const xs=({upgradeViewModel:e})=>l.createElement(P.F.div,{className:Ms.premiumLens},R.UI.mount(As.r,Xe.Z.fromSideEffect((t=>{"upgrade"===t.action.action.action.kind&&e.openUpgradeUrl(Oe.Place.gdocsSidebarSuccessView)}),e.advancedAlerts.pipe(g.U((0,z.flow)(ce.map((e=>({count:e.count,alerts:e.alerts()})))))))));var Is=i(79844),Ls=i(52268),Ts=i(56157),Fs=i(879);const Rs=({successLensViewModel:e})=>{const t=(0,Ls.hM)((0,Ls.wK)(e.successState.view("type"),!1,l.useContext(Is.m.Context)));return l.createElement(P.F.div,{className:Fs.successLens},R.UI.mount(Ts.q,t))},Vs=(l.forwardRef((({state:e,cardsViewModel:t,upgradeViewModel:i,cardsListScrollManager:s,capabilities:a,...r},n)=>{const c=me.jw((e=>{let t=7;return t=31*t+(0,Ji.AC)(e.currentLens.id),t=31*t+(re.v.State.isInSuccess(e)?1231:1237),t}),e),d=(0,o.pipe)((0,Ye.Q)(i.advancedAlerts),Xe.Z.extendActions(v.b((e=>{e.key===Ke.n.State.expanded&&"upgrade"===e.action.kind&&i.openUpgradeUrl(Oe.Place.gdocsSidebarCardList)}))));return l.createElement(Vs,{ref:n},(e=>l.createElement(P.F.Fragment,null,c.view((n=>{const o=n.get();return o.currentLens.id===Ue.R.SpecialId.Premium?l.createElement(xs,{upgradeViewModel:i}):re.v.State.isInSuccess(o)?l.createElement(Rs,{successLensViewModel:r.successLensViewModel}):l.createElement("div",null,l.createElement(Re,{state:n,cardsViewModel:t,cardsListScrollManager:s,connectorElements:e,header:R.UI.mount(Ke.n.ToggablePanel,d),comparator:W.listItemOrd,capabilities:a}))})))))})),l.forwardRef((({children:e,onClick:t,className:i=Ss.cardList,footer:s},a)=>{const r=xe.d.Elements.create(),n=(0,o.pipe)(r.view("viewport"),ue.oA,g.U(Ie.UL.fromEl));return l.createElement("div",{onClick:t,className:i,ref:e=>{"function"==typeof a?a(e):a&&(a.current=e);const t=ce.fromNullable(e);r.lens("scrollConsumer").set(t),r.lens("scrollProvider").set(t),r.lens("viewport").set(t)}},l.createElement(ks.l.RootVirtualContainer,{name:"cardListConnector",viewport:n},e(r)),s)})));var Ps=i(33751),Os=i(62513);const Hs=l.forwardRef((({successView:e},t)=>l.createElement("div",{className:Os.compactSuccessLens,ref:t},l.createElement("div",{className:Os.compactSuccessLensContainer},R.UI.mount(Ts.q,(0,Ls.hM)((0,Ls.JT)((0,o.pipe)(e,ue.oA)))))))),Ns=l.forwardRef((({viewModels:e},t)=>l.createElement("div",{className:Ps.mainView},l.createElement(Bs,{ref:t,state:e.lensState,cardsViewModel:e.cardsViewModel,upgradeViewModel:e.upgradeViewModel,cardsListScrollManager:e.cardsListScrollManager,assistantCardListViewModel:e.assistantCardListViewModel,predictionsPreviewViewModel:e.predictionsPreviewViewModel,assistantFeedbackViewModel:e.assistantFeedbackViewModel,goalPredictionViewModel:e.goalPredictionViewModel,headerViewModel:e.assistantHeaderViewModel,layoutViewModel:e.assistantLayoutViewModel,capabilities:e.capabilities})))),Us=({position:e,isSuccess:t,children:i})=>l.createElement(P.F.Fragment,null,e.pipe(Je.x(((e,t)=>e.offset===t.offset&&e.visible===t.visible)),g.U((e=>e.visible?l.createElement(P.F.div,Object.assign({},(0,P.Sh)(Ps.cardListFooterStatic,e.animationInProgress?Ps.cardListFooterAnimate:void 0,t?void 0:Ps.cardListFooterDynamic),{style:t?{}:{transform:Ie.ux.translateY(e.offset)}}),i):null)))),Bs=l.forwardRef((({state:e,assistantCardListViewModel:t,cardsViewModel:i,upgradeViewModel:s,cardsListScrollManager:a,goalPredictionViewModel:r,capabilities:n,...c},d)=>{const p=me.jw((e=>{let t=7;return t=31*t+(0,Ji.AC)(e.currentLens.id),t=31*t+(re.v.State.isInSuccess(e)?1231:1237),t}),e),h=(0,o.pipe)(p,g.U((e=>{const t=e.get();return re.v.State.isInSuccess(t)})),it.a(r.haveIntent,((e,t)=>e&&!t))),f=(0,o.pipe)(Ve(e,a),u.M(e),g.U((([e,t])=>({visible:!ae.nL.hasCards(t)||ce.isNone(t.currentLens.items.find((e=>!e.positionState.isHeightValid))),offset:e+6,animationInProgress:!0}))),m.O({visible:!1,offset:0,animationInProgress:!0}));return l.createElement(Vs,{className:Ps.cardList,onClick:e=>{e.target.getAttribute("class")===Ps.cardList&&t.assistantActions.next({type:ze.Type.clickOnEmpty})},footer:l.createElement(P.F.Fragment,null,(0,o.pipe)(h,g.U((e=>l.createElement(Us,{position:f,isSuccess:e},l.createElement(H,{predictionsVM:c.predictionsPreviewViewModel}))))))},(s=>l.createElement(P.F.Fragment,null,(0,o.pipe)(ve.aj(h,t.havePremiumAlerts,r.haveIntent),g.U((([o,p,h])=>o&&!p?l.createElement(l.Fragment,null,l.createElement(bs,{headerVM:c.headerViewModel}),l.createElement(Hs,{successView:t.successView,ref:d})):l.createElement(Re,{state:e,cardsViewModel:i,cardsListScrollManager:a,connectorElements:s,ref:d,header:l.createElement(l.Fragment,null,l.createElement(bs,{headerVM:c.headerViewModel}),p?l.createElement("div",{className:Ps.upgradeHookWrapper,role:"uphook-wrapper"},R.UI.mount(Ke.n.ToggablePanel,t.upgradeHookFlow)):h?l.createElement(os,{goalPredictionVM:r,layoutVM:c.layoutViewModel}):null),comparator:W.listItemOrd,capabilities:n})))))))})),Ds=l.forwardRef((({viewModels:e,header:t,footer:i,className:s},a)=>l.createElement(Vs,{ref:a,className:s},(s=>l.createElement(Re,{state:e.lensState,cardsViewModel:e.cardsViewModel,cardsListScrollManager:e.cardsListScrollManager,connectorElements:s,header:t,footer:i,comparator:W.listItemOrd,capabilities:e.capabilities})))));var qs=i(73008);const Zs=({children:e,layoutVM:t,panelClassName:i,contentClassName:s,footer:a,onClickBack:r,hideBackButton:n=P.hg.create(!1),dataPartName:o})=>l.createElement("div",{className:qs.viewOverlay,"data-grammarly-part":"assistant-view-overlay"},l.createElement(P.F.Fragment,null,n.view((e=>!e&&l.createElement(T.M,{className:qs.viewOverlayGoBack,clickHandler:()=>r?r():t.popActiveView()},"<- Back")))),l.createElement("div",{className:i||qs.defaultViewOverlayPanel},l.createElement("div",{className:s||qs.content,"data-grammarly-part":o},e),a&&l.createElement("div",{className:qs.footer},a)));var Gs=i(28288),Ws=i(90555),zs=i(92783),js=i(40145);const Xs=l.forwardRef((({emogenieService:e,viewModels:t},i)=>l.createElement(Zs,{dataPartName:"emogenie-view-overlay",layoutVM:t.assistantLayoutViewModel,panelClassName:qs.gradientViewOverlayPanel,hideBackButton:t.user.view((e=>e.isAnonymous))},l.createElement(P.F.Fragment,null,t.lensPreviewViewModel.getLens(Ue.R.SpecialId.PredictionEmogenie).pipe(g.U((e=>e.count>0)),Je.x(),g.U((s=>s?l.createElement(Ds,{key:"emogeniePredictionCardList",viewModels:t,ref:i,header:l.createElement(l.Fragment,null,l.createElement(Ys,{emogenieService:e}),l.createElement("div",{className:js.relatedSuggestionsTitle},"RELATED SUGGESTIONS"))}):l.createElement("div",{className:qs.gradientViewOverlayContent},l.createElement(Ys,{emogenieService:e}))))))))),Ys=({emogenieService:e})=>{var t;const i=e.viewState.get(),s=null===(t=i.report)||void 0===t?void 0:t.institutionLogo,a=i.isBrandTonesEnabled?l.createElement("div",null,s?l.createElement("img",{className:qs.logo,src:s}):null,i.institutionName," Tone detector"):"Tone detector";return l.createElement(l.Fragment,null,l.createElement("div",{className:qs.defaultViewOverlayHeader},a,(0,zs.G6)()?null:l.createElement(Gs.m,{secondary:!0})),l.createElement(P.F.Fragment,null,e.viewState.view((({report:t,emotionsPoll:i,settings:s,isBrandTonesEnabled:a})=>t&&Array.isArray(t.emotions)&&l.createElement(Ws.G,{key:"emogenieReportPopup",showBanner:!1,report:t,actions:e.actions,emotionsPoll:i,settings:s,isBrandTonesEnabled:a})))))};var Ks=i(53844);const Qs=({feedbackVM:e,layoutVM:t})=>l.createElement(Zs,{dataPartName:"feedback-view-overlay",layoutVM:t,panelClassName:qs.gradientViewOverlayPanel},l.createElement("div",{className:qs.gradientViewOverlayContent},l.createElement("div",{className:qs.defaultViewOverlayHeader},"Product Feedback"),l.createElement(Ks.q,{domain:e.getDomain(),onSubmit:t=>e.submitFeedback(t),onClose:()=>t.popActiveView(),align:"left",hideLogo:!0,style:{height:"calc(100% - 48px)"},fixSubmitButtonOverflowBottomPadding:!0})));var $s=i(22667),Js=i(78846);const ea=e=>l.createElement("div",{className:Js.logo_score},R.UI.mount(na,Xe.Z.animatingFlow((()=>e.headerVM.logoScore),ta))),ta=(e,t)=>(0,o.pipe)(e,ce.filter((e=>e.type!==t.type)),ce.map((()=>gs.both("fadeout","fadein")))),ia=R.UI.Node.make((()=>l.createElement($s.K,{className:Js.grammarly_logo,size:22}))),sa=R.UI.Node.make((({view:e})=>l.createElement(P.F.div,{className:Js.score_container,"data-grammarly-part":"assistant-score"},(0,o.pipe)(e("score"),(0,g.U)((({capiScore:e,isLoading:t})=>l.createElement(l.Fragment,null,l.createElement(ms,{generalScore:e,strokeWidth:2,width:22,fontSize:e<100?11:9,isLoading:t,componentStyle:{transform:"translate(2px, -2px) rotate(-90deg)",cursor:"default"}})))))))),aa=R.UI.Union.make("type",{logo:ia,score:sa}),ra=R.UI.Transition.make({fadein:Js.logoscore_fadein},{fadeout:Js.logoscore_fadeout}),na=R.UI.Animated.make(ra,aa);var oa=i(22679),la=i(3860),ca=i(85708);const da=({color:e=A.Z.neutral50})=>l.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M15.8256 15.75L21.5 10M21.5 10V7.375M21.5 10H24.1047M23.5 5.5V8.125H26.1047M11.3605 24L12.8462 21.375M12.8462 21.375C13.734 21.8536 14.7483 22.125 15.8256 22.125C16.9028 22.125 17.9172 21.8536 18.805 21.375M12.8462 21.375C10.8548 20.3014 9.5 18.1852 9.5 15.75C9.5 12.2292 12.3321 9.375 15.8256 9.375C16.8052 9.375 17.7327 9.59941 18.5605 10M20.2907 24L18.805 21.375M18.805 21.375C20.7964 20.3014 22.1512 18.1852 22.1512 15.75C22.1512 14.7652 21.9296 13.8326 21.534 13M16.5 12.4435C16.2822 12.3986 16.0566 12.375 15.8256 12.375C13.9761 12.375 12.4767 13.886 12.4767 15.75C12.4767 17.614 13.9761 19.125 15.8256 19.125C17.6751 19.125 19.1744 17.614 19.1744 15.75C19.1744 15.5171 19.151 15.2897 19.1064 15.07",stroke:e,strokeLinecap:"round"})),pa=({color:e=A.Z.neutral50})=>l.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M15.5 9.5V9C15.2239 9 15 9.22386 15 9.5H15.5ZM17.5 9.5H18C18 9.22386 17.7761 9 17.5 9V9.5ZM20.8333 10.8333L21.1869 10.4798C21.0931 10.386 20.9659 10.3333 20.8333 10.3333C20.7007 10.3333 20.5735 10.386 20.4798 10.4798L20.8333 10.8333ZM22.1667 12.1667L22.5202 12.5202C22.7155 12.325 22.7155 12.0084 22.5202 11.8131L22.1667 12.1667ZM23.5 15.5H24C24 15.2239 23.7761 15 23.5 15V15.5ZM23.5 17.5V18C23.7761 18 24 17.7761 24 17.5H23.5ZM22.1667 20.8333L22.5202 21.1869C22.7155 20.9916 22.7155 20.675 22.5202 20.4798L22.1667 20.8333ZM20.8333 22.1667L20.4798 22.5202C20.675 22.7155 20.9916 22.7155 21.1869 22.5202L20.8333 22.1667ZM17.5 23.5V24C17.7761 24 18 23.7761 18 23.5H17.5ZM15.5 23.5H15C15 23.7761 15.2239 24 15.5 24V23.5ZM12.1667 22.1667L11.8131 22.5202C12.0084 22.7155 12.325 22.7155 12.5202 22.5202L12.1667 22.1667ZM10.8333 20.8333L10.4798 20.4798C10.386 20.5735 10.3333 20.7007 10.3333 20.8333C10.3333 20.9659 10.386 21.0931 10.4798 21.1869L10.8333 20.8333ZM9.5 17.5H9C9 17.7761 9.22386 18 9.5 18V17.5ZM9.5 15.5V15C9.22386 15 9 15.2239 9 15.5H9.5ZM10.8333 12.1667L10.4798 11.8131C10.386 11.9069 10.3333 12.0341 10.3333 12.1667C10.3333 12.2993 10.386 12.4265 10.4798 12.5202L10.8333 12.1667ZM12.1667 10.8333L12.5202 10.4798C12.4265 10.386 12.2993 10.3333 12.1667 10.3333C12.0341 10.3333 11.9069 10.386 11.8131 10.4798L12.1667 10.8333ZM12.7686 11.4353L12.4151 11.7888L12.7686 11.4353ZM11.4353 12.7686L11.0817 13.1222L11.4353 12.7686ZM21.5647 20.2314L21.2112 20.5849L21.5647 20.2314ZM21.5647 12.7686L21.2112 12.4151L21.5647 12.7686ZM15.5 10H17.5V9H15.5V10ZM17 9.5V10.3039H18V9.5H17ZM20.5849 11.7888L21.1869 11.1869L20.4798 10.4798L19.8778 11.0817L20.5849 11.7888ZM20.4798 11.1869L21.8131 12.5202L22.5202 11.8131L21.1869 10.4798L20.4798 11.1869ZM21.8131 11.8131L21.2112 12.4151L21.9183 13.1222L22.5202 12.5202L21.8131 11.8131ZM22.6961 16H23.5V15H22.6961V16ZM23 15.5V17.5H24V15.5H23ZM23.5 17H22.6961V18H23.5V17ZM21.2112 20.5849L21.8131 21.1869L22.5202 20.4798L21.9183 19.8778L21.2112 20.5849ZM21.8131 20.4798L20.4798 21.8131L21.1869 22.5202L22.5202 21.1869L21.8131 20.4798ZM21.1869 21.8131L20.5849 21.2112L19.8778 21.9183L20.4798 22.5202L21.1869 21.8131ZM17 22.6961V23.5H18V22.6961H17ZM17.5 23H15.5V24H17.5V23ZM16 23.5V22.6961H15V23.5H16ZM12.4151 21.2112L11.8131 21.8131L12.5202 22.5202L13.1222 21.9183L12.4151 21.2112ZM12.5202 21.8131L11.1869 20.4798L10.4798 21.1869L11.8131 22.5202L12.5202 21.8131ZM11.1869 21.1869L11.7888 20.5849L11.0817 19.8778L10.4798 20.4798L11.1869 21.1869ZM10.3039 17H9.5V18H10.3039V17ZM10 17.5V15.5H9V17.5H10ZM9.5 16H10.3039V15H9.5V16ZM11.7888 12.4151L11.1869 11.8131L10.4798 12.5202L11.0817 13.1222L11.7888 12.4151ZM11.1869 12.5202L12.5202 11.1869L11.8131 10.4798L10.4798 11.8131L11.1869 12.5202ZM11.8131 11.1869L12.4151 11.7888L13.1222 11.0817L12.5202 10.4798L11.8131 11.1869ZM16 10.3039V9.5H15V10.3039H16ZM19.6667 16.5C19.6667 14.7511 18.2489 13.3333 16.5 13.3333V14.3333C17.6966 14.3333 18.6667 15.3034 18.6667 16.5H19.6667ZM16.5 19.6667C18.2489 19.6667 19.6667 18.2489 19.6667 16.5H18.6667C18.6667 17.6966 17.6966 18.6667 16.5 18.6667V19.6667ZM12.4151 11.7888C13.738 13.1118 16 12.1748 16 10.3039H15C15 11.2839 13.8151 11.7747 13.1222 11.0817L12.4151 11.7888ZM10.3039 16C12.1748 16 13.1118 13.738 11.7888 12.4151L11.0817 13.1222C11.7747 13.8151 11.2839 15 10.3039 15V16ZM11.7888 20.5849C13.1118 19.262 12.1748 17 10.3039 17V18C11.2839 18 11.7747 19.1849 11.0817 19.8778L11.7888 20.5849ZM17 10.3039C17 12.1748 19.262 13.1118 20.5849 11.7888L19.8778 11.0817C19.1849 11.7747 18 11.2839 18 10.3039H17ZM13.3333 16.5C13.3333 18.2489 14.7511 19.6667 16.5 19.6667V18.6667C15.3034 18.6667 14.3333 17.6966 14.3333 16.5H13.3333ZM16 22.6961C16 20.8252 13.738 19.8882 12.4151 21.2112L13.1222 21.9183C13.8151 21.2253 15 21.7161 15 22.6961H16ZM20.5849 21.2112C19.262 19.8882 17 20.8252 17 22.6961H18C18 21.7161 19.1849 21.2253 19.8778 21.9183L20.5849 21.2112ZM22.6961 17C20.8252 17 19.8882 19.262 21.2112 20.5849L21.9183 19.8778C21.2253 19.1849 21.7161 18 22.6961 18V17ZM21.2112 12.4151C19.8882 13.738 20.8252 16 22.6961 16V15C21.7161 15 21.2253 13.8151 21.9183 13.1222L21.2112 12.4151ZM14.3333 16.5C14.3333 15.3034 15.3034 14.3333 16.5 14.3333V13.3333C14.7511 13.3333 13.3333 14.7511 13.3333 16.5H14.3333Z",fill:e})),ha=e=>{const t=(0,de.e8)(),[i,s]=l.useState(!1),[a,r]=l.useState(!1),n=e.viewModels.assistantLayoutViewModel,c=e.viewModels.assistantHeaderViewModel,d=l.useContext($i.O.Context),p=(0,o.pipe)(e.viewModels.assistantProofitViewModel,ce.map((e=>e.feature)),ce.map((e=>l.createElement(P.F.Fragment,null,(0,ve.aj)([e.layoutCreated,n.activeView.view((t=>t.type===e.assistantViewType()))]).pipe((0,g.U)((([t,i])=>t?l.createElement(ls.u,{message:d.proofitTooltip,showDelay:oa.gk,disabled:i},l.createElement("div",{"data-grammarly-part":"assistant-header-action-btn-proofit",className:Js.headerActionBtn},l.createElement(la.h,{onClick:()=>i?n.popActiveView():n.pushActiveView({type:e.assistantViewType()})},l.createElement(ca.g,null,l.createElement("div",{className:Js.headerActionBtnProofitIcon}))))):null)))))),ce.toNullable);return l.createElement(ls.u,{message:"Grab and drag to move panel",showDelay:oa.gk,disabled:i},l.createElement("div",Object.assign({},(0,P.Sh)(Js.header,a&&Js.actions_hovered),{ref:t,onMouseDown:()=>s(!0),onMouseOut:()=>s(!1)}),l.createElement(ea,{headerVM:c}),l.createElement(ma,null),l.createElement("div",{className:Js.headerActions,onMouseOver:()=>r(!0),onMouseOut:()=>r(!1)},p,l.createElement(P.F.Fragment,null,c.showSetGoalsActionButton.view((e=>e&&l.createElement(ls.u,{message:d.setGoalsTooltip,showDelay:oa.gk},l.createElement("div",{"data-grammarly-part":"assistant-header-action-btn-set-goals",className:Js.headerActionBtn},l.createElement(la.h,{onClick:()=>c.open("setGoals")},l.createElement(da,null))))))),l.createElement(P.F.Fragment,null,P.hg.combine(c.showSettingsActionButton,n.activeView,((e,t)=>{const i=t.type===nt.a.Type.settings;return e&&l.createElement(ls.u,{message:"Settings",showDelay:oa.gk,disabled:i},l.createElement("div",{"data-grammarly-part":"assistant-header-action-btn-settings",className:Js.headerActionBtn},l.createElement(la.h,{onClick:()=>i?n.popActiveView():n.pushActiveView({type:nt.a.Type.settings})},l.createElement(pa,null))))}))),l.createElement(ls.u,{message:"Close panel",showDelay:oa.gk},l.createElement("div",{"data-grammarly-part":"assistant-header-action-btn-close",className:Js.headerActionBtn},l.createElement(ss.P,{onClick:c.close}))))))},ma=()=>l.createElement("div",{className:Js.draggableWrapper},l.createElement("div",{className:Js.draggable}));var ua=i(24606),ga=i(95888),fa=i(2249),va=i(41794),_a=i.n(va);const wa=[{question:"How important do you consider this piece of writing?",helperText:"Make a selection below",multiSelect:!1,options:[{value:"extremelyImportant",label:"Extremely important"},{value:"somewhatImportant",label:"Somewhat important"},{value:"neutral",label:"Neutral"},{value:"somewhatUnimportant",label:"Somewhat unimportant"},{value:"extremelyUnimportant",label:"Extremely unimportant"}]},{question:"What kind of feedback would be helpful when writing something like this?",helperText:"Select all that apply",multiSelect:!0,options:[{value:"clearCommunication",label:"Clear communication"},{value:"soundingFluent",label:"Sounding fluent"},{value:"toneAndDelivery",label:"Tone and delivery"},{value:"synonyms",label:"Synonyms"},{value:"conciseness",label:"Conciseness"}]}],ya=e=>{const[t,i]=(0,l.useState)(void 0);return l.createElement("form",{className:_a().contentContainer},l.createElement("div",{className:_a().main},l.createElement("div",{className:_a().question},e.question),l.createElement("div",{className:_a().helperText},e.helperText),l.createElement("div",{className:_a().optionsContainer},e.options.map(((e,s)=>l.createElement("div",{key:s,className:_a().radioOption},l.createElement("input",{type:"radio",id:e.value,name:"contact",value:e.value,checked:t===e.value,onChange:e=>i(e.target.value)}),l.createElement("label",{htmlFor:e.value},e.label)))))),l.createElement("div",{className:_a().buttonsContainer},l.createElement(ua.z,{style:{color:"#4A6EE0"},kind:"transparent-hoverable",onClick:e.dismissPopup},"Dismiss"),l.createElement(ua.z,{disabled:!t,onClick:()=>t&&e.submitAnswers([t])},"extremelyImportant"===t||"somewhatImportant"===t?"Next":"Submit")))},Ea=e=>{const[t,i]=(0,l.useState)([]);return l.createElement("form",{className:_a().contentContainer},l.createElement("div",{className:_a().main},l.createElement("div",{className:_a().question},e.question),l.createElement("div",{className:_a().helperText},e.helperText),l.createElement("div",{className:_a().optionsContainer},e.options.map(((e,s)=>l.createElement(ga.J,{key:s,className:_a().checkboxOption,labelId:`importance-survey-${e.value}-checkbox`,onChange:s=>{i(s?[...t,e.value]:t.filter((t=>t!==e.value)))}},e.label))))),l.createElement("div",{className:_a().buttonsContainer},l.createElement(ua.z,{style:{color:"#4A6EE0"},kind:"transparent-hoverable",onClick:e.dismissPopup},"Dismiss"),l.createElement(ua.z,{disabled:0===t.length,onClick:()=>e.submitAnswers(t)},"Submit")))},ba=e=>l.createElement("div",{className:_a().thankYouContentContainer},l.createElement("div",{className:_a().thankYouMain},l.createElement(fa.R,{size:44}),l.createElement("div",{className:_a().thankYou},"Thank you!"),l.createElement("div",{className:_a().thankYouSubtext},"Your feedback helps us develop features tailored to your writing needs.")),l.createElement("div",{className:_a().buttonsContainer},l.createElement(ua.z,{onClick:e.closePopup},"Done"))),Ca=({importanceSurveyVM:e,layoutVM:t})=>l.createElement(Zs,{dataPartName:"importance-survey-view-overlay",layoutVM:t,hideBackButton:e.hideBackButton},l.createElement("div",{className:_a().container},l.createElement("div",{className:qs.defaultViewOverlayHeader},"Help Grammarly get smarter!"),l.createElement(P.F.Fragment,null,e.step.view((t=>t===gt.importance?l.createElement(ya,Object.assign({},wa[0],{dismissPopup:e.dismiss,submitAnswers:e.submit})):t===gt.kindOfFeedback?l.createElement(Ea,Object.assign({},wa[1],{dismissPopup:e.dismiss,submitAnswers:e.submit})):t===gt.thankYou?l.createElement(ba,{closePopup:e.done}):null))))),ka=({viewModels:e})=>l.createElement(P.F.Fragment,null,e.assistantLayoutViewModel.activeView.view((t=>{if(t.type!==nt.a.Type.popup)return null;const{popupType:i}=t;return i===nt.a.PopupType.importanceSurvey?l.createElement(Ca,{layoutVM:e.assistantLayoutViewModel,importanceSurveyVM:e.importanceSurveyViewModel}):null})));var Sa=i(55364);const Aa=({layoutVM:e,onClickBack:t,children:i})=>{const[s,a]=l.useState(!1);return l.createElement(Zs,{dataPartName:"proofit-view-overlay",layoutVM:e,panelClassName:Sa.proofitViewOverlayPanel,onClickBack:t},l.createElement("div",{className:Sa.proofitViewOverlayContent,tabIndex:-1,ref:e=>{null===e||s||(e.focus(),a(!0))}},l.createElement("div",{className:qs.defaultViewOverlayHeader},l.createElement("div",{className:Sa.proofitViewOverlayHeader},"Expert Writing Help",l.createElement(is,{browser:e.browser,className:Sa.proofitViewOverlayHeaderBetaBadge}))),i))};var Ma=i(81108),xa=i(26479),Ia=i.n(xa),La=i(83765),Ta=i.n(La);const Fa=({turnaroundTime:e,freeTrialQuota:t,onSubmit:i,disabledInfo:s,isLoading:a,style:r,onTogglePrivacyInfo:n,showPrivacyInfo:o})=>{const[c,d]=l.useState(null!=o&&o),p=t>0?t:0;return l.useEffect((()=>{null==n||n(c)}),[c]),l.useEffect((()=>{d(null!=o&&o)}),[o]),l.createElement(ds.j.div,{"data-grammarly-part":"proofit-request-form",style:{width:"100%",height:"100%",...r}},l.createElement(ps.b,null,Ta().__css),l.createElement("div",{className:Ta().proofitRequestForm},c?l.createElement(l.Fragment,null,l.createElement("div",{className:Ta().proofitRequestFormPrivacyInfoTitle},"How we protect you"),l.createElement("div",{className:Ta().proofitRequestFormPrivacyInfoDescription},l.createElement("div",{className:Ta().proofitRequestFormPrivacyInfoDescriptionItem},l.createElement("div",{className:Ta().proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),l.createElement("div",{className:Ta().proofitRequestFormPrivacyInfoDescriptionItemText},"Our writing experts will see only your current email draftno prior messages or contact details.")),l.createElement("div",{className:Ta().proofitRequestFormPrivacyInfoDescriptionItem},l.createElement("div",{className:Ta().proofitRequestFormPrivacyInfoDescriptionItemBulletPoint}),l.createElement("div",{className:Ta().proofitRequestFormPrivacyInfoDescriptionItemText},"We will not sell, rent, or make public any of your personal data."))),l.createElement(ua.z,{kind:"neutral",onClick:()=>d(!1)},"Continue")):l.createElement(l.Fragment,null,l.createElement("div",{className:Ta().proofitRequestFormImg}),l.createElement("div",{className:Ta().proofitRequestFormTitle},"Get instant writing help"),l.createElement("div",{className:Ta().proofitRequestFormDescription},"Our writing experts are standing by to review your email."),l.createElement("div",{className:Ta().proofitRequestFormCostAndTime},l.createElement("div",{className:Ta().proofitRequestFormCost},l.createElement("div",{className:Ta().proofitRequestFormCostAndTimeTitle},p," free ",V._6(p,"review","reviews")),l.createElement("div",{className:Ta().proofitRequestFormCostAndTimeSubtitle},"left this month",l.createElement("sup",null,"*"))),l.createElement("div",{className:Ta().proofitRequestFormTime},l.createElement("div",{className:Ta().proofitRequestFormCostAndTimeTitle},e," seconds"),l.createElement("div",{className:Ta().proofitRequestFormCostAndTimeSubtitle},"average turnaround"))),l.createElement(ua.z,{kind:Boolean(s)?"neutral":"primary",containerClassName:Ta().proofitRequestFormRequestBtn,disabled:Boolean(s||a),onClick:i},a?l.createElement(ds.j.div,null,l.createElement(ps.b,null,Ia().__css),l.createElement("div",{className:Ia().proofitRequestFormBtnLoadingSpinner})):"Request now"),s||a?s?l.createElement("div",{className:Ta().proofitRequestFormUnavailableMsg},l.createElement(Ma.Q,{info:s})):null:l.createElement(ua.z,{kind:"link",onClick:()=>d(!0)},"Learn how we protect your privacy"),l.createElement("div",{className:Ta().proofitRequestFormFreeTrialFootnote},l.createElement("span",null,l.createElement("sup",null,"*")," included with your Premium subscription")))))};Fa.defaultProps={disabledInfo:null,isLoading:!1};const Ra=({layoutVM:e,proofitVM:t})=>{const i=(0,de.fW)(),[s,a]=l.useState(!1);return l.createElement(Aa,{layoutVM:e,onClickBack:()=>{s?a(!1):e.popActiveView()}},l.createElement(P.F.Fragment,null,(0,ve.aj)([t.feature.layoutCreated,t.feature.requestInfo,t.feature.turnaroundTime,t.feature.quotaRemaining,t.feature.requestDisabledInfo]).pipe((0,g.U)((([e,r,n,o,c])=>e&&r.status!==At.u.RequestStatus.REVIEWING?l.createElement(Fa,{turnaroundTime:n,freeTrialQuota:o,onSubmit:()=>t.onSubmitRequest(i),style:{height:"calc(100% - 48px)"},disabledInfo:c,isLoading:r.status===At.u.RequestStatus.PREPARING||r.status===At.u.RequestStatus.PRE_SUBMIT,showPrivacyInfo:s,onTogglePrivacyInfo:a}):null)))))};var Va=i(65669),Pa=i.n(Va);const Oa=({suggestionsMade:e,onAccept:t})=>l.createElement(ds.j.div,{"data-grammarly-part":"proofit-review-form"},l.createElement(ps.b,null,Pa().__css),l.createElement("div",{className:Pa().proofitReviewForm},l.createElement("div",{className:Pa().proofitReviewFormImg}),l.createElement("div",{className:Pa().proofitReviewFormTitle},"Our experts made ",e," ",V._6(e,"suggestion","suggestions")),l.createElement("div",{className:Pa().proofitReviewFormDescription},"Their changes are highlighted in your email."),l.createElement(ua.z,{onClick:t},"Done"))),Ha=({layoutVM:e,proofitVM:t})=>{const i=(0,de.fW)();return l.createElement(Aa,{layoutVM:e},l.createElement(P.F.Fragment,null,(0,ve.aj)([t.feature.layoutCreated,t.feature.requestInfo]).pipe((0,g.U)((([e,s])=>e&&s.status===At.u.RequestStatus.REVIEWING?l.createElement(Oa,{suggestionsMade:s.suggestionsMade,onAccept:()=>t.onCompleteRequest(i)}):null)))))};class Na extends l.Component{render(){return this._idSuffix=this._idSuffix||"readersAttentionOnboardingBanner_"+Na._nextIdSuffix++,l.createElement("svg",{className:this.props.className,viewBox:"0 2 296 144",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("g",{clipPath:`url(#clip0_${this._idSuffix})`},l.createElement("rect",{width:"296",height:"144",fill:"#4A6EE0"}),l.createElement("path",{d:"M-5.5 -3.5H261.5V47.5H-5.5V-3.5Z",fill:"#6E66DE",stroke:"#1F243C"}),l.createElement("path",{d:"M-2.79293 -197.5L429.5 234.793V-197.5H-2.79293Z",fill:"#15C39A",stroke:"#1F243C"}),l.createElement("path",{d:"M219.057 33C222.992 33 226.182 29.8101 226.182 25.875C226.182 21.94 222.992 18.7501 219.057 18.7501C215.122 18.7501 211.932 21.94 211.932 25.875C211.932 29.8101 215.122 33 219.057 33Z",fill:"#1F243C",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("path",{d:"M221.477 31.0899C225.92 31.0899 229.522 27.4881 229.522 23.045C229.522 18.6018 225.92 15 221.477 15C217.033 15 213.432 18.6018 213.432 23.045C213.432 27.4881 217.033 31.0899 221.477 31.0899Z",fill:"#41D9B5",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("path",{d:"M220.188 27.045C220.009 27.045 219.841 26.9778 219.717 26.8434L216.927 24.0646C216.67 23.8069 216.67 23.3811 216.927 23.1122C217.185 22.8545 217.611 22.8545 217.88 23.1122L220.188 25.4204L225.353 20.2662C225.611 20.0085 226.037 20.0085 226.306 20.2662C226.563 20.5239 226.563 20.9497 226.306 21.2186L220.67 26.8546C220.535 26.9778 220.367 27.045 220.188 27.045Z",fill:"white"}),l.createElement("path",{d:"M68.125 57C72.06 57 75.25 53.8101 75.25 49.875C75.25 45.94 72.06 42.7501 68.125 42.7501C64.19 42.7501 61 45.94 61 49.875C61 53.8101 64.19 57 68.125 57Z",fill:"#1F243C",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("path",{d:"M70.545 55.0899C74.9881 55.0899 78.5899 51.4881 78.5899 47.045C78.5899 42.6018 74.9881 39 70.545 39C66.1018 39 62.5 42.6018 62.5 47.045C62.5 51.4881 66.1018 55.0899 70.545 55.0899Z",fill:"#41D9B5",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("path",{d:"M69.2564 51.045C69.0771 51.045 68.909 50.9778 68.7858 50.8434L65.9958 48.0646C65.7381 47.8069 65.7381 47.3811 65.9958 47.1122C66.2535 46.8545 66.6793 46.8545 66.9482 47.1122L69.2564 49.4204L74.4217 44.2662C74.6794 44.0085 75.1052 44.0085 75.3741 44.2662C75.6318 44.5239 75.6318 44.9497 75.3741 45.2186L69.7382 50.8546C69.6037 50.9778 69.4357 51.045 69.2564 51.045Z",fill:"white"}),l.createElement("rect",{x:"132",y:"38",width:"39",height:"24",rx:"2",fill:"#1F243C",stroke:"#1F243C"}),l.createElement("rect",{x:"135",y:"35",width:"39",height:"24",rx:"2",fill:"#F8C6DA",stroke:"#1F243C"}),l.createElement("path",{d:"M135 58.3296L149.303 47.4857L153.298 44.4591C154.007 43.923 154.993 43.923 155.702 44.4591L159.697 47.4857L174 58.3296",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("path",{d:"M173.914 35.5L159.698 47.6583L155.806 50.9962C155.063 51.6361 153.956 51.6361 153.212 50.9962L149.303 47.6583L135.087 35.5",fill:"#F8C6DA"}),l.createElement("path",{d:"M173.914 35.5L159.698 47.6583L155.806 50.9962C155.063 51.6361 153.956 51.6361 153.212 50.9962L149.303 47.6583L135.087 35.5",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("rect",{x:"135",y:"35",width:"39",height:"24",rx:"2",stroke:"#1F243C"}),l.createElement("rect",{y:"32",width:"296",height:"112",fill:`url(#paint0_linear_${this._idSuffix})`}),l.createElement("path",{d:"M185.5 22C185.5 18.961 183.039 16.5 180 16.5C183.039 16.5 185.5 14.039 185.5 11C185.5 14.039 187.961 16.5 191 16.5C187.965 16.5 185.5 18.9651 185.5 22Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M239.5 128C239.5 124.961 237.039 122.5 234 122.5C237.039 122.5 239.5 120.039 239.5 117C239.5 120.039 241.961 122.5 245 122.5C241.965 122.5 239.5 124.965 239.5 128Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("path",{d:"M24.5 63C24.5 59.961 22.039 57.5 19 57.5C22.039 57.5 24.5 55.039 24.5 52C24.5 55.039 26.961 57.5 30 57.5C26.9651 57.5 24.5 59.9651 24.5 63Z",fill:"#F9EA9E",stroke:"#1F243C",strokeLinecap:"round",strokeLinejoin:"round"}),l.createElement("rect",{x:"263",y:"76",width:"63",height:"77",rx:"2",fill:"#1F243C",stroke:"#1F243C"}),l.createElement("rect",{x:"267",y:"72",width:"63",height:"77",rx:"2",fill:"#F9FAFF",stroke:"#1F243C"}),l.createElement("path",{d:"M318.759 89.7112H278",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("path",{d:"M318.759 101.227H278",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("path",{d:"M318.759 112.743H278.095",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("path",{d:"M318.759 124.259H278",stroke:"#1F243C",strokeMiterlimit:"10"}),l.createElement("g",{style:{mixBlendMode:"multiply"},opacity:"0.4"},l.createElement("path",{d:"M318.759 101.227H278",stroke:"#41D9B5",strokeWidth:"10",strokeMiterlimit:"10"})),l.createElement("g",{style:{mixBlendMode:"multiply"},opacity:"0.4"},l.createElement("path",{d:"M305.43 112.743H278.095",stroke:"#41D9B5",strokeWidth:"10",strokeMiterlimit:"10"}))),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_"+this._idSuffix,x1:"148",y1:"32",x2:"148",y2:"144",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#26307D",stopOpacity:"0"}),l.createElement("stop",{offset:"1",stopColor:"#26307D",stopOpacity:"0.5"})),l.createElement("clipPath",{id:"clip0_"+this._idSuffix},l.createElement("rect",{width:"296",height:"144",fill:"white"}))))}}Na._nextIdSuffix=0;var Ua=i(90295);const Ba=({layoutVM:e,readersAttentionVM:t,showOnboardingButton:i})=>l.createElement(Zs,{dataPartName:"readers-attention-onboarding-overlay",layoutVM:e,panelClassName:Ua.onboardingPanel,contentClassName:Ua.onboardingPanelContent},l.createElement("div",{className:Ua.onboardingBanner},l.createElement(Na,{className:Ua.onboardingBannerImage}),l.createElement("div",{className:Ua.onboardingHeader},"Readers attention",l.createElement(ts.C,{title:"NEW",kind:"gold"})),l.createElement("div",{className:Ua.onboardingBannerMessage},"Make sure readers see what's important")),l.createElement("div",{className:Ua.onboardingContent},l.createElement("div",null,"Grammarly's reader attention heatmap predicts where people will pay close attention and where they'll skim:",l.createElement("ul",null,l.createElement("li",null,l.createElement("span",{className:Ua.heatmap},l.createElement("b",null,"Highlighted areas are most likely to be read."))),l.createElement("li",null,"Unhighlighted areas may be skimmed or skipped.")),"Strengthen your message by moving your key information into the highlighted areas."),i&&l.createElement(ua.z,{kind:"success",onClick:()=>t.getStarted(),containerClassName:Ua.gettingStartedButton,dataGrammarlyPart:"readers-attention-get-started-button"},"Get started")));var Da=i(47960);const qa=({feedbackVM:e,className:t})=>l.createElement(ls.u,{showDelay:oa.gk,message:"Leave feedback"},l.createElement("div",Object.assign({},(0,P.Sh)(Ps.feedback_button,t),{onClick:()=>e.openFeedback(),"data-grammarly-part":"assistant-feedback-btn"}),l.createElement(Da.A,{color:A.Z.blue50}),"Anything we can improve?"));var Za=i(36145);const Ga=()=>l.createElement("svg",{width:"5",height:"5",viewBox:"0 0 5 5",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:A.Z.neutral90}));class Wa extends l.Component{render(){return this._idSuffix=this._idSuffix||"clipboard_"+Wa._nextIdSuffix++,l.createElement("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("g",{clipPath:`url(#clip0_${this._idSuffix})`},l.createElement("path",{d:"M13.5 14.6001C13.5 15.1498 13.0677 15.6001 12.54 15.6001H3.46C2.93225 15.6001 2.5 15.1498 2.5 14.6001V2.85059C2.5 2.30084 2.93225 1.85059 3.46 1.85059H12.54C13.0677 1.85059 13.5 2.30084 13.5 2.85059V14.6001Z",fill:"#B47D56"}),l.createElement("path",{d:"M13.0661 15.35H3.43408V13.4585L12.6803 6.31396L13.0661 15.35Z",fill:`url(#paint0_linear_${this._idSuffix})`}),l.createElement("path",{d:"M3.32324 2.97559C3.32324 2.97559 3.40224 8.82509 3.25049 14.9751H12.75C12.664 8.82509 12.6772 2.97559 12.6772 2.97559H3.32324Z",fill:"white"}),l.createElement("path",{d:"M11.5 5.3501H6.5V5.6001H11.5V5.3501Z",fill:"#6E8189"}),l.createElement("path",{d:"M11.5 7.8501H6.5V8.1001H11.5V7.8501Z",fill:"#6E8189"}),l.createElement("path",{d:"M11.5 10.3501H6.5V10.6001H11.5V10.3501Z",fill:"#6E8189"}),l.createElement("path",{d:"M11.5 12.8501H6.5V13.1001H11.5V12.8501Z",fill:"#6E8189"}),l.createElement("path",{d:"M5.81201 2.87137C5.81201 2.87137 5.82276 2.39812 6.11126 2.29287C6.26901 2.23537 7.28751 1.91162 7.28751 1.91162C7.28751 1.91162 7.35926 2.85137 5.81201 2.87137Z",fill:"#B3C2C6"}),l.createElement("path",{d:"M10.1869 2.87137C10.1869 2.87137 10.1762 2.39812 9.88769 2.29287C9.73044 2.23537 8.71194 1.91162 8.71194 1.91162C8.71194 1.91162 8.64019 2.85137 10.1869 2.87137Z",fill:"#B3C2C6"}),l.createElement("path",{d:"M5.4936 2.46876C5.46235 2.38726 5.60835 2.36576 5.65435 2.40126C5.83685 2.54426 5.94085 2.61126 5.9746 2.61176C6.5781 2.62051 6.6231 2.53701 6.6646 2.63076C5.49885 3.06426 5.75285 3.13901 5.4936 2.46876Z",fill:"#6E8189"}),l.createElement("path",{d:"M10.506 2.46974C10.5372 2.38824 10.3912 2.36673 10.3457 2.40223C10.1632 2.54524 10.0592 2.61174 10.0249 2.61224C9.42145 2.62099 9.37645 2.53749 9.33545 2.63074C10.5012 3.06524 10.2472 3.13999 10.506 2.46974Z",fill:"#6E8189"}),l.createElement("path",{d:"M10.5055 2.8331C10.1408 2.7661 9.42651 2.6271 9.38551 2.6271C9.35476 2.6271 9.29901 2.57135 9.29901 2.5411C9.29901 2.34035 9.29901 1.92185 9.29901 1.75835C9.29901 1.65685 8.88501 1.48235 8.79376 1.3551C8.64926 1.15135 8.59401 0.600098 7.99951 0.600098C7.40526 0.600098 7.35001 1.15135 7.20501 1.3551C7.11426 1.48285 6.69976 1.65685 6.69976 1.75835C6.69976 1.92185 6.69976 2.34035 6.69976 2.5411C6.69976 2.57135 6.64401 2.6271 6.61376 2.6271C6.57226 2.6271 5.85851 2.76685 5.49326 2.8331C5.10801 2.90435 4.99951 3.6001 4.99951 3.6001H7.99951H10.9993C10.9993 3.6001 10.8908 2.90435 10.5055 2.8331ZM7.99951 1.5421C7.79251 1.5421 7.62451 1.3746 7.62451 1.1671C7.62451 0.959598 7.79251 0.792098 7.99951 0.792098C8.20701 0.792098 8.37451 0.959598 8.37451 1.1671C8.37451 1.3746 8.20701 1.5421 7.99951 1.5421Z",fill:`url(#paint1_linear_${this._idSuffix})`}),l.createElement("path",{d:"M7.99961 0.766602C7.77836 0.766602 7.59961 0.946352 7.59961 1.1671C7.59961 1.38785 7.77836 1.5676 7.99961 1.5676C8.22086 1.5676 8.39961 1.38785 8.39961 1.1671C8.39961 0.946352 8.22086 0.766602 7.99961 0.766602ZM7.99961 1.4531C7.84136 1.4531 7.71336 1.3251 7.71336 1.1666C7.71336 1.00885 7.84136 0.880352 7.99961 0.880352C8.15836 0.880352 8.28611 1.00885 8.28611 1.1666C8.28636 1.3251 8.15836 1.4531 7.99961 1.4531Z",fill:`url(#paint2_linear_${this._idSuffix})`}),l.createElement("path",{d:"M5.875 4.7251V5.9751H4.625V4.7251H5.875ZM6 4.6001H4.5V6.1001H6V4.6001Z",fill:"#6E8189"}),l.createElement("path",{d:"M5.875 7.2251V8.4751H4.625V7.2251H5.875ZM6 7.1001H4.5V8.6001H6V7.1001Z",fill:"#6E8189"}),l.createElement("path",{d:"M5.875 9.7251V10.9751H4.625V9.7251H5.875ZM6 9.6001H4.5V11.1001H6V9.6001Z",fill:"#6E8189"}),l.createElement("path",{d:"M5.875 12.2251V13.4751H4.625V12.2251H5.875ZM6 12.1001H4.5V13.6001H6V12.1001Z",fill:"#6E8189"}),l.createElement("path",{d:"M6.30128 4.66504C6.04928 4.74229 5.55128 4.98329 5.29353 5.55529C5.29353 5.55529 5.08803 5.28229 4.90578 5.20904C4.85403 5.20704 4.72278 5.21879 4.63428 5.31604C4.63428 5.31604 4.89353 5.39029 5.27978 5.97729C5.37303 5.91429 5.53128 5.81529 5.53128 5.81529C5.74378 5.14479 6.14403 4.83329 6.34328 4.70779C6.32953 4.69279 6.31603 4.67829 6.30128 4.66504Z",fill:"#E81C27"})),l.createElement("defs",null,l.createElement("linearGradient",{id:"paint0_linear_"+this._idSuffix,x1:"8.25008",y1:"15.35",x2:"8.25008",y2:"6.31419",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#1A1626",stopOpacity:"0.05"}),l.createElement("stop",{offset:"0.0917",stopColor:"#1A1626",stopOpacity:"0.0706"}),l.createElement("stop",{offset:"0.6667",stopColor:"#1A1626",stopOpacity:"0.2"})),l.createElement("linearGradient",{id:"paint1_linear_"+this._idSuffix,x1:"7.99939",y1:"3.6001",x2:"7.99939",y2:"0.600098",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#7E8A8F"}),l.createElement("stop",{offset:"0.0221",stopColor:"#9CA7AC"}),l.createElement("stop",{offset:"0.0502",stopColor:"#BBC6CB"}),l.createElement("stop",{offset:"0.0777",stopColor:"#D1DBE0"}),l.createElement("stop",{offset:"0.1038",stopColor:"#DEE9EE"}),l.createElement("stop",{offset:"0.1273",stopColor:"#E3EDF2"}),l.createElement("stop",{offset:"0.2545",stopColor:"#CFD8DD"}),l.createElement("stop",{offset:"0.4655",stopColor:"#CCD5DA"}),l.createElement("stop",{offset:"0.6185",stopColor:"#C3CCD1"}),l.createElement("stop",{offset:"0.7531",stopColor:"#B3BDC2"}),l.createElement("stop",{offset:"0.8766",stopColor:"#9DA8AD"}),l.createElement("stop",{offset:"0.9924",stopColor:"#808C91"}),l.createElement("stop",{offset:"1",stopColor:"#7E8A8F"})),l.createElement("linearGradient",{id:"paint2_linear_"+this._idSuffix,x1:"7.99961",y1:"1.56738",x2:"7.99961",y2:"0.766602",gradientUnits:"userSpaceOnUse"},l.createElement("stop",{stopColor:"#D9E3E8"}),l.createElement("stop",{offset:"0.1606",stopColor:"#D5DFE3"}),l.createElement("stop",{offset:"0.3396",stopColor:"#C7D1D6"}),l.createElement("stop",{offset:"0.5274",stopColor:"#B2BBC0"}),l.createElement("stop",{offset:"0.7214",stopColor:"#939DA1"}),l.createElement("stop",{offset:"0.9182",stopColor:"#6C7679"}),l.createElement("stop",{offset:"1",stopColor:"#5A6366"})),l.createElement("clipPath",{id:"clip0_"+this._idSuffix},l.createElement("rect",{width:"16",height:"16",fill:"white",transform:"translate(0 0.100098)"}))))}}Wa._nextIdSuffix=0;var za=i(60430),ja=i(91197);const Xa=({viewModel:e})=>{const t=e.height.pipe(g.U(ce.fold(z.constUndefined,(()=>ja.animateChecklistHeightChanges))));return l.createElement(P.F.div,Object.assign({},(0,P.Sh)(ja.checklistAnimationWrapper,t),{style:{height:e.height.pipe(g.U(ce.getOrElse(z.constUndefined)))}}),R.UI.mount(er,function(e){return Xe.Z.animatingFlow(e,((e,t)=>ce.isNone(e)?ce.none:e.value.kind===t.kind?ce.some(gs.both("fadeOutContentChange","fadeInContentChange")):"expanded"===t.kind?ce.some(gs.both("fadeOut","expand")):ce.some(gs.both("collapse","fadeIn"))))}((i=e,Xe.Z.fromSideEffect((({action:e})=>{switch(e.kind){case"expand":i.expand();break;case"height":i.changeHeight(e.height);break;default:(0,je.vE)(e)}}),i.state.pipe(g.U((e=>({kind:e.collapsed?"collapsed":"expanded",items:e.items})))))))));var i},Ya=R.UI.Node.make((({view:e,notify:t})=>{const i=e("items").pipe(g.U((e=>e.filter((e=>e.checked))))),s=e("items").pipe(g.U((e=>e.filter((e=>!e.checked))))),a=new et.t;return za.P.useSubscriptionTo(a.pipe(h.w((e=>ge.YC(e).pipe(g.U((()=>e.offsetHeight)),m.O(e.offsetHeight)))),v.b((e=>t({kind:"height",height:e})())))),l.createElement("div",{className:ja.checklistExpanded,ref:e=>{null!==e&&a.next(e)},"data-grammarly-part":"attention-checklist-expanded"},l.createElement(P.F.Fragment,null,s.pipe(g.U((e=>l.createElement(l.Fragment,null,e.length>0&&l.createElement("div",{className:ja.checklistGroupHeader},"Room for improvement"),e.map((({message:e},t)=>l.createElement(Ka,{checked:!1,key:t,message:e})))))))),l.createElement(P.F.Fragment,null,i.pipe(g.U((e=>l.createElement(l.Fragment,null,e.length>0&&l.createElement("div",{className:ja.checklistGroupHeader},"What's good"),e.map((({message:e},t)=>l.createElement(Ka,{checked:!0,key:t,message:e})))))))))})),Ka=({message:e,checked:t})=>l.createElement("div",{className:ja.checklistItem},l.createElement("div",{className:ja.itemBullet},t?l.createElement(Za.x,{width:12,height:12}):l.createElement(Ga,null)),l.createElement("div",Object.assign({},(0,P.Sh)(ja.itemText,t&&ja.checked)),e)),Qa=R.UI.Node.make((({view:e,notify:t})=>{const i=e("items").pipe(g.U((0,z.flow)((e=>ce.fromNullable(e.filter((e=>!e.checked)).concat(e.filter((e=>e.checked)))[0])),ce.map((e=>e.message))))),s=new et.t;return za.P.useSubscriptionTo(s.pipe(h.w((e=>ge.YC(e).pipe(g.U((()=>e.offsetHeight)),m.O(e.offsetHeight)))),v.b((e=>t({kind:"height",height:e})())))),l.createElement("div",{className:ja.checklistCollapsed,ref:e=>{null!==e&&s.next(e)},"data-grammarly-part":"attention-checklist-collapsed"},l.createElement(T.M,{clickHandler:t({kind:"expand"}),style:{display:"block"}},l.createElement("div",{className:ja.checklistHeader},l.createElement(Wa,null),l.createElement(P.F.div,{className:ja.checklistTitle},e("items").pipe(g.U((e=>`Checklist: ${e.filter((e=>e.checked)).length} of ${e.length} completed`))))),l.createElement(P.F.div,{className:ja.checklistFirstItemPreview},i.pipe(g.U(ce.getOrElse((()=>"")))))))})),$a=R.UI.Union.make("kind",{collapsed:Qa,expanded:Ya}),Ja=R.UI.Transition.make({fadeIn:ja.fadeIn,fadeInContentChange:ja.fadeInContentChange,expand:ja.expand},{fadeOut:ja.fadeOut,fadeOutContentChange:ja.fadeOutContentChange,collapse:ja.collapse}),er=R.UI.Animated.make(Ja,$a);var tr=i(41439),ir=i(22764);const sr=l.forwardRef((({viewModels:e,readersAttentionVM:t,checklistVM:i,headerVM:s},a)=>l.createElement(Zs,{dataPartName:"readers-attention-view-overlay",layoutVM:e.assistantLayoutViewModel,panelClassName:qs.gradientViewOverlayPanel},l.createElement(Ds,{key:"takeawaysPredictionCardList",ref:a,viewModels:e,className:ir.cardList,header:l.createElement(ar,{readersAttentionVM:t,checklistVM:i,headerVM:s}),footer:l.createElement(qa,{feedbackVM:e.assistantFeedbackViewModel})})))),ar=({readersAttentionVM:e,checklistVM:t,headerVM:i})=>{const s=i.message.view((e=>({content:e})));return l.createElement(l.Fragment,null,l.createElement("div",{className:qs.defaultViewOverlayHeader},l.createElement("div",{className:ir.headerGroup},"Readers attention",l.createElement("div",{onClick:()=>e.showHelp(nt.a.ReadersAttentionHelp.Caller.headerButton),className:ir.questionMarkButton,"data-grammarly-part":"readers-attention-question-mark-button"},l.createElement(tr.JO.QuestionMark,{width:12,className:ir.questionMarkIcon}))),l.createElement(ts.C,{title:"BETA",kind:"success"})),l.createElement(vs,{summaryVM:{summary:s},className:ir.summaryWrapper}),l.createElement("div",{className:ir.message},"Put your main points in the"," ",l.createElement("div",{onClick:()=>e.showHelp(nt.a.ReadersAttentionHelp.Caller.descriptionLink),className:ir.inlineButton},"green areas"),"."),l.createElement("div",{className:js.relatedSuggestionsTitle},"SUGGESTIONS"),l.createElement(Xa,{viewModel:t}))};var rr=i(19106),nr=i(26485),or=i(17324),lr=i(68089);const cr=({children:e,blocked:t,wrapperClassName:i})=>t?l.createElement(ls.u,{message:"Sign in to use this feature",position:"top"},l.createElement("div",{className:i},l.createElement("div",{className:lr.hover_blocker,onClick:je.EI,onDoubleClick:je.EI},e))):l.createElement(l.Fragment,null,e);class dr extends l.Component{constructor(){super(...arguments),this.handleChange=e=>{(this.props.skipTrustedCheck||e.isTrusted)&&this.props.onChange(e)}}render(){return l.createElement("div",Object.assign({},(0,P.Sh)(this.props.extraClassName,nr.setting_item,this.props.disabled&&nr.disabled)),l.createElement("label",{className:nr.select_checkbox,"data-grammarly-part":this.props.dataGrammarlyPart},l.createElement("div",null,this.props.children,this.props.beta&&l.createElement("span",{className:(0,zs.G6)()?nr.new:nr.beta})),l.createElement(cr,{wrapperClassName:nr.checkbox_control_wrapper,blocked:this.props.disabled}),l.createElement("input",{className:nr.checkbox,onChange:this.props.disabled?je.EI:this.handleChange,checked:this.props.checked,type:"checkbox"}),l.createElement("div",Object.assign({},(0,P.Sh)(nr.checkbox_check,this.props.grayOut&&nr.grayOut,this.props.checked?nr.on:nr.off)),l.createElement("div",Object.assign({},(0,P.Sh)(nr.on_off)),this.props.checked?"ON":"OFF"),l.createElement("div",{className:nr.checkbox_check_round}))),l.createElement("div",{className:nr.bottom_line}))}}var pr=i(33057),hr=i(47740);const mr=({showTitle:e,openGBLanding:t})=>l.createElement("div",{className:hr.container},l.createElement("div",{className:hr.contant},e&&l.createElement("div",{className:hr.title},"Grammarly for your team"),l.createElement("div",null,"Help your team make your business look great with top-notch writing."),l.createElement("div",{className:hr.spacer}),l.createElement(ua.z,{size:"medium",onClick:()=>{t((0,zs.Um)().businessEHomepage),(0,pr.T)().gGbUpHookClick()}},"Explore Grammarly Business")));var ur=i(4120),gr=i(26386);const fr=new Proxy({},{get:(e,t)=>(...e)=>gr.emitBackground("gnar-track",{method:t,props:e})});class vr extends l.Component{constructor(){super(...arguments),this.onEnableDefsClick=e=>{const{toggleDefs:t}=this.props,i=e.target.checked;t(i),fr.definitionToggleClick(i?"on":"off"),(0,pr.T)().toggleExtensionDefs(i)}}render(){const{enabledDefs:e,disabled:t}=this.props;return l.createElement(dr,{onChange:this.onEnableDefsClick,checked:e,extraClassName:or.def_switcher,dataGrammarlyPart:"definitionAndSynonymsSwitcher",disabled:t,skipTrustedCheck:this.props.skipTrustedCheck},"Show definitions and synonyms ",l.createElement("br",null),"via double clicks (all sites)")}}var _r=i(6304),wr=i(66402);const yr=()=>l.createElement("svg",{width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l.createElement("path",{d:"M13.9207 15L15.5 17.2562L17.0793 15H13.9207Z",stroke:"#6D758D",strokeWidth:"2"}));var Er=i(39499),br=i(32577),Cr=i(71527);const kr={american:l.createElement((()=>l.createElement("div",{className:wr.american,role:"presentation"})),null),australian:l.createElement((()=>l.createElement("div",{className:wr.australian,role:"presentation"})),null),british:l.createElement((()=>l.createElement("div",{className:wr.british,role:"presentation"})),null),canadian:l.createElement((()=>l.createElement("div",{className:wr.canadian,role:"presentation"})),null)},Sr=["british","american","australian","canadian"],Ar=e=>{return l.createElement(l.Fragment,null,kr[e.dialect],l.createElement("span",{"data-test-attr":"dialect_"+e.dialect,className:Cr.label},(t=e.dialect).charAt(0).toUpperCase()+t.slice(1)+" English"));var t};class Mr extends l.Component{render(){const e=this.props.dropdownOnTop?{customPosition:{top:"-100px",left:"0"},vAlign:"top"}:{customPosition:{top:"36px",left:"0"}};return l.createElement(br.L,Object.assign({},e,{showDelay:0,closeDelay:150,appearanceBehavior:"mouseClick",name:"dialect",label:l.createElement(Er.zx.White,{name:"dialect.box",style:{padding:"0"}},l.createElement("div",{className:Cr.selected},l.createElement(Ar,{dialect:this.props.dialect}),l.createElement(yr,null)))}),Sr.filter((e=>e!==this.props.dialect)).map((e=>l.createElement(Er.zx.Flat,{name:e,onClick:()=>this.props.onSetDialect(e),key:e},l.createElement("div",{className:Cr.option},l.createElement(Ar,{dialect:e}))))))}}class xr extends l.Component{constructor(){super(...arguments),this.setDialect=e=>{const{changeStrongDialect:t,dialectWeak:i}=this.props;t(e);const s=e+"English";fr.languageSettingUpdate(s,"user",i&&e===i)}}render(){const e=this.props.dialectStrong||this.props.dialectWeak||"american";return l.createElement("div",Object.assign({},(0,P.Sh)(_r.line,this.props.disabled&&_r.disabled)),l.createElement("div",null,"I write in"),l.createElement(cr,{blocked:this.props.disabled},l.createElement("div",{className:_r.dialectPicker},l.createElement(Mr,{dialect:e,onSetDialect:this.setDialect,dropdownOnTop:!!this.props.dropdownOnTop}))))}}const Ir=({toggleHotkeys:e,enabledHotkeys:t})=>{const i=((0,zs.ED)()?"Alt":"Ctrl")+" + g";return l.createElement(dr,{onChange:t=>{const i=t.target.checked;e(i),fr.hotkeyToggleClick(i?"on":"off")},checked:t,extraClassName:or.hotkeys},l.createElement("span",{className:or.shortcut_title},"Shortcut:")," Open Popup editor ",l.createElement("br",null),l.createElement("span",{className:or.shortcut},i))},Lr=e=>{var t;const i="docs.google.com"===e.domain,s=i?"Google Docs":e.domain,a=i&&(null===(t=e.experiments)||void 0===t?void 0:t.anonUserGDocsSidebar),{enabledInConfig:r,siteSwitcherChecked:n,favicon:o}=e,c=n.checked&&r,d=r?"Check for writing suggestions":"Checking is not supported";return l.createElement(dr,{grayOut:!r,onChange:e=>n.update(e.target.checked),checked:c,extraClassName:or.site_switcher,dataGrammarlyPart:"siteSwitcher",skipTrustedCheck:e.skipTrustedCheck},l.createElement("div",{"data-test-attr":"siteControlsLabelText"},d,l.createElement("br",null)," ",l.createElement("span",{className:or.domain},l.createElement("span",{className:or.thin_text},"on"),"",o&&l.createElement("span",{className:or.favicon},l.createElement("img",{width:"16px",height:"16px",src:o})),s,a&&l.createElement("span",{className:nr.beta}))))};var Tr=i(37896),Fr=i(23345);const Rr=l.createContext({}),Vr=e=>{const t=l.useContext(Rr),{registrationDate:i}=e.user,s=(0,Tr.p6)(i);return l.createElement("div",{className:Fr.line},l.createElement("div",{className:Fr.content},s&&l.createElement("div",{"data-test-attr":"checked_since"},"Grammarly has been correcting your text since ",s,"."),l.createElement("div",{className:Fr.upgrade,onClick:()=>{e.openSubscriptionDialog({utmSource:"upHook",utmCampaign:"extensionSettingsToolbar"}),fr.getPremiumButtonClick("settingsToolbar"),(0,pr.T)().userUpgradeClick("settingsToolbar")},style:{fontSize:t.ctaFontSize}},"Go Premium to Enable Advanced Fixes")))},Pr=e=>l.createElement(dr,{onChange:t=>{e.toggle(t.target.checked)},checked:e.enabled,extraClassName:or.def_switcher},"Correct spelling automatically"),Or=e=>l.createElement("div",Object.assign({},(0,P.Sh)(nr.setting_item,or.userPanel,or.def_switcher)),l.createElement("span",Object.assign({},(0,P.Sh)(or.link,or.blue)),l.createElement(T.M,{clickHandler:e.handleClick},"Turn extension back on in Chrome"))),Hr=e=>l.createElement(dr,{onChange:t=>{e.toggle(t.target.checked)},beta:!0,checked:e.enabled,extraClassName:or.def_switcher},"Show phrasal predictions"),Nr=e=>{var t;const{actions:i,activeTab:s,config:a,settings:r,user:n,siteCategory:o,openSubscriptionDialog:c,openGBLanding:d,showGBUpHook:p,placement:h,showAutocorrectToggle:m,enableRenderingHack:u=!1}=e;u&&l.useEffect((()=>{(0,zs.CB)()&&(window.screenLeft<0||window.screenTop<0||window.screenLeft>window.screen.width||window.screenTop>window.screen.height)&&chrome.runtime.getPlatformInfo((e=>{if("mac"===e.os){const e=new CSSStyleSheet;e.insertRule("\n            @keyframes redraw {\n              0% {\n                opacity: 1;\n              }\n              100% {\n                opacity: .99;\n              }\n            }\n          "),e.insertRule("\n            html {\n              animation: redraw 1s linear infinite;\n            }\n          "),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}}))}),[]);const{premium:g,experiments:f,anonymous:v}=n,_=p&&g&&!ur.n5.doesUserBelongToInstitution(n),w=g||v,y=f&&f.hotkeysExperiment,E=e.siteSwitcherChecked||{checked:!!r.enabled,update:t=>{const{siteCategory:s}=e;i.toggleSite(t,a.domain),fr.checkingToggleClick("toolbar",s,t?"on":"off"),(0,pr.T)().toggleExtension(t,"toolbar")}};return l.createElement("div",null,r.isLlamaInstalled&&!r.isLlamaDisabled&&l.createElement(Or,{handleClick:i.disableLlama}),l.createElement(Lr,{domain:a.domain,enabledInConfig:a.enabled,siteSwitcherChecked:E,favicon:null==s?void 0:s.favIconUrl,siteCategory:o,experiments:f}),l.createElement(vr,{disabled:v,enabledDefs:r.enabledDefs,toggleDefs:i.toggleDefs}),y&&l.createElement(Ir,{enabledHotkeys:r.enabledHotkeys||!1,toggleHotkeys:i.toggleHotkeys}),m&&l.createElement(Pr,{enabled:r.autocorrectEnabled||!1,toggle:e=>{i.toggleAutocorrect(e),fr.autocorrectToggleClick(e?"on":"off")}}),(null===(t=n.experiments)||void 0===t?void 0:t.autocompleteEnabled)&&l.createElement(Hr,{enabled:r.autocompleteEnabled||!1,toggle:e=>{i.toggleAutocomplete(e),fr.autocompleteFeatureToggleClick("popup",e?"on":"off")}}),l.createElement(xr,{changeStrongDialect:i.changeStrongDialect,dialectStrong:r.dialectStrong,dialectWeak:r.dialectWeak,dropdownOnTop:w,disabled:v}),!w&&l.createElement(Vr,{user:n,openSubscriptionDialog:c}),_&&l.createElement(mr,{openGBLanding:d,showTitle:"popup"===h}))};var Ur=i(32138),Br=i(82785),Dr=i(91574);const qr=({viewModels:e})=>{const{domain:t,actions:i,state:s}=e.assistantSettingsViewModel,[a,r]=l.useState(!!s.view("commonSettings","enabled").get()),n={checked:a,update:r};return l.createElement(Zs,{dataPartName:"settings-view-overlay",layoutVM:e.assistantLayoutViewModel,panelClassName:qs.gradientViewOverlayPanel,footer:l.createElement(ua.z,{containerClassName:Dr.settingsDoneButton,kind:"success",type:"submit",onClick:()=>{i.toggleSite(a,t),rr.J.checkingToggleClick("assistant",Br.y.other,a?"on":"off"),(0,pr.T)().toggleExtension(a,"assistant"),e.assistantLayoutViewModel.popActiveView()},style:{height:"32px"}},"Done")},l.createElement("div",{className:qs.gradientViewOverlayContent},l.createElement("div",{className:qs.defaultViewOverlayHeader},"Settings"),l.createElement(P.F.Fragment,null,s.view((({user:a,commonSettings:r})=>{var o;return l.createElement(Rr.Provider,{value:{ctaFontSize:13}},l.createElement(Nr,{actions:i,config:{enabled:!0,domain:t},settings:r,user:a,siteCategory:Br.y.other,openSubscriptionDialog:()=>e.upgradeViewModel.openUpgradeUrl(Oe.Place.extensionSettingsAssistant),openGBLanding:e=>{const t=(0,Ur.Z4)(e,"gbExtensionSettingsAssistant");window.open(t)},showGBUpHook:(0,zs.i7)(),placement:"assistant",showAutocorrectToggle:(0,zs.i7)()||!!(null===(o=s.view("user","experiments").get())||void 0===o?void 0:o.autoCompleteCorrectAllBrowsers),siteSwitcherChecked:n}))}))),l.createElement(qa,{feedbackVM:e.assistantFeedbackViewModel})))};var Zr,Gr=i(77256),Wr=i(94503),zr=i(88056);!function(e){let t;!function(e){e.isAppleSystem="isAppleSystem"}(t=e.SidebarFlag||(e.SidebarFlag={})),e.Flag={...t,...Wr.a.Flag},e.Context=l.createContext(zr.Y.invariantContent("Environment"))}(Zr||(Zr={}));class jr{constructor(){this._flags=new Set,this.actions={openUrl:()=>{throw new Error("Not implemented")},openPopup:()=>{throw new Error("Not implemented")}};(0,Gr.O)().config.systemInfo.os.isMac&&this._flags.add(Zr.Flag.isAppleSystem),this._flags.add(Zr.Flag.supportsSVGDominantBaseline),this._flags.add(Zr.Flag.onlyTrustedEvents)}has(e){return this._flags.has(e)}}const Xr=({modalManager:e})=>l.createElement(P.F.Fragment,null,e.state.view((0,z.flow)(ce.map((({component:e})=>e)),ce.toNullable)));var Yr=i(93583);const Kr=({children:e,remSize:t,setter:i})=>(Qr+=1,l.useEffect((()=>{const e=t.subscribe((e=>{$r.next(ce.some(e)),i(ce.some(e))}));return()=>{e.unsubscribe(),Qr-=1,0===Qr&&($r.next(ce.none),i(ce.none))}}),[t]),l.createElement(Yr.u.Context.Provider,{value:$r.pipe(ue.oA)},e));let Qr=0;const $r=new $e.X(ce.none);var Jr=i(48189),en=i(79850);i(75259),i(67129);const tn=({children:e})=>l.createElement(l.Fragment,null,l.createElement("div",{"data-grammarly-part":"gdocs-sidebar",className:en.wrapper},e),l.createElement(Jr.p,{thin:!0,thinItalic:!0,regular:!0,italic:!0,bold:!0,boldItalic:!0,semiBold:!0}));var sn=i(63544),an=i(17161),rn=i(67521),nn=i(66831),on=i(17674),ln=i(89068),cn=i(83305);const dn=l.memo((({viewModels:e,emogenieService:t,height:i,ready:s,OuterElementsPortalSource:a})=>{const r=new jr;(0,ne.iR)("viewModels",e);const n=(0,de.IQ)(),c=l.useContext(de.Dg).state.pipe(w.h((e=>!e.dragging)),m.O(sn.zM)),d=l.useContext(an.Y),p=P.hg.create(Ie.UL.empty),{initialPositionOffset:h}=e.positionViewModel;(0,rn.A)((0,ve.aj)([c,d]).pipe(g.U((([e,t])=>({height:t.height,width:t.width,top:t.top+e.translate.y+h.top,left:t.left+e.translate.x+h.left,bottom:t.top+t.height+e.translate.y,right:t.left+t.width+e.translate.x}))),v.b(me.wW(p)))),(0,rn.A)(c.pipe(v.b((t=>e.positionViewModel.onDrag(t))))),(0,rn.A)(e.assistantLayoutViewModel.activeView.pipe(_.G(),v.b((([t,i])=>{t.type!==i.type&&i.type===nt.a.Type.default&&e.cardsListScrollManager.paddingTop.set(0)}))));const u=l.useRef(null);return l.useEffect((()=>{e.assistantCardListViewModel.cardListContext.next(ce.fromNullable(u.current));const t=u.current?ge.rl(u.current,{subtree:!0,childList:!0}):Zt.C,i=p.view((e=>({top:e.top,left:e.left}))),a=(0,o.pipe)(t,ln.V((0,pt.m9)(1)),tt.b(10),st.P()).subscribe((()=>s(i,n)),(()=>{s(i,n,!0)}));return()=>{a.unsubscribe()}}),[]),l.createElement(pn,{environment:r,viewport:d.pipe(g.U((e=>({height:e.height,width:e.width,top:e.top,left:e.left,bottom:e.top+e.height,right:e.left+e.width}))))},l.createElement(P.F.div,Object.assign({"data-grammarly-part":"assistant-popup-content"},(0,P.Sh)(Ps.assistant,n.pipe(m.O(!1),g.U((e=>e&&Ps.dragging)))),{style:{height:i,maxHeight:"90vh"}}),l.createElement(ha,{viewModels:e}),e.assistantLayoutViewModel.activeView.view((i=>i.type===nt.a.Type.default?l.createElement(Ns,{viewModels:e,ref:u,key:"default-view"}):i.type===nt.a.Type.emogenie?l.createElement(Xs,{emogenieService:t,viewModels:e,key:"emogenie-view",ref:u}):i.type===nt.a.Type.readersAttention?l.createElement(sr,{viewModels:e,readersAttentionVM:e.readersAttentionViewModel,checklistVM:e.readersAttentionChecklistViewModel,headerVM:e.readersAttentionHeaderViewModel,key:"readers-attention-view",ref:u}):i.type===nt.a.Type.readersAttentionOnboarding?l.createElement(Ba,{layoutVM:e.assistantLayoutViewModel,readersAttentionVM:e.readersAttentionViewModel,showOnboardingButton:!0,key:"readers-attention-onboarding"}):i.type===nt.a.Type.readersAttentionHelp?l.createElement(Ba,{layoutVM:e.assistantLayoutViewModel,readersAttentionVM:e.readersAttentionViewModel,showOnboardingButton:!1,key:"readers-attention-help"}):i.type===nt.a.Type.feedback?l.createElement(Qs,{feedbackVM:e.assistantFeedbackViewModel,layoutVM:e.assistantLayoutViewModel,key:"feedback-view"}):i.type===nt.a.Type.settings?l.createElement(qr,{viewModels:e,key:"settings-view"}):i.type===nt.a.Type.proofitRequest&&ce.isSome(e.assistantProofitViewModel)?l.createElement(Ra,{layoutVM:e.assistantLayoutViewModel,proofitVM:e.assistantProofitViewModel.value,key:"proofit-request-view"}):i.type===nt.a.Type.proofitReview&&ce.isSome(e.assistantProofitViewModel)?l.createElement(Ha,{layoutVM:e.assistantLayoutViewModel,proofitVM:e.assistantProofitViewModel.value,key:"proofit-review-view"}):i.type===nt.a.Type.popup?l.createElement(ka,{key:"popup-view",viewModels:e}):null))),l.createElement(a,null,l.createElement(tn,null,l.createElement(Xr,{modalManager:e.assistantModalManager}))),l.createElement(on.X,null))})),pn=({environment:e,viewport:t,children:i})=>{const s=l.useRef((0,$i.I)(Is.m.getConfig(e.has(Zr.Flag.isAppleSystem)?"mac":"windows")));return l.createElement(Kr,{remSize:d.of(16),setter:e=>Yr.u.setRootCssVar(document.documentElement,e)},l.createElement(Zr.Context.Provider,{value:e},l.createElement(Wr.a.Context.Provider,{value:e},l.createElement($i.O.Context.Provider,{value:s.current.assistant},l.createElement(Is.m.Context.Provider,{value:s.current.denali},l.createElement(cn.TG.ContextMock,null,l.createElement(ks.l.RootVirtualContainer,{viewport:t,name:"draggable"},l.createElement(nn.G.DefaultProvider,null,l.createElement(tn,null,i)))))))))};var hn=i(53447);const mn=e=>{const{assistantLayout:t,textFieldRect:i,viewModels:s,emogenieService:a,ready:r,height:n,OuterElementsPortalSource:o}=e,{initialPositionOffset:c}=s.positionViewModel,d={...i.client,...i.size},p=(0,hn.C7)();return l.createElement(de._l,{bounds:p,hasDragHandle:!0},(({translate:e})=>l.createElement(an.s,{anchorRect:d,viewportRect:p,anchorOrigin:t.anchorOrigin,elementOrigin:t.assistantOrigin,anchorMargin:t.anchorMargin,repositioning:t.repositioningStrategy,stickToTarget:!1,viewportMargin:0,postRepositioningOffset:{horizontal:c.left+e.x,vertical:c.top+e.y}},(({top:t,left:i})=>l.createElement("div",{"data-grammarly-part":"assistant-popup",style:{position:"fixed",top:t-e.y,left:i-e.x,transform:`translate(${e.x}px, ${e.y}px)`,zIndex:oa.Eq}},l.createElement(dn,{viewModels:s,emogenieService:a,height:n,ready:r,OuterElementsPortalSource:o}))))))};var un=i(39485),gn=i(84966);(0,un.C)();class fn{constructor(e,t){this._params=e,this._felog=t,this._log=y.Y.create(fn.name),this._integration=null,this._viewModels=P.hg.create(null),this._assistantPopupIsReady=new c.xQ,this._initPerformance=void 0,this._openMeasure=void 0,this._height=P.hg.create(0),this.openState=P.hg.create("closed"),this._subs=new Qe.w.Keeper,this.open=async(e,t,i,s)=>{var a,r;const n=this._viewModels.get();if(null!==n)vn(!0,n,e,i,s);else{this._openMeasure=this._felog.openTime.startMeasure();const t=this._felog.initTime.startMeasure();this.openState.set("opening");const n=this._params.assistantService,l=n.createIntegration();if(!l)return this._log.warn("tried to open assistant with checking service not initialized"),t.cancelMeasure(),void this._openMeasure.cancelMeasure();null===(r=(a=this._params).onOpen)||void 0===r||r.call(a,l),this._integration=l;const c=this._params.contentScriptState.view("user").view((e=>({isPremium:e.premium,isAnonymous:e.anonymous,experiments:e.experiments,customFields:e.customFields}))),d=Qi(l.engine,l.denaliViewAdapter,l.document.settings.lens("selectedLens"),this._params.emogenieService,n.goalPrediction,ce.fromNullable(this._params.readersAttentionFeature),ce.fromNullable(this._params.smartPhrasesFeature),ce.fromNullable(this._params.proofitFeature),n.sidebarEvents,this._assistantPopupIsReady,(0,o.pipe)(ce.fromNullable(e),ce.map(gn.wQ.Id.create)),this._params.contentScriptState,this._params.contentScriptActions,this._params.gnar,this._params.domain,c,this.close,this._params.assistantService.selectedHighlightsTracker,this._params.assistantService.isTextFieldEmpty,this._params.assistantService.positionModel,this._params.browser);vn(!1,d,e,i,s),this._initPerformance=t.endMeasure(),this._viewModels.set(d)}},this.close=()=>{var e,t,i,s;null!==this._viewModels.get()&&(this._trackAssistantClose(),null===(t=(e=this._params).onClose)||void 0===t||t.call(e),this.openState.set("closed"),null===(i=this._integration)||void 0===i||i.dispose(),this._integration=null,null===(s=this._viewModels.get())||void 0===s||s.dispose(),this._viewModels.set(null))},this._getReadyFn=()=>{const e=this._felog.renderTime.startMeasure();return(t,i,s)=>{const a=e.endMeasure();s&&this._openMeasure.cancelMeasure();const r=this._openMeasure.endMeasure();r&&r.duration>500&&this._log.warn("assistant popup took too long to open:",{init:this._initPerformance.duration,render:a.duration,total:r.duration}),setTimeout((()=>{this.openState.set("open"),this._assistantPopupIsReady.next(),this._trackAssistantOpen(t,null==r?void 0:r.duration),this._trackAssistantDrag(t,i)}),0)}},this._applyIframeOffset=e=>{var t,i;const s=null===(i=(t=this._params).getCustomOffset)||void 0===i?void 0:i.call(t);return s?{...e,size:{width:s.width,height:s.height},client:{...e.client,left:s.left+e.client.left,top:s.top+e.client.top},offset:{...e.offset,left:s.left+e.offset.left,top:s.top+e.offset.top},page:{...e.page,left:s.left+e.page.left,top:s.top+e.page.top}}:e}}get view(){return this._viewModels.pipe((0,h.w)((e=>null===e?(0,d.of)(null):(0,p.R)(window,"resize").pipe((0,m.O)(null),(0,u.M)(this._params.layout.textField.rect.behavior),(0,g.U)((([t,i])=>{const s=this._applyIframeOffset(i),a=((e,t)=>{const i=Ve(e.lensState,e.cardsListScrollManager),s=Math.max(600,t.size.height+b.O.headerHeight+b.O.panelHeight);return i.pipe((0,u.M)(e.predictionsPreviewViewModel.previewState),(0,g.U)((([e,t])=>{if(t.kind!==I.visible)return e;const i=[t.readersAttention,t.tone].filter(ce.isSome).length;return i>0?e+b.O.predictionsPreviewHeaderHeight+b.O.predictionInsightHeight*i:e})),(0,m.O)(0),(0,g.U)((e=>Math.max(e+b.O.headerHeight,s))),(0,g.U)((e=>Math.min(e,750))))})(e,s).pipe((0,f.R)(this._assistantPopupIsReady.asObservable()),(0,v.b)(me.wW(this._height)));return l.createElement(mn,{textFieldRect:s,assistantLayout:this._params.layout.assistant,height:a,viewModels:e,emogenieService:this._params.emogenieService,ready:this._getReadyFn(),OuterElementsPortalSource:this._params.OuterElementsPortalSource})}))))))}get activeView(){return this._viewModels.pipe((0,h.w)((e=>{var t;return null!==(t=null==e?void 0:e.assistantLayoutViewModel.activeView)&&void 0!==t?t:(0,d.of)(null)})))}dispose(){this.close(),this._subs.dispose()}_trackAssistantOpen(e,t){const i=this._viewModels.get();if(null!=i){const{initialPositionOffset:s}=i.positionViewModel,{statisticsService:a}=this._params,r=a.alertCounts.get(),n=0===s.top&&0===s.left?"default"===this._params.layout.assistant.name?"smart":"hardcoded":"sticky",o=i.assistantLayoutViewModel.activeView.get();this._params.gnar.assistantPopupShow(o.type,this._height.get(),e.get().left,e.get().top,r.expandedViewSupported,r.freeClarity,r.critical,r.filter((e=>"priority"===e.assistantView)).expandedViewSupported,a.wordsCount.get(),n,o.type===nt.a.Type.popup?o.popupType:void 0,t,a.generalScore.get())}}_trackAssistantClose(){var e;const{statisticsService:t}=this._params,i=t.alertCounts.get(),s=(null===(e=this._viewModels.get())||void 0===e?void 0:e.assistantLayoutViewModel.activeView.get())||{type:nt.a.Type.default};this._params.gnar.assistantPopupCloseButtonClick(s.type,i.expandedViewSupported,i.freeClarity,i.critical,i.filter((e=>"priority"===e.assistantView)).expandedViewSupported,s.type===nt.a.Type.popup?s.popupType:void 0)}_trackAssistantDrag(e,t){const i=e.get();let s=i;this._subs.push(t.pipe((0,_.G)(),(0,w.h)((([e,t])=>e&&!t))).subscribe((()=>{const t=e.get();bt.E9.l1Distance(t,s)<10||(this._params.gnar.assistantPopupDrag(t.left,t.top,this._height.get(),i.left,i.top),s=t)})))}}function vn(e,t,i,s,a){s===E.R.emogenie?t.assistantLayoutViewModel.pushActiveView({type:nt.a.Type.emogenie}):s===E.R.proofitRequest?t.assistantLayoutViewModel.pushActiveView({type:nt.a.Type.proofitRequest}):s===E.R.proofitReview?t.assistantLayoutViewModel.pushActiveView({type:nt.a.Type.proofitReview}):s===E.R.takeawayCard&&i?t.readersAttentionViewModel.open({type:nt.a.ReadersAttention.Caller.Type.inlineCard,alertId:i}):!e&&s===E.R.assistantPopupService&&a&&t.assistantLayoutViewModel.pushActiveView({type:nt.a.Type.popup,popupType:a})}var _n=i(34311);class wn{constructor(e){this._originalHoverProvider=e,this._assistantHoverProviderSbj=new $e.X(null)}setAssistantHover(e){this._assistantHoverProviderSbj.next(e)}removeAssistantHover(){this._assistantHoverProviderSbj.next(null)}getHoveredStateBehavior(e){const t=this._originalHoverProvider.getHoveredStateBehavior(e);return this._assistantHoverProviderSbj.pipe((0,h.w)((i=>null==i?t:(0,ve.aj)(t,i.getHoveredStateBehavior(e),((e,t)=>t!==_n.pc.none?t:e)))))}}var yn=i(77150),En=i(40273),bn=i(36991);var Cn=i(62337),kn=i(30067);class Sn{constructor(){this._mapByHighlightId=new Map,this._mapByAlertId=new Map,this._highlightDataChanged=new c.xQ}_getVisualization(e){const t=this._mapByHighlightId.get(e);return null==t?void 0:t.visualization}getByAlertId(e){const t=this._mapByAlertId.get(e)||new Set;return Array.from(t).map((e=>this._mapByHighlightId.get(e))).filter((e=>!!e))}get(e){return this._mapByHighlightId.get(e)}has(e){return this._mapByHighlightId.has(e)}set(e,t){this._mapByHighlightId.set(e,t);const i=this._mapByAlertId.get(t.alertId)||new Set;i.add(e),this._mapByAlertId.set(t.alertId,i),this._highlightDataChanged.next(e)}delete(e){const t=this._mapByHighlightId.get(e);if(t){const i=this._mapByAlertId.get(t.alertId);void 0!==i&&(i.delete(e),0===i.size&&this._mapByAlertId.delete(t.alertId)),this._mapByHighlightId.delete(e)}this._highlightDataChanged.next(e)}forEach(e){this._mapByHighlightId.forEach(e)}getHighlightVisualization(e){return this._highlightDataChanged.pipe((0,w.h)((t=>t===e)),(0,g.U)((()=>this._getVisualization(e))),(0,m.O)(this._getVisualization(e)))}}class An{constructor(e,t,i,s,a=(()=>bt.E9.zero),r=y.Y.create(An.name)){this._denaliHighlights=e,this._getFluidHighlights=t,this._getTextMap=i,this._getParentRect=s,this._getParentScroll=a,this._log=r}register(e,t,i,s){if(null!==e){if(this._denaliHighlights.has(e))return this.update(e,t,i,s);{const a=new _i.Fd(e,t,this._getFluidHighlights(),this._getParentRect,this._getParentScroll),r={id:e,alertId:s.alertId,mark:a,visualization:i};this._denaliHighlights.set(e,r);const n=this._getTextMap().getPlainText();return this._getFluidHighlights().addHighlight(e,(0,kn.rX)((0,kn.mp)(a.range),n),s),r}}return null}remove(e){this._denaliHighlights.has(e)?(this._getFluidHighlights().removeHighlights([e]),this._denaliHighlights.delete(e)):this._log.warn(`can't remove mark #${e}, doesn't exist`)}update(e,t,i,s){const a=this._denaliHighlights.get(e);if(a){this._denaliHighlights.set(e,{...a,visualization:i});const r=this._getTextMap().getPlainText();return this._getFluidHighlights().updateHighlight(e,(0,kn.rX)(t.meta.range(),r),s),a}return this._log.warn("cannot update not existing highlight",e),null}clearAll(){this._denaliHighlights.forEach((e=>{this._getFluidHighlights().removeHighlights([e.id])}))}}var Mn=i(55073),xn=i(25938),In=i(64450),Ln=i(24645);class Tn{constructor(e,t,i,s,a,r,n=y.Y.create(Tn.name),o,l){this._highlights=e,this._textObserver=t,this._replacementService=i,this._layout=s,this._scroller=a,this._selectedHighlightsTracker=r,this._log=n,this._requestAwaitService=o,this._formattingService=l,this._subs=new Qe.w.Keeper,this._disposed=!1,this._alertsData=new Sn,this._highlightUpdater=new An(this._alertsData,(()=>this._highlights),(()=>this._textObserver.getTextSource()),(()=>{const e=this._layout.textField.rect.getApproximate();return Cn.Pf.create({...e.client,...e.size})}),(()=>this._layout.textField.scroll.getApproximate())),this.highlightHoverProvider={getHoveredStateBehavior:e=>this._alertsData.getHighlightVisualization(e).pipe((0,g.U)((e=>e&&e.type===_i.sO.Change.VisualState.Type.highlighted?{[_i.sO.Change.VisualState.Source.sidebar]:_n.pc.hovered_needs_attention,[_i.sO.Change.VisualState.Source.text]:_n.pc.hovered,[_i.sO.Change.VisualState.Source.api]:_n.pc.none}[e.source]:_n.pc.none)))},this._updateContentsBuffer=new c.xQ,this._flushUpdater=new c.xQ,this._echoChanges=new c.xQ,this.changes=_e.T(this._echoChanges,this._textObserver.contentChanges.async.pipe((0,w.h)((e=>e.changes.length>0)),(0,g.U)((({deltaChange:e})=>e)))),this.getContents=(e,t)=>{if(this._log.trace(`getContents, ${e}, ${t}`),this._formattingService){const i=this._textObserver.getTextSource().getRichText();return xn.RI.unsafeRes(void 0!==e?i.slice(e,void 0!==t?e+t:void 0):i)}{const i=void 0!==e?this.getText().slice(e,void 0!==t?e+t:void 0):this.getText();return xn.RI.resFromText(i)}},this.activeMarks=new $e.X(ce.none),this.contentUpdated=new c.xQ,this.hoveredMarks=new $e.X(ce.none),this.textChangedAfterPaste=new c.xQ,this.activeWord=new $e.X(ce.none),this.clickedWord=new $e.X(ce.none),this.ongoingSelection=new $e.X(!1),this._log.info(Tn.name+" created"),this._subs.push(this._subscribeToContentUpdates(),this._subscribeToSelectedHighlight())}pushChanges(e,t){this._log.trace("pushChanges",{change:e,source:t}),xn.RI.isFlush(e)?this._flushUpdater.next():xn.RI.isReset(e)?bn.s.deltaEq.equals(e.delta,this.getContents().delta)?this._echoChanges.next(e):this._log.warn("Got unknown reset"):this._updateContents(e.delta,t)}getText(){return this._log.trace("getText"),this._formattingService?(0,Mn.l)(this._textObserver.getTextSource().getRichText(),""):this._textObserver.getTextSource().getPlainText()}getTextLength(){return this._log.trace("getTextLength"),this.getText().length}flushChanges(){this._log.trace("flushChanges")}getCursor(){return this._log.trace("getCursor"),Bt.Y1.empty}setCursor(e,t,i){return this._log.trace("setCursor",{_index:e,_length:t,_source:i}),Ge.right(void 0)}getLastPossibleCursorPosition(){return this._log.trace("getLastPossibleCursorPosition"),0}_doMarkAction(e){const t=_n.y$.Id.create(e.id),i=e.meta.capiAlertId;switch(e.action){case Ln.v.Change.ActionType.create:const s=this._highlightUpdater.register(t,e,e.meta.visualState,{alertId:i,highlightId:t,alertDisplayType:e.meta.extensionDisplayType});return(null==s?void 0:s.mark)||null;case Ln.v.Change.ActionType.update:const a=this._highlightUpdater.update(t,e,e.meta.visualState,{alertId:i,highlightId:t,alertDisplayType:e.meta.extensionDisplayType});return(null==a?void 0:a.mark)||null;case Ln.v.Change.ActionType.remove:return this._highlightUpdater.remove(t),null;default:(0,wt.vE)(e)}}changeMarks(e){return this._disposed?(this._log.debug("changeMarks called after disposed, returning empty result"),Ln.v.Change.Result.getEmpty()):(this._log.trace("changeMarks",{rawMarks:e}),e.reduce(((e,t)=>{switch(t.action){case Ln.v.Change.ActionType.create:e.created.set(t.id,Ge.fromNullable(new Error("Cannot create mark"))(this._doMarkAction(t)));break;case Ln.v.Change.ActionType.update:e.updated.set(t.id,Ge.fromNullable(new Error("Cannot update mark"))(this._doMarkAction(t)));break;case Ln.v.Change.ActionType.remove:this._doMarkAction(t),e.removed.set(t.id,Ge.right(void 0))}return e}),Ln.v.Change.Result.getEmpty()))}scrollToMark(e,t){return this._log.trace("scrollToMark",{mark:e,opts:t}),this._scroller.scrollToMark(e,t)}_subscribeToContentUpdates(){return this._updateContentsBuffer.pipe((0,yn.R)((()=>(0,_e.T)((0,dt.H)((0,pt.Xd)(20)),this._flushUpdater).pipe((0,st.P)()))),(0,w.h)((e=>e.length>0)),(0,g.U)((e=>e.reduce(((e,t)=>e.compose(t)),new In.i)))).subscribe((e=>{const t=this._replacementService.performBatchReplacements((i=e,i.reduce((({actions:e,index:t},i)=>{const s=e[0];return bn.s.isInsertString(i)?(e.unshift({pos:{start:t,end:t},value:i.insert}),{actions:e,index:t}):bn.s.isInsertEmbed(i)?{actions:e,index:t+1}:bn.s.isRetain(i)?{actions:e,index:t+i.retain}:bn.s.isDelete(i)?(s&&s.pos.start===s.pos.end&&s.pos.end===t?s.pos={...s.pos,end:s.pos.end+i.delete}:e.unshift({pos:{start:t,end:t+i.delete},value:""}),{actions:e,index:t+i.delete}):void(0,je.vE)(i)}),{actions:[],index:0}).actions.reduce(((e,t)=>(e.length&&e[e.length-1].value&&e[e.length-1].pos.start===t.pos.start?e[e.length-1].value=`${t.value}${e[e.length-1].value}`:e.push(t),e)),[]))).then((()=>{const t=(e=>e.reduce((({formattings:e,index:t},i)=>En.m.hasFormatting(i)?bn.s.isInsertString(i)?(e.push({range:{start:t,end:"\n"===i.insert?t:t+i.insert.length},formatting:i.attributes}),{formattings:e,index:t+i.insert.length}):bn.s.isInsertEmbed(i)?{formattings:e,index:t+1}:bn.s.isRetain(i)?(e.push({range:{start:t,end:t+i.retain},formatting:i.attributes}),{formattings:e,index:t+i.retain}):{formattings:e,index:t}:bn.s.isInsertString(i)?{formattings:e,index:t+i.insert.length}:bn.s.isInsertEmbed(i)?{formattings:e,index:t+1}:bn.s.isRetain(i)?{formattings:e,index:t+i.retain}:bn.s.isDelete(i)?{formattings:e,index:t}:void(0,je.vE)(i)),{formattings:[],index:0}).formattings)(e);this._formattingService&&t.length&&(this._log.trace("Have formattings, applying",t),t.forEach((e=>{this._formattingService&&this._formattingService.apply(e.range,e.formatting)})))}),(()=>{this._log.warn("Failed to apply batch replacements")}));var i;this._requestAwaitService&&this._requestAwaitService.addRequest(t)}))}_subscribeToSelectedHighlight(){return this._selectedHighlightsTracker.pipe((0,g.U)((e=>(0,o.pipe)(ce.some(e),ce.map((e=>e.map((e=>{var t;return null===(t=this._alertsData.get(e))||void 0===t?void 0:t.mark})).filter((e=>Boolean(e))))))))).subscribe((e=>{this.activeMarks.next(e)}))}_updateContents(e,t){this._updateContentsBuffer.next((0,Mn.AQ)(e))}getSelectionRect(){throw this._log.trace("getSelectionRect"),Error("not implemented")}setContents(e){this._log.trace("setContents",{_value:e})}getHTML(){return this._log.trace("getHTML"),""}getPossibleCursorPosition(e,t){return this._log.trace("getPossibleCursorPosition",{_x:e,_y:t}),Ze.vM((()=>{throw new Error("Not implemented")}))}dispose(){this._highlightUpdater.clearAll(),this._subs.dispose(),this._log.info(Tn.name+" disposed"),this._disposed=!0}}var Fn=i(64213),Rn=i(14568),Vn=i(38365),Pn=i(51072);var On=i(80358),Hn=i(53487),Nn=i(24273),Un=i(27901),Bn=i(5760),Dn=i(99516),qn=i(44659),Zn=i(84233),Gn=i(57736);const Wn=(e,t,i,s,a,r,n,l=zn("permanentStorageSync",t.getContents()))=>{const c=new Qe.w.Keeper,d=function(e,t,i){const s=P.hg.create(ce.none),a=P.hg.create(ce.none);return{score:P.hg.create(ce.none),textInfo:P.hg.create(ce.none),checkingState:P.hg.create(e.checkingState),asyncChecksState:P.hg.create(e.asyncChecksState),context:i,contextCompleteness:i.view(Vn.j.calculateCompleteness),updateContext:e=>{const t=!Ti.R$.equals(i.get(),e);return i.set(e),t},defaultContext:s,updateDefaultContext:e=>{const t=!(0,o.pipe)((0,z.tuple)([s.get(),e],oe.vB(Ti.R$.equals)));return s.set(e),t},documentText:t.getText(),documentLength:P.hg.create({full:t.getTextLength(),trimmed:t.getTextLength()}),counters:P.hg.create(Vn.dM.group.empty),calculateStats:()=>Pn.Vi(e.requestDocStats).then((e=>(a.set(ce.some(e)),e))),recentDocumentStats:a}}(e,t,i);c.push(e.events.pipe(v.b((t=>{var i;d.checkingState.set(e.checkingState),On.h.is("text_info")(t)?d.textInfo.set(ce.some(t.data)):On.h.is("finish")(t)?d.score.set(t.score):On.h.is("feedback_ack")(t)?(0,o.pipe)(ce.fromNullable(null===(i=t.outcomeScores)||void 0===i?void 0:i.GeneralScore),ce.map((e=>Math.trunc(100*e))),ce.map((e=>{d.score.modify((0,z.flow)(ce.map((t=>({...t,rank:e})))))}))):On.h.is("session_started")(t)&&d.updateDefaultContext(t.defaultDocumentContext)}))).subscribe(),a.contentChanges.async.pipe(tt.b(300),g.U((e=>e.newText)),g.U((e=>({full:e.length-1,trimmed:e.trim().length}))),v.b(me.wW(d.documentLength))).subscribe()),(0,o.pipe)(r(),ce.map((e=>{d.updateDefaultContext(Ti.R$.parseDefault(e.defaultDocumentContext))})));const p=new Gn.Xr,h=new Bn.Ek,m=new Un.S(p,h,(()=>t.getContents().delta),e.events,e,d.counters,(e=>n?n.addStateToRawAlert(e):e),((e,t)=>Be.bZ.isDuplicatedBy(e,t)||Be.bZ.isTakeawayOverlap(e,t,.75))),u=Hn.e.create(m.state),f=new Nn.k(u,m._ops);return c.push(qn.R.init(Zn.$.connectAsPrimarySourceWithoutDuplex(t),e.events,l,Dn.n.ignoreTEResult(e),Dn.n.ignoreResult(p),h,Dn.A.merge([m])).subscribe()),e.loadAlerts(s()),m.flushAlerts(),{alertsList:m,alertsReader:u,alertsService:f,positionManager:p,sessionModel:d,shutdown:()=>{m.dispose(),c.dispose()}}},zn=(e,t)=>({pushChanges:ne.ZT,changes:(new c.xQ).pipe(m.O(t))});class jn{constructor(e,t,i,s,a,r,n,o,l,c,d){this.connectionState=e,this.pageState=t,this.actions=i,this.gnar=s,this.user=a,this._hoverProvider=r,this.document=n,this.formattingService=o,this.denaliViewAdapter=l,this.capiProxy=c,this.engine=d,r.setAssistantHover(l.highlightHoverProvider)}static create(e){var t;const i=new Tn(e.highlights,e.textObserver,e.replacementService.get(),e.layout,e.scroller,e.selectedHighlightsTracker,void 0,e.requestAwaitService,null===(t=e.formattingService)||void 0===t?void 0:t.get()),s=Rn.p.create(e.checkingService.get(),e.checkingServiceInitialState,e.alertsTransformer,e.alertProcessor,e.sidebarEvents),a=Wn(s,i,e.document.settings.lens("context"),(()=>{var t,i;return null!==(i=null===(t=e.getExistingAlerts)||void 0===t?void 0:t.call(e))&&void 0!==i?i:(0,Fn.q)(e.alertProcessor)}),e.textObserver,(()=>e.checkingServiceInitialState.value.lastStart),e.smartPhrasesFeature);return new jn(e.connectionState,e.pageState,e.actions,e.gnar,e.user,e.hoverProvider,e.document,e.formattingService,i,s,a)}dispose(){this.capiProxy.dispose(),this.denaliViewAdapter.dispose(),this.engine.shutdown(),this._hoverProvider.removeAssistantHover()}}var Xn=i(79462);class Yn{constructor({layout:e}){this._scroller=function({scrollToMarkRect:e,scrollToRange:t}){return{scrollToMark:(i,s)=>new Xn.y((a=>(0,o.pipe)(_i.Fd.getMarkRect(i),Ze.L9((()=>(t((0,kn.mp)(i.range)),_i.Fd.getMarkRect(i)))),Ge.fold((()=>{a.error(new Error("Cannot get mark's rect: "+i.id))}),(t=>{a.next(void 0),e(t,s)})))))}}({scrollToMarkRect(t,i){const s=e.textField.visibleRect.getApproximate();let a=(i&&i.paddingTop||0)-s.client.top;(a<=0||a>=s.size.height)&&(a=s.size.height/2);const r=t.top-a-s.client.top,n=t.right-t.left,o=Math.max(0,(s.size.width-n)/2);t.left,s.client.left;requestAnimationFrame((()=>e.textField.scroller.scrollBy({top:r,left:void 0})))},scrollToRange(){}})}scrollToMark(e,t){return this._scroller.scrollToMark(e,t)}}var Kn=i(45288),Qn=i(42187);function $n(e,t){return(65535&e)*t+(((e>>>16)*t&65535)<<16)}function Jn(e,t){return e<<t|e>>>32-t}const eo=3432918353,to=461845907;class io{getHash(e,t=0){const i=(new TextEncoder).encode(e),s=i.length%4,a=i.length-s;let r,n=t,o=0;for(r=0;r<a;r+=4)n=$n(Jn(n^$n(Jn($n(i[r]|i[r+1]<<8|i[r+2]<<16|i[r+3]<<24,eo),15),to),13),5)+3864292196;switch(o=0,s){case 3:o^=i[r+2]<<16;case 2:o^=i[r+1]<<8;case 1:o^=i[r],n^=$n(Jn($n(o,eo),15),to)}return l=$n((l=n^i.length)^l>>>16,2246822507),((l=$n(l^l>>>13,3266489909))^l>>>16)>>>0;var l}}var so;!function(e){e.preferred=io}(so||(so={}));class ao{constructor(e){this._params=e,this.sidebarEvents=new c.xQ,this.hoverProvider=new wn(this._params.hoverProvider),this.selectedHighlightsTracker=this._params.highlights.getSelectedHighlightsTracker({textField:this._params.originalTextField,selectionService:this._params.selectionService}),this.goalPrediction=new Kn.X(this._params.state.view("user","experiments").view((e=>{var t;return null!==(t=(null==e?void 0:e.goalPrediction)&&!(null==e?void 0:e.goalPredictionShadow))&&void 0!==t&&t})),((e,t)=>this._checkingService&&this._checkingService.lazyCheckingService.get().onIntentFeedback(e,t))),this.positionModel=((e,t,i)=>{const s=t.view("page","domain").get(),a=(0,Qn.bk)(e,-1,(e=>e.nodeName)),r=`${s},${e.nodeName},${a.join()}`,n=(new so.preferred).getHash(r).toString(),o=t.view("page","assistantSettings").view((e=>{var t,i;return e&&null!==(i=null===(t=e[n])||void 0===t?void 0:t.initialPositionOffset)&&void 0!==i?i:bt.E9.zero}));return{initialPositionOffset:o,updateInitialPositionOffset:e=>{bt.E9.equal(e,o.get())||i.patchAssistantSettings({[n]:{initialPositionOffset:e}})}}})(this._params.originalTextField,this._params.state,this._params.actions),this.isTextFieldEmpty=this._params.textObserver.contentChanges.async.pipe(g.U((e=>""===e.newText.trim())),Je.x()),this._checkingService=null}setCheckingService(e){this._checkingService=e}getCheckingServiceState(){var e;return null===(e=this._checkingService)||void 0===e?void 0:e.state.value}createIntegration(){const{layout:e,highlights:t,textObserver:i,replacementService:s,alertProcessor:a,state:r,gnar:n,alertsTransformer:o,document:l,requestAwaitService:c,formattingService:d,actions:p,getCheckingServicePreviousState:h,createAssistantScroller:m=(()=>new Yn({layout:e})),getExistingAlerts:u}=this._params;if(null==this._checkingService)return null;const g=null==h?void 0:h();g&&(this._checkingService.state.value=g);const f=m(),{user:v}=r.get();return jn.create({layout:e,alertProcessor:a,connectionState:r.view((e=>e.connection)),pageState:r.view((e=>e.page)),actions:p,highlights:t,textObserver:i,replacementService:s,checkingService:this._checkingService.lazyCheckingService,checkingServiceInitialState:this._checkingService.state,gnar:n,user:{isPremium:v.premium,isAnonymous:v.anonymous,experiments:v.experiments,customFields:v.customFields},hoverProvider:this.hoverProvider,selectedHighlightsTracker:this.selectedHighlightsTracker,scroller:f,sidebarEvents:this.sidebarEvents,document:l,alertsTransformer:o,requestAwaitService:c,formattingService:d,getExistingAlerts:u,smartPhrasesFeature:this._params.smartPhrasesFeature})}dispose(){var e;null===(e=this._checkingService)||void 0===e||e.state.dispose()}}},66740:(e,t,i)=>{var s=i(93476),a=i(91678),r=i(80300),n=s((function(e){return e[1]})),o=a(r);n.push([e.id,"@keyframes _Yz4yI-spin{0%{transform:rotate(0)}100%{transform:rotate(360deg)}}._UaSlh-proofitRequestFormBtnLoadingSpinner{width:32px;height:32px;background-size:32px 32px;background-image:url("+o+");background-repeat:no-repeat;animation:_Yz4yI-spin 1s linear infinite;margin:0 auto}",""]),n.locals={proofitRequestFormBtnLoadingSpinner:"_UaSlh-proofitRequestFormBtnLoadingSpinner",spin:"_Yz4yI-spin"},e.exports=n},55271:(e,t,i)=>{var s=i(93476),a=i(91678),r=i(58947),n=s((function(e){return e[1]})),o=a(r);n.push([e.id,"._AXhEk-proofitRequestForm{width:100%;height:100%;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;}._AXhEk-proofitRequestForm ._1CZ3g-proofitRequestFormImg{width:256px;height:48px;background-size:256px 48px;background-image:url("+o+");background-repeat:no-repeat;margin-bottom:16px;-ms-flex-negative:0;flex-shrink:0}._AXhEk-proofitRequestForm ._2f8us-proofitRequestFormTitle{font-family:Inter,sans-serif;font-style:normal;font-weight:bold;color:#0e101a;font-size:16px;line-height:24px;margin-bottom:4px}._AXhEk-proofitRequestForm ._2t-MU-proofitRequestFormDescription{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;margin-bottom:18px}._AXhEk-proofitRequestForm ._3bGTw-proofitRequestFormCostAndTime{display:-ms-grid;display:grid;-ms-grid-columns:1fr 1fr;grid-template-columns:1fr 1fr;margin-bottom:32px;}._AXhEk-proofitRequestForm ._3bGTw-proofitRequestFormCostAndTime ._3-OP_-proofitRequestFormTime{border-left:1px solid #c6cbde;padding-left:16px}._AXhEk-proofitRequestForm ._3bGTw-proofitRequestFormCostAndTime ._2R7q7-proofitRequestFormCostAndTimeTitle{font-family:Inter,sans-serif;font-style:normal;font-weight:bold;color:#0e101a;font-size:16px;line-height:24px}._AXhEk-proofitRequestForm ._3bGTw-proofitRequestFormCostAndTime ._3xdAw-proofitRequestFormCostAndTimeSubtitle{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:11px;line-height:16px}._AXhEk-proofitRequestForm ._vKrAd-proofitRequestFormRequestBtn{margin-bottom:7px}._AXhEk-proofitRequestForm ._CaeP7-proofitRequestFormUnavailableMsg{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:12px;line-height:18px;text-align:center}._AXhEk-proofitRequestForm ._DyHk9-proofitRequestFormFreeTrialFootnote{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#6d758d;font-size:11px;line-height:16px;margin-top:32px;width:100%;-ms-flex-positive:1;flex-grow:1;-ms-flex-negative:0;flex-shrink:0;display:-ms-flexbox;display:flex;-ms-flex-direction:column-reverse;flex-direction:column-reverse;-ms-flex-align:center;align-items:center}._AXhEk-proofitRequestForm ._3-3Od-proofitRequestFormPrivacyInfoTitle{font-family:Inter,sans-serif;font-style:normal;font-weight:bold;color:#0e101a;font-size:16px;line-height:24px;margin-bottom:10px}._AXhEk-proofitRequestForm ._HQATa-proofitRequestFormPrivacyInfoDescription{margin-bottom:32px;}._AXhEk-proofitRequestForm ._HQATa-proofitRequestFormPrivacyInfoDescription ._1SxBs-proofitRequestFormPrivacyInfoDescriptionItem{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;margin-bottom:10px;display:-ms-grid;display:grid;-ms-grid-columns:1fr auto;grid-template-columns:1fr auto;grid-column-gap:13px;-ms-flex-align:baseline;align-items:baseline;}._AXhEk-proofitRequestForm ._HQATa-proofitRequestFormPrivacyInfoDescription ._1SxBs-proofitRequestFormPrivacyInfoDescriptionItem ._wLxAr-proofitRequestFormPrivacyInfoDescriptionItemBulletPoint{width:6px;height:6px;background:#0e101a;border-radius:100%}",""]),n.locals={proofitRequestForm:"_AXhEk-proofitRequestForm",proofitRequestFormImg:"_1CZ3g-proofitRequestFormImg",proofitRequestFormTitle:"_2f8us-proofitRequestFormTitle",proofitRequestFormDescription:"_2t-MU-proofitRequestFormDescription",proofitRequestFormCostAndTime:"_3bGTw-proofitRequestFormCostAndTime",proofitRequestFormTime:"_3-OP_-proofitRequestFormTime",proofitRequestFormCostAndTimeTitle:"_2R7q7-proofitRequestFormCostAndTimeTitle",proofitRequestFormCostAndTimeSubtitle:"_3xdAw-proofitRequestFormCostAndTimeSubtitle",proofitRequestFormRequestBtn:"_vKrAd-proofitRequestFormRequestBtn",proofitRequestFormUnavailableMsg:"_CaeP7-proofitRequestFormUnavailableMsg",proofitRequestFormFreeTrialFootnote:"_DyHk9-proofitRequestFormFreeTrialFootnote",proofitRequestFormPrivacyInfoTitle:"_3-3Od-proofitRequestFormPrivacyInfoTitle",proofitRequestFormPrivacyInfoDescription:"_HQATa-proofitRequestFormPrivacyInfoDescription",proofitRequestFormPrivacyInfoDescriptionItem:"_1SxBs-proofitRequestFormPrivacyInfoDescriptionItem",proofitRequestFormPrivacyInfoDescriptionItemBulletPoint:"_wLxAr-proofitRequestFormPrivacyInfoDescriptionItemBulletPoint"},e.exports=n},20532:(e,t,i)=>{var s=i(93476),a=i(91678),r=i(16569),n=s((function(e){return e[1]})),o=a(r);n.push([e.id,"._fYSOQ-proofitReviewForm ._G0q6Z-proofitReviewFormImg{width:82px;height:80px;background-size:82px 80px;background-image:url("+o+");background-repeat:no-repeat;margin-bottom:16px;margin-left:auto;margin-right:auto}._fYSOQ-proofitReviewForm ._KZJJY-proofitReviewFormTitle{font-family:Inter,sans-serif;font-style:normal;font-weight:bold;color:#0e101a;font-size:16px;line-height:24px;margin-bottom:4px}._fYSOQ-proofitReviewForm ._3XcJO-proofitReviewFormDescription{font-family:Inter,sans-serif;font-style:normal;font-weight:normal;color:#0e101a;font-size:14px;line-height:21px;font-feature-settings:'ss03' on;margin-bottom:32px}",""]),n.locals={proofitReviewForm:"_fYSOQ-proofitReviewForm",proofitReviewFormImg:"_G0q6Z-proofitReviewFormImg",proofitReviewFormTitle:"_KZJJY-proofitReviewFormTitle",proofitReviewFormDescription:"_3XcJO-proofitReviewFormDescription"},e.exports=n},80111:(e,t,i)=>{var s=i(93476)((function(e){return e[1]}));s.push([e.id,"._1uFm--scoreRing{transition:stroke-dashoffset .35s;transform:rotate(-90deg);transform-origin:50% 50%;cursor:pointer;}._1uFm--scoreRing svg circle{transition:all .35s ease-in-out;transition-property:stroke-dashoffset,stroke}._3cJ_j-loading svg circle{transform-origin:50% 50%;transition:none;animation:_1EwuF-rotation 2s infinite linear}._2gh3G-scoreText{font-family:Inter,sans-serif;font-weight:bold;font-feature-settings:'ss01'}@keyframes _1EwuF-rotation{from{transform:rotate(0)}to{transform:rotate(-359deg)}}",""]),s.locals={scoreRing:"_1uFm--scoreRing",loading:"_3cJ_j-loading",rotation:"_1EwuF-rotation",scoreText:"_2gh3G-scoreText"},e.exports=s},41794:e=>{e.exports={container:"rWxB3",contentContainer:"_1MFbY",thankYouContentContainer:"_3tH8C",main:"_2DNNh",thankYouMain:"_1wXyS",question:"UhER3",helperText:"_3te2s",optionsContainer:"_2rd2k",checkboxOption:"_8Cmo7",radioOption:"_3lgCn",thankYou:"_3DVR-",thankYouSubtext:"_2tIVN",buttonsContainer:"bOyYX"}},33751:e=>{e.exports={cardList:"_1Eape",cardListFooterDynamic:"Inkbe",cardListFooterStatic:"_7OpWh",cardListFooterAnimate:"_29PbU",upgradeHookWrapper:"_9GpAY",footer_button:"_1Vj8X",assistant:"AnaVG",feedback_button:"ncuAb",personalization_button:"_3lVFJ",dragging:"_1XWvb",mainView:"_38aRY"}},78846:e=>{e.exports={actions_hovered:"Xf2Pk",header:"_3p6xo",draggableWrapper:"_2_Oau",draggable:"_1m9e2",headerActions:"_2asjJ",headerActionBtn:"_2u6D9",headerActionBtnProofitIcon:"_1GEsJ",logoscore_fadein:"xzxut",fadein:"_30rWn",logoscore_fadeout:"_1DBSi",fadeout:"_24pVK",logo_score:"_6nCpo",spin:"_2gcAi"}},19217:e=>{e.exports={insight:"_3o8h_",insight__icon:"_1xYf9",insight__inline_icon:"svSbC",insight__inline_text:"_3Uft0",insight__text:"_4HNa-",insight__title:"_3oxut",insight__level:"_3kcds"}},45666:e=>{e.exports={card:"_3zZUt",expand:"H6oxJ",thank:"_2vHPb",showWithFade:"_3VA9f",hide:"_3GQd2",hideWithFade:"_2EbFz",content:"_3xKyU",emojiAndTitle:"_3e-Dd",emoji:"_3yRHv",voteAndBetaBadge:"_2fnci",betaBadgeAndCloseButton:"R_dL3",betaBadge:"_1CQFV",closeButton:"Gsgji",expandedInfo:"VT1X4"}},75039:e=>{e.exports={panel:"_1_EJL",score_container:"_2K_dc",info_icon:"wbvN6",lens_switch:"_3zrPc"}},98029:e=>{e.exports={predictions:"_3feHG",predictions__header:"_35Gcg",predictions__card:"_2xc9F",counterContainer:"_2co0s",predictions__zero_text:"_25oPK",predictions__emogenie_pulsing:"p-kia"}},40145:e=>{e.exports={relatedSuggestionsTitle:"_3lmjh"}},55364:e=>{e.exports={viewOverlay:"_3iGYO",content:"_2sw8A",footer:"_3kpn-",viewOverlayGoBack:"_2Z1Xu",defaultViewOverlayPanel:"jqEio",gradientViewOverlayPanel:"_3Qgxa",proofitViewOverlayPanel:"_9lDqb",defaultViewOverlayHeader:"_1GTGF",defaultViewOverlayContent:"nXzeg",gradientViewOverlayContent:"_2hao0",proofitViewOverlayContent:"_2XeMU",logo:"xQSpk",proofitViewOverlayHeader:"_3dGrl",proofitViewOverlayHeaderBetaBadge:"_2wTGA"}},91197:e=>{e.exports={checklistAnimationWrapper:"SwRGm",animateChecklistHeightChanges:"_3ajnS",checklistCollapsed:"_2misS",checklistHeader:"_3km-f",checklistTitle:"_2r9Yo",checklistFirstItemPreview:"_29yzo",checklistExpanded:"_1M7Xt",checklistGroupHeader:"_3Tvt-",checklistItem:"ETzli",itemBullet:"_1KBAD",itemText:"iXUS0",checked:"JbfTD",fadeIn:"_3vdyB",fadeInFast:"_1aVF8",fadeOut:"VeNTM",fadeOutFast:"eO5gv",fadeInContentChange:"_23vih",fadeOutContentChange:"_3wGOA",expand:"EUb4D",collapsedToExpanded:"bcdnr",collapse:"_3xSXQ",expandedToCollapsed:"vcwfv"}},90295:e=>{e.exports={viewOverlay:"_3-ynL",content:"_272rY",footer:"_23Hk5",viewOverlayGoBack:"_20r1E",defaultViewOverlayPanel:"fOEpx",gradientViewOverlayPanel:"VmOOi",onboardingPanel:"_2MGhh",defaultViewOverlayHeader:"civcO",defaultViewOverlayContent:"_2bKbb",gradientViewOverlayContent:"_3GMhV",logo:"_3HWWb",onboardingPanelContent:"_2OSAG",onboardingBanner:"_31lP9",onboardingBannerImage:"_3GEtW",onboardingHeader:"_21vy0",onboardingBannerMessage:"_13zKm",onboardingContent:"_2_FA9",heatmap:"Qcuqf",gettingStartedButton:"_1Qgvx"}},22764:e=>{e.exports={viewOverlay:"_24v8y",content:"_1GUCQ",footer:"_VXnz",viewOverlayGoBack:"_2vYal",defaultViewOverlayPanel:"_181-n",gradientViewOverlayPanel:"_30LCU",defaultViewOverlayHeader:"_2YCIK",defaultViewOverlayContent:"_1T1GW",gradientViewOverlayContent:"_2hMw0",logo:"_1wpBP",cardList:"_2M4t-",headerGroup:"Qwt6V",questionMarkButton:"_2U3v1",questionMarkIcon:"_3hiB8",summaryWrapper:"_3f-rw",message:"_2UO09",inlineButton:"_1-m6b"}},91574:e=>{e.exports={settingsDoneButton:"_3hYyu"}},35327:e=>{e.exports={summary_heading:"_28Zxw",summary_wrapper:"_3qF24",summary_fadein:"_1OTrB",fadein:"_1ETLE",summary_fadeout:"GJSzn",fadeout:"YHKQy"}},73008:e=>{e.exports={viewOverlay:"_8FYR8",content:"D8x8A",footer:"_1oEdF",viewOverlayGoBack:"_2IRn0",defaultViewOverlayPanel:"_3wpsL",gradientViewOverlayPanel:"_2zadI",defaultViewOverlayHeader:"_3Y5Ie",defaultViewOverlayContent:"_1FPwk",gradientViewOverlayContent:"_2WqSK",logo:"oiRsy"}},62513:e=>{e.exports={compactSuccessLens:"_1G56p",compactSuccessLensContainer:"_1cOu3"}},47476:e=>{e.exports={cardWrapper:"_1RweD",bundleCardWrapper:"_11UJn"}},74880:e=>{e.exports={cardList:"_2bCPN"}},30509:e=>{e.exports={premiumLens:"_2XK23"}},879:e=>{e.exports={successLens:"_1mbLA"}},79850:e=>{e.exports={wrapper:"_2PLre"}},75259:e=>{e.exports={container:"_2D4XC",baseGrid:"_2pCwn",bottomLeft:"_3_LGs",bottomRight:"_2tHhO",top:"_2Qg0A",notificationWrapper:"_3waR1"}},67129:e=>{e.exports={sidebarContainer:"_1_f6i"}},71527:e=>{e.exports={selected:"_3Ibej",label:"EKNV1",option:"ygVjN"}},66402:e=>{e.exports={american:"pyFmV",australian:"_2WGo3",british:"_1nkJZ",canadian:"_35Lt7"}},68089:e=>{e.exports={hover_blocker:"_1b9OS"}},26485:e=>{e.exports={select_checkbox:"_3jXk9",beta:"_2D7H7",new:"_3Lqg-",checkbox:"_2nj-e",checkbox_check:"_28S0f",on:"UigB5",off:"_30ryz",checkbox_check_round:"_1PwEM",checkbox_control_wrapper:"_1KIp6",grayOut:"ZleQc",on_off:"_3mcZ6",disabled:"_1Sp_7",bottom_line:"NahjE",setting_item:"_3JLH2"}},6304:e=>{e.exports={line:"_2vgUt",disabled:"_3kA-F",dialectPicker:"_2v6OJ"}},47740:e=>{e.exports={container:"_1eoMt",contant:"_255K3",title:"_3hI6a",spacer:"_2uzpC"}},17324:e=>{e.exports={windows:"_2wKpF",setting_item:"_6eFop",fixing:"_3sQF9",thin_text:"_2m369",footer:"AIrzw",gr_popup_settings:"_18flg",footer_btn:"_16bxQ",short_border:"FqAkb",top:"_2N9kH",show_news:"_3gR-M",news:"_1cBf5",news_content:"_3szOJ",close_news:"_8vCda",upgraded:"_1D3x1",content:"_36NTm",since:"dfV8r",business:"Nb2Rp",edu:"_3Q9EY",my_grammarly:"_1NXBN",new_document:"bpEGW",unsupported_site:"iBAYN",unsupported_item:"_13zLn",unsupported_title:"_3rfYX",domain:"_1tlAE",domain_in_details:"_2z4_y",unsupported_temporary:"Xw4Jp",unsupported_permanently:"_27hK2",unsupported_grammarly:"_2xTYa",diamond:"p3X6p",userPanel:"_3cZ8t",email:"bBX3_",link:"_3ko8g",blue:"b4yKe",edc_stripe:"_1wkrp",line:"_2_8JS",not_supported:"kU9B_",site_switcher:"_2KZQq",upgrade:"_1zI1G",def_switcher:"_29_cp",on:"_2JO5i",off:"_3f4Zs",favicon:"sjSDn",hotkeys:"DWDpl",shortcut_title:"rI_db",shortcut:"ynWKZ",summary:"_1cNov",upgrade_title:"_3aOe6"}},23345:e=>{e.exports={line:"NMkwQ",content:"lWYTI",upgrade:"_2GRJe"}},16569:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s="chrome-extension://__MSG_@@extension_id__/src/images/d657c003000c65041a4ee3bdff85f8f6/proofreader-review.svg"},58947:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s="chrome-extension://__MSG_@@extension_id__/src/images/7d9261bd2b318187ad1c072a261520e4/proofreaders.svg"},80300:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>s});const s="chrome-extension://__MSG_@@extension_id__/src/images/4c9871d74987ca4155d3df470174f4e3/spinner.svg"}}]);