/*! For license information please see 463.vendors.chunk.js.LICENSE.txt */
(window.webpackChunk=window.webpackChunk||[]).push([[463],{12738:(e,t,n)=>{"use strict";var r;n.d(t,{$:()=>r}),function(e){!function(e){e.echo="echo",e.silent="silent"}(e.Mode||(e.Mode={}))}(r||(r={}))},59443:(e,t,n)=>{"use strict";n.d(t,{Y1:()=>r,uq:()=>u});var r,i,a,o,s,u,c,l,d=n(42654),p=n(22232),f=n(8125),m=n(60705);!function(e){e.nonEmpty=function(e){return e.length>0},e.isEmpty=function(e){return 0===e.length},e.toTextRange=function(e){return m.SV.create(e.index,e.index+e.length)},e.eq=(0,d.fromEquals)((function(e,t){return e.index===t.index&&e.length===t.length})),e.empty={index:0,length:0}}(r||(r={})),function(e){e.DenaliOtherDocSession="denaliOtherDocSession",e.DenaliSameDocSession="denaliSameDocSession",e.MSOutlook="outlook",e.MSWord="word",e.MSWordOnline="wordOnline",e.MSExcel="excel",e.MSOffice="msoffice",e.ProbablyMSOutlookOnline="probablyMSOutlookOnline",e.GDocs="gdocs",e.GSheets="gsheets",e.ProbablyGMail="probablyGmail",e.CocoaHTMLWriter="cocoaHTMLWriter",e.DropboxPaper="dropbox_paper",e.PlainText="plainText",e.Unknown="unknown",e.Synthetic="synthetic"}(i||(i={})),function(e){e.empty={top:0,bottom:0}}(a||(a={})),function(e){!function(e){e.top="top",e.middle="middle",e.bottom="bottom"}(e.Y||(e.Y={})),function(e){e.left="left",e.middle="middle",e.right="right"}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.X.left:return t.left;case e.X.middle:return t.left+t.width/2;case e.X.right:return t.right;default:return(0,p.vE)(n)}}}}(e.X||(e.X={})),function(t){t.toViewport=function(t){return function(n){switch(n){case e.Y.top:return t.top;case e.Y.middle:return t.top+t.height/2;case e.Y.bottom:return t.bottom;default:return(0,p.vE)(n)}}}}(e.Y||(e.Y={}))}(o||(o={})),function(e){var t;!function(e){e.textMaybeWithFormatting="text",e.onlyFormatting="formatting"}(t=e.Type||(e.Type={})),e.isTextMaybeWithFormatting=function(e){return e.type===t.textMaybeWithFormatting},e.isOnlyFormatting=function(e){return e.type===t.onlyFormatting}}(s||(s={})),function(e){e.none="none",e.fast="fast",e.initial="initial",e.fake="fake"}(u||(u={})),function(e){var t;!function(e){e.bold="bold",e.italic="italic",e.underline="underline",e.strike="strike",e.header1="header1",e.header2="header2",e.bulletList="bulletList",e.dashedList="dashedList",e.orderedList="orderedList",e.link="link"}(t=e.Type||(e.Type={})),e.is=function(e){return(0,f.CI)(t,e)},function(e){e.is=function(e){return void 0!==e[t.link]}}(e.LinkPayload||(e.LinkPayload={}))}(c||(c={})),function(e){e.undo="undo",e.redo="redo",e.cut="cut",e.copy="copy",e.paste="paste",e.selectAll="selectAll"}(l||(l={}))},23594:(e,t,n)=>{"use strict";n.d(t,{s:()=>r});var r,i=n(45980),a=n(73805),o=n(64450),s=n(64909),u=n(8125),c=n(42654),l=n(89943),d=n(55415);!function(e){e.isInsert=function(e){return"insert"in e},e.isInsertString=function(t){return e.isInsert(t)&&"string"==typeof t.insert},e.isInsertEmbed=function(t){return e.isInsert(t)&&!e.isInsertString(t)},e.isDelete=function(e){return"delete"in e},e.isRetain=function(e){return"retain"in e},e.containsInsertsOnly=function(t){return t.ops.every(e.isInsert)},e.getInsertLength=o.i.Op.length,e.getTrimmedInsertLength=function(t){return e.isInsertString(t)?t.insert.trim().length:1},e.match=function(t,n,r){return function(i){return e.isInsert(i)?t(i):e.isDelete(i)?n(i):r(i)}},e.getAttr=function(t,n){return e.isDelete(t)||!t.attributes?s.none:"function"==typeof n?(0,a.pipe)(s.fromNullable(Object.keys(t.attributes).find(n)),s.map((function(e){return t.attributes[e]}))):s.fromNullable(t.attributes[n])},e.operationLength=o.i.Op.length;var t=function(e){return-e.delete};e.getOperationOffset=e.match(o.i.Op.length,t,o.i.Op.length);var n=function(e){return function(t){return t.ops.map(e).reduce(u.Sm,0)}},r=function(){return 0};e.calcDiffLength=n(e.match(o.i.Op.length,t,r)),e.calcAmountLength=n(e.match(o.i.Op.length,o.i.Op.length,r)),e.calcAffectedLength=n(e.match(r,o.i.Op.length,o.i.Op.length)),e.rangeOfTheChange=function(t){var n=e.match(i.constTrue,i.constTrue,(function(e){return Boolean(e.attributes)}));return t.ops.reduce((function(t,r){var i=t[0],o=t[1],u=e.operationLength(r),c=o+u;return[(0,a.pipe)(i,s.fold((function(){return n(r)?s.some([o,c]):s.none}),(function(e){return n(r)?s.some([e[0],c]):s.some(e)}))),c]}),[s.none,0])[0]},e.isEqual=function(t){return function(n,r){return e.match((function(n){return e.isInsert(r)&&n.insert===r.insert&&t(n.attributes,r.attributes)}),(function(t){return e.isDelete(r)&&t.delete===r.delete}),(function(n){return e.isRetain(r)&&n.retain===r.retain&&t(n.attributes,r.attributes)}))(n)}},e.deltaEq=c.fromEquals((function(t,n){return t.ops.length===n.ops.length&&l.Hx(t.ops,n.ops,e.isEqual(d.vZ))})),e.normalizeDelta=function(e){return(new o.i).compose(e)};var p=function(e){return e&&Object.keys(e).reduce((function(t,n){return t[n]="string"==typeof e[n]?"<"+e[n].length+">":e[n],t}),{})};e.anonymizeTextAndStringAttrs=function(t){return t.ops.reduce((function(t,n){return e.match((function(n){return t.insert("string"==typeof n.insert?"<"+e.getInsertLength(n)+">":"<embed>",p(n.attributes))}),(function(e){return t.delete(e.delete)}),(function(e){return t.retain(e.retain,p(e.attributes))}))(n)}),new o.i)},e.squash=function(e){return e.reduce((function(e,t){return e.compose(new o.i(t))}),new o.i)},e.cleanAllAttrs=function(t){return t.reduce((function(t,n){return e.match((function(e){return t.insert(e.insert)}),(function(e){return t.delete(e.delete)}),(function(e){return t.retain(e.retain)}))(n)}),new o.i)};var f=function(e){return s.fromNullable(e.attributes)};e.getAttrs=e.match(f,(function(){return s.none}),f),e.skipAny=i.constFalse;e.cleanDelta=function(t,n){return function(r){var i=function(e){return e&&Object.keys(e).filter((function(e,t,r){return n(e,r.slice(0))})).reduce((function(t,n){return t[n]=e[n],t}),{})};return r.reduce((function(n,r){return e.match((function(e){return n.insert("string"==typeof e.insert||t(e.insert)?e.insert:" ",i(e.attributes))}),(function(e){return n.delete(e.delete)}),(function(e){return n.retain(e.retain,i(e.attributes))}))(r)}),new o.i)}},e.splitToDeleteThenInsert=function(t){return t.reduce((function(t,n){var r=t[0],i=t[1];return e.match((function(e){return[r,i.push(e)]}),(function(e){return[r.push(e),i]}),(function(e){return[r.push({retain:e.retain}),i.push(e)]}))(n)}),[new o.i,new o.i]).map((function(e){return e.chop()}))},e.nonEmpty=function(e){return e.ops.length>0}}(r||(r={}))},93583:(e,t,n)=>{"use strict";n.d(t,{u:()=>r});var r,i=n(27378),a=n(73805),o=n(64909),s=n(83078),u=n(52479),c=n(99391),l=n(60430),d=n(2844),p=n(78259),f=n(2834),m=n(9223);!function(e){e.Manager=function(t){var n=t.children,r=t.remSize,a=u.Dx(r).pipe(c.shareReplay({refCount:!0,bufferSize:1}));return l.P.useSingleton("RemSize.Manager"),l.P.useSubscriptionTo(a),i.createElement(e.Context.Provider,{value:a},n)},e.DefaultManager=function(t){var n=t.children;return l.P.useSingleton("RemSize.DefaultManager"),i.createElement(e.Manager,{remSize:e.withRemSizeEffect(e.defaultSizeObserver)},n)},e.defaultSizeObserver=d.aj(p.Lw("(max-width: 1359px)"),p.Lw("(min-width: 1600px)"),(function(e,t){return e?14:t?18:16})),e.withRemSizeEffect=function(t,n){return void 0===n&&(n=e.defaultFontSizeSetter),t.pipe(f.b((function(e){return n(o.some(e))})),m.x(n.bind(null,o.none)),c.shareReplay({refCount:!0,bufferSize:1}))},e.defaultFontSizeSetter=function(t){e.setRootCssVar(document.documentElement,t),e.setRootFontSize(t)},e.Context=i.createContext(e.defaultSizeObserver),e.setRootCssVar=function(e,t){e.style.setProperty("--rem",(0,a.pipe)(t,o.map(String),s.QP))},e.setRootFontSize=function(e){document.documentElement.style.fontSize=(0,a.pipe)(e,o.map((function(e){return e+"px"})),s.QP)}}(r||(r={}))},34095:(e,t,n)=>{"use strict";n.d(t,{Ys:()=>d});var r=n(59312),i=n(27378),a=n(71215),o=n(85746),s=n(90351),u=n(22823),c=n(13097),l=function(){return i.createElement("svg",{className:g.svg2,viewBox:"0 0 12 9",width:"12",height:"9",xmlns:"http://www.w3.org/2000/svg"},i.createElement("path",{d:"M1.386 4.115L4.561 7.29l5.81-5.81",stroke:"#FFF",strokeWidth:"2",fill:"none",fillRule:"evenodd",strokeLinecap:"round"}))},d=function(e){var t=e.checked,n=e.className,r=e.children,a=e.name;return i.createElement(p,{checked:t,name:a,className:n,checkedComponent:function(e){return i.createElement("div",{key:e?"checkbox1":"checkbox2",className:e?g.rectangleFilledBlue:g.rectangle},e&&i.createElement(l,null))}},r)},p=function(e){var t=e.checked,n=e.checkedComponent,s=e.className,u=e.children,c=e.name;return i.createElement(a.F.label,(0,r.__assign)({},(0,o.Sh)(g.wrapper,s),{onClick:function(e){return e.stopPropagation()}},c?{"data-name":c+"-checkbox"}:{}),i.createElement(a.F.input,{type:"checkbox",checked:t,onChange:function(e){return t.modify((function(e){return!e}))},className:g.inputCheckbox}),t.view(n),i.createElement("div",null,u))},f={display:"flex",marginRight:u.u.rem(.5),paddingTop:u.u.rem(.18),width:u.u.rem(1),height:u.u.rem(1),border:"2px solid "+s.Il.CoreNeutral30,borderRadius:u.u.rem(c.mA),backgroundColor:"transparent",alignItems:"center"},m={paddingTop:u.u.rem(.1),borderColor:s.Il.CoreBlue50,borderRadius:u.u.rem(c.mA),backgroundColor:s.Il.CoreBlue50},h={width:u.u.percent(100),height:u.u.percent(100)},g=u.u.stylesheet({wrapper:[{display:"flex",cursor:"default",alignItems:"center",userSelect:"none"}],rectangle:[f],rectangleFilledBlue:[f,m],inputCheckbox:[{margin:0,"-webkit-appearance":"none",appearance:"none"}],svg:[h],svg2:[{margin:"auto"}]})},9261:(e,t,n)=>{"use strict";n.d(t,{u_:()=>ee,ay:()=>Q,Pj:()=>K});var r,i,a=n(59312),o=n(27378),s=n(45980),u=n(27221),c=n(71215),l=n(85746),d=n(25781),p=n(22232),f=n(90351),m=n(22823),h=n(71031),g=n(13097),v=n(39499),y=n(41439),b=n(53073),w=n(84347),_=n(92932),S=n(78259),C=n(52479),x=n(99391),I=n(42499),A=n(66081),E=n(66310),k=n(77176),T=n(67434),L=n(24209),P=n(49708),R=n(17343),N=n(28043),M=n(93508),F=n(95300),O=n(85985),B=n(2834),D=n(12126),U=n(2844),W=n(76974),H=n(13444),z=n(55935),j=n(55721),G=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._classes={hidden:"ps-hidden",visible:"ps-hovered",fastTransition:"ps-fast-transition"},t._mount=function(e){t._el=e,t.props.onMount&&e&&t.props.onMount(e)},t._update=function(){requestAnimationFrame((function(){t._el&&w.update(t._el)}))},t}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){var e,t=this,n=this.props,i=n.name,a=n.update,o=n.showWhenScrollable,s=n.scrollTo,u=n.className,c=this._el;w.initialize(c,{suppressScrollX:!0,minScrollbarLength:40,handlers:["click-rail","drag-scrollbar","keyboard","passiveWheel","touch"]}),this._update(),(e=this._subs).push.apply(e,r.customize(c,{name:i,showWhenScrollable:o||!1,classes:this._classes})),this._subs.push(S.YC(this._el).pipe(A.e(200)).subscribe(this._update)),a&&this._subs.push(a.subscribe(this._update)),s&&this._subs.push(s.pipe(E.w(C.b2.rafScheduler)).subscribe((function(e){c.scrollTop=e,t._update()}))),u&&this._subs.push(C.Dx(u).pipe(k.U((function(e){return e?e.split(" "):[]})),T.R((function(e,t){var n,r;return e&&(n=c.classList).remove.apply(n,e),t&&(r=c.classList).add.apply(r,t),t}),[])).subscribe())},t.prototype.componentWillUnmount=function(){w.destroy(this._el),this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this.props,t=e.children,n=e.onScroll,r=e.name,i=e.showWhenScrollable;return o.createElement(c.F.div,(0,a.__assign)({},(0,l.Sh)(i&&this._classes.visible),{onScroll:n?function(){return n.next()}:void 0,mount:this._mount,role:"scrollbar-"+r}),t)},t}(o.Component);!function(e){var t=["mousewheel","DOMMouseScroll","wheel","touchmove"];e.customize=function(e,n){var r=n.name,i=n.showWhenScrollable,a=n.classes,o=_.C8.Logging.getLogger("scrollBarY."+r,_.zW.LogLevel.DEBUG),s=e.querySelector(".ps__scrollbar-y"),u=e.querySelector(".ps__scrollbar-y-rail"),c=L.T(P.R(e,"mouseenter",{passive:!0}).pipe(R.h(!0)),P.R(e,"mouseleave",{passive:!0}).pipe(R.h(!1))).pipe(N.x(),M.O(!1)),l=L.T(P.R(u,"mouseenter",{passive:!0}).pipe(R.h(!0)),P.R(u,"mouseleave",{passive:!0}).pipe(R.h(!1))).pipe(N.x(),M.O(!1)),d=L.T(P.R(s,"mousedown",{passive:!0}).pipe(R.h(!0)),P.R(document,"mouseup",{passive:!0}).pipe(R.h(!1))).pipe(M.O(!1)),f=new F.X(!1),m=L.T(P.R(document,"paste",{passive:!0}),P.R(document,"mousedown",{passive:!0}).pipe(O.h((function(e){var t=e.target;return t!==s&&t!==u})),B.b((function(e){return o.trace("force hide event",e)})))).pipe(E.w((function(){return D.D([!0,!1])})),M.O(!1));return[L.T.apply(x,t.map((function(t){return P.R(e,t).pipe(k.U((function(e){return e.preventDefault(),e.stopPropagation(),!0})))}))).subscribe(f),U.aj(c,d,l,m).pipe(O.h((function(){return!i})),E.w((function(e){var t=e[0],n=e[1],r=e[2];return e[3]?W.of("forceHide"):n||r?r&&!n?W.of("show").pipe(H.g(600)):W.of("show"):t?L.T(f.pipe(z.T(1),j.p(100),R.h("show")),f.pipe(R.h("hide"),j.p(100),E.w((function(){return W.of("hide").pipe(H.g(600))})))):W.of("hide").pipe(H.g(600))})),N.x()).subscribe((function(t){switch(I.c.emit(t),o.trace("new scroll action",{action:t}),t){case"show":e.classList.remove(a.hidden,a.fastTransition),e.classList.add(a.visible);break;case"hide":e.classList.remove(a.visible);break;case"forceHide":e.classList.remove(a.visible),e.classList.add(a.fastTransition);break;default:(0,p.vE)(t)}return t}))]}}(r||(r={})),function(e){function t(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.deltaX/6,n=e.deltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.deltaY),[t,n]}e.verticalScrollByWhellEvent=function(e){return P.R(e,"wheel",{passive:!0}).pipe(k.U(t),k.U(b.snd),B.b((function(t){return e.scrollTop-=t})))}}(i||(i={}));var q,$=n(14611),V=n(18244),X=n(60430),Y=n(66265),Z=n(40151),J=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n._overlayIndex=t._index++,n._subs=[],n._visibilityState=u.h.create("hidden"),n}return(0,a.__extends)(t,e),t.prototype.componentDidMount=function(){var e=this;this._visibilityState.set(this.props.visible.get()?"visible":"hidden"),this._subs.push(this._visibilityState.pipe(k.U((function(e){return"visible"===e})),N.x()).subscribe((function(n){return t._activeOverlays.modify((function(t){var r=new Set(t);return n?r.add(e._overlayIndex):r.delete(e._overlayIndex),r}))})),this.props.visible.pipe(z.T(1)).subscribe((function(t){var n=e.props.animate?"fadeOut":"hidden";e._visibilityState.set(t?"visible":n)}))),this._subs.push(this._visibilityState.pipe(E.w((function(e){return"visible"===e?P.R(document,"keydown"):Z.c()})),O.h((function(e){return e.keyCode===d.R.ESC_CODE}))).subscribe((function(){e.props.preventClose||e.props.visible.set(!1),e.props.onClose&&e.props.onClose()})))},t.prototype.componentWillUnmount=function(){var e=this;t._activeOverlays.modify((function(t){var n=new Set(t);return n.delete(e._overlayIndex),n})),this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},t.prototype.render=function(){var e=this;return o.createElement(c.F.Fragment,null,this._visibilityState.view((function(t){switch(t){case"visible":case"fadeOut":return o.createElement(c.F.div,(0,a.__assign)({role:"overlay-wrapper"},(0,l.Sh)(e.props.animate?e._getAnimatedTypeClass(t):e._getTypeClass(t),e._getPositionType(e.props.positionType)),{onClick:function(){e.props.preventClose||e.props.visible.set(!1),e.props.onClose&&e.props.onClose()},onTransitionEnd:function(){"fadeOut"===t&&e._visibilityState.set("hidden")}}),o.createElement(c.F.div,(0,a.__assign)({},(0,l.Sh)(e.props.animate&&e._getContentClass(t))),o.createElement("div",{className:ge.scroll,role:"scrollbar-modal"},o.createElement(c.F.div,(0,a.__assign)({},(0,l.Sh)(e._getAlignmentClass(),e._getSmallResolutionClass())),e.props.children))));case"hidden":return null;default:return(0,p.vE)(t)}})))},t.prototype._getSmallResolutionClass=function(){switch(this.props.smallResolution){case"resize":return ge.wrapperResize;case"cut":default:return""}},t.prototype._getAlignmentClass=function(){switch(this.props.alignment){case"top-center":return ge.wrapperTopCenter;case"bottom-right":return ge.wrapperBottomRight;case"none":return"";case"center":default:return ge.wrapperCenter}},t.prototype._getTypeClass=function(e){if("visible"!==e)return ge.wrapperTransparent;switch(this.props.overlayType){case"light":return ge.wrapperLight;case"transparent":return ge.wrapperTransparent;case"dark":default:return ge.wrapperDark}},t.prototype._getPositionType=function(e){switch(e){case"absolute":return ge.wrapperAbsolute;case"fixed":return ge.wrapperFixed;default:return(0,p.vE)(e)}},t.prototype._getAnimatedTypeClass=function(e){var t="visible"===e;switch(this.props.overlayType){case"light":return $.f.rafSequence(t?[ge.wrapperTransparent,ge.wrapperLight]:[ge.wrapperLight,ge.wrapperTransparent],!0);case"transparent":return W.of(ge.wrapperTransparent);case"dark":default:return $.f.rafSequence(t?[ge.wrapperTransparent,ge.wrapperDark]:[ge.wrapperDark,ge.wrapperTransparent],!0)}},t.prototype._getContentClass=function(e){var t=this.props.theme||ge,n=t.contentFaded,r=t.content,i="visible"===e?[n,r]:[r,n];return $.f.rafSequence(i,!0)},t.defaultProps={visible:u.h.create(!0)},t._activeOverlays=u.h.create(new Set),t.activeCount=t._activeOverlays.view((function(e){return e.size})),t._index=0,t}(o.Component),K=function(e){return o.createElement(J,(0,a.__assign)({},e,{visible:u.h.create(!0),preventClose:!0}),e.children)},Q=function(e){return o.createElement(J,(0,a.__assign)({},e,{visible:u.h.create(!0),preventClose:!1}),e.children)};function ee(e){var t=e.children,n=e.className,r=e.close;return o.createElement(c.F.div,(0,a.__assign)({},(0,l.Sh)(ge.modal,n),{onClick:V.UW(s.constVoid)}),t,r?o.createElement("div",{className:ge.closeIconButtonContainer},o.createElement(v.zx,{name:"modal-close",onClick:r},o.createElement(y.JO.Close,{className:ge.closeIcon,width:13}))):null)}!function(e){e.Header=function(e){var t=e.children,n=e.className;return o.createElement(c.F.header,(0,a.__assign)({},(0,l.Sh)(ge.header,n)),t)},e.Body=function(e){var t=e.children,n=e.className,r=e.wrapperClassName,i=e.name,s=X.P.useElWatcher(),u=s.ref,d=s.onMount;return o.createElement(G,(0,a.__assign)({name:i},(0,l.Sh)(ge.scrollBody,r),{showWhenScrollable:!0,update:u.pipe(Y.oA,E.w(S.YC),R.h(C.PU))}),o.createElement(c.F.div,(0,a.__assign)({},(0,l.Sh)(ge.body,n),{mount:d}),t))},e.Footer=function(e){var t=e.children,n=e.className;return o.createElement(c.F.div,(0,a.__assign)({},(0,l.Sh)(ge.footer,n))," ",t," ")}}(ee||(ee={}));var te={top:0,left:0,display:"flex",flexDirection:"column",overflow:"hidden",width:m.u.percent(100),height:m.u.percent(100),transition:"background "+m.u.seconds(.2),pointerEvents:"auto"},ne={position:"fixed",zIndex:g.DY},re={margin:m.u.rem(-.5)+" auto auto"},ie={background:"rgba(255, 255, 255, .7)"},ae={background:"rgba(100, 107, 131, .4)"},oe={position:"absolute",top:m.u.rem(.5),right:m.u.rem(.5)},se={stroke:h.FW},ue={position:"relative",display:"flex",flexDirection:"column",overflow:"hidden",maxHeight:"90vh",borderRadius:m.u.rem(g.Jr),boxShadow:h.Re},ce={position:"relative",overflow:"hidden",padding:m.u.rem(2.5)+" "+m.u.rem(2)+" "+m.u.rem(1),borderTopLeftRadius:m.u.rem(g.Jr),borderTopRightRadius:m.u.rem(g.Jr),backgroundColor:f.Il.CoreNeutral1},le={position:"absolute",top:m.u.px(10),right:"@top"},de={padding:m.u.rem(2),backgroundColor:f.Il.CoreNeutral0},pe={display:"flex",padding:"0 "+m.u.rem(2),height:m.u.rem(4),border:"0 solid transparent",borderWidth:"0 1px",borderBottomRightRadius:m.u.rem(g.Jr),borderBottomLeftRadius:m.u.rem(g.Jr),backgroundColor:f.Il.CoreNeutral1,alignItems:"center",justifyContent:"flex-end",$nest:{"& > *:not(:last-child)":{marginRight:m.u.rem(.5)}}},fe={transitionDuration:m.u.seconds(.2),transitionProperty:"opacity, transform",transformOrigin:"center"},me={position:"relative",display:"flex",padding:m.u.rem(.5)+" 0",width:"100vw",height:"100vh"},he={$nest:(q={},q["@media ("+g.pZ+")"]={margin:m.u.rem(2)+" auto auto"},q)},ge=m.u.prefixedStylesheet("modal",{wrapper:[te],wrapperFixed:[ne],wrapperAbsolute:[{position:"absolute"}],wrapperTopCenter:[re],wrapperBottomRight:[{margin:"auto 0 0 auto"}],wrapperCenter:[{margin:"auto"}],wrapperLight:[te,ie],wrapperDark:[te,ae],wrapperTransparent:[te,{overflow:"hidden",background:"transparent"}],closeIconButtonContainer:[oe],closeIcon:[se],modal:[ue],header:[ce],closeBtn:[le],body:[de],scrollBody:[{position:"relative",flexGrow:1}],footer:[pe],contentBase:[fe],contentFaded:[fe,{opacity:0,transform:"scale(.8)"}],content:[fe,{opacity:1,transform:"none"}],scroll:[me],wrapperResize:[he]})},41552:(e,t,n)=>{"use strict";n.d(t,{dC:()=>r,Iy:()=>i,EQ:()=>h});var r,i,a=n(45980),o=n(27221),s=n(64909),u=n(66310),c=n(18625),l=n(95300),d=n(76974),p=n(2834),f=n(40151);!function(e){e.SetGoals="SetGoals",e.Performance="Performance",e.MutedAlerts="MutedAlerts"}(r||(r={})),function(e){e.setGoals=function(e){return{type:r.SetGoals,source:e}},e.performance={type:r.Performance},e.mutedAlerts={type:r.MutedAlerts}}(i||(i={}));var m,h=function(){function e(e){this._modalViews=e,this.state=o.h.create(s.none),this._modalFactoryCache=new Map}return e.prototype.show=function(e){var t=this;return this.preload(e).pipe(u.w((function(e){return t.showPreloaded(e)})))},e.prototype.showPreloaded=function(e){var t=this;return c.P((function(){var n=new l.X("opened");return t.state.set(s.some(e({onClose:function(){t.state.set(s.none),n.next("closed"),n.complete()}}))),n}))},e.prototype.preload=function(e){var t=this,n=JSON.stringify(e);if(this._modalFactoryCache.has(n)){var r=this._modalFactoryCache.get(n);return d.of(r)}return c.P((function(){return t._modalViews.load(e)})).pipe(p.b((function(e){t._modalFactoryCache.set(n,e)})))},e.prototype.hideAll=function(){this.state.set(s.none)},e}();!function(e){var t=function(){function e(){this.state=o.h.create(s.none),this.hideAll=a.constVoid}return e.prototype.show=function(e){return f.c()},e.prototype.showPreloaded=function(e){return f.c()},e.prototype.preload=function(e){return f.c()},e}();e.Mock=t}(m||(m={}))},38206:(e,t,n)=>{"use strict";n.d(t,{t:()=>y});var r,i=n(59312),a=n(27378),o=n(45980),s=n(73805),u=n(71215),c=n(85746),l=n(489),d=n(93283),p=n(79932),f=n(19962),m=n(22232),h=n(95574),g=n(65772),v=n(64909);!function(e){var t,n,r;function a(e,n){var r=n.position,a=n.point,o={width:Math.trunc(e.width),height:Math.trunc(e.height)};return f.UL.validate(t.match((function(){return(0,i.__assign)({top:a.y,right:a.x,bottom:a.y+o.height,left:a.x-o.width},o)}),(function(){return(0,i.__assign)({top:a.y-o.height,right:a.x,bottom:a.y,left:a.x-o.width},o)}),(function(){return(0,i.__assign)({top:a.y-o.height,right:a.x+o.width,bottom:a.y,left:a.x},o)}),(function(){return(0,i.__assign)({top:a.y,right:a.x+o.width,bottom:a.y+o.height,left:a.x},o)}))(r))}function o(t){return e.topLeft(f.UL.Point.normalize({x:t.left,y:t.top}))}!function(e){e.topLeft="topLeft",e.topRight="topRight",e.bottomRight="bottomRight",e.bottomLeft="bottomLeft"}(t=e.Position||(e.Position={})),function(e){e.match=function(t,n,r,i){return function(a){switch(a){case e.topRight:return t();case e.bottomRight:return n();case e.bottomLeft:return r();case e.topLeft:return i();default:return(0,m.vE)(a)}}}}(t=e.Position||(e.Position={})),e.topLeft=function(e){return{position:t.topLeft,point:f.UL.Point.normalize(e)}},e.topRight=function(e){return{position:t.topRight,point:f.UL.Point.normalize(e)}},e.bottomRight=function(e){return{position:t.bottomRight,point:f.UL.Point.normalize(e)}},e.bottomLeft=function(e){return{position:t.bottomLeft,point:f.UL.Point.normalize(e)}},e.relativeTo=function(e,t){return{position:e.position,point:f.UL.Point.relativeTo(e.point,t)}},e.empty=e.topLeft(f.UL.Point.empty),e.toRect=a,e.fromRect=o,e.inRect=function(e,t){var n=t.point;return f.UL.hasPoint(e,n)},e.toCss=function(e){var n=e.position,r=e.point;return t.match((function(){return{top:r.y,right:r.x}}),(function(){return{right:r.x,bottom:r.y}}),(function(){return{bottom:r.y,left:r.x}}),(function(){return{top:r.y,left:r.x}}))(n)},function(t){t.create=function(e,t){return(0,m.kG)(e.point.x===t.point.x||e.point.y===t.point.y,"can not form Zone without a common dimension",(function(){return JSON.stringify({a:e,b:t})})),[e,t]},t.bySide=function(n,r){return f.UL.Side.match((function(){return t.create(e.bottomLeft({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.floor(r.right),y:Math.ceil(r.top)}))}),(function(){return t.create(e.topLeft({x:Math.floor(r.right),y:Math.ceil(r.top)}),e.bottomLeft({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topLeft({x:Math.ceil(r.left),y:Math.floor(r.bottom)}),e.topRight({x:Math.floor(r.right),y:Math.floor(r.bottom)}))}),(function(){return t.create(e.topRight({x:Math.ceil(r.left),y:Math.ceil(r.top)}),e.bottomRight({x:Math.ceil(r.left),y:Math.floor(r.bottom)}))}))(n)}}(n=e.Zone||(e.Zone={})),function(e){e.byAxis=function(e,t){return d.fromFoldable((0,p.getFirstSemigroup)(),l.array)(f.UL.Axis.toSides(e).map((function(e){return[e,n.bySide(e,t)]})))}}(e.Variants||(e.Variants={})),function(t){function n(e,t){return(0,s.pipe)(f.UL.intersection(e,t),v.map((function(e){var n=e.width/t.width,r=e.height/t.height,i=(Number.isNaN(n)?0:n/2)+(Number.isNaN(r)?0:r/2);return(0,m.kG)(i>=0,"quality can not be negavite: "+i),(0,m.kG)(i<=1,"quality can be higher than 1: "+i),i})))}t.empty={quality:0,point:e.empty},t.qualityOfIntersection=n,t.byViewport=function(e,t){return{quality:(0,s.pipe)(n(e,t),v.getOrElse((function(){return 0})))+(0,s.pipe)(f.UL.scale(2,t),g.chain(f.UL.normalize),v.fromEither,v.chain((function(t){return n(e,t)})),v.getOrElse((function(){return 0}))),point:o(t)}},t.fromZone=function(e,n,r){return(0,s.pipe)(l.array.traverse(g.either)(r,(function(e){return a(n,e)})),g.chain((function(e){var t=e[0],n=e[1];return f.UL.join(t,n)})),g.chain((function(e){return f.xu.placeIntoRect(n,e)})),g.map((function(n){return n.map((function(n){return t.byViewport(e,n)}))})))}}(r=e.Qualified||(e.Qualified={})),function(e){e.build=function(e,t,n){return(0,s.pipe)(n,d.map((function(n){return r.fromZone(e,t,n)})))}}(e.QualifiedVariants||(e.QualifiedVariants={})),function(e){var t;!function(e){e[e.left=0]="left",e[e.middle=1]="middle",e[e.right=2]="right",e[e.edges=20]="edges",e[e.any=210]="any"}(t=e.Placement||(e.Placement={})),e.takeBy=function(e,t){return function(n){return(0,s.pipe)(n,d.reduceWithIndex({point:r.empty,side:e},(function(n,r,i){return(0,s.pipe)(i,g.map((function(i){return i.filter((function(r,i){return t.toString().includes(i.toString())&&e===n})).reduce((function(e,t){return t.quality>e.point.quality?{point:t,side:n}:e}),r)})),h.MH)}))).point}},e.preferBy=function(e,t){return function(n){return(0,s.pipe)(n,d.reduceWithIndex({point:r.empty,side:e},(function(n,r,i){return(0,s.pipe)(i,g.map((function(i){return i.reduce((function(r,i,a){return i.quality>r.point.quality||i.quality===r.point.quality&&t.toString().includes(a.toString())&&e===n?{point:i,side:n}:r}),r)})),h.MH)}))).point}},e.preferTopMiddle=e.preferBy("top",t.middle),e.preferTopEdges=e.preferBy("top",t.edges)}(e.Selector||(e.Selector={}))}(r||(r={}));var y,b=n(83078),w=n(8125),_=n(90351),S=n(22823),C=n(22168),x=n(60430),I=n(52479),A=n(77176),E=n(2844),k=n(28043);!function(e){!function(e){e.toSelector=function(e){switch(e){case"top":case"topCenter":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};case"topRight":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.right)};case"topLeft":return{align:"top",selector:r.Selector.preferBy("top",r.Selector.Placement.left)};case"bottom":case"bottomCenter":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.middle)};case"bottomRight":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.right)};case"bottomLeft":return{align:"bottom",selector:r.Selector.preferBy("bottom",r.Selector.Placement.left)};case"left":return{align:"left",selector:r.Selector.preferBy("left",r.Selector.Placement.middle)};case"right":return{align:"right",selector:r.Selector.preferBy("right",r.Selector.Placement.middle)};case"auto":case"center":return{align:f.UL.Axis.vertical,selector:r.Selector.preferBy("top",r.Selector.Placement.middle)};default:return(0,m.vE)(e)}}}(e.Alignment||(e.Alignment={})),e.ByPoint=function(e){var t=e.point,n=e.className,o=(0,i.__rest)(e,["point","className"]);return a.createElement(u.F.div,(0,i.__assign)({role:"positioned-container",style:t.pipe(A.U(b.dH(r.toCss,{})))},(0,c.Sh)(F.wrapper,n,t.pipe(A.U((function(e){return v.isNone(e)?F.hidden:""})))),o))};var t=function(t){var i=x.P.useRectWatcher(),s=i.rect,u=i.onMount,c=I.Dx(t.rect),d=I.Dx(t.pinTargetRect),p=l(t.align),f=n(c,s,p,t.selector||r.Selector.preferTopMiddle,d,"relative"===t.position);return a.createElement(e.ByPoint,{mount:u,className:t.className,point:f.pipe(A.U(v.map((function(e){return e.tangentialPoint}))))},t.withPin&&f.pipe(A.U((0,o.flow)(v.chain((function(e){return e.median})),v.map((function(t){return a.createElement(e.Pin,{point:t,key:"pin"})})),v.toNullable))),t.children)};e.ByAbsoluteRect=function(e){return a.createElement(t,(0,i.__assign)({},e,{position:"absolute"}))},e.ByRelativeRect=function(e){return a.createElement(t,(0,i.__assign)({},e,{position:"relative"}))},e.Pin=function(e){var t=I.Dx(e.point).pipe(A.U((function(e){return e.side})),A.U((function(e){return M[e]}))),n=I.Dx(e.point).pipe(A.U((function(e){return e.point})),A.U((function(e){var t=e.x;return{top:e.y,left:t}})));return a.createElement(u.F.i,(0,i.__assign)({role:"pin",style:n},(0,c.Sh)(t,M.wrapper)))};var n=function(e,t,n,i,o,u){return E.aj(e,a.useContext(C.l.Context).pipe(A.U((function(e){return e.rect}))),t.pipe(k.x(v.getEq(f.xu.eq).equals)),o).pipe(A.U((function(e){var t=e[0],a=e[1],o=e[2],c=e[3];return(0,s.pipe)(o,v.map((function(e){var o=r.QualifiedVariants.build(a,e,n(t)),l=i(o).point,d=(0,s.pipe)(r.toRect(e,l),v.fromEither,v.chain((function(e){return(0,s.pipe)(f.UL.getMedian(t,e),v.map((function(t){return{anchorMedian:t,bodyRect:e}})))})),v.chain((function(e){var t=e.anchorMedian,n=e.bodyRect;if(c){var i=f.UL.stickToSide(f.UL.Side.invert(t.side),c)(n);return l=r.fromRect(i),(0,s.pipe)(f.UL.getMedian(c,i),v.map((function(e){var t=e.side,n=e.point;return{side:t,point:f.UL.Point.relativeTo(n,i)}})))}return(0,s.pipe)(v.some(t),v.map((function(e){var t=e.side,r=e.point;return{side:t,point:f.UL.Point.relativeTo(r,n)}})))})));return{tangentialPoint:r.relativeTo(l,u?t:a),median:d}})))})))},l=function(e){return void 0===e&&(e=f.UL.Axis.both),(0,w.CI)(f.UL.Axis,e)?function(t){return r.Variants.byAxis(e,t)}:function(t){var n;return(n={})[e]=r.Zone.bySide(e,t),n}}}(y||(y={}));var T={position:"absolute",border:S.u.px(7)+" solid "+_.Il.BackgroundTooltip,transform:"translate("+S.u.px(-7)+", "+S.u.px(-7)+")"},L={borderTopColor:"transparent",borderRightColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateY("+S.u.px(7)+")"}}},P={borderTopColor:"transparent",borderRightColor:"transparent",borderBottomColor:"transparent",$nest:{"& + *":{transform:"translateX("+S.u.px(-7)+")"}}},R={borderRightColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateY("+S.u.px(-7)+")"}}},N={borderTopColor:"transparent",borderBottomColor:"transparent",borderLeftColor:"transparent",$nest:{"& + *":{transform:"translateX("+S.u.px(7)+")"}}},M=S.u.stylesheet({wrapper:[T],top:[L],right:[P],bottom:[R],left:[N]}),F=S.u.stylesheet({hidden:[{visibility:"hidden",opacity:0}],wrapper:[{position:"absolute",transition:"opacity .2s"}]})},63979:(e,t,n)=>{"use strict";n.d(t,{P:()=>S});var r=n(59312),i=n(27378),a=n(85746),o=n(22232),s=n(19962),u=n(90351),c=n(22823),l=n(71031),d=n(94503),p=n(41439),f=2*Math.PI*32,m=36,h="#f1f2fa",g="#fff",v=function(e,t,n){return e<t?t:e>n?n:e},y=function(e){switch(e){case S.ColorType.eggBlue:return{type:"gradient",value:{coordinates:{x1:"0%",y1:"50%",x2:"50%",y2:"50%"},start:"#0bc7c3",end:"#0fd5bf"},background:h,outline:g};case S.ColorType.dandelion:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"35%",y2:"100%"},start:"#ffde66",end:"#ffc148"},background:h,outline:g};case S.ColorType.radicalRed:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"50%",x2:"40%",y2:"100%"},start:"#ff4562",end:"#ff153e"},background:h,outline:g};case S.ColorType.lightVisteria:return{type:"gradient",value:{coordinates:{x1:"50%",y1:"0%",x2:"50%",y2:"100%"},start:"#e191e2",end:"#c770c8"},background:h,outline:g};case S.ColorType.royalBlue:return{type:"gradient",value:{coordinates:{x1:"17%",y1:"15%",x2:"50%",y2:"100%"},start:"#2a42ef",end:"#6391ff"},background:h,outline:g};case S.ColorType.logan:return{type:"plain",value:"#a6adc9",background:h,outline:g};case S.ColorType.electricViolet:return{type:"plain",value:"#913dcc",background:"#eed6ff"};case S.ColorType.crimson:return{type:"plain",value:"#ea1537",background:"#ffccd5"};case S.ColorType.blueRibbon:return{type:"plain",value:"#1a57ff",background:"#cdf"};case S.ColorType.green:return{type:"plain",value:"#15c39a",background:"#dcf6f6"};case S.ColorType.lightBlue:return{type:"plain",value:"#00bbcc",background:"#ccfbff"};case S.ColorType.orange:return{type:"plain",value:"#ffa600",background:"#fee8b4"};case S.ColorType.neoBlue:return{type:"plain",value:"#4A6EE0",background:"#DBEBFF"};case S.ColorType.white:return{type:"plain",value:"#fff",background:"#fff",backgroundOpacity:.2};default:return(0,o.vE)(e)}},b=function(e){switch(e){case S.FontSize.normal:return 32;case S.FontSize.small:return 24;default:return(0,o.vE)(e)}},w=function(e){switch(e){case S.IconSize.pdf:case S.IconSize.normal:case S.IconSize.outcome:return 5;case S.IconSize.small:return 3;case S.IconSize.extraSmall:return 10;default:return(0,o.vE)(e)}},_=function(e){switch(e){case S.IconSize.pdf:return 110;case S.IconSize.normal:return 52;case S.IconSize.outcome:return 32;case S.IconSize.small:return 24;case S.IconSize.extraSmall:return 16;default:return(0,o.vE)(e)}},S=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,r.__extends)(t,e),t.prototype.render=function(){var e,n,o,u,c,l=this.props,h=l.percentage,g=l.aimValue,S=void 0===g?100:g,C=l.colorType,x=void 0===C?t.ColorType.logan:C,I=l.fontSize,E=void 0===I?t.FontSize.normal:I,k=l.iconSize,T=void 0===k?t.IconSize.normal:k,L=l.description,P=l.theme,R=void 0===P?A:P,N=[i.createElement("circle",{key:"circle",id:"circle",cx:m,cy:m,r:32,fill:"none"})],M=b(E),F=w(T),O=v(h,0,100),B=v(S,O,100),D=O*f/100,U=B*f/100,W=360*F/f,H=O?f-D-2*F:f,z=y(x);if("plain"===z.type)e=z.value,n=e,o=z.outline,u=z.background,c=void 0===z.backgroundOpacity?1:z.backgroundOpacity;else{var j=z.value;this._gradientId=this._gradientId||"pb-gradient-"+t._nextGradientId++,N.push(i.createElement("linearGradient",(0,r.__assign)({id:this._gradientId,key:this._gradientId,gradientUnits:"userSpaceOnUse"},j.coordinates),i.createElement("stop",{stopColor:j.start,offset:"0%"}),i.createElement("stop",{stopColor:j.end,offset:"100%"}))),e="url(#"+this._gradientId+")",n="#2b2d38",o=z.outline,u=z.background,c=void 0===z.backgroundOpacity?1:z.backgroundOpacity}return i.createElement(d.a.Context.Consumer,null,(function(t){return i.createElement(p.a1,(0,r.__assign)({},(0,a.Sh)(A.iconWrapper,R.radialProgressBar),{width:_(T),viewBox:"0 0 72 72"}),i.createElement("defs",null,N),i.createElement("g",null,i.createElement("use",{className:A.valueCircle,stroke:O>=94&&o?o:u,strokeOpacity:c,strokeWidth:F,strokeDasharray:f,strokeDashoffset:f-U,transform:"rotate(-90 36 36)",strokeLinecap:"round",xlinkHref:"#circle"}),o&&i.createElement("use",{className:A.valueCircle,stroke:o,strokeWidth:F,strokeDasharray:f,strokeDashoffset:H,transform:"rotate("+(-90-W)+" "+"36 "+"36)",strokeLinecap:"round",xlinkHref:"#circle"}),i.createElement("use",{className:A.valueCircle,stroke:e,strokeDasharray:f,strokeDashoffset:f-D,strokeLinecap:"round",transform:"rotate(-90 36 36)",strokeWidth:F,xlinkHref:"#circle"}),i.createElement("text",(0,r.__assign)({className:R.radialProgressText,y:"38",x:"36",fill:n,fontSize:M,fontStyle:"normal",textAnchor:"middle"},s.h5(t.has(d.a.Flag.supportsSVGDominantBaseline))),O),L&&i.createElement("text",{className:R.radialProgressDescription,fill:n,x:"50%",y:"80%",fontStyle:"normal",textAnchor:"middle"},L)))}))},t._nextGradientId=0,t}(i.Component);!function(e){!function(e){e.eggBlue="eggBlue",e.dandelion="dandelion",e.radicalRed="radicalRed",e.lightVisteria="lightVisteria",e.royalBlue="royalBlue",e.logan="logan",e.electricViolet="electricViolet",e.crimson="crimson",e.blueRibbon="blueRibbon",e.green="green",e.lightBlue="lightBlue",e.orange="orange",e.white="white",e.neoBlue="neoBlue"}(e.ColorType||(e.ColorType={})),function(e){e.normal="normal",e.small="small"}(e.FontSize||(e.FontSize={})),function(e){e.normal="normal",e.small="small",e.extraSmall="extraSmall",e.outcome="outcome",e.pdf="pdf"}(e.IconSize||(e.IconSize={}))}(S||(S={}));var C={width:c.u.percent(100),height:c.u.percent(100),fontWeight:"bold",fill:u.Il.CoreNeutral90},x={fontSize:c.u.rem(2),fill:u.Il.CoreNeutral90},I={fontWeight:"normal",fontSize:c.u.px(11),fill:l.UE},A=c.u.stylesheet({radialProgressBar:[C],radialProgressText:[x],radialProgressDescription:[I],valueCircle:[{transition:"stroke-dashoffset .5s"}],iconWrapper:[{stroke:"none",fill:"none",$nest:{"&[data-hovered='true']":{stroke:"none",fill:"none"}}}]})},54071:(e,t,n)=>{"use strict";n.d(t,{$:()=>f});var r,i=n(59312),a=n(27378),o=n(71215),s=n(85746),u=n(22232),c=n(90351),l=n(22823),d=n(71031),p=n(52479);function f(e){var t=e.wrapperClassName,n=e.variation,r=e.isIdle,s=(e.ref,(0,i.__rest)(e,["wrapperClassName","variation","isIdle","ref"]));return a.createElement(o.F.span,{role:"spinner",className:t},p.ab(n,(function(e){return a.createElement(f.Svg,(0,i.__assign)({},s,{type:e,isIdle:r}))})))}!function(e){e.getClassName=function(e){return function(t){switch(t){case"red":return e.red;case"green":return e.green;case"blue":return e.blue;case"white":return e.white;case"violet":return e.violet;case"yellow":return e.yellow;case"orange":return e.orange;case"gray":return e.gray;case"cyan":return e.cyan;default:return(0,u.vE)(t)}}},e.Svg=function(t){var n=t.className,r=t.size,o=void 0===r?64:r,c=t.strokeWidth,l=void 0===c?2:c,d=t.type,p=t.name,f=t.isIdle,m=(0,i.__rest)(t,["className","size","strokeWidth","type","name","isIdle"]),h=a.useRef(null),v=a.useRef(null);return a.useEffect((function(){return(0,u.kG)(null!==h.current,"groupEl should be already created"),v.current=h.current.animate({transform:["rotate(0deg)","rotate(360deg)"]},{duration:2e3,easing:"linear",fill:"forwards",iterations:1/0}),function(){return v.current.cancel()}}),[]),a.useEffect((function(){(0,u.kG)(null!==v.current,"groupAnimation should be already created");var e=v.current;e.play&&(f?e.pause():"running"!==e.playState&&e.play())})),a.createElement("svg",(0,i.__assign)({"data-role":p},(0,s.Sh)(n),{viewBox:"25 25 50 50",width:o,height:o},m),a.createElement("g",{transform:"translate(50 50)"},a.createElement("g",{ref:h},a.createElement("circle",(0,i.__assign)({},(0,s.Sh)(E.path,f&&g,e.getClassName(E)(d)),{cx:"50",cy:"50",r:"20",fill:"none",transform:"translate(-50 -50)",strokeWidth:l,strokeMiterlimit:"10"})))))}}(f||(f={}));var m=200,h=l.u.keyframes({"0%":{strokeDasharray:"1px, "+l.u.px(m),strokeDashoffset:l.u.px(1)},"50%":{strokeDasharray:"89px, "+l.u.px(m),strokeDashoffset:l.u.px(-35)},"100%":{strokeDasharray:"89px, "+l.u.px(m),strokeDashoffset:l.u.px(-124)}}),g="spinnerIdle",v={animation:h+" 2s ease-in-out infinite",strokeDasharray:"1px, "+l.u.px(m),strokeDashoffset:l.u.px(1),strokeLinecap:"round",$nest:(r={},r["&."+g]={animationIterationCount:0},r)},y={stroke:c.Il.CoreRed50},b={stroke:c.Il.CoreGreen50},w={stroke:c.Il.CoreBlue50},_={stroke:c.Il.CoreNeutral0},S={stroke:d.lh},C={stroke:d.AX},x={stroke:c.Il.CoreYellow60},I={stroke:d.FW},A={stroke:c.Il.CoreCyan50},E=l.u.stylesheet({path:[v],red:[y],green:[b],blue:[w],white:[_],violet:[S],yellow:[C],orange:[x],gray:[I],cyan:[A]})},17674:(e,t,n)=>{"use strict";n.d(t,{X:()=>k});var r=n(59312),i=n(27378),a=n(45980),o=n(19962),s=n(64909),u=n(90351),c=n(22823),l=n(13097),d=n(38206),p=n(73805),f=n(71215),m=n(25781),h=n(83078),g=n(42499),v=n(52479),y=n(49708),b=n(85985),w=n(41398),_=n(24209),S=n(17343),C=n(38194),x=n(598),I=n(50628),A=n(66831),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._outOfTarget=function(e){return function(t){return!o.UL.hasPoint(t.getBoundingClientRect(),e)}},t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this._listenTooltipAppearance()},t.prototype.componentWillUnmount=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[],this.context.hide()},t.prototype.render=function(){return i.createElement(f.F.div,{role:"tooltip"},this.context.state.view(this.props.children))},t.prototype._listenTooltipAppearance=function(){var e=this,t=y.R(document,"keydown").pipe(b.h((function(e){return e.keyCode===m.R.ESC_CODE}))),n=y.R(document,"mousedown").pipe(w.M(this.context.state),b.h((function(t){var n=t[0],r=t[1];return(0,p.pipe)(r,s.map((function(e){return e.target})),s.filter((function(){return o.pK(n.target)})),h.wo(e._outOfTarget({x:n.clientX,y:n.clientY})))}))),r=_.T(t,n,y.R(document,"scroll"),g.c.observe.pipe(b.h((function(e){return"show"===e.detail})))).pipe(S.h(v.PU),C.B());this._subs=[this.context.hasContent.pipe(b.h(Boolean),x.c(r.pipe(I.P()))).subscribe(this.context.hide),this.context.hasContent.pipe(b.h(Boolean),x.c(_.T(v.gw(!0,500),r.pipe(S.h(!1))).pipe(I.P())),b.h(Boolean)).subscribe(this.context.show)]},t.contextType=A.G.Context,t}(i.Component),k=function(){return i.createElement(E,null,(0,a.flow)(s.map((function(e){return i.createElement(d.t.ByAbsoluteRect,(0,r.__assign)({rect:o.UL.fromEl(e.target),className:P.container},d.t.Alignment.toSelector(e.alignment),{withPin:!0}),i.createElement("div",{className:P.content},e.content))})),s.toNullable))},T={position:"fixed",zIndex:l.DY,pointerEvents:"none",$nest:{"@media print":{visibility:"hidden"}}},L={padding:c.u.rem(.25)+" "+c.u.rem(1),borderRadius:c.u.rem(l.fx),background:u.Il.BackgroundTooltip,color:u.Il.CoreNeutral1,textAlign:"center",whiteSpace:"nowrap",letterSpacing:c.u.px(.25),fontSize:c.u.rem(.75),lineHeight:c.u.rem(1)},P=c.u.stylesheet({container:[T],content:[L]})},69551:(e,t,n)=>{"use strict";var r;n.d(t,{Q:()=>r}),function(e){e.group=function(e){return Object.values(e.reduce((function(e,t){var n=t.group,r=t.category,i=t.categoryHuman,a=t.cost;return void 0===e[r]&&(e[r]={group:n,category:r,categoryHuman:i,count:0}),e[r].count+=a,e}),{})).sort((function(e,t){return t.count-e.count}))}}(r||(r={}))},27901:(e,t,n)=>{"use strict";n.d(t,{S:()=>Re});var r,i=n(59312),a=n(53073),o=n(45980),s=n(73805),u=n(27221),c=n(5942),l=n(47442),d=n(95648),p=n(89943),f=n(81670),m=n(8125),h=n(22232),g=n(65772),v=n(64909),y=n(87088),b=n(92932),w=n(76779),_=n(40620),S=n(1701),C=n(92843),x=n(68983),I=n(76220),A=n(38365),E=n(67434),k=n(2834),T=n(77176);!function(e){function t(t){return function(a){return(0,s.pipe)(t,C.v.foldMap(e.group)(r,i,n),(0,x.W)(e.group.concat)(a))}}e.group=A.dM.group,e.eq=A.dM.eq,e.applyDiff=t,e.fromAlerts=function(e){var n=b.C8.Logging.getLogger("DocumentCounters");return e.pipe(E.R((function(e,n){return{alerts:n,counters:t(w.p.Diff.toRegistered(w.p.diff(e.alerts,n)))(e.counters)}}),{alerts:w.p.empty,counters:A.dM.group.empty}),k.b((function(e){var t=e.counters;A.dM.isValid(t)||n.error("Counters can not be below zero",A.dM.show.show(t))})),T.U((function(e){return e.counters})))};var n=function(e){return I.R.toUnmutedOnly(e.counters)},r=(0,o.flow)(n,e.group.inverse),i=function(t,i){return e.group.concat(n(i),r(t))}}(r||(r={}));var L,P=n(26001),R=n(93283),N=n(64510),M=n(88903),F=n(10002),O=n(58199),B=n(85985);!function(e){function t(e){var t=(0,s.pipe)(e,R.filterMap(v.fromNullable),R.filterWithIndex((function(e){return"GeneralScore"!==e})),R.mapWithIndex((function(e,t){return{lensId:(n=e,n===F.R.SpecialId.Plagiarism?g.right(F.R.SpecialId.Plagiarism):F.R.OutcomeId.toOutcomeId(n)),score:O.T.fromNumber(t)};var n})),R.partitionMap((0,P.Yt)(g.either))),n=t.left,r=t.right,i=(0,s.pipe)(r,R.map((function(e){var t=e.lensId,n=e.score;return(0,o.tuple)(t,n)})),(function(e){return new Map(Object.values(e))}));return(0,s.pipe)(M.fromOptions(v.fromPredicate((0,o.not)(R.isEmpty))(n),v.fromPredicate((0,o.not)(N.isEmpty))(i)),v.getOrElse((function(){return M.right(new Map)})))}e.empty=new Map,e.eq=N.getEq(F.R.Id.ord,O.T.ord),e.fromCapi=function(e){return e.pipe(B.h((0,m.Kg)(c.h.is("finish"),c.h.is("async_check_finished"),c.h.is("feedback_ack"))),T.U((function(e){return e.outcomeScores})),B.h(m.$K),T.U(t),k.b(M.mapLeft((function(e){R.isEmpty(e)||b.C8.Logging.getLogger("LensesScores").error("failed to parse capi scores",e)}))),B.h((0,m.Kg)(M.isBoth,M.isRight)),T.U((function(e){return e.right})))}}(L||(L={}));var D,U=n(95053),W=n(52479),H=n(32952),z=n(38194),j=n(77843),G=n(93508),q=n(95093),$=n(598),V=n(24209),X=n(50628),Y=n(17343),Z=n(36919),J=n(41120),K=n(95686),Q=n(90049),ee=n(71102),te=n(70228),ne=n(64450),re=n(26277),ie=n(51072),ae=n(489),oe=n(80229),se=n(44827),ue=n(79932),ce=n(21694),le=n(23594),de=function(){function e(e){this._delta=e,this._cursor={index:0,operationOffset:0}}return e.prototype.next=function(e){(0,h.kG)(e>=0,"Length cannot be negative");var t=this._cursor.index;if(t>=this._delta.ops.length)return v.none;for(var n=le.s.operationLength(this._delta.ops[t]),r=e-(n-this._cursor.operationOffset);r>0&&t<this._delta.ops.length-1;)t++,r-=n=le.s.operationLength(this._delta.ops[t]);return r>0?(this._cursor={index:t+1,operationOffset:0},v.none):(this._cursor={index:t,operationOffset:n+r},v.some(this._delta.ops[t]))},e}();!function(e){var t=v.getMonoid((0,ue.getObjectSemigroup)());e.getEnrichedWithFormattingDelta=function(e){return function(n){var r=new de(e);return n.ops.reduce((function(e,n){var i=e[0],a=e[1],o=r.next(a);return ce.s.isInsert(n)?[i.insert(n.insert,v.toUndefined(t.concat(v.chain(ce.s.getAttrs)(o),ce.s.getAttrs(n)))),0]:[i.push(n),ce.s.operationLength(n)]}),[new ne.i,1])[0]}}}(D||(D={}));var pe=n(17753);function fe(e){switch(e._raw.point){case"AllCapsBoldification":return d.JJ.fromAlternativeBoldified;case"Lists":return d.JJ.fromAlternativeListified;default:return d.JJ.fromAlternative}}var me,he=(0,m.HP)(b.C8.Logging.getLogger),ge=(0,o.flow)(ee.map((function(e){var t=e.beingAppliedAlert,n=e.undo,r=e.reversedAlternative;return Q.tryCatch((function(){var e={action:l.PZ.ACCEPTED,commit:function(){return he("AlertManager.ops").debug("_applyTransformJson("+t.toLiteString()+"):commit()")},undo:n,reversedAlternative:t.registerReversedAlternative(r)},i=t.switchToApplied(e),a=pe.xS.create(i.state.from,se.h.create(t));return[i.id,a]}),g.toError)})),Q.sequenceSeqArray);function ve(e){var t=d.r3.compose(e.alternatives.map(a.map((function(e){return e.alternative}))),e.currentFullText);return(0,s.pipe)(ce.s.nonEmpty(t.composedDelta)?v.some(t):v.none,v.map((function(t){var n=t.composedDelta,r=t.reversedAlternatives;return{changeWithFormatting:(0,s.pipe)(n,D.getEnrichedWithFormattingDelta(e.currentFullText),(function(t){return te.RI.delta(t,e.originalTextLength)})),correctRevAlternatives:(0,s.pipe)(r,f.T.tapFailure((function(e){var t=e.rejected;return b.C8.Logging.getLogger("AlertManager.ops").error("failed to generate reverse alternative",t)})),f.T.foldSuccess(ae.map((function(t){return{reversedAlternative:t.reversedAlternative,alternative:a.fst(e.alternatives[t.alternativeIndex]),alert:e.alerts[t.alternativeIndex].alert}}))))}})))}!function(e){var t=(0,o.flow)((function(e,t){return g.tryCatch((function(){return pe.xS.create(e,t)}),g.toError)}),g.map((function(e){return(0,o.tuple)(e[0].id,e)})),K.of);e.prepare=K.chain((0,o.tupled)(t)),e.prepareFromAlert=Q.chain((function(e){return t(e.state.from,se.h.create(e))}))}(me||(me={}));function ye(e,t){return g.fromPredicate(e,(function(e){var n=new h.ej(t,e.toString());return b.C8.Logging.getLogger("AlertManager.ops").error(t,n),n}))}var be=function(e){return ye(pe.bZ.isNotDisposed,e)};function we(e){return Q.chain(v.fold((0,o.constant)(Q.right(void 0)),e))}var _e,Se,Ce,xe=function(){function e(e,t,n,r){var a=this;this._positionManager=e,this._getContent=t,this._capiFeedbackClient=n,this._alertsRepo=r,this._log=b.C8.Logging.getLogger("AlertManager.ops"),this._sendUpdate=function(e){return Q.tryCatch((function(){return a.events.next({updated:new Map(e)})}),g.toError)},this._sendSingleUpdate=Q.chain((function(e){return a._sendUpdate([e])})),this._flushChanges=Q.tryCatch((function(){return a.changes.next(te.RI.flush())}),g.toError),this.changes=new H.xQ,this.events=new H.xQ,this.undoApplied=function(e,t){return(0,s.pipe)((function(){return a._positionManager.getTextLength()}),K.chain((function(t){var r={alertsToUpdate:[],reversedDelta:new ne.i,undo:o.constVoid},i=e.filter(pe.bZ.isApplied).reduce((function(e,t){var r=t.state.undoable;return pe.VD.isWithAlternative(r)?(0,s.pipe)(r.reversedAlternative,v.fold((function(){l.wQ.withTransformJson(t._raw)&&a._log.error("No reversed delta registered for alert",{alert:t.toLiteString()}),n(e,t)}),(0,o.flow)((function(e){return e()}),g.map((function(e){return e.delta})),g.fold((function(e){a._log.error("Could not retrieve reversed delta",{e:e,alert:t.toLiteString()})}),(function(r){n(e,t),(0,s.pipe)(r,d.r3.fromRawDelta,(function(t){return t.rebase(e.reversedDelta)}),v.fold((function(){e.reversedDelta=e.reversedDelta.compose(r)}),(function(t){var n=t.delta;e.reversedDelta=e.reversedDelta.compose(n)})))}))))):n(e,t),e}),r);return i.alertsToUpdate.length>0?(0,s.pipe)(Q.tryCatch((function(){var e=(0,s.pipe)(i.reversedDelta,D.getEnrichedWithFormattingDelta(a._getContent()));a.changes.next(te.RI.delta(e,t))}),g.toError),Q.apFirst(a._flushChanges),Q.apFirst((0,s.pipe)(i.undo,K.map(g.right))),Q.apSecond((0,s.pipe)(i.alertsToUpdate,Q.sequenceSeqArray,Q.chain(a._sendUpdate)))):Q.right(void 0)})));function n(e,n){e.undo=(0,o.flow)(e.undo,n.state.undoable.undo),e.alertsToUpdate.push(me.prepare((function(){return[se.h.create(n),se.h.create(n.changeState(t===pe.bZ.State.Applied.Method.ByCard?pe.bZ.State.init:pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.bulkAcceptUserResponse)))]})))}},this._dismissBatch=function(e,t){return(0,s.pipe)(a._flushChanges,Q.apSecond((0,s.pipe)(e,ae.map((0,o.flow)(K.of,K.map(be("Cannot send feedback for already disposed")),Q.chain((function(e){return a._applyFeedbackToAlert(e,l.PZ.IGNORE,pe.l$.sidebar,a._commitToCapi(e,{kind:l.PZ.IGNORE,subtype:t}))})),me.prepareFromAlert)),Q.sequenceSeqArray,Q.chain(a._sendUpdate))))},this._applyAlert=function(e){var t=e.alert,n=e.replacementText,r=e.source,i=e.method,o=e.feedbackSubtype;return(0,s.pipe)(t,ye(pe.bZ.isRegistered,"can not apply alert in non registered state"),K.of,Q.apFirst(a._flushChanges),Q.chain((function(e){return a._switchToBeingApplied(e,r,i)})),Q.chain((function(e){var t=e.beingAppliedAlert,r=e.undo;return(0,s.pipe)(t.getReplaceEither.bind(t),Q.swap,Q.mapLeft((function(){return new Error("Cannot apply alert with tJSON")})),Q.map((function(e){a._log.debug("_applyAlert("+t.toLiteString()+", rrange: "+e+")");var i=e.start,s=e.end-e.start,u=(new ne.i).retain(i).delete(n.length).insert(t.replaceText);return{alert:t,undo:r,reverseDelta:u,replacementText:n,removeLen:s,feedbackSubtype:o,pos:i}})))})),Q.chain(a._applyAlertData))},this._applySmartPhrasesAlert=function(e){var t=e.alerts,n=e.feedbackSubtype;return(0,s.pipe)(a._flushChanges,Q.apSecond((0,s.pipe)(t,Q.traverseSeqArray((function(e){return(0,s.pipe)(e.alternative,Q.map((function(t){return(0,o.tuple)(t,fe(e.alert))})))})))),Q.chain((function(e){return Q.tryCatch((function(){return{alternatives:e,alerts:t,originalTextLength:a._positionManager.getTextLength(),currentFullText:a._getContent()}}),g.toError)})),Q.map(ve),we((function(e){return(0,s.pipe)(e.correctRevAlternatives,ae.map((function(e){var t=e.alert,r=e.alternative;return(0,s.pipe)(Q.rightIO((function(){return t})),Q.chainFirst((function(e){return Q.rightIO(a._sendApplySmartPhrasesFeedback(e,r.alternativeIndex,n))})))})),Q.sequenceSeqArray,Q.chain((function(t){return(0,s.pipe)(Q.tryCatch((function(){return a.changes.next(e.changeWithFormatting)}),g.toError),Q.apFirst(a._flushChanges),K.apSecond((0,s.pipe)((0,o.flow)(ee.map((function(e){return Q.tryCatch((function(){var t=se.h.create(e);e.bumpVersion();var n=pe.xS.create(t,se.h.create(e));return[e.id,n]}),g.toError)})),Q.sequenceSeqArray)(t),Q.chain(a._sendUpdate))))})))})))},this._applyTransformJson=function(e){var t=e.alerts,n=e.source,r=e.method,u=e.feedbackSubtype;return(0,s.pipe)(a._flushChanges,Q.apSecond((0,s.pipe)(t,Q.traverseSeqArray((function(e){return(0,s.pipe)(e.alternative,Q.map((function(t){return(0,o.tuple)(t,fe(e.alert))})))})))),Q.chain((function(e){return Q.tryCatch((function(){return{alternatives:e,alerts:t,originalTextLength:a._positionManager.getTextLength(),currentFullText:a._getContent()}}),g.toError)})),Q.map(ve),we((function(e){return(0,s.pipe)(e.correctRevAlternatives,ae.map((function(e){var t=e.alert,o=e.alternative,c=e.reversedAlternative;return(0,s.pipe)(a._switchToBeingApplied(t,n,r),Q.chainFirst((function(e){return Q.rightIO(a._sendApplyTransformJsonFeedback(e.beingAppliedAlert,o.alternativeIndex,u))})),Q.map((function(e){return(0,i.__assign)((0,i.__assign)({},e),{reversedAlternative:c})})))})),Q.sequenceSeqArray,Q.chain((function(t){return(0,s.pipe)(Q.tryCatch((function(){return a.changes.next(e.changeWithFormatting)}),g.toError),Q.apFirst(a._flushChanges),K.apSecond((0,s.pipe)(ge(t),Q.chain(a._sendUpdate))))})))})))},this._alertFeedback=function(e,t,n){a._log.debug("_alertFeedback("+e.toLiteString()+", feedbackType: "+t.kind+", source: "+n+")"),pe.bZ.isHidden(e)&&a._log.error("Sending feedback for a hidden alert",{alert:e,feedbackType:t.kind});var r=a._commitToCapi(e,t);return(0,s.pipe)(e,be("Cannot send feedback for already disposed"),K.of,Q.chain((function(e){return t.kind!==l.PZ.LOOKED||e.isRead?l.nw.willRemoveAlert(t.kind)?(0,s.pipe)(a._flushChanges,Q.apSecond(a._applyFeedbackToAlert(e,t.kind,n,r)),me.prepareFromAlert,a._sendSingleUpdate):(0,s.pipe)(r,Q.rightIO):(0,s.pipe)(me.prepare((function(){return[se.h.create(e),(e.isRead=!0,se.h.create(e))]})),a._sendSingleUpdate,K.apFirst(r))})))},this._alertBatchFeedback=function(e,t,n){return(0,s.pipe)(e,ae.filterMap((function(e){return e.rawId})),oe.fromArray,v.fold((0,o.constant)(o.constVoid),(function(e){return a._sendFeedback({kind:t,alertIds:e,subtype:n})})))},this._notifyAlertUpdated=(0,o.flow)((function(e){return[[e[0].id,e]]}),this._sendUpdate),this._releaseRef=function(e,t){return(0,s.pipe)(Q.tryCatch((function(){a._log.debug("_releaseRef "+e+" on ("+t.toLiteString()+") refs: "+t._refNames,{shouldBeRemoved:pe.bZ.shouldBeRemoved(t)}),pe.bZ.shouldBeRemoved(t)&&a.events.next({removed:new Map([[t.id,se.h.create(t)]])})}),g.toError))},this._changeMuteState=function(e,t){var n=(0,s.pipe)(e,f.T.fromArray((0,o.flow)(be("Cannot send Mute feedback for already disposed"),g.chain(ye((function(e){return v.isSome(e.muteCategory)||pe.bZ.belongsToAnySpecialCategory(e)}),"Alert is not muting")))));return(0,s.pipe)(n,f.T.foldSuccess(ae.map((function(e){return me.prepare((function(){return[se.h.create(e),(e.mute=t,se.h.create(e))]}))}))),Q.sequenceSeqArray,Q.map(oe.fromArray),we(a._sendUpdate),Q.map((0,o.constant)(n)))},this._changeGapValue=function(e,t){return(0,s.pipe)(e,ye(pe.bZ.isOneGap,"can not change gap value for a non one gap alert"),K.of,Q.chain((function(e){return me.prepare((function(){return[se.h.create(e),se.h.create(e.changeGapValue(t))]}))})),a._sendSingleUpdate)},this._confirmApplied=(0,o.flow)(ae.map((function(e){return me.prepare((function(){return[se.h.create(e),se.h.create(e.changeState(pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.bulkAcceptUserResponse)))]}))})),Q.sequenceSeqArray,Q.chain(this._sendUpdate)),this._changeSmartPhrasesFeedback=function(e,t){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot change feedback for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var t=(0,s.pipe)(e.rawId,v.fold((function(){return null}),(function(e){return e})));if(!t)throw new Error("Couldn't retrieve raw ID from SmartPhrases alert (ID: "+e.id+"), cannot change feedback.");return{alert:e,rawId:t}}),g.toError)})),Q.chain((function(e){var n=e.alert;return Q.tryCatch((function(){var e=[(0,o.tuple)(n.id,pe.xS.create(se.h.create(n),se.h.create(n.setFeedback(t))))];return a.events.next({updated:new Map(e)}),n}),g.toError)})))},this._rotateSmartPhrasesReplacements=function(e){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot rotate replacements for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var t=[(0,o.tuple)(e.id,pe.xS.create(se.h.create(e),se.h.create(e.rotateReplacements())))];return a.events.next({updated:new Map(t)}),e}),g.toError)})))},this._discardSmartPhrasesReplacement=function(e,t){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot discard replacement for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var n=[(0,o.tuple)(e.id,pe.xS.create(se.h.create(e),se.h.create(e.discardReplacement(t))))];return a.events.next({updated:new Map(n)}),e}),g.toError)})))},this._highlightSmartPhrasesLastAppliedReplacement=function(e){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot highlight last applied replacement for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var t=[(0,o.tuple)(e.id,pe.xS.create(se.h.create(e),se.h.create(e.highlightLastAppliedReplacement())))];return a.events.next({updated:new Map(t)}),e}),g.toError)})))},this._restoreSmartPhrasesOriginalHighlight=function(e){return(0,s.pipe)(e,ye(pe.bZ.isSmartPhrases,"Cannot restore original highlight for a non-SmartPhrases alert."),K.of,Q.chain((function(e){return Q.tryCatch((function(){var t=[(0,o.tuple)(e.id,pe.xS.create(se.h.create(e),se.h.create(e.restoreOriginalHighlight())))];return a.events.next({updated:new Map(t)}),e}),g.toError)})))},this._applyAlertData=function(e){var t=e.pos,n=e.removeLen,r=e.reverseDelta,i=e.undo,o=e.replacementText,u=e.alert,c=e.feedbackSubtype;return(0,s.pipe)(Q.tryCatch((function(){var e=a._positionManager.getTextLength(),s=!1,d={action:l.PZ.ACCEPTED,replacement:o,commit:function(){s||a._log.debug("_applyAlert("+u.toLiteString()+"):commit()")},reversedAlternative:v.none,undo:function(){s=!0,a._log.debug("_applyAlert("+u.toLiteString()+"):undo()");var t=a._positionManager.getTextLength();t!==e&&a._log.error("Text has changed while uncommitted apply is present. Expected: "+e+", actual: "+t);var n=te.RI.delta(r,t);a.changes.next(n),a.changes.next(te.RI.flush()),i()}};return a._sendApplyTextFeedback(u,o,c)(),a.changes.next(te.RI.delta((new ne.i).retain(t).delete(n).insert(o),e)),a.changes.next(te.RI.flush()),e=a._positionManager.getTextLength(),d}),g.toError),Q.chain((function(e){return Q.tryCatch((function(){return u.switchToApplied(e)}),g.toError)})),me.prepareFromAlert,a._sendSingleUpdate)},this._sendApplyFeedback=function(e,t){return e.state.method===pe.bZ.State.Applied.Method.ByCard?a._commitToCapi(e,t):o.constVoid},this._sendApplyTextFeedback=function(e,t,n){return a._sendApplyFeedback(e,{kind:l.PZ.ACCEPTED,replacementText:t,subtype:n})},this._sendApplyTransformJsonFeedback=function(e,t,n){var r={kind:l.PZ.ACCEPTED,alternativeIndex:t,subtype:n},o=pe.bZ.isOneGap(e)?(0,i.__assign)((0,i.__assign)({},r),{gapValue:e.gapValue}):r;return a._sendApplyFeedback(e,o)},this._sendApplySmartPhrasesFeedback=function(e,t,n){var r={kind:l.PZ.ACCEPTED,alternativeIndex:t,subtype:n};return a._commitToCapi(e,r)}}return e.prototype._applyFeedbackToAlert=function(e,t,n,r){var i=this;return Q.tryCatch((function(){i._alertsRepo.removeFromCapiMapping(e);var a=i._createFeedbackUndoable(e,t,r);return e.changeState(pe.bZ.State.Applied.create(a,n,pe.bZ.State.Applied.Method.ByCard,se.h.create(e)))}),g.toError)},e.prototype._createFeedbackUndoable=function(e,t,n){var r=this;return{action:t,replacement:e.replaceText,commit:n,undo:function(){return r._alertsRepo.addToCapiMapping(e)}}},e.prototype._commitToCapi=function(e,t){var n=this;return(0,s.pipe)(e.rawId,v.fold((0,o.constant)((function(){return n._log.debug("skip feedback for local alert",e)})),(function(e){return n._sendFeedback((0,i.__assign)({id:e},t))})))},e.prototype._sendFeedback=function(e){var t=this;return function(){ie.Vi(t._capiFeedbackClient.sendFeedback(e)).catch((function(e){re.EP.isDroppedError(e)?t._log.debug("Stopped listening for feedback message acknowledge",e):re.YG.isNotConnectedError(e)?t._log.warn("Failed to send alert feedback as CAPI was not connected",e):t._log.error("Failed to send alert feedback",e)}))}},e.prototype._switchToBeingApplied=function(e,t,n){var r=this;return Q.tryCatch((function(){return r._alertsRepo.removeFromCapiMapping(e),e.switchToBeingAppliedState(t,n)}),g.toError)},e}(),Ie=n(83078);!function(e){e.toString=g.fold((function(e){return"rid:"+e.id}),(function(e){return"aid:"+e.toString()}))}(_e||(_e={})),function(e){e.match=function(e){return function(t){return t instanceof pe.Ev?e.alertAddOrUpdate(t):t instanceof Map?e.rangeChange(t):"_tag"in t?e.alertRemove(t):e.alertChange(t)}}}(Se||(Se={})),function(e){e.defaultValidator=pe.bZ.isDuplicatedBy}(Ce||(Ce={}));var Ae,Ee,ke=function(){function e(t,n,r){var i=this;this._positionManager=t,this._alertsRepo=n,this._alertDuplicateValidator=r,this._log=b.C8.Logging.getLogger("AlertManager.pipeline",b.zW.LogLevel.DEBUG),this._heuristicallyRemovedAlerts=new Map,this.process=function(e){return i._log.trace("process, to process = "+e.length),i._collectChanges(i._processAlertsBatch(e))},this.reset=function(e){return i._cleanupPendingAlerts(e),i._finishAlertsChecking()},this._processAlertsBatch=function(t){var n=i._processBatch(t),r=n.toAdd,a=n.toUpdate,u=n.toAddOrUpdate,l=n.toRemoveUnfiltered,d=n.toChangeUnfiltered,p=n.toDispose,f=n.rangeChanges,m=function(e){return(0,s.pipe)(i._alertsRepo.getByAlertId(e),v.getOrElse((function(){return r.get(e)||a.get(e)||p.get(e)})))};d.forEach((function(t){return(0,s.pipe)(v.fromNullable(u.get(t.id)),v.fold((function(){return(0,s.pipe)(i._alertsRepo.getByRawAlertId(t.id),v.map((function(n){var r=n.copy();r.patchWithRawAlert(e._prepareUpdate(r,t)),a.set(r.id,r),u.set(t.id,r)})),v.getOrElse((function(){return i._log.info("Change from CAPI: Cannot find internal AlertId.")})))}),(function(n){var r=e._prepareUpdate(n,t);a.has(n.id)?n.patchWithRawAlert(r):n.updateAlertWithManagedData(r)})))}));var y=l.reduce((function(e,t){var n=(0,s.pipe)(t,g.fold((function(e){var t=e.id;return(0,s.pipe)(i._alertsRepo.getByRawAlertId(t),v.map((function(e){return pe.bZ.isRegistered(e)?e:void 0})),v.getOrElse((function(){return i._heuristicallyRemovedAlerts.has(t)?void i._heuristicallyRemovedAlerts.delete(t):u.get(t)})))}),m));return void 0===n?(g.isLeft(t)?i._log.debug("Remove from CAPI: Cannot find internal AlertId. capiId: #"+JSON.stringify(t.left)):i._log.error("Cannot find existing alert by id",t.right),e):((0,s.pipe)(i._getMergeTarget(t,u),v.filter(Te((function(e){return e.lensId!==n.lensId?(i._log.warn("Trying to merge alerts from different lenses",{source:n,target:e}),!1):v.isNone(n.rawId)?(i._log.warn("Trying to merge into local alert",{source:n,target:e}),!1):n.references>e.references}))),v.fold((function(){e.set(n.id,{alert:n,reason:(0,s.pipe)(t,g.swap,v.fromEither,v.chain((function(e){return e.hint})),v.chain((function(e){return e===c.A.NotFixed?v.some(pe.bZ.State.Removed.Reason.capiDismiss):v.none})),v.getOrElse((function(){return pe.bZ.State.Removed.Reason.capiDone})))})}),g.fold((function(e){i._log.debug("swap raw alerts with new alert",{source:n.toString(),newTarget:e.toString()}),i._alertsRepo.swapRaw(n,e);var t=Ie.MH(n.rawId);(0,h.kG)(void 0===a.get(e.id),"Added alert should not be present in the updated alerts map",(function(){return a.get(e.id).toString()}));var o=n.copy();a.set(o.id,o),u.set(t,o),r.delete(e.id),p.set(e.id,e)}),(function(t){i._log.debug("swap raw alerts with existing alert",{source:n.toString(),existingTarget:t.toString()}),i._alertsRepo.swapRaw(n,t),e.set(t.id,{alert:t,reason:pe.bZ.State.Removed.Reason.capiDismiss})})))),e)}),new Map),b=new Map;return f&&f.forEach((function(e,t){(0,s.pipe)(t,m,v.fromPredicate((function(n){return n?pe.bZ.isInteractable(n)?!a.has(n.id)||(i._log.debug("skip range change on updateHolder alert",n.toLiteString()),!1):(i._log.debug("skip range change on non-interactable alert",n.toLiteString()),!1):(i._log.warn("got range changes for unknown alert",{alertId:t,alertRanges:e}),!1)})),v.chain((function(n){return(0,s.pipe)(n.onRangeChange(e),v.map((function(e){switch(e.state){case pe.bZ.Transition.State.Pending:return b.set(n.id,[n,e.removedRanges]);case pe.bZ.Transition.State.Dispose:return(0,s.pipe)(n.rawId,v.fold((function(){return i._log.debug("dispose by range change on unknown rid",n.id)}),(function(e){return i._heuristicallyRemovedAlerts.set(e,n)}))),y.set(t,{alert:n,reason:pe.bZ.State.Removed.Reason.textChange});default:return(0,h.vE)(e)}})))})))})),y.forEach((function(e){var t=e.alert;i._log.trace("check cancellations from toRemove: "+t.toLiteString()),(0,s.pipe)(t.rawId,v.fold((function(){r.get(t.id)&&(i._log.debug("cancel add local alert for: "+t.toLiteString()),r.delete(t.id),y.delete(t.id),p.set(t.id,t)),(0,h.kG)(!1===a.has(t.id),"Added local alert should not be present in the updated alerts map",(function(){return a.get(t.id).toString()}))}),(function(e){var n=u.get(e);n&&(u.delete(e),r.delete(n.id)?(i._log.debug("cancel add for: "+n.toLiteString()),i._log.debug("cancel remove for: "+t.toLiteString()),y.delete(t.id),p.set(t.id,t),p.set(n.id,n)):a.delete(n.id)?(i._log.debug("cancel update for: "+n.toLiteString()),n.id!==t.id&&(i._log.debug("marking update to dispose: "+n.toLiteString()),p.set(n.id,n))):i._log.error("_addOrUpdateAlert toAdd || toUpdate mapping in unsync state!",n))}))),i._log.trace("check if local orphan toRemove: "+t.toLiteString()),(0,s.pipe)(i._alertsRepo.getByAlertId(t.id),v.fold((function(){i._log.debug("cancel delete for: "+t.toLiteString()),y.delete(t.id)}),o.constVoid))})),p.size>0&&i._log.debug("_cancelAlerts, to cancel = "+p.size,{alerts:Array.from(p.values()).map((function(e){return e.toLiteString()}))}),p.forEach((function(e){b.delete(e.id)&&i._log.debug("cancel startChecking for: "+e.toLiteString());try{e.dispose()}catch(t){i._log.warn("unexpected error on disposing canceled alert",t,e)}})),{toAdd:r,toUpdate:a,toRemove:y,toStartChecking:b}},this._collectChanges=function(e){var t=e.toAdd,n=e.toUpdate,r=e.toRemove,a=e.toStartChecking,o=i._addAlerts(Array.from(t.values()),r),s=o.alertsToAdd,u=o.alertsToUpdate,c=o.alertsToRemove;return n.size>0&&i._updateAlerts(Array.from(n.values()),u),a.size>0&&i._startAlertsChecking(Array.from(a.values()),u,s),c.size>0&&i._removeAlerts(c,u),{added:s,updated:u}},this._validateAlertAdd=function(e){try{var t=!pe.bZ.isPremium(e)||void 0!==e.categoryHuman;return e._raw.impact!==l.wQ.Impact.Critical&&e._raw.impact!==l.wQ.Impact.Advanced&&v.isSome(e.rawId)&&i._log.warn("CAPI provides corrupted impact prop",{alert:e,raw:l.wQ.clearUserTextFields(e._raw)}),t||(i._log.error("CAPI provides corrupted alert",{alert:e,raw:l.wQ.clearUserTextFields(e._raw)}),e.dispose()),(0,s.pipe)(e.rawId,v.exists((function(e){return v.isSome(i._alertsRepo.getByRawAlertId(e))})))?(i._log.warn("unexpected overlap on rawId for non-updatable alert",{alert:e,raw:l.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):e.lensType===F.R.Type.Plagiarism&&O.T.isMax(e.progress)?(i._log.info("CAPI provides a Plagiarism alert with an invalid progress",{alert:e,raw:l.wQ.clearUserTextFields(e._raw)}),e.dispose(),!1):t}catch(t){i._log.error("Cannot validate alert",t);try{e.dispose()}catch(e){i._log.warn("Cannot dispose invalid alert",e)}return!1}},this._recheckedAlerts=new Set,this._terminateAlertChecking=function(e){var t=e.id;i._recheckedAlerts.delete(t)&&i._log.debug("Stopped watching checking state for alert",t)},this._applyRemoveToAlert=function(e){var t=e.alert,n=e.reason;return i._alertsRepo.removeFromCapiMapping(t),n!==pe.bZ.State.Removed.Reason.textChange&&t.clearCapiId(),t.changeState(pe.bZ.State.Removed.create(n))},this._finishAlertChecking=function(e){(0,h.kG)(i._recheckedAlerts.delete(e.id),"tried to finish checking on alert which had not been marked as checking"),i._log.debug("Stopped watching checking state for alert",e.id);var t=se.h.create(e);return pe.xS.create(t,se.h.create(e.changeState(pe.bZ.State.Registered.create(pe.bZ.CheckingState.IDLE))))}}return e._prepareUpdate=function(e,t){var n=(0,i.__assign)((0,i.__assign)({},e.toRawAlert()),{rev:t.rev});return l.wQ.withTransformJson(n)&&(0,s.pipe)(t.transformJson,Ie.bw((function(e){return n.transformJson=e}))),(0,s.pipe)(t.extraProperties,Ie.bw((function(e){return n.extra_properties=e}))),(0,s.pipe)(t.muted,Ie.bw((function(e){return n.muted=e}))),n},e.prototype._processBatch=function(e){var t=this;return e.reduce((function(e,n){return Se.match({alertAddOrUpdate:function(n){(0,s.pipe)(n.rawId,v.fold((function(){e.toAdd.set(n.id,n)}),(function(r){(0,s.pipe)(t._alertsRepo.getByRawAlertId(r),v.filter((function(e){return e.allowUpdate})),v.map((function(){(0,s.pipe)(v.fromNullable(e.toAddOrUpdate.get(r)),v.map((function(n){t._log.debug("got overlap in batch on update"),e.toUpdate.delete(n.id),e.toDispose.set(n.id,n)}))),e.toUpdate.set(n.id,n)})),v.getOrElse((function(){(0,s.pipe)(v.fromNullable(e.toAddOrUpdate.get(r)),v.map((function(n){t._log.info("got overlap in batch on add"),e.toAdd.delete(n.id),e.toDispose.set(n.id,n)}))),e.toAdd.set(n.id,n)}))),e.toAddOrUpdate.set(r,n)})))},rangeChange:function(t){(0,h.kG)(void 0===e.rangeChanges,"unexpected rangeChanges duplicate"),e.rangeChanges=t},alertRemove:function(t){e.toRemoveUnfiltered.push(t)},alertChange:function(t){e.toChangeUnfiltered.push(t)}})(n),e}),{toAdd:new Map,toRemoveUnfiltered:[],toChangeUnfiltered:[],toUpdate:new Map,toAddOrUpdate:new Map,rangeChanges:void 0,toDispose:new Map})},e.prototype._getMergeTarget=function(e,t){var n=this;return(0,s.pipe)(e,g.swap,v.fromEither,v.chain((function(e){return e.mergedIn})),v.chain((function(e){var r=(0,s.pipe)(n._alertsRepo.getByRawAlertId(e),v.map((function(e){return g.right(e)})),v.alt((function(){return(0,s.pipe)(v.fromNullable(t.get(e)),v.map((function(e){return g.left(e)})))})));return v.isNone(r)&&n._log.warn("Merge from CAPI: Cannot find alert to merge into.",{capiId:e}),r})),v.filter(Te((function(e){return!!e.allowUpdate||(n._log.warn("Merge from CAPI: Trying to merge in a non-updatable alert, skipping. ",{target:e.toLiteString()}),!1)}))))},e.prototype._addAlerts=function(e,t){var n=this;return e.length>0&&this._log.debug("_addAlerts, count = "+e.length,{alerts:e.map((function(e){return e.toLiteString()}))}),(0,s.pipe)(e,ae.filter(this._validateAlertAdd),ae.reduce({alertsToAdd:new Map,alertsToUpdate:new Map,alertsToRemove:t},(function(e,t){n._log.trace("Adding alert: "+t.toLiteString());var r=n._getAlertsWithMatchingRanges(t.getHighlightRanges()[0]),i=n._tryToMatchInvalid(t,r);switch(n._log.trace("Adding alert match result",{inc:t.id,match:i}),i.type){case Ae.Type.Merged:var a=i.result[1];pe.bZ.isNotRegistered(a.alert)?pe.bZ.isRemoved(a.alert)&&n._log.warn("unexpected merge into removed alert",{alert:a,newAlert:t}):n._alertsRepo.addToCapiMapping(a.alert),e.alertsToUpdate.set(a.id,i.result);break;case Ae.Type.Restored:a=i.result[1];(0,h.kG)(!e.alertsToRemove.has(a.id),"can't update alert which we wanted to remove earlier"),n._alertsRepo.addToCapiMapping(a.alert),e.alertsToUpdate.set(a.id,i.result);break;case Ae.Type.Unmatched:var o=i.result,u=r.filter((function(t){return pe.bZ.isDuplicateCandidate(t)&&n._alertDuplicateValidator(o,t)&&!e.alertsToRemove.has(t.id)}));(0,h.kG)(o.allowDuplicates||pe.bZ.isApplicableAlert(o),"BaseAlertImpl must allow duplicates or be an ApplicableAlert type"),u.length>0&&n._log.info("Trying to add a duplicated alert",{newAlert:t.toString(),duplicates:u.map((function(e){return e.toString()}))});var c=o.allowDuplicates?{result:Ee.Add,toRemove:v.none}:n._tryAddAlert(o,u);switch(c.result){case Ee.Add:case Ee.OverwriteExisting:n._log.debug("AllAlerts: Append alert to all alerts",o.toLiteString()),n._alertsRepo.addToCapiMapping(o),(0,h.kG)(!e.alertsToRemove.has(o.id),"can't add alert which we wanted to remove earlier",(function(){return o.toLiteString()})),n._alertsRepo.add(o),e.alertsToAdd.set(o.id,se.h.create(o)),(0,s.pipe)(c.toRemove,Ie.bw((function(t){if(e.alertsToAdd.has(t.id)){n._alertsRepo.removeFromCapiMapping(t);var r=t.changeState(pe.bZ.State.Removed.create(pe.bZ.State.Removed.Reason.canceled));n._terminateAlertChecking(r),n._alertsRepo.remove(r)}else n._log.debug("schedule to remove duplicate",t.toLiteString()),e.alertsToRemove.set(t.id,{alert:t,reason:pe.bZ.State.Removed.Reason.duplicated});e.alertsToAdd.delete(t.id),e.alertsToUpdate.delete(t.id)})));break;case Ee.Skip:n._log.debug("Skip alert with low priority",o.id);break;default:(0,h.vE)(c.result)}break;default:(0,h.vE)(i)}return e})))},e.prototype._updateAlerts=function(e,t){var n=this;this._log.debug("_updateAlerts, to update = "+e.length,{alerts:e.map((function(e){return e.toLiteString()}))}),(0,s.pipe)(e,ae.reduce(t,(function(e,t){return n._log.trace("Updating alert: "+t.toLiteString()),(0,s.pipe)(n._alertsRepo.getByRawAlertId(Ie.MH(t.rawId)),v.fold((function(){return n._log.warn("tried to update unknown alert",t)}),(function(n){var r=t._raw;t.dispose();var i=e.has(n.id)?e.get(n.id)[0]:se.h.create(n);n.enqueueRawAlertForUpdate(r),e.set(n.id,pe.xS.create(i,se.h.create(n)))}))),e})))},e.prototype._startAlertsChecking=function(e,t,n){var r=this;this._log.debug("_startAlertsChecking, to update = "+e.length,{alerts:e.map((function(e){var t=e[0],n=e[1];return[t.toLiteString(),n]}))});var i=function(e,t){var n=e.changeState(pe.bZ.State.Registered.create(pe.bZ.CheckingState.CHECKING));return r._recheckedAlerts.add(e.id),se.h.create(t.size>0?n.enqueueRangesRemove(t):n)};(0,s.pipe)(e,ae.reduce({updatedAlerts:t,addedAlerts:n},(function(e,t){var n=t[0],a=t[1];return(0,s.pipe)(r._alertsRepo.getByAlertId(n.id),v.fold((function(){r._log.warn("tried to start checking unknown alert",{alert:n,ranges:a})}),(function(){if(e.addedAlerts.has(n.id))e.addedAlerts.set(n.id,i(n,a));else{var t=e.updatedAlerts.has(n.id)?e.updatedAlerts.get(n.id)[0]:se.h.create(n);e.updatedAlerts.set(n.id,pe.xS.create(t,i(n,a)))}}))),e})))},e.prototype._removeAlerts=function(e,t){var n=this;e.forEach((function(e,r){(0,s.pipe)(n._alertsRepo.getByAlertId(r),v.fold((function(){n._log.warn("tried to remove unknown alert",e)}),(function(){var i=t.has(r)?t.get(r)[0]:se.h.create(e.alert),a=n._applyRemoveToAlert(e);n._terminateAlertChecking(a),t.set(r,pe.xS.create(i,se.h.create(a)))})))}))},e.prototype._getAlertsWithMatchingRanges=function(e){var t=this;return(0,s.pipe)(this._positionManager.findIntersections(e),ae.filter((0,m.W9)(J.P.is,J.x.isVisible)),ae.filterMap((function(e){return t._alertsRepo.getByAlertId(e.meta.alertId)})),ae.filter((function(e){return!(pe.bZ.isApplied(e)&&e.getAppliedRanges().length>0)})))},e.prototype._tryToMatchInvalid=function(e,t){var n=this;return(0,h.kG)(!e.isValid,"added alert should be invalid"),(0,h.kG)(pe.bZ.isRegistered(e),"added alert should be in registered state",(function(){return e.toString()})),(0,s.pipe)(v.fromNullable(t.find((function(t){return!t.isValid&&t.canBeMergedWith(e)}))),v.fold((function(){return{result:e,type:Ae.Type.Unmatched}}),(function(t){(0,h.kG)((0,s.pipe)(t.rawId,Ie.wo((0,o.flow)(n._alertsRepo.getByRawAlertId,v.isNone))),"CAPI mapping should not contain invalid alerts"),n._log.debug("Merging new alert ("+e+") into the existing one aid("+t+")");var r=se.h.create(t);return t.patchWithRawAlert(e._raw),e.dispose(),t.allowUpdate&&pe.bZ.isCapiDone(t)?{result:pe.xS.create(r,se.h.create(t.changeState(pe.bZ.State.init))),type:Ae.Type.Restored}:{result:pe.xS.create(r,se.h.create(t)),type:Ae.Type.Merged}})))},e.prototype._tryAddAlert=function(e,t){return(0,s.pipe)(oe.fromArray(t),v.map((function(t){(0,h.kG)(1===t.length,"Only one visible alert to one range is expected while _tryEnqueueAlert","got "+t.map((function(e){return e.toString()}))+" with input ("+e.toString()+")");var n=t[0];return n.extraProperties.priority<=e.extraProperties.priority?{result:Ee.OverwriteExisting,toRemove:v.some(n)}:(e.dispose(),{result:Ee.Skip,toRemove:v.none})})),v.getOrElse((function(){return{result:Ee.Add,toRemove:v.none}})))},e.prototype._cleanupPendingAlerts=function(e){var t=this;e.removed.forEach((function(e){t._heuristicallyRemovedAlerts.delete(e)&&t._log.info("unexpected alert remove from finish msg",e)})),this._heuristicallyRemovedAlerts.size>0&&this._log.info("we had heuristically removed alerts which were not confirmed by capi",{size:this._heuristicallyRemovedAlerts.size}),this._heuristicallyRemovedAlerts.clear()},e.prototype._finishAlertsChecking=function(){var e=this;return(0,s.pipe)(Array.from(this._recheckedAlerts.values()),ae.filterMap((function(t){var n=e._alertsRepo.getByAlertId(t);v.isNone(n)&&(e._log.error("tried to finish checking on missing alert",t),e._recheckedAlerts.delete(t));var r=(0,s.pipe)(n,v.filter((function(e){return pe.bZ.isRegistered(e)})),v.map((function(t){return(0,o.tuple)(t.id,e._finishAlertChecking(t))})));return v.isNone(r)&&e._log.error("tried to update checking state on non-registered alert",t),r})),(function(e){return{updated:new Map(e)}}))},e}();function Te(e){return g.fold(e,e)}!function(e){!function(e){e.Unmatched="Unmatched",e.Merged="Merged",e.Restored="Restored"}(e.Type||(e.Type={}))}(Ae||(Ae={})),function(e){e.Skip="Skip",e.Add="Add",e.OverwriteExisting="OverwriteExisting"}(Ee||(Ee={}));var Le=function(){var e=this;this._log=b.C8.Logging.getLogger("AlertManager.repository",b.zW.LogLevel.DEBUG),this._allAlerts=new Map,this._capiAlertsIdMapping=new Map,this.add=function(t){e._allAlerts.set(t.id,t)},this.remove=function(t){e._log.trace("AllAlerts: Clean alert from all alerts",t.toLiteString()),(0,h.kG)(0===t.references,"can not dispose alert in use",(function(){return t.toString()})),(0,h.kG)(!1===t.isValid,"can not dispose valid alert",(function(){return t.toString()})),(0,h.kG)(e._allAlerts.delete(t.id),"alert should exist in alerts list",(function(){return t.toString()})),t.dispose()},this.addToCapiMapping=function(t){t.isValid||(0,s.pipe)(t.rawId,v.fold((function(){return e._log.debug("skip register of local alert in capi mapping",t)}),(function(n){e._log.trace("register alert in capi mapping",t.toLiteString()),(0,h.kG)(void 0===e._capiAlertsIdMapping.get(n),"unexpected overlap of rawid alert",(function(){return t.toString()})),t.validate(),e._capiAlertsIdMapping.set(n,t.id)})))},this.removeFromCapiMapping=function(t){t.isValid&&((0,s.pipe)(t.rawId,Ie.bw((function(n){e._log.trace("clean valid alert capi mapping for: "+t.toLiteString()),(0,h.kG)(e._capiAlertsIdMapping.delete(n),"valid alert should had valid raw id",(function(){return t.toString()}))}))),t.invalidate())},this.getByAlertId=function(t){return v.fromNullable(e._allAlerts.get(t))},this.getByRawAlertId=function(t){return(0,s.pipe)(v.fromNullable(e._capiAlertsIdMapping.get(t)),v.chain(e.getByAlertId))},this.swapRaw=function(t,n){var r=(0,s.pipe)(t.rawId,v.exists((function(t){return e._capiAlertsIdMapping.has(t)}))),i=(0,s.pipe)(t.rawId,v.exists((function(t){return e._capiAlertsIdMapping.has(t)})));(0,h.kG)(r||i,"At least one of the swapped alerts should be registered in the system");var a=t._raw;t.silentPatchWithRawAlert(n._raw),n.silentPatchWithRawAlert(a),r&&e._capiAlertsIdMapping.set(Ie.MH(t.rawId),t.id),i&&e._capiAlertsIdMapping.set(Ie.MH(n.rawId),n.id)},this.toArray=function(){return Array.from(e._allAlerts.values())},this.toMap=function(){return e._allAlerts},this.toJSON=function(){return{allAlerts:Array.from(e._allAlerts.entries()),idMapping:Array.from(e._capiAlertsIdMapping.entries())}}},Pe=n(16185),Re=function(){function e(e,t,n,i,l,d,h,C){var x=this;void 0===C&&(C=Ce.defaultValidator),this._positionManager=e,this._alternativeManager=t,this._getContent=n,this._capiEvents=i,this._capiClient=l,this._documentCounters=d,this._transformRawAlert=h,this._alertDuplicateValidator=C,this._state=u.h.create(S.r.empty),this.state=this._state.view(S.r.toCheckingResult),this.lensesScores=u.h.create(L.empty),this._log=b.C8.Logging.getLogger("AlertManager",b.zW.LogLevel.TRACE),this._subs=[],this._addAlerts=new H.xQ,this._removeAlerts=new H.xQ,this._changeAlerts=new H.xQ,this._flush=new H.xQ,this._alertsPerRevision=0,this._alertsRepo=new Le,this._pipeline=new ke(this._positionManager,this._alertsRepo,this._alertDuplicateValidator),this._invalidateAlerts=function(){x.flushAlerts();var e=p.uK(x._getAllAlertsAsArray(),(function(e){return e.isValid})),t=e[0],n=e[1];x._log.debug("Invalidate alerts...",{valid:t.length,invalid:n.length}),t.forEach((function(e){x._alertsRepo.removeFromCapiMapping(e),e.clearCapiId()})),n.forEach((function(e){return e.clearCapiId()}))},this._removeInvalidAlerts=function(e){x._log.debug("Removing invalid alerts by type '"+e+"'...");var t=x._getTypeFilter(e),n=x._getAllAlertsAsArray().filter((function(e){return!e.isValid&&pe.bZ.isRegistered(e)&&t(e)}));n.forEach((function(e){return x._removeAlertBuffered(g.right(e.id))})),x._log.debug(n.length+" invalid alerts removed"),x.flushAlerts(),x._log.isEnabled(b.zW.LogLevel.TRACE)&&x._log.trace("Removed alerts",n.map((function(e){return e.toString()})))},this._onCapiEvent=function(e){try{switch("alert_received"===e.kind&&x._alertsPerRevision++,e.kind){case"alert_received":case"plagiarism_alert_received":if(!1===e.alert.hidden&&void 0===e.alert.cardLayout)return void x._log.warn("got alert with empty mapping",{pname:e.alert.pname});x._addAlertBuffered(pe.bZ.create(x._transformRawAlert(e.alert),x._ops,x._positionManager,x._alternativeManager));break;case"alert_removed":x._log.debug("Remove from capi #"+e.alertId+", merged in #"+v.getOrElse((function(){return"None"}))(e.mergedIn)+", hint: "+v.getOrElse((function(){return"None"}))(e.hint)),(0,s.pipe)(x._alertsRepo.getByRawAlertId(e.alertId),v.exists(pe.bZ.isBulkApplied))||x._removeAlertBuffered(g.left({id:e.alertId,mergedIn:e.mergedIn,hint:e.hint}));break;case"alert_changed":x._log.debug("Alert change from capi #"+e.alertId),x._changeAlertBuffered({id:e.alertId,rev:e.rev,extraProperties:v.fromNullable(e.extraProperties),transformJson:v.fromNullable(e.transformJson),muted:v.fromNullable(e.muted)});break;case"finish":x._log.debug("Alerts per revision (#"+e.revision+"): "+x._alertsPerRevision),x._alertsPerRevision=0,"idle"===x._capiClient.checkingState&&x._emitDomainEvent(x._pipeline.reset(e))}}catch(t){x._log.warn("Cannot handle alert event "+e.kind,t)}},this._emitDomainEvent=function(e){(0,s.pipe)(e,x._prepareDiff,_.v.createDiff,f.T.recover((function(e){return x._log.error("conflicts on diff creating",e)})),(function(e){return x._log.debug("_emitDomainEvent",w.p.Diff.show.show(e)),e}),S.r.applyDiff,y.map(f.T.recover((function(e){return x._log.error("conflicts on diff apply",e)}))),(function(e){return x._state.modify(e)}))},this._prepareDiff=function(e){var t=e.added,n=e.updated,r=void 0===n?new Map:n,i=e.removed,u=void 0===i?new Map:i;return r.forEach((function(e,t){(0,s.pipe)(e,a.snd,pe.bZ.fromAlertModel,pe.bZ.shouldBeRemoved)&&(r.delete(t),u.set(t,e[0]))})),u.forEach((0,o.flow)(pe.bZ.fromAlertModel,x._disposeAlert)),{added:t,updated:r,removed:u}},this._disposeAlert=function(e){if(pe.bZ.isApplied(e)&&e.state.undoable.commit(),pe.bZ.isNotRegistered(e))try{x._alertsRepo.remove(e)}catch(t){x._log.error("can not remove alert",t),pe.bZ.isNotDisposed(e)&&e.dispose()}else x._log.error("unexpected remove of registered alert",e.toString())},this._ops=new xe(this._positionManager,this._getContent,this._capiClient,this._alertsRepo),this.loadScores=function(e){x.lensesScores.set(e)},this.undoApplied=this._ops.undoApplied,this.changes=this._ops.changes;var I=e.rangeChanged.pipe(T.U((function(e){return e.affected})),B.h((function(e){return e.length>0})),T.U((function(e){return U.vM((function(e){return e.meta.alertId}),e.filter(J.P.is))})),B.h((function(e){return e.size>0})),k.b((function(e){return x._log.debug("Range[s] changed",e)})),z.B()),A=j.F(250).pipe(G.O(0),q.T(this._flush)),E=W.RX(this._log);this._subs.push(E("_alertsInvalidation",this._capiEvents.pipe(B.h(c.h.is("session_started")),k.b(this._invalidateAlerts),$.c(V.T(this._capiEvents.pipe(B.h(c.h.is("finish")),X.P(),Y.h("alert")),this._capiEvents.pipe(B.h(c.h.is("async_check_finished")),X.P(),Y.h("plagiarism")))),k.b(this._removeInvalidAlerts))),E("_capiEvents",this._capiEvents.pipe(k.b(this._onCapiEvent))),E("_alertsProccesing",this._addAlerts.pipe(q.T(this._removeAlerts),q.T(this._changeAlerts),q.T(I),Z.f(A),B.h(m.Dw),T.U(this._pipeline.process),k.b(this._emitDomainEvent))),E("_alertsBuffer",I.pipe(q.T(this._capiEvents.pipe(B.h(c.h.is("before_finish","before_async_check_finish","async_check_finished")))),Y.h(W.PU),k.b(this._flush))),E("_alertOpsAlertChanges",this._ops.events.pipe(k.b(this._emitDomainEvent))),E("_lensesScoresChanges",L.fromCapi(this._capiEvents).pipe(k.b(W.wW(this.lensesScores)))),E("documentCountersChanges",r.fromAlerts(this._state.view(_.v.iso.wrap)).pipe(k.b(W.wW(this._documentCounters))))),(0,m.iR)("alerts",(function(){return x.toString()})),(0,m.iR)("triggerRemove",(function(e){x._removeAlertBuffered(g.right(e))}))}return e.prototype.flushAlerts=function(){this._flush.next()},e.prototype.loadAlerts=function(e){var t=this,n=new Map;return(0,m.Dw)(e)&&(this._log.debug(e.length+" external alert(s) where loaded"),e.map(Pe.I.splitById).map((function(e){var n=e.id,r=e.local;return{id:n,alert:pe.bZ.create((0,s.pipe)(r,l.wQ.matchBy(o.identity,(function(e){return(0,i.__assign)((0,i.__assign)({},e),{transformJson:{highlights:e.transformJson.highlights,alternatives:(0,s.pipe)(e.transformJson.alternatives,v.map(d.r3.Group.fromSerialized))}})}),o.identity),t._transformRawAlert),t._ops,t._positionManager,t._alternativeManager)}})).forEach((function(e){var r=e.id,i=e.alert;t._addAlertBuffered(i),r&&n.set(r,i.id)}))),n},e.prototype.toString=function(){return JSON.stringify(this,void 0,2)},e.prototype.toJSON=function(){return{repo:this._alertsRepo}},e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._getTypeFilter=function(e){switch(e){case"alert":return function(e){return!pe.bZ.isPlagiarism(e)};case"plagiarism":return function(e){return pe.bZ.isPlagiarism(e)};default:return(0,h.vE)(e)}},e.prototype._addAlertBuffered=function(e){this._log.trace("_addAlert("+e.toLiteString()+")"),this._addAlerts.next(e)},e.prototype._changeAlertBuffered=function(e){this._log.trace("_changeAlert("+e.id+")"),this._changeAlerts.next(e)},e.prototype._removeAlertBuffered=function(e){this._log.trace("_removeAlert("+_e.toString(e)+")"),this._removeAlerts.next(e)},e.prototype._getAllAlertsAsArray=function(){return this._alertsRepo.toArray().filter(pe.bZ.isNotRemoved)},e}()},53487:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var r,i=n(73805),a=n(64909),o=n(76779),s=n(17753);!function(e){e.create=function(e){var t=function(t){return(0,i.pipe)(e.get(),o.p.get(t),a.map(s.bZ.fromAlertModel))},n=function(e){return(0,i.pipe)(t(e),a.filter(s.bZ.isInteractable))},r=function(e){return(0,i.pipe)(t(e),a.filter(s.bZ.isRegistered))};return{getById:t,getRegistered:r,getInteractable:n,isRegistered:function(e){return(0,i.pipe)(r(e),a.isSome)},isInteractable:function(e){return(0,i.pipe)(n(e),a.isSome)}}}}(r||(r={}))},24273:(e,t,n)=>{"use strict";n.d(t,{J:()=>r,k:()=>y});var r,i=n(489),a=n(65772),o=n(90049),s=n(22902),u=n(71102),c=n(45980),l=n(73805),d=n(47442),p=n(64909),f=n(95574),m=n(81670),h=n(92932),g=n(17753),v=n(10002);!function(e){e.getSubTypeFromLens=function(e){return v.R.isPriority(e)||v.R.isPriorityOutcomeId(e)?d.e3.SidebarPriority:d.e3.Sidebar}}(r||(r={}));var y=function(){function e(e,t){var n=this;this._alertsReader=e,this._ops=t,this._log=h.C8.Logging.getLogger("AlertsServiceImpl"),this._findAlert=function(e){return(0,l.pipe)(e,n._alertsReader.getById,a.fromOption((function(){return new Error("alert "+e+" not found in the repo")})))},this.undoBulk=(0,c.flow)(u.filterMap((0,c.flow)(this._alertsReader.getById,p.filter(g.bZ.isBulkApplied))),(function(e){return n._ops.undoApplied(e,g.bZ.State.Applied.Method.Bulk)()}),a.getOrElse((function(e){throw n._log.error("Could not undo bulk-applied alerts",e),e}))),this.getHighlightRanges=(0,c.flow)(this._findAlert,a.map((function(e){return e.getHighlightRanges()}))),this.hasNewRangesForUpdate=(0,c.flow)(this._findAlert,a.map((function(e){return e.hasNewRangesForUpdate}))),this.applyPendingRangesUpdate=(0,c.flow)(this._findAlert,a.map((function(e){return e.applyPendingRangesUpdate()}))),this.getAppliedRanges=(0,c.flow)(this._alertsReader.getById,a.fromOption((function(){return new Error("alert not found in the repo")})),a.filterOrElse(g.bZ.isApplicableAlert,(function(e){return new Error("alert is not applicable: "+e.alertType)})),a.map((function(e){return e.getAppliedRanges()})))}return e.prototype.apply=function(e,t,n,r){var i=this;return this._log.trace("apply",e),(0,l.pipe)(this._findAlert(e),a.chain(a.fromPredicate(g.bZ.isApplicableAlert,(function(){return new Error("cannot apply not applicable alert")}))),a.chain((function(e){return(0,l.pipe)(f.vM((function(){return e.apply(t,r,n)})),a.mapLeft((function(r){return i._log.error("apply single alert error",{error:r,alert:e.toLiteAlert(),alternativeIndex:t,source:n}),r})))})))},e.prototype.applyBulk=function(e,t){var n=this;this._log.trace("applyBulk",e),this.sendBatchFeedback(e,d.DI.BULK_ACCEPTED,t);var r=(0,l.pipe)(e,m.T.fromArray((function(e){return(0,l.pipe)(n._findAlert(e),a.mapLeft((function(t){return(0,c.tuple)(t,{id:e})})),a.chain(a.fromPredicate(g.bZ.isRegisteredApplicableAlert,(function(e){return(0,c.tuple)(new Error("cannot apply not applicable or non-registered alert"),e.toLiteAlert())}))),a.chain(a.fromPredicate((function(e){return d.wQ.withTransformJson(e._raw)}),(function(e){return(0,c.tuple)(new Error("Only alerts with transformJSON can be bulk applied"),e.toLiteAlert())}))),a.mapLeft((function(e){var t=e[0],r=e[1];return n._log.error(t.message,r),t})))})));return(0,l.pipe)(r,m.T.flatMap(i.getMonoid(),(function(e){return(0,l.pipe)(n._ops._applyTransformJson({alerts:e.map((function(e){return{alert:e,alternative:g.bZ.getApplicableAlternative(e,0)}})),source:g.l$.api,method:g.bZ.State.Applied.Method.Bulk,feedbackSubtype:t}),o.fold((function(t){return function(){return n._log.error("applyBulk error",t),m.T.of([],e.map((function(e){return e.id})))}}),(function(){return function(){return m.T.of(e.map((function(e){return e.id})))}})))()})))},e.prototype.confirmApplied=function(e){var t=this;return this._log.trace("commitApplied",e),(0,l.pipe)(e,m.T.fromArray((0,c.flow)(this._findAlert,a.map(g.Ev.castApplied))),a.mapLeft((function(e){return new Error("Error on trying to confirm applied alerts: "+e.rejected.join(","))})),a.chain((function(e){return t._ops._confirmApplied(e)()})))},e.prototype.dismissBatch=function(e,t){var n=this;return this._log.trace("dismissBatch",e),(0,l.pipe)(e.map((0,c.flow)(this._findAlert,a.map((function(e){return[e]})))),(0,s.fold)(w),a.chain((function(e){return n._ops._dismissBatch(e,t)()})))},e.prototype.applyFeedback=function(e,t,n){var r=this;return this._log.trace("sendFeedback",{alertId:e,type:t.kind}),(0,l.pipe)(this._findAlert(e),a.chain((function(e){return r._ops._alertFeedback(e,t,n)()})))},e.prototype.sendBatchFeedback=function(e,t,n){var r=this;return this._log.trace("sendBatchFeedback",{alertIds:e,type:t}),(0,l.pipe)(e,m.T.fromArray(this._findAlert),m.T.tapFailure((function(e){return r._log.error("Cannot send batch feedback for alerts",e.rejected)})),m.T.foldSuccess((function(e){return a.right(r._ops._alertBatchFeedback(e,t,n)())})))},e.prototype.takeReference=function(e,t){return this._log.trace("takeReference",{alertId:e.id,from:t}),(0,l.pipe)(this._findAlert(e.id),a.chain((function(e){return e.takeReference(t)})))},e.prototype.changeMuteState=function(e,t){var n=this;return this._log.trace("changeMuteState",e),(0,l.pipe)(e,m.T.fromArray((function(e){return n._findAlert(e.id)})),m.T.flatMap(i.getMonoid(),(function(e){return(0,l.pipe)(n._ops._changeMuteState(e,t)(),a.mapLeft((function(e){return n._log.error("Can not change mute state",e),e})),f.MH)})))},e.prototype.changeGapValue=function(e,t){var n=this;return(0,l.pipe)(this._findAlert(e),a.chain((function(e){return n._ops._changeGapValue(e,t)()})))},e.prototype.changeSmartPhrasesFeedback=function(e,t){var n=this;return(0,l.pipe)(this._findAlert(e),a.chain((function(e){return n._ops._changeSmartPhrasesFeedback(e,t)()})))},e.prototype.rotateSmartPhrasesReplacements=function(e){var t=this;return(0,l.pipe)(this._findAlert(e),a.chain((function(e){return t._ops._rotateSmartPhrasesReplacements(e)()})))},e.prototype.discardSmartPhrasesReplacement=function(e,t){var n=this;return(0,l.pipe)(this._findAlert(e),a.chain((function(e){return n._ops._discardSmartPhrasesReplacement(e,t)()})))},e.prototype.highlightSmartPhrasesLastAppliedReplacement=function(e){var t=this;return(0,l.pipe)(this._findAlert(e),a.chain((function(e){return t._ops._highlightSmartPhrasesLastAppliedReplacement(e)()})))},e.prototype.restoreSmartPhrasesOriginalHighlight=function(e){var t=this;return(0,l.pipe)(e,this._alertsReader.getById,p.fold((function(){return t._log.warn("Cannot find SmartPhrases alert (alert ID: "+e+") when trying to restore original highlight. Skipping."),(0,l.pipe)(void 0,a.right)}),(function(e){return(0,l.pipe)(e,a.right,a.chain((function(e){return t._ops._restoreSmartPhrasesOriginalHighlight(e)()})))})))},e}(),b=i.getMonoid(),w=(0,a.getApplyMonoid)(b)},44659:(e,t,n)=>{"use strict";n.d(t,{R:()=>o});var r=n(12738),i=n(51072),a=n(32952),o=function(){function e(t,n,i,a,o,s,u,c){var l=e.NamedChangesSink.factory(c),d={pm:l(e.Receiver.PM,o),dm:l(e.Receiver.PM,s),capi:l(e.Receiver.CAPI,a),dox:l(e.Receiver.DOX,i),userTextSilent:l(e.Receiver.UserText,e._duplexToSync(t,r.$.Mode.silent)),userTextEcho:l(e.Receiver.UserText,e._duplexToSync(t,r.$.Mode.echo))};e.Producer.create(e.Producer.UserText,{changes:t.changes})(d.dm,d.pm,d.capi,d.dox),e.Producer.create(e.Producer.ALERT_APPLY,u)(d.userTextEcho),e.Producer.create(e.Producer.DOX,i)(d.dm,d.pm,d.userTextSilent,d.capi),n.subscribe((function(e){"before_alert"===e.kind&&t.flushChanges()}))}return e.init=function(t,n,r,i,o,s,u){var c=new a.xQ;return new e(t,n,r,i,o,s,u,c),c},e._duplexToSync=function(e,t){return{pushChanges:function(n){e.pushChanges(n,t)}}},e}();!function(e){!function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.ALERT_APPLY="alert_synonyms_manager"}(e.Producer||(e.Producer={})),function(e){e.create=function(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.changes.subscribe((function(t){n.forEach((function(n){return n.pushChanges(e,t)}))}))}}}(e.Producer||(e.Producer={})),function(e){e.DEd="denali_editor",e.UserText="user_text",e.DOX="remote_document",e.CAPI="checking_service",e.PM="position_manager"}(e.Receiver||(e.Receiver={})),function(e){function t(e,t,n){return{pushChanges:function(r,a){try{var o=t.pushChanges(a);"function"==typeof o&&(o=i.Vi(o)),void 0!==o&&o.catch((function(t){return n.next({exception:t,details:{from:r,to:e}})}))}catch(t){n.next({exception:t,details:{from:r,to:e}})}}}}e.factory=function(e){return function(n,r){return t(n,r,e)}},e.create=t}(e.NamedChangesSink||(e.NamedChangesSink={}))}(o||(o={}))},84233:(e,t,n)=>{"use strict";n.d(t,{$:()=>B});var r,i,a,o=n(73805),s=n(49524),u=n(59312),c=n(65948),l=n(32952),d=n(95300),p=n(24209),f=n(76974),m=n(25656),h=n(18625),g=n(66310),v=n(50628),y=n(77176),b=n(2834),w=n(85985),_=n(95093),S=n(62962),C=n(95343),x=n(13444),I=n(83078),A=n(45980),E=n(64450),k=n(95574),T=n(65772),L=n(23594);!function(e){e.split=function(e,t){return[e]}}(r||(r={})),function(e){e.fromArrayOfDeltas=function(t,n){var r=n;return t.map((function(t){var n=e.delta(t,r);return r+=L.s.calcDiffLength(t),n}))};var t=function(){function e(e,t){this.delta=e,this.prevLen=t,this.kind="delta",this._length=void 0,this._amount=void 0,this._text=void 0}return Object.defineProperty(e.prototype,"length",{get:function(){return this._length||(this._length=L.s.calcDiffLength(this.delta))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount||(this._amount=L.s.calcAmountLength(this.delta))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var e=this;return this._text||(this._text=k.vM((function(){return e.delta.ops.reduce((function(e,t){return L.s.match((function(t){return""+e+t.insert}),(function(){throw new Error("can not get text on delta with deletes")}),(function(){throw new Error("can not get text on delta with retains")}))(t)}),"")})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isEmpty",{get:function(){return 0===this.delta.ops.length},enumerable:!1,configurable:!0}),e.prototype.compose=function(t){return new e(this.delta.compose(t.delta),this.prevLen)},e.prototype.transform=function(t,n){return void 0===n&&(n=!0),new e(t.delta.transform(this.delta,n),this.prevLen+t.length)},e.prototype.toString=function(){return"Delta("+this.delta+", pl: "+this.prevLen+")"},e}(),n=function(){function e(){this.kind="flush"}return e.prototype.toString=function(){return"Flush()"},e}(),r=function(){function e(e){this.delta=e,this.kind="reset"}return Object.defineProperty(e.prototype,"text",{get:function(){var e=this;return this._text||(this._text=k.vM((function(){return e.delta.ops.reduce((function(e,t){if(L.s.isInsert(t))return""+e+t.insert;throw L.s.isDelete(t)?new Error("can not get text on delta with deletes"):new Error("can not get text on delta with retains")}),"")})))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length||(this._length=L.s.calcDiffLength(this.delta))},enumerable:!1,configurable:!0}),e.prototype.compose=function(e){return a(this.delta.compose(e.delta))},e.prototype.toString=function(){return"Reset("+this.delta+")"},e}();function i(e,n){return void 0===n&&(n=0),new t(e,n)}function a(e){return L.s.containsInsertsOnly(e)?T.right(new r(e)):T.left(new Error("Delta should contains only inserts to be Reset"))}e.delta=i,e.ins=function(e,t,n){return void 0===n&&(n=0),i((new E.i).retain(e).insert(t),n)},e.del=function(e,t,n){return void 0===n&&(n=0),i((new E.i).retain(e).delete(t),n)},e.ret=function(e,t,n){return void 0===t&&(t=0),i((new E.i).retain(e,n),t)},e.res=a,e.unsafeRes=(0,A.flow)(a,k.MH),e.resFromText=function(e){return k.MH(a((new E.i).insert(e)))},e.flush=function(){return new n},e.isDelta=function(e){return"delta"===e.kind},e.isReset=function(e){return"reset"===e.kind},e.isFlush=function(e){return"flush"===e.kind}}(i||(i={})),function(e){e.diffAsChanges=function(e,t){var n=(new E.i).insert(e),r=(new E.i).insert(t);return i.delta(n.diff(r),e.length)}}(a||(a={}));var P,R,N=n(22232),M=n(92932),F=n(12738),O=function(){function e(e){var t=this;this._primarySourceChangeProcessor=e,this._log=M.C8.Logging.getLogger("DuplexImpl",M.zW.LogLevel.DEBUG),this._maybePrimarySourceContent=I.YP,this._secondarySourceContent=i.unsafeRes(new E.i),this._syncFlash=new l.xQ,this._syncTimer=R.getImmediateTimer(),this.state=new d.X("idle"),this._changesToSecondarySource=new l.xQ,this._changesToSecondarySourceSync=new l.xQ,this.changesToPrimarySource=new l.xQ,this.changesToSecondarySource=this._changesToSecondarySource.pipe((0,g.w)((function(e){switch(e.kind){case"reset":return t._maybePrimarySourceContent=I.G(e.reset),p.T(t._syncTimer.timer,t._syncFlash).pipe((0,v.P)(),(0,y.U)((function(){var n=t._secondarySourceContent.delta.diff(e.reset.delta);return{fullText:e.reset,change:i.delta(n,t._secondarySourceContent.length)}})));case"change":return t._syncTimer.reset(),f.of({fullText:e.fullText,change:e.change});default:return(0,N.vE)(e)}})),(0,b.b)((function(e){var n=e.fullText;"syncing"===t.state.getValue()&&(t._log.debug("Back to consistent state"),t.state.next("idle")),t._maybePrimarySourceContent=I.YP,t._secondarySourceContent=n})),(0,y.U)((function(e){return e.change})),(0,w.h)((function(e){return e.delta.ops.length>0})),(0,_.T)(this._changesToSecondarySourceSync),(0,b.b)((function(){t._log.debug("Emit change to secondary source")})),(0,S.n)(),(0,C.x)())}return Object.defineProperty(e.prototype,"flush",{get:function(){return this._flush(),c.of(void 0)},enumerable:!1,configurable:!0}),e.prototype._flush=function(){this._syncFlash.next(void 0)},e.prototype.getSecondarySourceContents=function(){return this._secondarySourceContent},e.prototype.getPrimarySourceContents=function(){var e=this;return(0,o.pipe)(this._maybePrimarySourceContent,I.fS((function(){return e._secondarySourceContent})))},e.prototype.pushChanges=function(e){switch(e.from){case"primary":return this._pushChangesFromPrimarySource(e.change);case"secondary":return this._pushChangesFromSecondarySource(e.change,e.mode);default:(0,N.vE)(e)}},e.prototype._pushChangesFromPrimarySource=function(e){var t=this;return this._log.debug("Got change from primary source"),(0,o.pipe)(this._primarySourceChangeProcessor(this._secondarySourceContent,this._maybePrimarySourceContent,e),T.map((function(e){"flush"===e.kind?(t._flush(),t._changesToSecondarySourceSync.next(i.flush())):t._changesToSecondarySource.next(e)})))},e.prototype._pushChangesFromSecondarySource=function(e,t){var n=this;switch(this._log.debug("Got change from secondary source",{source:t}),e.kind){case"delta":return I.Wi(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=I.G(this._secondarySourceContent)),(0,o.pipe)(this._secondarySourceContent,(function(t){return e.prevLen===t.length?(0,o.pipe)(i.res(t.delta.compose(e.delta)),T.fold((function(){return T.left(new Error("Got non-document delta after apply"))}),(function(t){return T.right([e,t])}))):T.left(new Error("Got delta for wrong text, document length: "+t.length+", got change for "+e.prevLen))}),T.fold((function(e){return n._changesToSecondarySourceSync.next(n._secondarySourceContent),T.left(e)}),(function(e){var r=e[0],i=e[1];return n._secondarySourceContent=i,t===F.$.Mode.echo&&n._changesToSecondarySourceSync.next(r),n.changesToPrimarySource.next(r),T.right(void 0)})));case"reset":return I.Wi(this._maybePrimarySourceContent)&&(this._log.debug("Enter inconsistent state"),this.state.next("syncing"),this._maybePrimarySourceContent=I.G(this._secondarySourceContent)),this._secondarySourceContent=e,"echo"===t&&this._changesToSecondarySourceSync.next(e),this.changesToPrimarySource.next(e),T.right(void 0);case"flush":return this.changesToPrimarySource.next(e),T.right(void 0);default:(0,N.vE)(e)}},e}();!function(e){var t;!function(e){e.reset=function(e){return T.right({kind:"reset",reset:e})},e.change=function(e){return T.right((0,u.__assign)({kind:"change"},e))},e.error=function(e){return T.left(new Error(e))}}(t||(t={})),e.deltaChangeProcessor=function(e,n,r){if(i.isFlush(r))return T.right(r);if(0===e.length)return i.isReset(r)?t.change({fullText:r,change:r}):0===r.prevLen?(0,o.pipe)(i.res(r.delta),T.fold((function(){return t.error("Cannot apply non-document delta to an empty text")}),(function(e){return t.change({fullText:e,change:r})}))):t.error("Cannot apply delta to text. Expected change for len 0, but got "+r.prevLen);if(I.Wi(n))return i.isDelta(r)&&e.length!==r.prevLen?t.error("Cannot apply delta for wrong text length, expected "+e.length+", but got "+r.prevLen):(0,o.pipe)(i.res(e.delta.compose(r.delta)),T.fold((function(){return t.error("Cannot apply invalid delta")}),(function(e){return t.change({fullText:e,change:r})})));if(i.isDelta(r)&&I.MH(n).length!==r.prevLen)return t.error("Cannot apply delta for wrong text length");var a=i.isReset(r)?r.delta:I.MH(n).delta.compose(r.delta);return L.s.deltaEq.equals(a,e.delta)?t.change({fullText:e,change:i.delta(new E.i,e.length)}):(0,o.pipe)(i.res(a),T.fold((function(){return t.error("Cannot apply invalid delta")}),t.reset))},e.fullTextProcessor=function(e,n,r){var a=i.unsafeRes((new E.i).insert(r));if(0===e.length)return t.change({fullText:a,change:a});if(I.Wi(n)){var o=e.delta.diff(a.delta);return t.change({fullText:a,change:i.delta(o,e.length+L.s.calcDiffLength(o))})}return L.s.deltaEq.equals(a.delta,e.delta)?t.change({fullText:a,change:i.delta(new E.i,e.length)}):t.reset(a)}}(P||(P={})),function(e){e.getImmediateTimer=function(){return{timer:f.of(void 0),reset:m.Z}},e.getAuditTimer=function(e){var t=I.YP;return{timer:h.P((function(){var n=(0,o.pipe)(t,I.g_((function(){return e}),(function(t){var n=Date.now()-t;return n>e?0:n})));return t=(0,o.pipe)(t,I.vx(I.G(Date.now()))),f.of(void 0).pipe((0,x.g)(n),(0,b.b)((function(){t=I.YP})))})),reset:function(){return t=I.YP}}}}(R||(R={}));var B,D=n(8125),U=n(44659);!function(e){e.connectAsPrimarySourceToDuplex=function(e){var t=new l.xQ,n=M.C8.Logging.getLogger("DenaliEditorToDuplexConnector",M.zW.LogLevel.DEBUG),r=new O(P.deltaChangeProcessor),i=U.R.NamedChangesSink.factory(t),a=U.R.Producer.create(U.R.Producer.UserText,{changes:r.changesToPrimarySource})(i(U.R.Receiver.DEd,{pushChanges:function(t){e.pushChanges(t,"user")}})),u=U.R.Producer.create(U.R.Producer.DEd,e)(i(U.R.Receiver.UserText,{pushChanges:function(t){var i=r.pushChanges({from:"primary",change:t});(0,o.pipe)(i,k.L9((function(i){return n.error("Cannot pass invalid change from master",i,t),r.pushChanges({from:"primary",change:e.getContents()})})),T.fold((function(e){n.fatal("Cannot reset duplex with full context",e)}),s.y))}}));return{duplex:r,fails:t,dispose:function(){a.unsubscribe(),u.unsubscribe()}}},e.duplexAsUserSource=function(e){return{changes:e.changesToSecondarySource,pushChanges:function(t,n){return e.pushChanges({from:"secondary",change:t,mode:n})},flushChanges:D.ZT,getContents:function(){return e.getSecondarySourceContents()}}},e.connectAsPrimarySourceWithoutDuplex=function(e){return{changes:e.changes,pushChanges:function(t,n){e.pushChanges(t,n===F.$.Mode.echo?"user":"api")},getContents:function(){return e.getContents()},flushChanges:function(){return e.flushChanges()}}}}(B||(B={}))},99516:(e,t,n)=>{"use strict";n.d(t,{n:()=>r,A:()=>i});var r,i,a=n(45980),o=n(70228),s=n(21694),u=n(8125),c=n(97523),l=n(24209),d=n(99391);!function(e){e.noopSync={pushChanges:u.ZT},e.ignoreResult=function(e){return{pushChanges:function(t){e.pushChanges(t)}}},e.ignoreTEResult=function(e){return{pushChanges:(0,a.flow)(e.pushChanges,c.map(u.ZT))}},e.pushDeleteThenInsert=function(e){return{pushChanges:function(t){(o.RI.isDelta(t)?o.RI.fromArrayOfDeltas(s.s.splitToDeleteThenInsert(t.delta).filter(s.s.nonEmpty),t.prevLen):[t]).forEach((function(t){return e.pushChanges(t)}))}}}}(r||(r={})),function(e){e.merge=function(e){return{changes:l.T.apply(d,e.map((function(e){return e.changes})))}}}(i||(i={}))},66654:(e,t,n)=>{"use strict";n.d(t,{w:()=>i});var r,i,a=n(45980),o=n(73805),s=n(92843),u=n(68983),c=n(64510),l=n(64909),d=n(10002),p=n(76220),f=n(44827);!function(e){e.modelToCounters=function(e){return f.h.isRegistered(e)?e.counters:p.R.empty}}(r||(r={})),function(e){e.monoid=c.getMonoid(d.R.Id.ord,d.R.Meta.group),e.eq=c.getEq(d.R.Id.ord,d.R.Meta.eq),e.isEmpty=c.isEmpty,e.lookup=c.lookup(d.R.Id.ord),e.applyDiff=function(t){return function(r){return function(l){return(0,o.pipe)(r,s.v.foldMap(e.monoid)(i(t),p(t),n(t)),(0,u.W)(e.monoid.concat)(l),c.filter((0,a.not)(d.R.Meta.isEmpty)))}}},e.updatePercentiles=function(e){return function(t){var n=t;return e.forEach((function(e,t){n=(0,o.pipe)(n,c.modifyAt(d.R.Id.ord)(t,d.R.Meta.ratioToPercentile(e)),l.fold((function(){return(0,o.pipe)(n,c.insertAt(d.R.Id.ord)(t,d.R.Meta.fromPercentile(e)))}),a.identity))})),n}};var t=(0,a.flow)(r.modelToCounters,d.R.Meta.fromAlertCounters),n=function(e){return function(n){return f(e)(n,t)}},i=function(e){return function(n){return f(e)(n,(0,a.flow)(t,d.R.Meta.group.inverse))}},p=function(t){return function(r,a){return e.monoid.concat(n(t)(a),i(t)(r))}},f=function(e){return function(t,n){return(0,o.pipe)(e,c.filter((function(e){return e(t.alert)})),c.map((function(){return n(t)})))}}}(i||(i={}))},926:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r,i=n(59312),a=n(27221),o=n(76779),s=n(73343),u=n(93508),c=n(57091),l=n(67434),d=n(52479),p=n(66654);!function(e){e.defaultState={alerts:o.p.empty,lenses:p.w.monoid.empty},e.get=function(r,i,a){return i.pipe(u.O(new Map),c.a(r.pipe(u.O(o.p.empty),l.R((function(e,n){return t(n,a.lensFilters)(e)}),e.defaultState)),n))},e.getMock=function(t,n){var r=a.h.create(e.defaultState);return e.get(t,n,s.t.create(s.t.defaultLensFilters,s.t.defaultTextFilters)).subscribe(d.wW(r)),r};var t=function(e,t){return function(n){var r=o.p.Diff.toRegistered(o.p.diff(n.alerts,e));return{alerts:e,lenses:p.w.applyDiff(t)(r)(n.lenses)}}},n=function(e,t){return(0,i.__assign)((0,i.__assign)({},t),{lenses:p.w.updatePercentiles(e)(t.lenses)})}}(r||(r={}))},38365:(e,t,n)=>{"use strict";n.d(t,{dM:()=>r,j:()=>i});var r,i,a,o,s=n(42654),u=n(76606),c=n(73805),l=n(27221),d=n(40300),p=n(48837),f=n(64909),m=n(83078);!function(e){e.group=p.kT({critical:p.Kh,advanced:p.Kh,free:p.Kh,paid:p.Kh,criticalPriority:p.Kh,advancedPriority:p.Kh,freePriority:p.Kh,paidPriority:p.Kh,unread:p.Kh,muted:p.Kh}),e.eq=s.getStructEq({critical:s.eqNumber,advanced:s.eqNumber,free:s.eqNumber,paid:s.eqNumber,unread:s.eqNumber,criticalPriority:s.eqNumber,advancedPriority:s.eqNumber,freePriority:s.eqNumber,paidPriority:s.eqNumber,muted:s.eqNumber}),e.show=u.aM({critical:u.yt,advanced:u.yt,free:u.yt,paid:u.yt,criticalPriority:u.yt,advancedPriority:u.yt,freePriority:u.yt,paidPriority:u.yt,unread:u.yt,muted:u.yt}),e.isValid=function(e){return e.critical>=0&&e.advanced>=0&&e.unread>=0},e.isEmpty=function(t){return e.eq.equals(t,e.group.empty)}}(r||(r={})),function(e){e.MIN_GOALS=3,e.TOTAL_GOALS=e.MIN_GOALS+2,e.calculateCompleteness=function(t){var n=(0,c.pipe)(t.goals,f.exists((function(e){return e.size>0}))),r=(0,c.pipe)(t.emotions,f.exists((function(e){return e.size>0})));return d.R$.equals(t,d.R$.unset)||(0,c.pipe)(t.domain,m.wo((function(e){return"general"===e})))&&!(f.isSome(t.audience)||f.isSome(t.style)||n||r)?0:Number(n||0)+Number(r||0)+e.MIN_GOALS}}(i||(i={})),function(e){e.zero={full:0,trimmed:0}}(a||(a={})),function(e){!function(e){e[e.Document=0]="Document",e[e.Plagiarism=1]="Plagiarism"}(e.CheckingKind||(e.CheckingKind={})),e.Mock={getCheckingForState:function(){return l.h.create({kind:e.CheckingKind.Document,type:"idle"})}}}(o||(o={}))},82578:(e,t,n)=>{"use strict";n.d(t,{_:()=>i});var r,i,a=n(27221),o=n(40300),s=n(64909),u=n(88111);!function(e){e.unwrap=function(e){return u.Ri.create(s.getOrElse((function(){return e})),s.some)}}(r||(r={})),function(e){e.create=function(e,t,n,i){var u=r.unwrap(t.style),c=r.unwrap(t.audience),l=r.unwrap(t.domain),d=a.h.create(e),p=d.lens("style").lens(u),f=d.lens("domain").lens(l),m={audience:{items:o.R$.audiences,current:d.lens("audience").lens(c),default:s.some(t.audience)},formality:{items:o.R$.formalityLevels,current:p,default:s.some(t.style),shouldDisable:function(e){return f.view((function(t){return!!t&&!o.R$.isStyleValidWithDomain(t,e)}))}},domain:{items:o.R$.domains,current:f,default:s.some(t.domain),shouldDisable:function(e){return p.view((function(t){return n.isFree?"general"!==e:!o.R$.isStyleValidWithDomain(e,t)}))}},intent:{items:o.R$.goals,current:d.lens("goals")},tone:{items:o.R$.tone,current:d.lens("emotions")}};return{localContext:d,blocks:m,showSetGoalsLoader:a.h.create(!n.demoMode&&i)}}}(i||(i={}))},81766:(e,t,n)=>{"use strict";n.d(t,{_F:()=>g});var r=n(45980),i=n(73805),a=n(64909),o=n(45442),s=n(23124),u=n(40644),c=n(38524),l=n(31346),d=n(77176),p=n(28043),f=n(2844),m=n(93508),h=n(57091),g=function(e,t,n,r,i,a){return o.Z.composeKnot({content:v(e,t,i,a),root:y(t,n,r)})},v=function(e,t,n,i){var f=t.view(l.v.Prism.items),m=t.pipe(d.U((function(e){return e.itemsOrd}))),h=t.pipe(d.U((0,r.flow)(c.In.getActiveItem,a.map(u.X.getId)),p.x())),g=t.view(n.getActiveAlertsCount).view((function(e){return 0===e}));return o.Z.fromSideEffect((function(t){switch(t.action.action.action.kind){case s.H.ActionKind.changePosition:e.changePosition.next({id:t.key,height:t.action.action.action.height});break;case s.H.ActionKind.completePositionAnimation:e.completePositionAnimation.next(t.key)}}),b(f,m,h,g,n,i))},y=function(e,t,n){return o.Z.fromSideEffect((function(e){t.next(e.element)}),f.aj(n,e.view("cardsHeight")).pipe(d.U((function(e){return{disableUserActions:e[0],height:e[1]}})),m.O({disableUserActions:!1,height:0})))},b=function(e,t,n,r,o,s){return e.pipe(h.a(n,r,t),d.U((function(e){var t=e[0],n=e[1],r=e[2],u=e[3],c=t.getAt(0);return t.filter((function(e){return e.positionState.visible||e.positionState.watched&&function(e,t){return!!(0,i.pipe)(t,a.exists((function(t){return t.id===e.id})))||(0,i.pipe)(t,a.exists((function(e){return e.positionState.isHeightValid})))}(e,c)})).map(o.viewState({activeCard:n,isLastItem:r,ord:u}),s(u))})))}},5304:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});var r,i=n(59312),a=n(27378),o=n(71215),s=n(85746),u=n(8125),c=n(64909),l=n(51465),d=n(22823),p=n(23124),f=n(95053),m=n(77176);!function(e){var t;function n(e){return l.UI.List.make(f.aW.getFoldableWithIndex(),r(e))}function r(t){return l.UI.Knot.make(e.IdProvider,{cell:l.UI.Knot.make(p.H.Cell,{item:l.UI.Composite.make(e.CardStyleProvider,t)})})}!function(e){e.onMount="onMount"}(t=e.ActionsKind||(e.ActionsKind={})),e.cardListContent=n,e.cardList=function(t){return l.UI.Knot.make(e.ScrollableBox,{content:n(t)})},e.ScrollableBox=l.UI.Grid.make((function(e){var n=e.notify,r=e.view,l=e.slots;return a.createElement(o.F.div,(0,i.__assign)({},(0,s.Sh)(r("disableUserActions").pipe(m.U((0,u.RN)(g.disableUserActions,void 0))),g.scrollContent),{"data-purpose":"scrollable-box",style:{height:r("height")},mount:function(e){return n({kind:t.onMount,element:c.fromNullable(e)})()}}),l.content)})),e.cell=r,e.CardStyleProvider=l.UI.Grid.make((function(e){var t=e.slots;return a.createElement("div",{className:g.cardWrapper},t.children)})),e.IdProvider=l.UI.Grid.make((function(e){var t=e.slots,n=e.state;return a.createElement(o.F.div,{"data-id":n},t.cell)}))}(r||(r={}));var h={margin:d.u.rem(.5)+" 0",background:"none",userSelect:"none",$nest:{"&:before":{position:"absolute",left:d.u.rem(-.5),width:d.u.rem(.5),height:d.u.percent(100),background:"none",content:"''"}}},g=d.u.stylesheet({scrollContent:[{position:"relative",boxSizing:"content-box"}],disableUserActions:[{pointerEvents:"none"}],cardWrapper:[h]})},65875:(e,t,n)=>{"use strict";n.d(t,{o:()=>z});var r,i=n(27378),a=n(71215),o=n(51465),s=n(26001),u=n(45980),c=n(73805),l=n(55415),d=n(64909),p=n(88903),f=n(45442),m=n(41199),h=n(62712),g=n(52479),v=n(77176),y=function(e,t){return f.Z.composeKnot({apply:b(e,t),dismiss:w(e,t)})},b=function(e,t){return f.Z.composeKnot({root:f.Z.fromSideEffect((function(e){t.next(e)}),e),content:x(f.Z.fromSideEffect(u.constVoid,e.pipe(v.U(d.some))))})},w=function(e,t){return f.Z.fromSideEffect((function(e){t.next(e)}),e)},_=function(e,t){return f.Z.fromSideEffect((function(e){t.next(e.action)}),e.pipe(v.U(l.ei("alerts"))))},S=function(e,t){return f.Z.fromSideEffect((function(e){t.next(e)}),e)},C=function(e){return x(f.Z.fromSideEffect(u.constVoid,e.pipe(v.U(d.some))))},x=function(e){return f.Z.animatingFlow(e,(function(e,t){return(0,c.pipe)((0,u.tuple)((0,c.pipe)(e,d.chain(u.identity)),t),(0,u.tupled)(s.gz(d.option)),d.filter((function(e){var t=e[0],n=e[1];return h.J.isInAppliedState(t)!==h.J.isInAppliedState(n)})),d.map((function(){return p.both("fadeOut","fadeIn")})))}))},I=n(59312),A=n(85746),E=n(83078),k=n(66910),T=n(71102),L=n(79844),P=n(39499),R=n(8125),N=n(489);!function(e){!function(e){e.Retain="retain",e.Delete="delete",e.Insert="insert"}(e.Type||(e.Type={})),e.isDelete=function(t){return t.type===e.Type.Delete},e.isInsert=function(t){return t.type===e.Type.Insert}}(r||(r={}));var M,F,O,B,D,U,W,H,z,j=n(96261),G=n(4490),q=n(90351),$=n(22823),V=$.u.style({display:"flex",flexGrow:2,lineHeight:$.u.rem(1.315),flexWrap:"wrap"}),X={padding:0,whiteSpace:"pre-wrap"},Y=$.u.style(X),Z=$.u.style((0,I.__assign)({color:q.Il.CoreGreen60},X)),J=$.u.style((0,I.__assign)((0,I.__assign)({},X),{color:q.Il.CoreRed50,textDecoration:"line-through",$nest:(M={},M["& + ."+Z]={marginLeft:$.u.rem(.25)},M)})),K=$.u.style({fontWeight:"bolder",textDecoration:"none",paddingLeft:"1px",paddingRight:"1px",$nest:(F={},F["&."+Z]={backgroundColor:q.Il.CoreGreen10},F["&."+J]={backgroundColor:q.Il.CoreRed10},F)}),Q=function(e){return i.createElement("div",{className:V},(0,c.pipe)(e.diff,N.mapWithIndex((function(e,t){return(0,R.or)(r.isDelete(t),r.isInsert(t))?i.createElement("div",(0,I.__assign)({key:e},(0,A.Sh)(r.isDelete(t)?J:Z,(0,R.or)((0,G.BE)(t.textChunk),(0,G.FD)(t.textChunk))&&K)),i.createElement(j.sR,{newText:t.textChunk,oldText:t.invertedChunk})):i.createElement("div",{key:e,className:Y},t.textChunk)}))))},ee=n(41439),te=n(60653),ne=n(45836),re=n(18244),ie=n(13097),ae=$.u.keyframes({from:{opacity:0,width:0},to:{opacity:1,width:$.u.px(24)}}),oe=$.u.keyframes({from:{opacity:1,width:$.u.px(24)},to:{opacity:0,width:0}}),se=$.u.keyframes({from:{opacity:1},to:{opacity:0}}),ue=$.u.keyframes({from:{opacity:0},to:{opacity:1}}),ce=function(e,t,n){return void 0===t&&(t="linear"),void 0===n&&(n=".3s"),{animation:e+" "+n+" "+t+" forwards"}},le=function(e){return(0,I.__assign)((0,I.__assign)({},ce(e,"ease-out")),{display:"flex"})},de=function(e){return(0,I.__assign)((0,I.__assign)({},ce(e)),{position:"absolute"})},pe=$.u.style(le(ae)),fe=$.u.style(le(oe)),me=$.u.style(ce(se)),he=$.u.style(de(ue)),ge=$.u.style((0,I.__assign)((0,I.__assign)({},de(ue)),{top:0})),ve=$.u.style({marginLeft:$.u.rem(-.5)}),ye=$.u.style({position:"relative",display:"flex",boxSizing:"border-box",margin:$.u.rem(.5)+" 0",padding:"0 "+$.u.rem(1),borderRadius:$.u.rem(ie.fx),boxShadow:q.uc.Z100,alignItems:"center",justifyContent:"space-between",userSelect:"none",transform:"translateY(0)"}),be=($.u.style({display:"flex",flexFlow:"column",alignItems:"center",alignSelf:"center"}),$.u.style({height:$.u.rem(3),cursor:"pointer"})),we=$.u.style({stroke:"none"}),_e=($.u.style({position:$.u.important("static"),padding:$.u.important("0 "+$.u.rem(.25)),width:$.u.important($.u.rem(1.75)),background:$.u.important(q.Il.CoreGreen50),color:$.u.important(q.Il.CoreNeutral0)}),$.u.style({display:"flex",flexFlow:"column"})),Se=$.u.style({position:"relative",display:"flex",flexWrap:"wrap"}),Ce={marginRight:$.u.rem(.75),textTransform:"none",letterSpacing:$.u.rem(q.xv.BodyLetterSpacing),fontSize:$.u.rem(q.xv.BodySize)},xe=(0,I.__assign)((0,I.__assign)({},Ce),{padding:"0 "+$.u.rem(.5)}),Ie=(0,I.__assign)((0,I.__assign)({},Ce),{color:q.Il.CoreNeutral50,fontWeight:q.xv.BodyWeight,$nest:(O={},O["&[data-textpos='everywhere']"]={padding:"0 "+$.u.rem(.5)},O)}),Ae=$.u.style((0,I.__assign)((0,I.__assign)({},xe),{minWidth:$.u.rem(6)})),Ee=$.u.style((0,I.__assign)((0,I.__assign)({},Ie),{padding:"0 "+$.u.rem(.5),$nest:{i:{marginLeft:$.u.rem(-.25)}}})),ke=$.u.style({fontSize:$.u.rem(q.xv.BodySize)}),Te=$.u.style({display:"flex",alignItems:"center",marginLeft:$.u.rem(-1)}),Le=$.u.style({maxHeight:$.u.rem(17)}),Pe=$.u.style({justifyContent:"space-between",height:$.u.percent(100),width:$.u.percent(100),padding:$.u.rem(1)+" 0 "+$.u.rem(1)+" "+$.u.rem(1),$nest:(B={},B["& ."+Te]={marginLeft:$.u.rem(-2)},B)}),Re=$.u.style({maxHeight:$.u.rem(10),position:"relative",marginRight:$.u.rem(-.725),paddingRight:$.u.rem(.875),paddingBottom:$.u.rem(.5)}),Ne=$.u.style({overflowY:"auto",paddingBottom:$.u.rem(2)}),Me=$.u.style({position:"absolute",top:$.u.rem(-3),left:0,right:0,height:$.u.rem(3),width:$.u.percent(100),background:"linear-gradient(0deg, "+q.Il.CoreNeutral0+" 0%, "+q.Il.CoreNeutral0+" 10%, rgba(255,255,255,0) 100%)"}),Fe=$.u.style({height:$.u.rem(2),display:"flex",justifyContent:"flex-start",alignItems:"center",fontSize:$.u.rem(.875),fontFeatureSettings:"'ss03' on, 'ss02' on",padding:"0 "+$.u.rem(.25),$nest:{"&:hover":{background:q.Il.CoreNeutral10,cursor:"pointer"}}}),Oe=$.u.style({flexShrink:0}),Be='&:not([data-disabled="true"])[data-hovered="true"]',De='&:not([data-disabled="true"])[data-active="true"]',Ue=$.u.style({$nest:(D={},D[Be+","+De]={backgroundColor:"transparent"},D)}),We=$.u.style({$nest:{g:{stroke:q.Il.CoreNeutral50}}}),He=$.u.style({minWidth:$.u.rem(1.5),minHeight:$.u.rem(1.5),$nest:(U={},U[Be]={$nest:{"& circle":{stroke:$.u.important(q.Il.CoreBlue50),fill:$.u.important(q.Il.CoreBlue50)}}},U[De]={$nest:{"& circle":{stroke:$.u.important(q.Il.CoreBlue50),fill:$.u.important(q.Il.CoreBlue50)}}},U)}),ze=function(e){var t=e.className,n=e.children,r=e.onClick,o=e.onMount;return i.createElement(a.F.div,(0,I.__assign)({},(0,A.Sh)(ye,t),{onClick:r,mount:o}),n)},je=o.UI.Transition.make({fadeIn:he},{fadeOut:me}),Ge=o.UI.Transition.make({fadeIn:ge},{fadeOut:me}),qe=o.UI.Transition.make({visible:pe},{invisible:fe}),$e=o.UI.Knot.make(o.UI.Grid.make((function(e){var t=e.notify,n=e.slots,r=e.view;return i.createElement(a.F.Fragment,null,r("alerts").pipe(v.U((function(e){return i.createElement(P.zx.Primary,{name:"bulk-accept-apply",className:Ae,onClick:re.hz(t({type:k.l.Type.bulkApply,alertIds:e.map((function(e){return e.alert.id}))}))},n.content)}))))})),{content:(W=function(e){var t=i.useContext(L.m.Context);return i.createElement(i.Fragment,null,h.J.isInAppliedState(e)?t.bulkAccept.confirm:t.bulkAccept.apply(e.alerts.length))},H=Ge,o.UI.Animated.make(H,o.UI.Union.asOption(o.UI.Node.make((function(e){var t=e.state;return i.createElement(a.F.Fragment,null,t.pipe(v.U((function(e){return i.createElement(W,(0,I.__assign)({},e))}))))})))))}),Ve=o.UI.Node.make((function(e){var t=e.notify,n=i.useContext(L.m.Context);return i.createElement(P.zx.Ghost,{className:Ee,name:"bulk-accept-dismiss",onClick:re.hz(t({type:k.l.Type.bulkDismiss}))},n.dismiss)})),Xe=o.UI.Group.make({apply:$e,dismiss:Ve}),Ye=function(e){var t=e.onClick,n=i.useContext(L.m.Context);return i.createElement("div",{className:Oe},i.createElement(P.zx.Ghost,{name:"rejectAlertInBulk",onClick:re.hz(t),className:Ue,title:n.dismiss},i.createElement(ee.JO.NoCircle,{className:He})))},Ze=function(e){var t=e.onClick,n=i.useContext(L.m.Context);return i.createElement("div",{className:Oe},i.createElement(P.zx.Ghost,{name:"undoAlertInBulk",onClick:re.hz(t),className:Ue,title:n.undo},i.createElement(ee.JO.Undo,(0,I.__assign)({width:16},(0,A.Sh)(He,We)))))},Je=o.UI.Animated.make(qe,o.UI.Union.asOption(o.UI.Node.make((function(){return i.createElement(ee.JO.NotificationInfo,{className:ve,width:16})})))),Ke=o.UI.Node.make((function(e){var t=e.state,n=e.notify;return i.createElement(a.F.Fragment,null,t.pipe(v.U((function(e){var t,r=e.alert,a=e.diff,s=e.ignoreAllowed;return i.createElement(te.u,{align:"topCenter",title:(t=r.title,i.createElement("span",{dangerouslySetInnerHTML:{__html:t}}))},i.createElement("div",{className:Fe,"data-name":"bulk-accept-alert-row",onClick:function(e){return n({type:k.l.Type.bulkHighlight,alert:r,clickPoint:{x:e.clientX,y:e.clientY}})()}},o.UI.mount(Je,function(e){return f.Z.animatingFlow((function(){return g.Dx((0,c.pipe)(e,d.fromPredicate(m.$.isBulkApplied),d.map(u.constVoid)))}),(function(e,t){return(0,c.pipe)(t,d.fold((function(){return d.some(p.left("invisible"))}),(function(){return(0,c.pipe)(e,d.chain(u.identity),d.fold((function(){return d.some(p.right("visible"))}),(function(){return d.none})))})))}))}(r)),(0,c.pipe)(a,d.map((function(e){return i.createElement(Q,{diff:e})})),d.toNullable),m.$.isBulkApplied(r)?i.createElement(Ze,{onClick:n({type:k.l.Type.bulkIndividualUndo,alertId:r.id})}):s&&i.createElement(Ye,{onClick:n({type:k.l.Type.bulkIgnore,alertId:r.id})})))}))))})),Qe=o.UI.List.make(T.readonlyArray,Ke),et=function(e){return o.UI.Animated.make(je,o.UI.Union.asOption(o.UI.Node.make((function(t){var n=t.state,r=i.useContext(L.m.Context),a="expanded"===e?ne.H4:ne.XY;return i.createElement("div",{className:Te},i.createElement(ee.JO.Sparkles,{className:we,width:20}),i.createElement(a,{className:ke},n.pipe(v.U((function(e){var t=e.alerts;return"applied"===e.visibilityState?r.bulkAccept.appliedTitle(t.length):r.bulkAccept.title(t.length)})))))}))))},tt=o.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return i.createElement(ze,{className:be,onClick:n({type:k.l.Type.miniItemClick,id:h.J.id})},t.title)})),nt=o.UI.Grid.make((function(e){var t=e.state,n=e.slots,r=e.notify,o=t.pipe(v.U((0,u.flow)((function(e){return e.alerts.length}),d.fromPredicate((function(e){return e>4})))));return i.createElement(ze,{className:Le,onMount:r({type:k.l.Type.bulkAcceptItemShow})},i.createElement("div",(0,I.__assign)({},(0,A.Sh)(_e,Pe)),n.title,i.createElement(a.F.div,(0,I.__assign)({},(0,A.Sh)(Re,o.pipe(v.U((0,u.flow)(d.map((function(){return Ne})),E.QP))))),n.suggestions),i.createElement("div",{className:Se},i.createElement(a.F.Fragment,null,o.pipe(v.U((0,u.flow)(d.map((function(){return i.createElement("div",{className:Me})})),E.QP)))),n.controls)))})),rt=o.UI.Knot.make(nt,{title:et("expanded"),suggestions:Qe,controls:Xe}),it=o.UI.Knot.make(tt,{title:et("mini")}),at=n(48100),ot=n(99391);!function(e){e.Card=function(e){return o.UI.Node.make((function(t){var n=(0,t.view)("view"),r=function(e,t){return f.Z.composeKnot({root:f.Z.fromSideEffect((function(e){t.next(e)}),void 0),title:C(e)})}(n,e),s=function(e,t){return f.Z.composeKnot({title:C(e),root:S(e,t),suggestions:_(e,t),controls:y(e,t)})}(n,e);return i.createElement(a.F.Fragment,null,n.pipe(ot.skipBy(h.J.eq),v.U((function(t){return i.createElement(at.b.Card,{miniCard:o.UI.mount(it,r),fullCard:o.UI.mount(rt,s),actions:e,card:t})}))))}))}}(z||(z={}))},51139:(e,t,n)=>{"use strict";n.d(t,{p:()=>ts});var r,i,a=n(27378),o=n(71215),s=n(51465),u=n(40644),c=n(45980),l=n(73805),d=n(8125),p=n(92932),f=n(36473),m=n(28043),h=n(77176),g=n(48100),v=n(27221),y=n(64909),b=n(79844),w=n(66910),_=n(39499),S=n(59312),C=n(85746),x=n(90351),I=n(22823),A=n(71031);!function(e){e.Item=function(e){var t=e.className,n=e.children,r=e.onChange,i=e.checked,s=e.tabIndex,u=e.id;return a.createElement(o.F.label,(0,S.__assign)({},(0,C.Sh)(F.radio,t)),i.view((function(e){return a.createElement(a.Fragment,{key:"radio-"+u},a.createElement("input",{onChange:r,tabIndex:s||-1,type:"radio",checked:e,className:F.radioInputHidden}),a.createElement("span",{className:N}))})),n)},e.Group=function(t){var n=t.items,r=t.selectedItemIndex,i=t.itemWrapperClassName,s=t.onChange;return a.createElement(o.F.Fragment,null,n.map((function(t,n){return a.createElement(e.Item,{id:n,key:n,onChange:function(){r.set(n),s&&s(n)},checked:r.view((function(e){return n===e})),className:i},t)})))}}(i||(i={}));var E,k,T,L,P,R="radioInput",N=I.u.joinClasses([R,I.u.style({display:"inline-block",boxSizing:"border-box",minWidth:I.u.rem(1),width:I.u.rem(1),height:I.u.rem(1),border:I.u.rem(.125)+" solid "+A.FW,borderRadius:I.u.percent(50),backgroundColor:x.Il.CoreNeutral0,content:"' '"})]),M={outline:"none",appearance:"none",$nest:(r={},r["&:checked + .radioInput"]={border:I.u.rem(.25)+" solid "+x.Il.CoreBlue50},r)},F=I.u.stylesheet({radioInputHidden:[M],radio:[{display:"inline-flex",cursor:"default",alignItems:"center"}]}),O=n(45836),B=n(18244),D=n(83245),U=n(64437),W=function(e){var t=(0,D.p)(e.visualState).shade;a.useEffect((function(){t||e.onFocus()}),[]);var n=e.theme||{};return a.createElement(o.F.div,{className:n.container},e.header,a.createElement(o.F.div,{className:n.innerContainer},a.createElement(o.F.div,(0,S.__assign)({},(0,C.Sh)(Z.wrapper,n.wrapper),{onMouseOver:e.onMouseOver,onMouseOut:e.onMouseOut}),a.createElement(o.F.div,(0,S.__assign)({},(0,C.Sh)(Z.grid,n.content)),a.createElement(o.F.div,(0,S.__assign)({},(0,C.Sh)(Z.mainContent,n.contentBody)),e.body),a.createElement("div",{className:Z.footerContent},e.footer),a.createElement("div",{className:Z.actions},e.subActions,a.createElement("div",{className:Z.spacerOne}),e.navigation,a.createElement("div",{className:Z.spacerFloat}),e.mainActions))),e.extra))},H="& > * + *",z=.75,j={position:"relative"},G={padding:I.u.rem(1)+" "+I.u.rem(.5)+" "+I.u.rem(z)+" "+I.u.rem(1)},q={padding:"0 "+I.u.rem(.5)+" 0 "+I.u.rem(1),$nest:(E={},E[H]={marginTop:I.u.rem(z)},E)},$={padding:"0 "+I.u.rem(.5)+" 0 "+I.u.rem(1),$nest:(k={},k[H]={marginTop:I.u.rem(z)},k)},V={display:"flex",marginLeft:I.u.rem(.5),justifyContent:"space-between",$nest:{"& > *":{flexShrink:0}}},X={width:I.u.rem(1),flexShrink:1},Y={$nest:(T={},T[H]={marginTop:I.u.rem(z)},T)},Z=(0,S.__assign)((0,S.__assign)({},I.u.stylesheet({mainContent:[q],footerContent:[$],actions:[V],spacerOne:[X],spacerFloat:[{flex:1}],grid:[Y]})),{fullCard:I.u.joinClasses([U.g.fullCardSelector,I.u.style(j)]),wrapper:I.u.joinClasses([U.g.fullCardSelector,I.u.style(j,G)])}),J=n(97329),K=n(22232),Q=n(11129),ee=n(14677),te=function(){function e(e,t,n){this._url=e,this._ajaxFactory=t,this._fingerprints=n,this._ajax=this._ajaxFactory({errorMapper:Q.tk.mapToHTTPErrorWithoutBody,requestExtender:ee.d3.toHeaderAppender(this._fingerprints)})}return e.prototype.orAnonymous=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Q.cl.get(this._url,"user/oranonymous").queryParam("app",this._fingerprints.clientName);return e.forEach((function(e){return n.queryParam("field",e)})),this._ajax.json(n)},e.prototype.signup=function(e){var t=Q.cl.post(this._url,"api/signup").json(e);return this._ajax.json(t)},e.prototype.createPartialUser=function(e){var t=Q.cl.post(this._url,"user/partial").formParam("email",e);return this._ajax.empty(t)},e.prototype.getAuthInfo=function(e){var t=Q.cl.post(this._url,"/auth/info").json({email:e});return this._ajax.json(t)},e.prototype.login=function(e,t){var n={email_login:{email:e,password:t}};return this.loginGeneric(n)},e.prototype.loginGeneric=function(e){var t=Q.cl.post(this._url,"api/login").json(e);return this._ajax.json(t)},e.prototype.captchaVerify=function(e){var t=Q.cl.post(this._url,"api/login/captcha-verify").json({googleReCaptchaToken:e});return this._ajax.json(t)},e.prototype.logout=function(){var e=Q.cl.post(this._url,"/logout");return this._ajax.empty(e)},e.prototype.changeName=function(e){var t=Q.cl.post(this._url,"/user").json({name:e});return this._ajax.empty(t)},e.prototype.changeEmail=function(e,t){var n=Q.cl.post(this._url,"/user/email/change").json({newEmail:e,password:t});return this._ajaxCheckLegacyOk(n)},e.prototype.confirmEmailChangeRequest=function(e){var t=Q.cl.get(this._url,"user/email/change/confirm").queryParam("follow",(!1).toString());return e&&t.queryParam("confirm_key",e),this._ajax.empty(t)},e.prototype.migrateAccountToNewEmailLogin=function(e,t){var n=Q.cl.post(this._url,"account/authentication/migrate-to-email-login").json({loginRequest:e,newPassword:t});return this._ajax.json(n)},e.prototype.cancelEmailChangeRequest=function(e){var t=Q.cl.post(this._url,"/user/email/cancel").json({email:e});return this._ajaxCheckLegacyOk(t)},e.prototype.changePassword=function(e,t,n){var r=Q.cl.post(this._url,"/user/password/change").formParam("email",e).formParam("new_pwd",n).formParam("old_pwd",t);return this._ajaxCheckLegacyOk(r)},e.prototype.resetPassword=function(e){var t=Q.cl.post(this._url,"/user/password/reset").formParam("email",e);return this._ajaxCheckLegacyOk(t)},e.prototype.setPassword=function(e,t){var n=Q.cl.post(this._url,"/user/password/set").formParam("new_pwd",e);return t&&n.queryParam("reset_key",t),this._ajaxCheckLegacyOk(n)},e.prototype.validatePasswordResetKey=function(e){var t=Q.cl.get(this._url,"/user/validate_reset_key");return e&&t.queryParam("reset_key",e),this._ajaxCheckLegacyOk(t)},e.prototype.validatePassword=function(e,t){var n=Q.cl.post(this._url,"/user/validate-password").json({password:e,invisibleCaptchaToken:t});return this._ajax.json(n)},e.prototype.getUser=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=Q.cl.get(this._url,"user").queryParam("app",this._fingerprints.clientName);return e.forEach((function(e){return n.queryParam("field",e)})),(0,l.pipe)(this._ajax.json(n),this._ajax.map(ae))},e.prototype.addGroup=function(e){var t=Q.cl.post(this._url,"user/group").formParam("group",e);return this._ajaxCheckLegacyOk(t)},e.prototype.setUserData=function(e){var t=Q.cl.post(this._url,"user/userdata").json(e);return this._ajaxCheckLegacyOk(t)},e.prototype.getAccountSettings=function(){var e=Q.cl.get(this._url,"/account/settings");return(0,l.pipe)(this._ajax.json(e),this._ajax.map((function(e){var t=e.trusted,n=e.modes,r=e.enabledAt;return{trusted:t,modes:new Set(n),enabledAt:(0,l.pipe)(r,y.fromNullable,y.map((function(e){return new Date(e)})))}})))},e.prototype.startAdminChange=function(e){var t=Q.cl.post(this._url,"user/admin_change/transfer").json({newEmail:e});return this._ajaxCheckLegacyOk(t)},e.prototype.startAdminEmailChange=function(e){var t=Q.cl.post(this._url,"user/admin_change/email").json({newEmail:e});return this._ajaxCheckLegacyOk(t)},e.prototype.approveAdminEmailChangeRequest=function(e){var t=Q.cl.post(this._url,"user/admin_email/approve_change");return t.json(e?{confirmKey:e}:void 0),this._ajax.json(t)},e.prototype.sendConfirmationEmail=function(e){var t=Q.cl.post(this._url,"user/email/confirmation/send").json({source:e});return this._ajax.empty(t)},e.prototype.confirm=function(e){var t=Q.cl.post(this._url,"user/email/confirmation/confirm");return t.json(e?{confirmKey:e}:void 0),this._ajax.empty(t)},e.prototype.sendVerificationEmail=function(e){var t=Q.cl.post(this._url,"user/email/verification/send").json({source:e});return this._ajax.empty(t)},e.prototype.verifyVerificationEmail=function(e){var t=Q.cl.post(this._url,"user/email/verification/verify").json({code:e});return this._ajax.empty(t)},e.prototype.sendEmailChangeCode=function(e){var t=Q.cl.post(this._url,"account/email/change/send-email-change-code").json({newEmail:e});return this._ajax.empty(t)},e.prototype.verifyEmailChangeCode=function(e,t,n){var r=Q.cl.post(this._url,"account/email/change/confirm-email-change").json({newEmail:e,password:t,code:n});return this._ajax.json(r)},e.prototype.getUserEmailByConfirmKey=function(e){var t=Q.cl.post(this._url,"user/confirm_key_email");return t.json(e?{confirmKey:e}:void 0),(0,l.pipe)(this._ajax.json(t),this._ajax.map((function(e){return e.email})))},e.prototype.verifyEmail=function(e){var t=Q.cl.post(this._url,"signup/verify/email").formParam("email",e);return this._ajax.json(t)},e.prototype.oAuthAuthorizationRequest=function(e,t){var n=Q.cl.post(this._url,"api/unified-login/code/generate").json({client_id:e,code_challenge:t});return this._ajax.json(n)},e.prototype.getBackupCodes=function(){var e=Q.cl.get(this._url,"account/mfa/backup");return this._ajax.json(e)},e.prototype.generateNewCodes=function(){var e=Q.cl.post(this._url,"account/mfa/setup/backup");return this._ajax.json(e)},e.prototype.startSmsSetup=function(e){var t=Q.cl.post(this._url,"account/mfa/setup/sms").json({deviceKey:e});return(0,l.pipe)(this._ajax.json(t),this._ajax.map((function(e){return e.lastDigits})))},e.prototype.startTotpSetup=function(){var e=Q.cl.post(this._url,"account/mfa/setup/totp");return this._ajax.json(e)},e.prototype.verifyMfaCode=function(e,t){void 0===t&&(t="sms");var n=Q.cl.post(this._url,"account/mfa/setup/complete").json({code:e,mode:t});return(0,l.pipe)(this._ajax.json(n),this._ajax.map((function(e){return e||[]})))},e.prototype.removeMode=function(e){var t=Q.cl.post(this._url,"account/mfa/remove/"+e);return this._ajax.empty(t)},e.prototype.revokeAll=function(){var e=Q.cl.post(this._url,"account/mfa/revokeAll");return this._ajax.empty(e)},e.prototype.turnOffMfa=function(){var e=Q.cl.post(this._url,"account/mfa/removeAll");return this._ajax.empty(e)},e.prototype.setDataControl=function(e){var t=Q.cl.post(this._url,"account/data-control").json({enabled:e});return this._ajax.empty(t)},e.prototype._ajaxCheckLegacyOk=function(e){return(0,l.pipe)(this._ajax.json(e),this._ajax.filterOrElse((function(e){return e.ok}),(function(){return new ie("response not ok")})),this._ajax.map(d.ZT))},e.prototype.deleteAccount=function(e){var t=Q.cl.post(this._url,"account/delete").json(e);return this._ajax.empty(t)},e.targetTag="auth",e}();!function(e){e.none="NONE",e.email="EMAIL",e.google="GOOGLE",e.facebook="FACEBOOK",e.apple="APPLE",e.sso="SSO"}(L||(L={})),function(e){!function(e){e.Arabic="Arabic",e.Bengali="Bengali",e.Cantonese="Cantonese",e.Danish="Danish",e.Dutch="Dutch",e.English="English",e.French="French",e.German="German",e.Hebrew="Hebrew",e.Hindi="Hindi",e.Italian="Italian",e.Japanese="Japanese",e.Javanese="Javanese",e.Korean="Korean",e.Malay="Malay",e.Mandarin="Mandarin",e.Marathi="Marathi",e.Polish="Polish",e.Portuguese="Portuguese",e.Punjabi="Punjabi",e.Russian="Russian",e.Spanish="Spanish",e.Swedish="Swedish",e.Tagalog="Tagalog",e.Tamil="Tamil",e.Telugu="Telugu",e.Thai="Thai",e.Turkish="Turkish",e.Ukrainian="Ukrainian",e.Urdu="Urdu",e.Vietnamese="Vietnamese",e.Other="Other"}(e.PrimaryLanguage||(e.PrimaryLanguage={}))}(P||(P={})),function(e){!function(e){e.webChrome="webeditor_chrome",e.webFirefox="webeditor_firefox",e.webSafari="webeditor_safari",e.webIE="webeditor_ie",e.webEdge="webeditor_edge",e.desktop="desktopeditor",e.webTest="webeditor_test",e.unknown="webeditor_unknown",e.crossPlatformOfficeAddin="crossPlatformOfficeAddin",e.ipadEditor="mobile-ios"}(e.ClientType||(e.ClientType={})),function(e){e.PasswordTooShort="PasswordTooShort",e.PasswordTooShortUnifiedValidationFalse="PasswordTooShortUnifiedValidationFalse",e.PasswordTooLong="PasswordTooLong",e.PasswordEqualsEmail="PasswordEqualsEmail",e.PasswordEqualsName="PasswordEqualsName",e.PasswordEqualsNameFromEmail="PasswordEqualsNameFromEmail",e.PasswordInCustomFields="PasswordInCustomFields",e.PasswordLeaked="PasswordLeaked",e.PasswordReused="PasswordReused",e.ValidationPassed="ValidationPassed"}(e.PasswordValidationReason||(e.PasswordValidationReason={}))}(te||(te={}));var ne,re,ie=function(e){function t(t){var n=e.call(this,t)||this;return n.name="AuthApiError",n}return(0,S.__extends)(t,e),t}(K.sH);function ae(e){var t=e.institutionInfo,n=(0,S.__rest)(e,["institutionInfo"]);return void 0!==t?(0,S.__assign)((0,S.__assign)({},n),{institutionInfo:oe(t)}):e}function oe(e){var t=e.voxInfo,n=e.voxEnabled,r=(0,S.__rest)(e,["voxInfo","voxEnabled"]);return(0,S.__assign)((0,S.__assign)({},r),{voxEnabled:n,vox:(0,l.pipe)(y.fromNullable(t),y.chain((function(e){return n&&e.styleGuideEnabled?y.some({companyName:e.companyName||"Company",logoUrl:y.fromNullable(e.logoUrl)}):y.none})))})}!function(e){!function(e){e.MobileIOS="mobile-ios",e.MobileAndroid="mobile-android",e.SafariExtension="extension-safari",e.OfficeAddin="office-addin",e.DesktopEditor="desktopeditor",e.DesktopEditorOSX="desktopEditorOsx",e.DesktopEditorWindows="desktopEditorWindows",e.WindowsExtension="windowsExtension",e.MacExtension="macExtension",e.ExtensionVSCode="extensionVSCode",e.ExtensionVSCodeInsiders="extensionVSCodeInsiders"}(e.ClientId||(e.ClientId={}))}(ne||(ne={})),function(e){!function(e){e.phone="sms",e.totp="totp",e.backup="backup",e.email="email"}(e.Mode||(e.Mode={}))}(re||(re={})),function(e){e.emptyInstitutionInfo={id:-1,name:"",licenseDiscountinued:!1,domainValidation:!1,admin:!1,business:!1,expired:!1},e.emptyUserEditorFeatures={fullCards:!1,plagiarismDisabled:!1,proofit:!1,quickReplacement:!1,scoreDisabled:!1}}(P||(P={}));var se,ue=n(47442),ce=n(83078),le=n(18208),de=n(13097),pe=n(94503),fe=n(17753),me=n(41199);!function(e){var t;!function(e){e.Step1="step1",e.Step2="step2",e.Step3="step3",e.Step4="step4",e.Step5="step5",e.Step6="step6",e.Step7="step7",e.Step8="step8",e.Step9="step9",e.Step10="step10",e.Step11="step11",e.Step12="step12"}(t=e.StepId||(e.StepId={})),e.isValid=function(e){return!(e===t.Step2||e===t.Step3||e===t.Step5||e===t.Step6||e===t.Step7)}}(se||(se={}));var he,ge=n(83305),ve=n(34685),ye=I.u.keyframes({from:{backgroundPosition:"0 0"},to:{backgroundPosition:"0 "+I.u.px(5096)}}),be={width:56,height:56,backgroundImage:"url("+ve.yr+"ai.png)",animation:ye+" "+I.u.seconds(1)+" steps(91) "+I.u.seconds(0)+" reverse infinite"},we=(0,S.__assign)((0,S.__assign)({},be),{transform:"scale(.5)"}),_e=(0,S.__assign)((0,S.__assign)({},be),{transform:"scale(.8)"}),Se=I.u.style(be),Ce=I.u.style(we),xe=I.u.style(_e),Ie=function(e){var t=e.size,n=void 0===t?"large":t;return a.createElement("div",(0,S.__assign)({},(0,C.Sh)("large"===n?Se:void 0,"medium"===n?xe:void 0,"small"===n?Ce:void 0)))},Ae=n(31484),Ee=n(41439);!function(e){e.Regular=function(e){return a.createElement("span",(0,S.__assign)({},(0,C.Sh)(Re.badge,e.className)),e.children)},e.New=function(t){var n=t.className;return a.createElement(e.Regular,{className:n},"New")},e.NewWrapper=function(t){var n=t.children;return a.createElement("div",null,a.createElement(e.New,null),n)},e.Premium=function(t){var n=t.className;return a.createElement(e.Regular,(0,S.__assign)({},(0,C.Sh)(Re.premiumBadge,n)),a.createElement(Ee.JO.PaidLink,{className:Re.premiumBadgeIcon,width:12}),"PREMIUM")},e.Business=function(t){var n=t.className;return a.createElement(e.Regular,(0,S.__assign)({},(0,C.Sh)(n)),"BUSINESS")}}(he||(he={}));var ke={display:"inline-block",padding:I.u.rem(x.Zh.BadgeY)+" "+I.u.rem(x.Zh.BadgeX),height:I.u.rem(x.L3.Badge),borderRadius:I.u.rem(de.mA),background:x.Il.CoreGreen10,color:x.Il.CoreGreen70,verticalAlign:"middle",textAlign:"center",textTransform:x._5.Badge,letterSpacing:x.LK.Badge,fontWeight:x.U9.Badge,fontSize:I.u.rem(x.Bf.Badge),lineHeight:I.u.rem(x.L3.Badge)},Te={marginRight:x.Zh.BadgeX,maxWidth:I.u.rem(x.L3.Badge),maxHeight:I.u.rem(x.L3.Badge),minWidth:I.u.rem(x.L3.Badge),minHeight:I.u.rem(x.L3.Badge),verticalAlign:"top"},Le={background:x.Il.CoreYellow20,color:x.Il.CoreYellow80},Pe={fill:x.Il.CoreYellow80},Re=I.u.stylesheet({badge:[ke],badgeIcon:[Te],premiumBadge:[ke,Le],premiumBadgeIcon:[Te,Pe]}),Ne=n(58199),Me=n(52479),Fe=n(99391),Oe=n(76974),Be=n(2844),De=n(93508),Ue=n(66310);function We(e){var t=e.value,n=e.initValue,r=void 0===n?Ne.g.MIN:n,i=e.wrapperClass,s=e.progressClass,u=e.isLoading,c=void 0===u?Oe.of(!1):u,l=He(t,r);return a.createElement(o.F.div,(0,S.__assign)({},(0,C.Sh)(Ke.wrapper,i)),a.createElement(ze,{width:l,progressClass:s,isLoading:c}))}function He(e,t){void 0===t&&(t=Ne.g.MIN);var n=v.h.create(!1);return requestAnimationFrame((function(){return requestAnimationFrame((function(){return n.set(!0)}))})),Be.aj(Me.Dx(e),n,(function(e,n){return n?e:t}))}function ze(e){var t=e.width,n=e.progressClass,r=e.isLoading,i=t.pipe(h.U((function(e){return e+"%"}))),s=t.pipe(h.U(Ne.g.prism.reverseGet),h.U((function(e){return e>0?e+.75+"%":0})),De.O(0)),u=r.pipe(Ue.w((function(e){return e?i:"0"}))),c=t.pipe(h.U(Ne.g.isMin),Fe.shareReplay({bufferSize:1,refCount:!0}));return a.createElement(a.Fragment,null,a.createElement(o.F.div,(0,S.__assign)({},(0,C.Sh)(Ke.borderContainer,c.pipe(h.U((0,d.RN)(Ke.borderContainerZeroWidth,Ke.borderContainerWithMinWidth)))),{style:{width:s}})),a.createElement(o.F.div,(0,S.__assign)({},(0,C.Sh)(n||Ke.defaultProgress,Ke.progressBar,c.pipe(h.U((0,d.RN)(Ke.progressBarZeroWidth,Ke.progressBarWithMinWidth)))),{style:{width:i}})),a.createElement(o.F.div,{className:Ke.loading,style:{width:u}}))}var je,Ge=I.u.keyframes({"0%":{backgroundPosition:"0 0"},"100%":{backgroundPosition:"20px 20px"}}),qe={position:"relative",width:I.u.percent(100),height:I.u.rem(.25),borderRadius:I.u.rem(de.Jr),backgroundColor:A.xO},$e={position:"relative",top:0,height:I.u.percent(100),borderRadius:I.u.rem(de.Jr),backgroundPosition:"center",transition:"width .8s ease-in-out 0s"},Ve={minWidth:I.u.px(4)},Xe={position:"absolute",backgroundColor:x.Il.CoreNeutral0},Ye={minWidth:I.u.px(6)},Ze={position:"absolute",minWidth:0,backgroundImage:A.b6,backgroundSize:"20px 20px",transition:"none",animation:Ge+" 1s linear infinite"},Je={backgroundImage:A.Xd},Ke=I.u.stylesheet({wrapper:[qe,qe],progressBar:[$e],progressBarZeroWidth:[{minWidth:0}],progressBarWithMinWidth:[Ve],borderContainer:[$e,Xe],borderContainerZeroWidth:[{minWidth:0}],borderContainerWithMinWidth:[Ye],loading:[$e,Ze],defaultProgress:[Je]}),Qe=n(32577),et=n(16323);!function(e){!function(e){e.sparkles="sparkles",e.priority="priority"}(e.Icon||(e.Icon={})),function(e){e[e.lowest=0]="lowest",e[e.low=1]="low",e[e.average=2]="average",e[e.high=3]="high",e[e.highest=4]="highest"}(e.Priority||(e.Priority={})),function(e){e.top="top",e.bottomLeft="bottomLeft",e.bottomRight="bottomRight"}(e.Position||(e.Position={})),function(e){e.standard="standard",e.custom="custom"}(e.ViewType||(e.ViewType={})),e.DefaultTimeout="DefaultTimeout",e.TimeoutDisabled="TimeoutDisabled"}(je||(je={}));var tt,nt,rt={position:"relative",width:I.u.percent(100)},it={position:"relative",margin:"0 0 "+I.u.rem(.5)},at={display:"flex",boxSizing:"border-box",padding:I.u.rem(1)+" "+I.u.rem(2)+" "+I.u.rem(1)+" "+I.u.rem(.75),width:I.u.percent(100),borderRadius:I.u.rem(de.fx),background:x.Il.BackgroundNotification,color:x.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,alignItems:"flex-start"},ot={width:I.u.percent(100)},st={display:"inline-block",width:I.u.percent(100)},ut={margin:I.u.rem(-.5)+" "+I.u.rem(.75)+" "+I.u.rem(-.5)+" 0"},ct={position:"absolute",top:0,right:0,marginTop:I.u.rem(.5),marginRight:I.u.rem(.4),marginLeft:I.u.rem(.5)},lt={stroke:A.FW},dt={margin:"0 0 "+I.u.rem(.5),color:x.Il.CoreNeutral0,wordBreak:"break-word",fontWeight:"bold",fontSize:I.u.rem(x.xv.BodySize),lineHeight:I.u.rem(1.25)},pt={marginTop:I.u.rem(-.1),marginBottom:I.u.rem(-.25),color:x.Il.CoreNeutral0,fontSize:I.u.rem(x.xv.BodySize),lineHeight:I.u.rem(1.25)},ft=I.u.prefixedStylesheet("notifications",{wrapper:[rt],notification:[it],flexibleNotification:[it,{display:"flex",width:"auto"}],contentWrapper:[at],miniContentWrapper:[at,{position:"relative",width:"auto"}],fullWidthNotification:[it,at,ot],content:[st],miniContent:[{flex:1}],alertIcon:[ut],closeIconWrapper:[ct],closeIcon:[lt],header:[dt],description:[pt]});!function(e){e.Wrapper=function(t){var r=t.notification,i=t.onClose,o=t.children,s=t.theme,u=void 0===s?{}:s;a.useEffect((function(){return r.actions.next("shown")}),[]);var c={wrapper:u.wrapper||n.wrapper,content:void 0!==u.content?Object.assign({},n.content,u.content):n.content};return a.createElement("div",{className:c.wrapper},a.createElement(e.Base,{metadata:r.metadata,onClose:i,theme:c.content},o))},e.Base=function(n){var r=n.metadata,i=n.onClose,o=n.theme,s=n.children;return a.createElement("div",{className:o.wrapper},t(r,o.icon),a.createElement("div",{className:o.content},s),!function(e){return e.priority===je.Priority.high||e.priority===je.Priority.highest}(r)&&a.createElement(e.CloseButton,{onClick:i,className:o.close}))};var t=function(t,n){switch(t.icon){case je.Icon.sparkles:return a.createElement(Ee.JO.Sparkles,{className:n});case void 0:case je.Icon.priority:return a.createElement(e.PriorityIcon,{priority:t.priority,className:n});default:return(0,K.vE)(t.icon)}};e.AdHoc=function(t){var r=t.title,i=t.children,o=t.className,s=t.onClose;return a.createElement("div",(0,S.__assign)({},(0,C.Sh)(n.content.wrapper,o)),a.createElement("div",{className:n.content.content},a.createElement(e.TitledContent,{title:r},i)),a.createElement(e.CloseButton,{onClick:s,className:n.content.close}))},e.PriorityIcon=function(e){var t=e.priority,n=e.className;switch(t){case je.Priority.lowest:case je.Priority.low:return a.createElement(Ee.JO.NotificationInfo,{className:n});case je.Priority.average:return a.createElement(Ee.JO.NotificationWarning,{className:n});case je.Priority.high:case je.Priority.highest:return a.createElement(Ee.JO.NotificationError,{className:n});default:return(0,K.vE)(t)}},e.CloseButton=function(e){var t=e.onClick,n=e.className;return a.createElement(_.zx,{name:"closeNotification",className:n,onClick:t},a.createElement(Ee.JO.Close,{className:ft.closeIcon,width:12}))},e.TitledContent=function(t){var n=t.title,r=t.children;return r?a.createElement(a.Fragment,null,a.createElement(O.P1,{className:ft.header},n),a.createElement(e.Content,null,r)):a.createElement(O.P1,{className:ft.description},n)},e.Content=function(e){var t=e.children;return a.createElement(O.XY,{className:ft.description},t)};var n={wrapper:ft.wrapper,content:{wrapper:ft.fullWidthNotification,icon:ft.alertIcon,content:ft.content,close:ft.closeIconWrapper}}}(tt||(tt={})),function(e){e.Wrapper=function(e){var t=e.notification,n=e.onClose,r=e.children;return a.useEffect((function(){return t.actions.next("shown")}),[]),a.createElement("div",{className:ft.flexibleNotification},a.createElement(tt.Base,{metadata:t.metadata,onClose:n,theme:{wrapper:ft.miniContentWrapper,icon:ft.alertIcon,content:ft.miniContent,close:ft.closeIconWrapper}},r))}}(nt||(nt={}));var mt,ht=n(63979),gt=n(54071),vt=n(60653),yt=n(66831),bt=n(60430),wt=n(66265),_t=n(49708),St=n(2834),Ct=n(95093),xt=n(17343),It=n(40151),At=n(10002),Et={$nest:{"&:before":{position:"absolute",width:I.u.px(10),height:I.u.px(10),borderRadius:I.u.percent(50),content:"''",transform:"scale(.5)"}}},kt={opacity:1,transition:"opacity .3s"},Tt={color:x.Il.CoreNeutral50,textTransform:"uppercase",letterSpacing:x.xv.SubheadingLetterSpacing,fontSize:I.u.rem(x.xv.SubheadingSize),lineHeight:I.u.rem(x.xv.SubheadingLineHeight),$nest:{"&:not(:last-child)":{marginRight:I.u.rem(.25)}}},Lt={position:"relative",display:"inline-block",$nest:{"&:before":{top:0,bottom:I.u.px(2),left:I.u.rem(-1.1),margin:"auto 0"}}},Pt={$nest:{"&:before":{top:0,bottom:0,left:I.u.rem(-1.1),margin:I.u.rem(.25)+" 0 auto 0"}}},Rt={margin:"0 "+I.u.rem(.4)+" 0 "+I.u.rem(.2),width:I.u.rem(.85),height:I.u.rem(.85),objectFit:"contain"},Nt={position:"absolute",top:0,bottom:0,left:I.u.rem(-1),margin:"auto",background:x.Il.CoreNeutral0,transform:"translateX(-50%)"},Mt={left:I.u.rem(-1),minWidth:I.u.rem(1),minHeight:I.u.rem(1),fill:x.Il.CoreYellow50},Ft={minWidth:"initial",minHeight:"initial",padding:I.u.rem(.3)+" "+I.u.rem(.25),cursor:"pointer",borderRadius:I.u.percent(100),marginLeft:I.u.rem(.5),$nest:{"&:hover":{background:x.Il.CoreNeutral10}}},Ot={display:"flex",alignItems:"center",padding:"0 "+I.u.rem(.25),borderRadius:I.u.rem(de.fx),cursor:"pointer",background:x.Il.CoreYellow20,color:x.Il.CoreYellow80,marginLeft:I.u.rem(.5),$nest:{"&:hover":{background:x.Il.CoreYellow10}}},Bt={minWidth:"initial",minHeight:"initial",fill:x.Il.CoreYellow80,marginLeft:I.u.rem(.3)},Dt={display:"flex",alignItems:"flex-start",top:I.u.rem(.125),minWidth:"initial",minHeight:"initial",background:x.Il.CoreNeutral0},Ut={color:x.Il.CoreNeutral90,textTransform:"none",letterSpacing:x.xv.SmallLetterSpacing,fontWeight:x.xv.SmallWeight,fontSize:I.u.rem(x.xv.SmallSize),lineHeight:I.u.rem(x.xv.SmallLineHeight),$nest:{"&:first-letter":{textTransform:"uppercase"}}},Wt={color:x.Il.CoreNeutral50,textTransform:"none"},Ht={width:I.u.rem(1),height:I.u.rem(1)},zt={display:"inline-flex",padding:"0 "+I.u.rem(.25),borderRadius:I.u.rem(de.fx),background:"linear-gradient(269.73deg, rgba(215, 248, 240, .8) .02%, rgba(202, 235, 250, .8) 99.98%)",textTransform:"uppercase"},jt={display:"inline-flex",marginLeft:I.u.rem(.1),minWidth:0,minHeight:0},Gt=I.u.stylesheet({lessIcon:[{transform:"rotate(180deg)"}],more:[kt],moreHidden:[kt,{position:"absolute",overflow:"hidden",height:0,opacity:0,transition:"none"}],commonLabel:[Tt],lens:[Tt,Lt],lensMinimal:[Pt],voxLogo:[Rt],cardLogo:[Nt],premiumIcon:[Mt],dualItemLabel:[{display:"inline-flex",alignItems:"center"}],premiumPersistentTooltipIcon:[Ft],newPremiumLabel:[Ot],newPremiumLabelIcon:[Bt],takeawayIcon:[Dt],minimalTitle:[Ut],voxTitle:[{display:"flex",alignItems:"center"}],toneTitle:[Wt],toneLogo:[Nt,Ht],fluencyLabel:[Tt,zt],fluencyInfo:[jt],dot:[Et],smartPhrasesLabel:[{textTransform:"none"}]});!function(e){e.none="none",e.persistent="persistent",e.new="new"}(mt||(mt={}));var qt=function(e){var t=e.className,n=e.vox,r=e.isMinimalCard,i=a.useContext(b.m.Context).vox.styleGuide;return a.createElement("div",(0,S.__assign)({},(0,C.Sh)(t,Gt.voxTitle,r?Gt.minimalTitle:void 0)),a.createElement("span",null,n.companyName," ",i))},$t=function(e){var t=e.logoUrl,n=e.className;return a.createElement("img",(0,S.__assign)({src:t},(0,C.Sh)(n,Gt.voxLogo)))},Vt=function(e){var t=e.title,n=e.layoutDensity;return a.createElement(O.XY,{className:(0,l.pipe)(n,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return Gt.minimalTitle}),(function(){return Gt.toneTitle})))},a.createElement(et.d,{emojiClassName:Gt.toneLogo},t))};function Xt(e){return At.R.outcomeTypeMatch(e.lensType)({correctness:U.m.dotCorrectness,clarity:U.m.dotClarity,premium:U.m.dotAdvanced,engagement:U.m.dotEngagement,delivery:U.m.dotDelivery,vox:U.m.dotVox})}function Yt(e,t,n,r,i){var o=e.extraProperties;return me.$.isSmartPhrases(e)?function(e){return{style:Xt(e),description:a.createElement(O.x4,{className:Gt.smartPhrasesLabel},e.miniCardTitle)}}(e):me.$.isDemoPremium(e)?function(e,t){return{style:U.m.dot,description:a.createElement("div",{className:(0,l.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return Gt.minimalTitle}),(function(){})))},a.createElement(Ee.JO.Paid,(0,S.__assign)({width:14},(0,C.Sh)(Gt.cardLogo,Gt.premiumIcon))),e.lensName)}}(e,n):y.isSome(o.tone)?function(e,t){return{style:Xt(e),description:a.createElement(Vt,{title:e.title,layoutDensity:t})}}(e,n):t?y.isSome(o.vox)?function(e,t){return{style:U.m.dotVox,description:a.createElement(a.Fragment,null,(0,l.pipe)(e.logoUrl,y.fold((function(){return null}),(function(e){return a.createElement($t,{logoUrl:e,className:Gt.cardLogo})}))),a.createElement(qt,{vox:e,isMinimalCard:t===f.j.Density.minimal}))}}(o.vox.value,n):me.$.isTakeaway(e)?function(e,t,n){return{style:Xt(e),description:a.createElement("div",{className:(0,l.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return Gt.minimalTitle}),(function(){})))},me.$.isTakeaway(e)&&a.createElement(Ee.JO.Megaphone,(0,S.__assign)({width:16},(0,C.Sh)(Gt.cardLogo,Gt.takeawayIcon))),t===f.j.Density.minimal?n:e.lensName)}}(e,n,i):me.$.isFree(e)?(0,l.pipe)(n,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return function(e,t){return{style:Xt(e),description:t||a.createElement(O.XY,{className:Gt.minimalTitle},e.miniCardTitle)}}(e,i)}),(function(){return function(e){return{style:Xt(e),description:e.lensName}}(e)}))):function(e,t,n){return{style:Xt(e),description:a.createElement("div",(0,S.__assign)({},(0,C.Sh)(Gt.dualItemLabel,(0,l.pipe)(n,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return Gt.minimalTitle}),(function(){}))))),a.createElement("span",{className:Gt.dualItemLabel},e.lensName,a.createElement(Qt,{highlightStyle:t})))}}(e,r,n):null}var Zt,Jt=function(e){var t=e.label;return a.createElement("span",{className:Gt.fluencyLabel},t,a.createElement(_.RZ,{iconWidth:10,buttonClass:Gt.fluencyInfo,iconClass:Gt.fluencyInfo,title:a.useContext(b.m.Context).card.fluency.tooltip}))},Kt=function(e){var t=e.style,n=e.description;return a.createElement("span",(0,S.__assign)({},(0,C.Sh)(Gt.lens,Gt.dot,t)),n)},Qt=function(e){var t=e.highlightStyle;if(t===mt.none)return null;var n=a.useContext(b.m.Context),r=t===mt.new?a.createElement("div",{className:Gt.newPremiumLabel},n.premiumAlertLabel.new,a.createElement(Ee.JO.Paid,{className:Gt.newPremiumLabelIcon,width:12})):a.createElement(Ee.JO.Paid,{className:Gt.premiumPersistentTooltipIcon,width:10});return a.createElement(vt.u,{align:"topCenter",title:n.premiumAlertLabel.tooltip.includedWithPaid},r)},en=function(e){var t=e.style,n=e.description,r=e.extraStyle;return a.createElement("span",(0,S.__assign)({},(0,C.Sh)(r,Gt.lensMinimal,Gt.lens,Gt.dot,t)),n)},tn=function(e){return(0,l.pipe)(Yt(e.activeAlert,e.showCardLabel,e.layoutDensity,e.premiumAlertLabelHighlight,e.children),y.fromNullable,y.map((function(t){return a.createElement("div",{className:e.className},(0,l.pipe)(e.activeAlert.extraProperties.fluencyMessage,y.fold((function(){return(0,l.pipe)(e.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return a.createElement(en,(0,S.__assign)({},t))}),(function(){return a.createElement(Kt,(0,S.__assign)({},t))})))}),(function(n){return(0,l.pipe)(e.layoutDensity,f.j.Density.match(a.createElement(a.Fragment,null,a.createElement(Kt,(0,S.__assign)({},t)),a.createElement(Jt,{label:n})),a.createElement(Kt,(0,S.__assign)({},t)),a.createElement(en,{style:t.style,extraStyle:Gt.minimalTitle,description:e.activeAlert.miniCardTitle})))}))))})),y.getOrElse((function(){return a.createElement("div",{"data-purpose":"label-placeholder"})})))},nn=["b","i","br","ul","li"];!function(e){e.renderToHtml=function(e,t){var n=t?{allowedTags:nn.concat(["a"]),linkRegExp:t}:{allowedTags:nn};return B.yG(e,n)}}(Zt||(Zt={}));var rn=function(e){var t=e.card,n=t.activeAlert,r=t.id,i=t.visualState,o=e.actions,s=e.mode,c=e.className,l=a.useContext(b.m.Context);return a.createElement(_.zx.Tertiary,{key:"toggle-more",name:on(i,l),title:"mini"===s?on(i,l):"",className:c,onClick:B.hz((function(){var e=u.X.isCardOpen(i);o.next({type:w.l.Type.startTransitionTo,id:r,transition:{type:e?"focused":"expanded",clockwise:!0}}),e||o.next({type:w.l.Type.alertFeedback,alertId:n.id,feedbackType:ue.PZ.EXPANDED})}))},u.X.isCardOpen(i)?a.createElement(Ee.JO.Arrow,{key:"more",className:Gt.lessIcon}):a.createElement(Ee.JO.QuestionMark,{key:"expand"}),"default"===s&&on(i,l))},an=function(e){var t=e.visualState,n=e.children,r=e.className;return a.createElement("div",{className:(u.X.isCardOpen(t)?Gt.more:Gt.moreHidden)+" "+r},n)};function on(e,t){var n=t.card;return u.X.isCardOpen(e)?n.less:n.more}var sn,un,cn,ln=function(e,t,n,r,i,a){return(0,S.__assign)({position:"absolute",right:e,left:e,zIndex:t,display:"block",height:I.u.rem(2),borderRadius:i,backgroundColor:x.Il.CoreNeutral0,boxShadow:r,content:"' '"},a&&"bottom"!==a?{top:n}:{bottom:n})},dn="0 "+I.u.rem(.25)+" "+I.u.rem(1.625)+" 0 rgba(198, 203, 222, .25)",pn={marginRight:I.u.rem(1),flexShrink:0,maxWidth:I.u.percent(100)},fn={padding:"0 "+I.u.rem(1)},mn={padding:"0 "+I.u.rem(1.9)+" 0 "+I.u.rem(1)},hn={position:"absolute",top:I.u.rem(.27),right:I.u.rem(.5)},gn={display:"grid",width:I.u.percent(100),gridGap:I.u.rem(.5),gridTemplateColumns:"fit-content(60%) auto min-content"},vn={minWidth:I.u.rem(7)},yn={marginLeft:I.u.rem(.5)},bn={color:x.Il.CoreNeutral90,whiteSpace:"nowrap",fontWeight:300,lineHeight:I.u.rem(1.5)},wn={$nest:{"&:before":ln(I.u.rem(.5),-10,I.u.rem(-.5),dn,I.u.rem(de.Jr)),"&:after":ln(I.u.rem(1),-20,I.u.rem(-1),dn,I.u.rem(de.Jr))}},_n={transition:"opacity .2s"},Sn=I.u.prefixedStylesheet("super",{updateAllBtnCommon:[pn],updateAllBtn:[pn,fn],updateAllBtnLoading:[pn,mn],updateBtnSpinner:[hn],optionsContainer:[gn],optionLabel:[vn],optionRadio:[yn],optionSecondaryAttribute:[bn],optionExample:[bn,{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",fontStyle:"italic"}],superWrapper:[wn],loadingWrapper:[_n],loadingWrapperInvisible:[_n,{opacity:0,pointerEvents:"none"}]}),Cn=n(17629),xn=function(e){var t=e.examples,n=e.layoutDensity;return a.createElement(O.ZT,{nodeType:"table",styleType:O.ZT.Type.Base,className:Fn.wrapper},t.map((function(e,t){return a.createElement("tbody",{key:t,className:Fn.group},e.map((function(e,t){var r=e.text,i=e.title,o=e.color;return a.createElement("tr",{key:t,className:(0,l.pipe)(n,f.j.Density.matchL((function(){return Fn.item}),(function(){return Fn.itemCompact}),(function(){return Fn.itemMinimal})))},(0,l.pipe)(i,y.map((function(e){return a.createElement("td",{className:Cn.J.colorMatch(o)(Fn)},function(e){return e.split("/").reduce((function(e,t,n){return 0!==n&&e.push(a.createElement("br",{key:n})),e.push(t),e}),[])}(e))})),y.toNullable),a.createElement("td",(0,S.__assign)({colSpan:y.isNone(i)?2:void 0,className:Fn.content},B.yG(r))))})))})))},In={$nest:{"&:not(:last-child):after":{display:"block",height:I.u.rem(1.75),content:"''"}}},An={$nest:{"&:not(:last-child)":{borderBottom:I.u.rem(.5)+" solid transparent"}}},En={display:"flex",flexDirection:"column",lineHeight:I.u.rem(1.3125)},kn={padding:0,verticalAlign:"top",lineHeight:I.u.rem(1.25)},Tn={paddingRight:I.u.rem(2),verticalAlign:"top",whiteSpace:"nowrap"},Ln={color:x.Il.CoreNeutral50,fontStyle:"italic",fontFeatureSettings:de.g_+", "+de.xL},Pn={color:x.Il.CoreRed50},Rn={color:x.Il.CoreGreen60},Nn={color:x.Il.CoreNeutral90},Mn={color:x.Il.CoreNeutral90},Fn=I.u.stylesheet({wrapper:[{borderCollapse:"collapse",userSelect:"initial"}],group:[In],item:[An],itemCompact:[An,{display:"flex",flexDirection:"column"}],itemMinimal:[An,En],baseBlock:[kn],title:[kn,Tn],content:[kn,Ln],red:[kn,Tn,Pn],green:[kn,Tn,Rn],yellow:[kn,Tn,Nn],fallback:[kn,Tn,Mn]}),On=n(96261),Bn=J.default||J,Dn=(0,d.HP)(p.C8.Logging.getLogger);!function(e){e.actionRegex=/^#([\w\d_-]+)$/,e.parse=function(t){return(0,l.pipe)(y.fromNullable(t.match(e.actionRegex)),y.chain((function(e){switch(e[1]){case"set-goals":return y.some(w.l.Type.openSetGoals);default:return y.none}})))}}(cn||(cn={}));var Un=function(e){var t=e.description,n=e.prefix,r=e.actions,i=e.layoutDensity,o=a.useContext(b.m.Context),s=a.useContext(yt.G.Context),u=bt.P.useElWatcher(),c=u.ref,d=u.onMount;bt.P.useSubscriptionTo(c.pipe(wt.oA,Ue.w((function(e){return Array.from(e.getElementsByTagName("a")).reduce((function(e,t){var n=_t.R(t,"click").pipe(St.b((function(e){return e.preventDefault()})));return(0,l.pipe)(y.fromNullable(t.getAttribute("href")),y.chain(cn.parse),y.fold((function(){return Dn("Description").error("Invalid action",t),e.pipe(Ct.T(n))}),(function(i){return e.pipe(Ct.T(s.getTooltipObservable(t,o.card.actionDescription[i],"auto",y.none),n.pipe(xt.h({type:i}),St.b(r))))})))}),It.E)}))));var p=(0,l.pipe)(i,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return vi.minimalDescription}),(function(){return vi.description})));return void 0!==n?a.createElement(O.XY,{mount:d,className:p},n,a.createElement("span",(0,S.__assign)({},Zt.renderToHtml(t,cn.actionRegex)))):a.createElement(O.XY,(0,S.__assign)({mount:d,className:p},Zt.renderToHtml(t,cn.actionRegex)))},Wn=function(e){var t=e.card,n=e.isChecking;return fe.bZ.isRated(t.activeAlert)?a.createElement(We,{value:u.X.isCardPresuccess(t.visualState)?Ne.g.MAX:t.meta.percentile,initValue:u.X.isCardPresuccess(t.visualState)?t.meta.percentile:Ne.g.MIN,isLoading:n}):null},Hn=function(e){var t=e.card,n=He(u.X.isCardPresuccess(t.visualState)?Ne.g.MAX:t.meta.percentile,u.X.isCardPresuccess(t.visualState)?t.meta.percentile:Ne.g.MIN);return a.createElement(o.F.Fragment,null,n.pipe(h.U(Ne.g.prism.reverseGet),h.U((function(e){return a.createElement(ht.P,{percentage:e,colorType:ht.P.ColorType.neoBlue,iconSize:ht.P.IconSize.extraSmall,theme:{radialProgressBar:vi.circleProgress,radialProgressText:vi.circleText}})}))))},zn=function(e){var t=e.card,n=e.feedbackActions;return a.createElement(a.Fragment,null,a.createElement(_.zx.Ghost,{name:"takeaway-like",onClick:B.hz((function(){var e;return n.next({type:w.l.Type.takeawayCorrectlyDetected,alertId:t.activeAlert.id,takeawayText:null!==(e=t.activeAlert.highlightTexts[0])&&void 0!==e?e:""})}))},a.createElement(Ee.JO.YesCircle,null)," Yes"),a.createElement(_.zx.Ghost,{name:"takeaway-dislike",onClick:B.hz((function(){return n.next({type:w.l.Type.takeawayIncorrectlyDetected,alertId:t.activeAlert.id})}))},a.createElement(Ee.JO.NoCircle,null)," No"))},jn=function(e){var t=e.card,n=e.feedbackActions,r=a.useContext(b.m.Context);return a.createElement(a.Fragment,null,a.createElement(_.zx.Ghost,{name:"resolve",title:r.resolve,onClick:B.hz((function(){return n.next({type:w.l.Type.takeawayResolve,alertId:t.activeAlert.id,isLikelyToBeRead:me.$.isLikelyToBeReadTakeaway(t.activeAlert)})}))},a.createElement(Ee.JO.YesCircle,null)),a.createElement(_.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:B.hz((function(){return n.next({type:w.l.Type.takeawayDismiss,alertId:t.activeAlert.id,isLikelyToBeRead:me.$.isLikelyToBeReadTakeaway(t.activeAlert)})}))},a.createElement(Ee.JO.Ignore,null)))},Gn=function(e){var t=e.card,n=e.feedbackActions,r=e.onClick,i=e.disabled,o=a.useContext(b.m.Context);return a.createElement(_.zx.Ghost,{name:"ignore",title:o.dismiss,onClick:B.hz((function(){n.next({type:w.l.Type.alertIgnore,alertId:t.activeAlert.id,id:t.id,eligibleForDismissSurvey:u.X.isEligibleForDismissSurvey(t)}),r&&r()})),disabled:i},a.createElement(Ee.JO.Ignore,null))},qn=function(e){var t=e.card,n=e.feedbackActions;return a.createElement(a.Fragment,null,a.createElement(Gn,{card:t,feedbackActions:n}),a.createElement(Yn,{activeAlert:t.activeAlert,onMute:(0,l.pipe)(t.muteCategory,y.map((function(e){return B.hz((function(){return n.next({type:w.l.Type.muteAlertCategory,categoryId:e})}))}))),onWrong:B.hz(B.hz((function(){return n.next({type:w.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:ue.PZ.WRONG_SUGGESTION})}))),onOffensive:B.hz(B.hz((function(){return n.next({type:w.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:ue.PZ.OFFENSIVE_CONTENT})}))),onVisibilityChange:function(e){return n.next({type:w.l.Type.moreActionsButtonToggle,mode:e?"open":"closed"})}}))},$n=function(e){var t=e.onClick,n=a.useContext(b.m.Context);return a.createElement(_.zx.Flat,{name:"mute",onClick:t},a.createElement(Ee.JO.Mute,null),n.card.mute)},Vn=function(e){var t=e.onClick,n=a.useContext(b.m.Context);return a.createElement(_.zx.Flat,{name:"incorrect",onClick:t},a.createElement(Ee.JO.Report,null),n.card.wrong)},Xn=function(e){var t=e.activeAlert,n=e.onClick,r=a.useContext(b.m.Context);return(0,l.pipe)(t.extraProperties.vox,ce.dH((function(){return null}),a.createElement(_.zx.Flat,{name:"offensive",onClick:n},a.createElement(Ee.JO.Report,null),r.card.offensive)))},Yn=function(e){var t=e.activeAlert,n=e.onMute,r=e.onWrong,i=e.onOffensive,o=e.onVisibilityChange,s=t.getTransform(),u=y.isSome(n);return u||y.isSome(s)?a.createElement(Qe.L,{label:a.createElement(_.zx.Ghost,{name:"moreActions"},a.createElement(Ee.T1.MoreVertical,null)),align:"right",theme:{dropdownContainer:vi.dropdownContainer},name:"moreActions",onVisibilityChange:o},(0,l.pipe)(n,y.map((function(e){return a.createElement($n,{onClick:e})})),ce.QP),(0,l.pipe)(s,y.map((function(){return a.createElement(a.Fragment,null,u&&a.createElement(Qe.L.Delimiter,null),a.createElement(Vn,{onClick:r}),a.createElement(Xn,{activeAlert:t,onClick:i}))})),ce.QP)):null},Zn=function(e){var t=e.card,n=e.onClick,r=e.mode,i=void 0===r?"default":r,o=a.useContext(b.m.Context),s=a.useContext(pe.a.Context),u=a.useCallback((function(e){s.has(pe.a.Flag.onlyTrustedEvents)&&!e.isTrusted||n()}),[]),c=t.renderOptions.features.has(f.j.Features.showAnonymousUserFooters)?{disabled:!0,title:o.card.disabledForAnonymous}:{title:"mini"===i?o.card.addToDict:""};return t.activeAlert.extraProperties.hasAddToDictionary?a.createElement(_.zx.Tertiary,(0,S.__assign)({},c,{name:"add-to-dict",onClick:u}),a.createElement(Ee.JO.Dict,null),o.card.addToDict):null},Jn=function(e){var t=e.title,n=e.checkingInProgress,r=e.checkingMessage,i=e.applyMessage,o=e.onClick;return a.createElement(_.zx.Primary,{key:"update-all",name:"update-all",title:t,className:n.pipe(h.U((0,d.RN)(Sn.updateAllBtnLoading,Sn.updateAllBtn))),disabled:n,children:n.pipe(h.U((0,d.RN)(a.createElement(a.Fragment,{key:"update-all-checking"},le.kC(r),a.createElement(gt.$,{size:18,strokeWidth:2,wrapperClassName:Sn.updateBtnSpinner,variation:"white"})),a.createElement(a.Fragment,{key:"update-all-checked"},le.kC(i))))),onClick:B.hz(o)})},Kn=function(e){var t=e.card;return(0,l.pipe)(sr(t.activeAlert,t.renderOptions.layoutDensity),y.map((function(e){return a.createElement(an,{key:"card-actions-details",visualState:t.visualState,className:vi.more},e)})),y.toNullable)},Qn=function(e){var t=e.card,n=e.actions;return or(t.activeAlert,t.renderOptions.layoutDensity)?a.createElement(rn,{key:"card-actions-button",mode:"default",actions:n,card:t}):a.createElement(Zn,{key:"card-actions-button",card:t,mode:"default",onClick:B.hz((function(){return n.next({type:w.l.Type.alertFeedback,alertId:t.activeAlert.id,feedbackType:ue.PZ.ADD_TO_DICTIONARY})}))})},er=function(e){return a.createElement(ge.TG,{alignment:"bottom",eventType:"onclick",stepId:se.StepId.Step4,title:"Accept a correction",message:"Click on a suggestion to apply it to your text.",findFirstButton:{dotPosition:"rightTop"},themes:{containerWrapperClassName:vi.onboardingNotification}},e.children)},tr=function(e){var t=e.onClick,n=e.rl,r=e.layoutDensity;return a.createElement(er,null,a.createElement(On.zO,{replacementsLabels:n,onClick:t,layoutDensity:r}))},nr=function(e){var t=e.text;return a.createElement(O.P1,(0,S.__assign)({className:vi.title},Zt.renderToHtml(t)))},rr=function(e){var t=e.text;return a.createElement(O.P1,(0,S.__assign)({className:vi.titleMinimal},Zt.renderToHtml(t)))},ir=function(e){var t=e.alert;return a.createElement(O.H4,(0,S.__assign)({className:vi.title},Zt.renderToHtml(t.title)))},ar=function(e){var t=e.alert,n=e.meta,r=e.options,i=e.children,o=e.className;return a.createElement(tn,(0,S.__assign)({bundle:n.bundleInfo,activeAlert:t,showCardLabel:r.features.has(f.j.Features.showLabel),premiumAlertLabelHighlight:r.features.has(f.j.Features.showNewPremiumCardLabels)?mt.new:r.features.has(f.j.Features.showPersistentPremiumCardLabels)?mt.persistent:mt.none,layoutDensity:r.layoutDensity},(0,C.Sh)(vi.label,o)),i)};function or(e,t){return!e.extraProperties.hasAddToDictionary&&(!me.$.isTakeawayWithoutFeedback(e)&&(!(!y.isSome(e.examples)&&!y.isSome(e.details))||!(t!==f.j.Density.minimal||!y.isSome(e.getTransform())||void 0===e.explanation||null===e.explanation||""===e.explanation)))}var sr=function(e,t){if(!or(e,t))return ce.cS();var n=(0,l.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return vi.minimalDescription}),(function(){return vi.description})));return y.some(a.createElement(a.Fragment,null,(0,l.pipe)(t,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return y.isNone(e.details)?a.createElement(O.XY,(0,S.__assign)({className:n},Zt.renderToHtml(e.explanation,cn.actionRegex))):null}),(function(){return null}))),(0,l.pipe)(e.details,y.map((function(e){return a.createElement(O.XY,(0,S.__assign)({className:n},Zt.renderToHtml(e)))})),y.toNullable),(0,l.pipe)(e.examples,y.map((function(e){return a.createElement(xn,{layoutDensity:t,examples:e})})),y.toNullable)))},ur=function(e){var t=e.isChecking;return a.createElement(o.F.Fragment,null,t.pipe(h.U((function(e){return a.createElement(gt.$,{className:e?vi.spinner:vi.spinnerInvisible,variation:"blue",isIdle:!e,size:32,strokeWidth:2})}))))},cr=function(e){var t=a.useState(!0),n=t[0],r=t[1];return n?a.createElement(vr,{type:e.type,actions:e.actions,onClose:function(){return r(!1)}}):null},lr=function(e){var t=e.card,n=e.actions;return u.X.isSmartPhrases(t)?null:me.$.isDemoPremium(t.activeAlert)?a.createElement(Sr,{card:t,actions:n}):!me.$.isFree(t.activeAlert)&&t.renderOptions.features.has(f.j.Features.showPremiumTrialFooters)?a.createElement(wr,{actions:n}):t.renderOptions.features.has(f.j.Features.showAnonymousUserFooters)?a.createElement(br,{actions:n,card:t}):(0,l.pipe)(t.renderOptions.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.cozy)((function(){return a.createElement(yr,{card:t,actions:n})}),(function(){return(0,l.pipe)(t.activeAlert.extraProperties.fluencyMessage,y.fold((function(){return a.createElement(yr,{card:t,actions:n})}),(function(e){return a.createElement(_r,{fluencyLabel:e})})))})))};function dr(e,t,n){n.next({type:w.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:e})}var pr,fr=function(e){var t=e.card,n=e.actions,r=a.useContext(b.m.Context).card.matchesNavigation;return a.createElement(o.F.Fragment,null,(0,l.pipe)(t,h.U((function(e){return a.createElement("div",{key:e.activeAlert.id,className:vi.bundleNavWrapper},a.createElement(O.XY,{className:vi.bundleTitle},u.X.bundleTitle(e)),a.createElement("div",{className:vi.bundleNavMatchesRow},a.createElement(_.zx.Ghost,{title:0!==e.activeAlertIndex?"Previous suggestion":void 0,className:vi.bundleNavButtonGhost,disabled:0===e.activeAlertIndex,name:"left",onClick:function(){return dr("left",e,n)}},a.createElement(Ee.JO.Arrow,{className:vi.bundleNavLeftButtonIcon})),a.createElement(O.ck,{className:vi.bundleNavCount},r.currentMatchPosition(e.activeAlertIndex+1,e.alerts.length)),a.createElement(_.zx.Ghost,{title:e.activeAlertIndex!==e.alerts.length-1?"Next suggestion":void 0,className:vi.bundleNavButtonGhost,disabled:e.activeAlertIndex===e.alerts.length-1,name:"right",onClick:function(){return dr("right",e,n)}},a.createElement(Ee.JO.Arrow,{className:vi.bundleNavRightButtonIcon}))))}))))},mr=function(e){var t=e.card,n=e.actions,r=e.isChecking;return a.createElement(a.Fragment,null,(0,l.pipe)(t.renderOptions.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return fe.bZ.isRated(t.activeAlert)?a.createElement(a.Fragment,null,a.createElement(Hn,{card:t}),a.createElement(rr,{text:t.activeAlert.miniCardTitle})):a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions},a.createElement(rr,{text:t.activeAlert.miniCardTitle}))}),(function(){return a.createElement(a.Fragment,null,a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),a.createElement(nr,{text:t.activeAlert.title}),a.createElement(Wn,{card:t,isChecking:r}))}))),a.createElement(Un,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity}))},hr=function(e){var t=e.card,n=e.actions,r=a.useContext(b.m.Context),i=me.$.isTakeawayWithoutFeedback(t.activeAlert)?r.card.takeaway.defaultTitle:t.activeAlert.title,o=(0,l.pipe)(t.activeAlert,y.fromPredicate(me.$.isTakeaway),y.chain((function(e){return y.fromNullable(e.highlightTexts[0])}))),s=(0,l.pipe)(t.activeAlert,y.fromPredicate((0,d.W9)(me.$.isUnlikelyToBeReadTakeaway,me.$.isLikedTakeaway)),y.map((function(){return t.meta.explanation})));return a.createElement(a.Fragment,null,(0,l.pipe)(t.renderOptions.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions},a.createElement(rr,{text:u.X.miniTitle(t,r)}))}),(function(){return a.createElement(a.Fragment,null,a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),a.createElement(nr,{text:i}))}))),(0,l.pipe)(o,y.fold(c.constNull,(function(e){return a.createElement(gr,{text:e,layoutDensity:t.renderOptions.layoutDensity})}))),(0,l.pipe)(s,y.fold(c.constNull,(function(e){return a.createElement(Un,{description:e,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},gr=function(e){var t=e.text,n=e.layoutDensity;return a.createElement("div",{className:vi.highlightedTextBox},a.createElement(O.XY,{className:(0,l.pipe)(n,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return vi.minimalHighlightedTextInnerBox}),(function(){return vi.highlightedTextInnerBox})))},t))},vr=function(e){var t=a.useContext(b.m.Context),n=t.card.onboarding[e.type],r=n.title,i=n.content;return a.useLayoutEffect((function(){return function(){return e.actions.next({type:w.l.Type.onboardingClose,value:e.type})}}),[]),a.createElement(tt.AdHoc,{key:"new-notification",title:a.createElement(a.Fragment,null,r,a.createElement(he.Regular,{className:vi.newLabel},t.new)),className:vi.newCheckNotification,onClose:e.onClose},i)},yr=function(e){var t=e.actions,n=e.card,r=a.useContext(b.m.Context);return bt.P.useEffectOnDidMount((function(){n.meta.showMuteQuotedAdvice&&t.next({type:w.l.Type.muteQuotedAdviceShow})})),n.meta.showMuteQuotedAdvice?a.createElement(pr.Base,{className:qr},a.createElement("span",null,r.card.muteCitedText(a.createElement("a",{"data-name":"open-preferences-link",onClick:function(){return t.next({type:w.l.Type.openPreferences})}},r.documentSettings.editorSettings))),a.createElement(_.zx,{name:"dismiss-mute-quoted-advice",onClick:function(){return t.next({type:w.l.Type.dismissMuteQuotedAdvice})}},a.createElement(Ee.JO.Close,null))):null},br=function(e){var t=e.actions,n=e.card,r=a.useContext(b.m.Context),i=n.activeAlert.extraProperties.hasAddToDictionary?r.anonymousUserAddToDictionarySignInPrompt:r.anonymousUserGenericSignInPrompt;return a.createElement(pr.Base,{className:vi.anonymousUserNotice},i((function(){t.next({type:w.l.Type.toSignIn})})))},wr=function(e){var t=e.actions;return a.createElement(pr.Small,{className:Vr},a.createElement(Ee.JO.PaidLink,{className:vi.iconWrapper,width:12}),a.useContext(b.m.Context).premiumFreeTrial((function(){t.next({type:w.l.Type.premiumTrialFooterCtaClick})})))},_r=function(e){var t=e.fluencyLabel,n=a.useContext(b.m.Context).card.fluency,r=Object.keys(P.PrimaryLanguage).filter((function(e){return e!==P.PrimaryLanguage.Other})).map((function(e){return e.toLowerCase()})),i=t.toLowerCase(),o=(0,l.pipe)(y.fromNullable(r.find((function(e){return i.includes(e)}))),y.map(le.kC),y.getOrElse((function(){return"multilingual"})),n.cardFooter);return a.createElement(O.x4,{className:vi.fluencyNotice},o,a.createElement(vt.u,{title:n.tooltip},a.createElement(Ee.JO.Info,{width:10,className:vi.fluencyInfo})))};!function(e){function t(e){return function(t){var n=t.children,r=t.className;return a.createElement(e,(0,S.__assign)({},(0,C.Sh)(vi.cardFooter,r)),n)}}e.Small=t(O.x4),e.Base=t(O.XY)}(pr||(pr={}));var Sr=function(e){var t=e.card,n=e.actions;return a.createElement(pr.Small,{className:t.renderOptions.upgradeDemoPremiumNotice===f.Y.yellow?vi.demoPremiumNoteYellow:vi.demoPremiumNoteGray},a.useContext(b.m.Context).demoPremiumNote((function(){n.next({type:w.l.Type.toUpgrade})})))},Cr=function(e){var t=e.title,n=e.children;return a.createElement("div",{className:vi.cardWrapper},a.createElement("div",{className:vi.cardWrapperTitle},t),n)},xr=function(e){var t=e.className,n=e.title,r=e.emoji,i=e.hideBetaBadge,o=a.useContext(b.m.Context);return a.createElement("div",(0,S.__assign)({},(0,C.Sh)(vi.smartPhrasesTitle,t)),a.createElement("div",null,a.createElement(et.d,{className:vi.smartPhrasesTitleEmoji},r),n),i?null:a.createElement(he.Regular,null,o.beta))},Ir=function(e){var t=e.card,n=e.actions,r=e.isLoading,i=e.transform,s=e.classes,u=a.useState(null),c=u[0],l=u[1],d=a.useState(null),f=d[0],m=d[1],g=a.useState(200),v=g[0],b=g[1],_=a.useState(null),C=_[0],x=_[1];a.useEffect((function(){var e=new Bn((function(e){e[0]&&m(e[0].contentRect.height)}));return l(e),function(){return e.disconnect()}}),[]);var I=a.useCallback((function(e){C&&(null==c||c.unobserve(C)),e&&(x(e),null==c||c.observe(e))}),[C,c]);return a.useEffect((function(){!t.activeAlert.hideReplacements&&f&&b(f)}),[f]),r?a.createElement("div",{className:vi.smartPhrasesLoadingContainer,style:{height:null!=v?v:void 0}},a.createElement("div",{className:vi.smartPhrasesLoadingContainerInner},a.createElement(Ie,{size:"medium"}))):t.activeAlert.hideReplacements?a.createElement("div",{className:vi.smartPhrasesSuccessLabel},a.createElement(Ee.JO.VotedYes,{className:vi.smartPhrasesSuccessLabelIcon}),t.activeAlert.phraseAddedTitle):a.createElement("div",{ref:I,className:vi.smartPhrasesReplacementsContainer},a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions,className:vi.smartPhrasesReplacementsLabel}),a.createElement(o.F.div,{className:s.transformContainer},a.createElement(Ae.T9,{classes:{rendered:s.renderedReplacement,removing:s.hiddenReplacement},timeout:250,content:i.pipe(h.U(y.fold((function(){return p.C8.Logging.getLogger("SmartPhrasesReplacements").error("No replacements available for SmartPhrases card.",{cardId:t.id}),null}),(function(e){var r=(0,S.__assign)((0,S.__assign)({},e),{labels:e.labels.filter((function(e,n){return!t.activeAlert.usedReplacementsIndexes.includes(n)})).slice(t.activeAlert.replacementsStartIndex,t.activeAlert.replacementsEndIndex)});return a.createElement(On.GP,{replacementsLabels:r,onClick:function(e){return B.hz((function(){var r=t.activeAlert.originalReplacementsIndexes.get(e+t.activeAlert.replacementsStartIndex)||e;n.next({type:w.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:r,cardType:w.l.getCardType(t)}),n.next({type:w.l.Type.smartPhrasesApply,alertId:t.activeAlert.id,cardId:t.id,replacementIndex:e+t.activeAlert.replacementsStartIndex,originalReplacementIndex:r})}))}})}))))})))},Ar=function(e){var t=e.card,n=e.actions,r=a.useContext(b.m.Context);return t.activeAlert.usedReplacementsIndexes.length>0?null:a.createElement("div",{className:vi.smartPhrasesFooter},Boolean(t.activeAlert.helpfulFeedback)?r.card.smartPhrases.helpfulFeedbackThankYouNote:r.card.smartPhrases.helpfulFeedbackQuestion,a.createElement("div",{className:vi.smartPhrasesFooterHelpfulFeedback},a.createElement(_.zx.Ghost,{name:"smart-phrases-"+t.activeAlert.intent+"-helpful-feedback-yes",title:r.card.smartPhrases.helpfulFeedbackYes,active:t.activeAlert.helpfulFeedback===fe.Zy.SMART_PHRASES_HELPFUL,disabled:Boolean(t.activeAlert.helpfulFeedback),onClick:B.hz((function(){return n.next({type:w.l.Type.smartPhrasesFeedback,alertId:t.activeAlert.id,cardId:t.id,feedbackType:fe.Zy.SMART_PHRASES_HELPFUL})}))},a.createElement(Ee.JO.VotedYes,null)),a.createElement(_.zx.Ghost,{name:"smart-phrases-"+t.activeAlert.intent+"-helpful-feedback-no",title:r.card.smartPhrases.helpfulFeedbackNo,active:t.activeAlert.helpfulFeedback===fe.Zy.SMART_PHRASES_NOT_HELPFUL,disabled:Boolean(t.activeAlert.helpfulFeedback),onClick:B.hz((function(){return n.next({type:w.l.Type.smartPhrasesFeedback,alertId:t.activeAlert.id,cardId:t.id,feedbackType:fe.Zy.SMART_PHRASES_NOT_HELPFUL})}))},a.createElement(Ee.JO.VotedNo,null))))},Er={wordWrap:"break-word",overflowWrap:"break-word",$nest:{"& a":{borderBottom:"1px solid",textDecoration:"none",$nest:{"&:link, &:visited":{color:x.Il.CoreBlue50}}},"& b":{fontStyle:"italic",fontFeatureSettings:de.g_+", "+de.xL},"& ul":{margin:I.u.rem(.75)+" 0 0",padding:0,listStyle:"none"},"& li":{position:"relative",paddingLeft:I.u.rem(1.5),$nest:{"&:before":{position:"absolute",left:0,content:"'\\2022'"}}},"& li + li":{marginTop:I.u.rem(.5)}}},kr={lineHeight:I.u.rem(1.3125)},Tr={$nest:{"& i":{color:x.Il.CoreNeutral50},"& > * + *":{marginTop:I.u.rem(.75)}}},Lr={fontWeight:"bold",textTransform:"none",$nest:{"&:first-letter":{textTransform:"uppercase"},"& i":{color:A.kl}}},Pr={marginTop:I.u.important(0),lineHeight:I.u.rem(1.125)},Rr={fontSize:I.u.rem(x.xv.SubheadingSize),lineHeight:I.u.rem(x.xv.SubheadingLineHeight)},Nr={width:I.u.rem(2),height:I.u.rem(2)},Mr={position:"absolute",top:"calc(50% - "+I.u.rem(1)+")",left:"calc(50% - "+I.u.rem(1)+")",width:I.u.rem(2),height:I.u.rem(2),transition:"opacity .2s"},Fr={marginLeft:I.u.rem(.5),backgroundColor:x.Il.CoreGreen50,color:x.Il.CoreNeutral0,fontWeight:600},Or={position:"absolute",marginTop:I.u.rem(-8.5),marginLeft:I.u.rem(-2),$nest:{"&:after":{position:"absolute",bottom:I.u.rem(-.525),left:I.u.rem(.7),borderTop:I.u.rem(.625)+" solid "+x.Il.BackgroundNotification,borderRight:I.u.rem(.5)+" solid transparent",borderLeft:I.u.rem(.5)+" solid transparent",content:"' '"}}},Br={background:"linear-gradient(269.88deg, rgba(228, 244, 247, .6) .02%, rgba(215, 248, 240, .6) 50.81%, rgba(202, 227, 250, .6) 99.98%)"},Dr={position:"absolute",top:I.u.rem(.75),left:I.u.rem(.4)},Ur={color:x.Il.CoreNeutral90,$nest:{"& a":{fontWeight:800,color:x.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:x.Il.CoreBlue50},"&:hover":{borderBottom:"1px solid "+x.Il.CoreBlue40,color:x.Il.CoreBlue40}}}}},Wr={display:"flex",borderRadius:de.LB+" "+de.LB+" "+I.u.rem(de.Jr)+" "+I.u.rem(de.Jr),color:x.Il.CoreNeutral50,padding:I.u.rem(.5)+" "+I.u.rem(.75)+" "+I.u.rem(.5)+" "+I.u.rem(1),fontSize:I.u.rem(.6875),lineHeight:I.u.rem(1.125)},Hr={padding:"0 "+I.u.rem(.6),minWidth:I.u.rem(.625),minHeight:I.u.rem(.625)},zr={display:"grid",gridTemplateColumns:"auto min-content min-content",alignItems:"center",columnGap:I.u.rem(.25),borderRadius:de.LB+" "+de.LB+" "+I.u.rem(de.Jr)+" "+I.u.rem(de.Jr),background:x.Il.CoreNeutral10,color:x.Il.CoreNeutral50,padding:I.u.rem(.5)+" "+I.u.rem(1)+" "+I.u.rem(.5)+" "+I.u.rem(1),fontSize:I.u.rem(.75),lineHeight:I.u.rem(1.125)},jr={$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:x.Il.CoreNeutral20}}},Gr="muteQuotedAdvice",qr=I.u.joinClasses([Gr,I.u.style({$nest:{"& a":{borderBottom:"1px solid "+x.Il.CoreBlue50,color:x.Il.CoreBlue50,$nest:{"&:link, &:visited":{color:x.Il.CoreBlue50},"&:hover":{borderBottom:"1px solid "+x.Il.CoreBlue40,color:x.Il.CoreBlue40}}},"& i:hover":{strokeWidth:I.u.px(2)}}})]),$r="premiumFreeTrial",Vr=I.u.joinClasses([$r,I.u.style({$nest:{"& svg":{fill:x.Il.CoreYellow80},"& a":{fontWeight:800,color:x.Il.CoreYellow70,$nest:{"&:link, &:visited":{color:x.Il.CoreYellow80},"&:hover":{borderBottom:"1px solid "+x.Il.CoreYellow60,color:x.Il.CoreYellow60}}}}})]),Xr={display:"block",padding:I.u.rem(1)+" "+I.u.rem(1)+" "+I.u.rem(1)+" "+I.u.rem(1.5),width:I.u.percent(100),borderRadius:de.LB+" "+de.LB+" "+I.u.rem(de.Jr)+" "+I.u.rem(de.Jr),$nest:(sn={"& a":{cursor:"pointer",transition:"color .2s"}},sn["&.muteQuotedAdvice"]={display:"flex",padding:I.u.rem(1)+" "+I.u.rem(1)+" "+I.u.rem(1)+" "+I.u.rem(2),background:x.Il.CoreNeutral10,color:x.Il.CoreNeutral90,justifyContent:"space-between",alignItems:"center"},sn["&.premiumFreeTrial"]={padding:I.u.rem(1)+" "+I.u.rem(1)+" "+I.u.rem(1)+" "+I.u.rem(2),position:"relative",background:x.Il.CoreYellow20,color:x.Il.CoreNeutral90},sn)},Yr={position:"absolute",top:I.u.rem(.8),left:I.u.rem(.5),minWidth:I.u.rem(1),minHeight:I.u.rem(1)},Zr={background:x.Il.CoreNeutral1,color:x.Il.CoreNeutral50,$nest:{"& a":{borderBottom:"1px solid "+x.Il.CoreNeutral50,$nest:{"&:link, &:visited":{color:x.Il.CoreNeutral50},"&:hover":{borderBottom:"1px solid "+x.Il.CoreNeutral50,color:x.Il.CoreNeutral50}}}}},Jr={background:x.Il.CoreYellow10,color:x.Il.CoreYellow60,$nest:{"& a":{borderBottom:"1px solid "+x.Il.CoreYellow60,$nest:{"&:link, &:visited":{color:x.Il.CoreYellow60},"&:hover":{borderBottom:"1px solid "+x.Il.CoreYellow60,color:x.Il.CoreYellow60}}}}},Kr={fontWeight:"bold",fontSize:I.u.rem(.875),lineHeight:I.u.rem(1.125),flex:2},Qr={padding:I.u.rem(.625)+" 0 "+I.u.rem(.1875)+" "+I.u.rem(.5),marginBottom:I.u.rem(.25),display:"flex",justifyContent:"space-between",alignItems:"center"},ei={fontSize:I.u.rem(.75),lineHeight:I.u.rem(1.125),color:x.Il.CoreNeutral90},ti={display:"flex",justifyContent:"flex-end",alignItems:"center",height:I.u.rem(1.5),$nest:{"& > * + *":{marginLeft:I.u.rem(.25)},"& > *":{borderRadius:I.u.rem(de.fx)}}},ni={height:I.u.rem(2),minHeight:I.u.rem(2),width:I.u.rem(2),fill:x.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{cursor:"pointer",fill:x.Il.CoreBlue50},"&[data-disabled='true']":{fill:x.Il.CoreNeutral30}}};function ri(e,t){return{display:["block","-webkit-box"],maxHeight:I.u.rem(e*t),overflow:"hidden",overflowWrap:"anywhere",whiteSpace:"pre-wrap",textOverflow:"ellipsis","-webkit-line-clamp":t,WebkitBoxOrient:"vertical"}}var ii=(0,S.__assign)((0,S.__assign)({},ri(1.5,3)),{lineHeight:I.u.rem(1.5)}),ai=(0,S.__assign)((0,S.__assign)({},ri(1.3125,3)),{lineHeight:I.u.rem(1.3125)}),oi={margin:I.u.rem(1)+" 0",padding:I.u.rem(.5),borderRadius:I.u.rem(de.fx),background:x.Il.CoreNeutral10,color:x.Il.CoreNeutral90,fontWeight:400,fontStyle:"italic",fontFeatureSettings:de.g_+", "+de.xL},si={borderRadius:I.u.rem(.75),background:x.Il.CoreNeutral20,margin:I.u.rem(-.25)+" "+I.u.rem(-.25),padding:I.u.rem(.25)+" "+I.u.rem(.25),$nest:(un={},un["& ."+U.g.cozyCardContainerSelector]={margin:0,boxShadow:"none"},un["& ."+U.g.fullCardSelector]={padding:I.u.rem(.75)+" "+I.u.rem(.5)+" "+I.u.rem(.5)+" "+I.u.rem(1)},un["& [role=dropdown-list]"]={transform:"translateY("+I.u.rem(-.5)+")"},un)},ui={paddingTop:I.u.rem(.25),paddingBottom:I.u.rem(.5),paddingLeft:I.u.rem(.5),paddingRight:I.u.rem(.5),fontWeight:"bold",fontSize:I.u.rem(.875),lineHeight:I.u.rem(1.125)},ci={marginRight:I.u.rem(.5)},li={display:"flex",alignItems:"center",justifyContent:"space-between",background:x.Il.CoreNeutral10,borderRadius:de.LB+" "+de.LB+" "+I.u.rem(.5)+" "+I.u.rem(.5),padding:I.u.rem(.6875)+" "+I.u.rem(1)+" "+I.u.rem(.6875)+" "+I.u.rem(1),color:x.Il.CoreNeutral50,fontSize:I.u.rem(.6875),lineHeight:I.u.rem(1.125)},di={display:"flex",alignItems:"center",$nest:{'& div[role="button"]:first-child':{marginRight:I.u.rem(.125)}}},pi={fontSize:I.u.rem(.75),lineHeight:I.u.rem(1.125),color:x.Il.CoreNeutral90,display:"flex",alignItems:"center",marginLeft:I.u.rem(-1.75)},fi={marginRight:I.u.rem(.5),$nest:{"& circle":{stroke:I.u.important(x.Il.CoreGreen50),fill:I.u.important(x.Il.CoreGreen50)},"& polyline":{stroke:I.u.important(x.Il.CoreNeutral0),fill:I.u.important("none")}}},mi={display:"flex",flexDirection:"column",justifyContent:"center",animation:I.u.keyframes({from:{opacity:0,transform:"scale(0)"}})+" .3s ease-in-out"},hi={marginBottom:I.u.rem(.75)},gi={animation:I.u.keyframes({from:{opacity:0}})+" .3s ease-in-out"},vi=I.u.stylesheet({description:[Er],minimalDescription:[Er,kr],highlightedTextBox:[oi],highlightedTextInnerBox:[ii],minimalHighlightedTextInnerBox:[ai],more:[Tr],onboardingNotification:[{display:"block"}],title:[Lr],titleMinimal:[Lr,Pr],label:[Rr],dropdownContainer:[Nr],spinner:[Mr],spinnerInvisible:[Mr,{opacity:0,pointerEvents:"none"}],newLabel:[Fr],newCheckNotification:[Or],baseNotice:[Br],iconWrapper:[Dr],anonymousUserNotice:[Br,Ur],fluencyNotice:[Br,Wr],fluencyInfo:[Hr],takeawayFooter:[zr],takeawayFooterButtonGhost:[jr],cardFooter:[Xr],circleProgress:[Yr],circleText:[{display:"none"}],demoPremiumNoteGray:[Zr],demoPremiumNoteYellow:[Jr],bundleTitle:[Kr],bundleNavWrapper:[Qr],bundleNavCount:[ei],bundleNavMatchesRow:[ti],bundleNavButtonGhost:[{$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:"rgba(198, 203, 222, .5)"}}}],bundleNavButton:[ni],bundleNavLeftButtonIcon:[ni,{transform:"rotate(90deg)"}],bundleNavRightButtonIcon:[ni,{transform:"rotate(270deg)"}],cardWrapper:[si],cardWrapperTitle:[ui],smartPhrasesTitle:[{display:"flex",justifyContent:"space-between"}],smartPhrasesTitleEmoji:[ci],smartPhrasesFooter:[li],smartPhrasesFooterHelpfulFeedback:[di],smartPhrasesSuccessLabel:[pi],smartPhrasesSuccessLabelIcon:[fi],smartPhrasesLoadingContainer:[mi],smartPhrasesLoadingContainerInner:[{width:"100%",display:"flex",justifyContent:"center"}],smartPhrasesReplacementsLabel:[hi],smartPhrasesReplacementsContainer:[gi]}),yi=I.u.style({margin:I.u.rem(1)+" 0"}),bi=I.u.style({marginLeft:I.u.rem(.5),lineHeight:I.u.rem(1.3125),fontSize:I.u.rem(.875),color:x.Il.CoreNeutral90}),wi=I.u.style({marginTop:"0 !important",$nest:{"&:not(:last-child)":{marginBottom:I.u.rem(1)}}}),_i=I.u.style({marginTop:"0 !important",marginLeft:I.u.rem(1)}),Si={color:x.Il.CoreRed60,fontSize:I.u.rem(.75),lineHeight:I.u.rem(1.125)},Ci=I.u.style(Si),xi=I.u.style(Si,{visibility:"hidden"}),Ii=n(34095),Ai=n(55935),Ei=n(57091),ki=n(32952),Ti=n(24209),Li=n(41398),Pi=n(85985),Ri=n(95300),Ni=n(13444),Mi=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=a.useContext(b.m.Context);return a.createElement(Di,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:(0,c.constant)(a.createElement(mr,{card:t,actions:n,isChecking:r})),cardFooter:function(e){return a.createElement(a.Fragment,null,a.createElement(Kn,{card:t}),a.createElement("div",{className:ua.fullSentenceCardFooterBtns},a.createElement(Jn,{title:o.card.todoAction(t.activeAlert.todoAction),applyMessage:t.activeAlert.todoAction,checkingMessage:t.activeAlert.todoAction,checkingInProgress:e,onClick:B.hz((function(){n.next({type:w.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:w.l.getCardType(t)})}))})))}})},Fi=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,s=e.transform,u=a.useContext(b.m.Context),d=v.h.create(!0);return bt.P.useSubscriptionTo((0,l.pipe)(d,Ai.T(1),St.b((function(e){return n.next({type:w.l.Type.fullSentenceHighlightChangesToggle,showChanges:e})})))),a.createElement(Di,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:(0,c.constant)(a.createElement(o.F.Fragment,null,a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),t.renderOptions.layoutDensity===f.j.Density.minimal&&a.createElement(he.Regular,{className:ua.minimalBetaLabel},u.beta),a.createElement(Yi,{isNew:t.renderOptions.isNew,actions:n}),(0,l.pipe)(t.renderOptions.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return null}),(function(){return a.createElement(Un,{prefix:a.createElement(he.Regular,{className:ua.betaLabel},u.beta),description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))),a.createElement(Ae.T9,{classes:{rendered:ua.replacement,removing:ua.replacementHidden},timeout:250,content:d.pipe(Ei.a(s,(function(e,n){return(0,l.pipe)(n,y.fold((function(){return p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable in full-sentence card",{cardId:t.id}),null}),(function(n){return a.createElement(On.n4,{replacements:n,showDiff:e,layoutDensity:t.renderOptions.layoutDensity})})))})))}),a.createElement(Wn,{card:t,isChecking:r}))),cardFooter:function(e){return a.createElement(a.Fragment,null,a.createElement(Kn,{card:t}),a.createElement(o.F.div,{className:ua.fullSentenceCardFooterBtns},a.createElement(Jn,{title:s.pipe(h.U(y.fold((function(){return""}),(function(e){return u.card.todoAction(e.tooltipText)})))),applyMessage:t.activeAlert.todoAction,checkingMessage:t.activeAlert.todoAction,checkingInProgress:e,onClick:B.hz((function(){n.next({type:w.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:w.l.getCardType(t)})}))}),a.createElement(Ii.Ys,{className:ua.fullSentenceCardCheckbox,checked:d,name:"set-goals"},u.card.showChangesToggle)))}})},Oi=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,s=e.transform,u=a.useContext(b.m.Context),m=(0,l.pipe)(t.userInput,y.getOrElse((0,c.constant)("")));return a.createElement(Di,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return a.createElement(a.Fragment,{key:"content"},a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),a.createElement(Yi,{isNew:t.renderOptions.isNew,actions:n}),a.createElement(o.F.div,{className:e.pipe(h.U((0,d.RN)(ua.transformContainerInvisible,ua.transformContainer)))},a.createElement(Ae.T9,{classes:{rendered:ua.replacement,removing:ua.replacementHidden},timeout:250,content:s.pipe(h.U(y.fold((function(){return p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:t.id}),null}),(function(e){return a.createElement(On.$s,{key:"label",gapValue:m,replacements:e,layoutDensity:t.renderOptions.layoutDensity,onFocus:function(){return n.next({type:w.l.Type.focusUserInput,id:t.id,kind:"focus"})},onChange:function(e){return n.next({type:w.l.Type.changeUserInput,alertId:t.activeAlert.id,cardId:t.id,userInput:e})},onApply:B.hz((function(){return n.next({type:w.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:0,cardType:w.l.getCardType(t)})}))})}))))})),a.createElement(O.Xk,{className:e.pipe(h.U((0,d.RN)(ua.transformHint,ua.transformHintInvisible)))},u.card.updatingSuggestion),a.createElement(Wn,{card:t,isChecking:r}),(0,l.pipe)(t.renderOptions.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return null}),(function(){return a.createElement(Un,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},cardFooter:(0,c.constant)(a.createElement(Kn,{card:t}))})},Bi=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,s=e.transform,u=a.useContext(b.m.Context);return a.createElement(Di,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardBody:function(e){return a.createElement(a.Fragment,null,a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),a.createElement(o.F.div,{className:e.pipe(h.U((0,d.RN)(ua.transformContainerInvisible,ua.transformContainer)))},a.createElement(Ae.T9,{classes:{rendered:ua.replacement,removing:ua.replacementHidden},timeout:250,content:s.pipe(h.U(y.fold((function(){return p.C8.Logging.getLogger("WithTransformsCard").error("Transforms are unavailable",{cardId:t.id}),null}),(function(e){return a.createElement(tr,{rl:e,onClick:function(e){return B.hz((function(){n.next({type:w.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:e,cardType:w.l.getCardType(t)})}))},layoutDensity:t.renderOptions.layoutDensity})}))))})),a.createElement(O.Xk,{className:e.pipe(h.U((0,d.RN)(ua.transformHint,ua.transformHintInvisible)))},u.card.updatingSuggestion),a.createElement(Wn,{card:t,isChecking:r}),(0,l.pipe)(t.renderOptions.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return null}),(function(){return a.createElement(Un,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity})}))))},cardFooter:(0,c.constant)(a.createElement(Kn,{card:t}))})},Di=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=e.cardTheme,s=e.cardBody,u=e.cardFooter,c=e.mainActions,l=e.subActions,p=e.cardExtra,f=a.useMemo((function(){var e=v.h.create(!1),t=new ki.xQ,n=Ti.T(t.pipe(Li.M(r),Pi.h((function(e){e[0];return e[1]})),St.b((function(){return e.set(!0)}))),r.pipe(Ai.T(1),Pi.h((function(e){return!e})),St.b((function(){return e.set(!1)}))));return{transformHidden:e,onMouseOver:t,transformHiddenObservable:n}}),[]),m=f.transformHidden,g=f.onMouseOver,y=f.transformHiddenObservable;return bt.P.useSubscriptionTo(y),a.createElement(W,{visualState:t.visualState,onFocus:function(){return n.next({type:w.l.Type.alertCardShow,cardType:w.l.getCardType(t)})},onMouseOver:function(){n.next({type:w.l.Type.hover,kind:"hover",id:t.id}),g.next()},onMouseOut:function(){return n.next({type:w.l.Type.hover,kind:"unhover",id:t.id})},theme:(0,S.__assign)((0,S.__assign)({content:i.pipe(h.U((0,d.RN)(ua.loadingWrapperInvisible,ua.loadingWrapper)))},Xi(t.renderOptions)),o),extra:a.createElement(a.Fragment,null,a.createElement(ur,{isChecking:i}),p?p():a.createElement(lr,{card:t,actions:n})),body:s(m),mainActions:c?c():a.createElement(qn,{card:t,feedbackActions:n}),footer:u?u(m):void 0,subActions:l?l():a.createElement(Qn,{card:t,actions:n})})};function Ui(e,t){return me.$.isTakeawayWithoutFeedback(e.activeAlert)?a.createElement(zn,{card:e,feedbackActions:t}):me.$.isTakeaway(e.activeAlert)?a.createElement(jn,{card:e,feedbackActions:t}):a.createElement(qn,{card:e,feedbackActions:t})}function Wi(e,t,n){return me.$.isTakeaway(e.activeAlert)?a.createElement(hr,{card:e,actions:t}):a.createElement(mr,{card:e,actions:t,isChecking:n})}var Hi,zi,ji,Gi=function(e){var t=e.card,n=e.actions,r=e.isChecking;return a.createElement(W,{visualState:t.visualState,onFocus:function(){return n.next({type:w.l.Type.alertCardShow,cardType:w.l.getCardType(t)})},theme:Xi(t.renderOptions),body:Wi(t,n,r),mainActions:Ui(t,n),footer:a.createElement(Kn,{card:t}),subActions:a.createElement(Qn,{card:t,actions:n}),extra:a.createElement(lr,{card:t,actions:n})})},qi=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,s=e.transform,u=a.useContext(b.m.Context),p=a.useMemo((function(){return new Ri.X(!0)}),[]);return a.useEffect((function(){return(0,l.pipe)(t.visualState.from,y.fold((function(){return n.next({type:w.l.Type.smartPhrasesShowFullCard,alertId:t.activeAlert.id})}),(function(e){"rendered"===e&&n.next({type:w.l.Type.smartPhrasesShowFullCard,alertId:t.activeAlert.id})})))}),[]),bt.P.useSubscriptionTo(p.pipe(Pi.h(Boolean),Ni.g(1e3),St.b((function(){return p.next(!1)})))),a.createElement(Cr,{title:a.createElement(xr,{title:t.activeAlert.title,emoji:t.activeAlert.emoji})},a.createElement(o.F.Fragment,null,p.pipe(h.U((function(e){return a.createElement(Di,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,cardTheme:e?{contentBody:ua.smartPhrasesCardBodyLoading}:void 0,cardBody:function(r){return a.createElement(Ir,{card:t,actions:n,isLoading:e,transform:s,classes:{transformContainer:r.pipe(h.U((0,d.RN)(ua.transformContainerInvisible,ua.transformContainer))),renderedReplacement:ua.replacement,hiddenReplacement:ua.replacementHidden}})},mainActions:(0,c.constant)(t.activeAlert.usedReplacementsIndexes.length>0?a.createElement(_.zx.Ghost,{name:"smart-phrases-"+t.activeAlert.intent+"-done",onClick:B.hz((function(){return n.next({type:w.l.Type.smartPhrasesDone,alertId:t.activeAlert.id})})),disabled:e},u.card.smartPhrases.done):a.createElement(Gn,{card:t,feedbackActions:n,onClick:function(){return n.next({type:w.l.Type.smartPhrasesDismiss,alertId:t.activeAlert.id})},disabled:e})),subActions:function(){return t.activeAlert.replacementsLength>5||t.activeAlert.hideReplacements?a.createElement(_.zx.Tertiary,{name:"smart-phrases-"+t.activeAlert.intent+"-show-more-ideas",onClick:function(){n.next({type:w.l.Type.smartPhrasesShowMoreIdeas,cardId:t.id,alertId:t.activeAlert.id}),p.next(!0)},disabled:e},a.createElement(Ee.JO.Reload,null),u.card.smartPhrases.showMoreIdeas):null},cardExtra:function(){return e?null:a.createElement(Ar,{card:t,actions:n})}})})))))},$i=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=e.transform;return u.X.isSmartPhrases(t)?a.createElement(qi,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:o}):u.X.hasTransform(t)?u.X.hasFullSentenceTransform(t)?a.createElement(Fi,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:o}):u.X.hasOneGapTransform(t)?a.createElement(Oi,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:o}):a.createElement(Bi,{card:t,actions:n,isChecking:r,isCheckingGlobal:i,transform:o}):u.X.isSimple(t)?a.createElement(Mi,{card:t,actions:n,isChecking:r,isCheckingGlobal:i}):a.createElement(Gi,{card:t,actions:n,isChecking:r})},Vi=function(e){return{container:(0,l.pipe)(e,f.j.Density.matchOrDefault(f.j.Density.cozy)((function(){return ua.cozyCardContainer}),(function(){return ua.compactCardContainer})))}},Xi=function(e){return(0,S.__assign)((0,S.__assign)({},Vi(e.layoutDensity)),{wrapper:(0,l.pipe)(e.layoutDensity,f.j.Density.matchOrDefault(f.j.Density.minimal)((function(){return ua.minimalCardWrapper}),(function(){})))})},Yi=function(e){return a.createElement(o.F.Fragment,null,e.isNew.pipe(h.U(y.fold(c.constNull,(function(t){return a.createElement(cr,{type:t,actions:e.actions,key:"new-notification"})}))),De.O(null)))},Zi=.25,Ji={opacity:0,pointerEvents:"none"},Ki={transition:"opacity "+I.u.seconds(Zi)},Qi={transition:"opacity "+I.u.seconds(Zi),transitionDelay:I.u.seconds(Zi)},ea={position:"absolute",top:I.u.rem(2),color:x.Il.CoreNeutral40,lineHeight:I.u.rem(2),transition:"opacity "+I.u.seconds(Zi),transitionDelay:I.u.seconds(Zi)},ta={transition:"opacity "+I.u.seconds(Zi)},na={fontSize:I.u.rem(x.xv.BodySize),lineHeight:I.u.rem(2.0625)},ra={marginRight:I.u.rem(.25)},ia={padding:I.u.rem(.75)+" "+I.u.rem(.5)+" "+I.u.rem(.5)+" "+I.u.rem(1)},aa={position:"absolute",top:I.u.rem(.8),right:I.u.rem(1),margin:0},oa={margin:I.u.rem(1)+" 0 "+I.u.rem(1.5),borderRadius:I.u.rem(de.Jr),background:x.Il.CoreNeutral0,boxShadow:"0 "+I.u.rem(.625)+" "+I.u.rem(de.mJ)+" 0 rgba(198, 203, 222, .45)"},sa={boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",borderRadius:I.u.rem(de.Jr),background:x.Il.CoreNeutral0},ua=(0,S.__assign)((0,S.__assign)({},I.u.stylesheet({invisible:[Ji],loadingWrapper:[Ki],transformContainer:[Qi],loadingWrapperInvisible:[Ki,Ji],transformContainerInvisible:[Qi,Ji,{transitionDelay:"initial"}],transformHint:[ea],transformHintInvisible:[ea,Ji,{transitionDelay:"initial"}],replacement:[ta],replacementHidden:[ta,{opacity:0}],fullSentenceCardFooterBtns:[{display:"flex",flexWrap:"wrap"}],fullSentenceCardCheckbox:[na],betaLabel:[ra],minimalCardWrapper:[ia],minimalBetaLabel:[aa],compactCardContainer:[sa],smartPhrasesCardBodyLoading:[{padding:0}]})),{cozyCardContainer:I.u.joinClasses([U.g.cozyCardContainerSelector,I.u.style(oa)])}),ca=function(e){var t=e.card,n=e.actions,r=a.useContext(b.m.Context).card.feedbackForm,s=v.h.create(void 0),u=v.h.create(!1);return(0,l.pipe)(t.visualState.transition,y.fromPredicate((function(e){return"feedback_form"===e.type})),y.fold((function(){return p.C8.Logging.getLogger("FeedbackForm").error("Trying to render feedback form from non-feedback state",t),null}),(function(e){var c=e.options;return a.createElement(W,{onFocus:function(){return n.next({type:w.l.Type.alertIgnoreFeedbackFormShow,alertId:t.activeAlert.id})},theme:Xi(t.renderOptions),visualState:t.visualState,body:a.createElement(a.Fragment,null,a.createElement(ar,{alert:t.activeAlert,meta:t.meta,options:t.renderOptions}),a.createElement(O.H4,{className:yi},r.dismissReason),a.createElement(i.Group,{itemWrapperClassName:wi,selectedItemIndex:s,items:c.map((function(e){return a.createElement("div",{className:bi},e.text)})),onChange:function(){return u.set(!1)}})),mainActions:a.createElement(a.Fragment,null),footer:a.createElement(a.Fragment,null,a.createElement(o.F.div,{"aria-hidden":u,className:u.view((0,d.RN)(Ci,xi))},r.error),a.createElement("div",null,a.createElement(_.zx.Primary,{name:"submitCardFeedbackForm",onClick:function(){var e=s.get();return void 0===e?u.set(!0):B.hz((function(){return n.next({type:w.l.Type.alertIgnoreFormSubmit,alertId:t.activeAlert.id,reason:c[e].key})}))()}},r.submit),a.createElement(_.zx.Ghost,{className:_i,name:"skipCardFeedbackForm",onClick:B.hz((function(){return n.next({type:w.l.Type.alertIgnoreFormSubmit,alertId:t.activeAlert.id,reason:"skipped"})}))},r.skip))),subActions:a.createElement(a.Fragment,null)})})))},la=n(16320),da=function(e){var t=e.theme,n=void 0===t?{}:t,r=e.action,i=e.hasEmoji;return a.createElement("div",(0,S.__assign)({},(0,C.Sh)(n.wrapper,za.ctaText)),i?a.createElement(et.d,{emojiClassName:(0,C.Sh)(za.cardLogo,n.logo).className},r):r)},pa=function(e){var t=e.vox,n=e.theme,r=void 0===n?{}:n;return a.createElement(a.Fragment,null,(0,l.pipe)(t.logoUrl,y.map((function(e){return a.createElement($t,(0,S.__assign)({},(0,C.Sh)(za.cardLogo,r.logo),{logoUrl:e}))})),y.toNullable),a.createElement(qt,(0,S.__assign)({vox:t},(0,C.Sh)(za.cta,r.label),{isMinimalCard:!1})))},fa=function(e){return[At.R.outcomeTypeMatch(e.lensType)({correctness:U.m.dotCorrectness,clarity:U.m.dotClarity,premium:U.m.dotAdvanced,engagement:U.m.dotEngagement,delivery:U.m.dotDelivery,vox:U.m.dotVox}),za.cta]},ma=function(){var e=a.useContext(b.m.Context);return a.createElement(he.Regular,{className:za.newLabel},e.new)},ha=function(e){var t=e.card,n=e.actions,r=e.useBundleContainer,i=void 0!==r&&r,o=e.twoLined,s=void 0!==o&&o,c=a.useContext(b.m.Context);return a.useEffect((function(){t.activeAlert.hideReplacements&&n.next({type:w.l.Type.smartPhrasesDone,alertId:t.activeAlert.id})})),a.useEffect((function(){return(0,l.pipe)(t.visualState.from,y.fold((function(){return n.next({type:w.l.Type.smartPhrasesShowMiniCard,alertId:t.activeAlert.id})}),(function(e){"focused"===e&&n.next({type:w.l.Type.smartPhrasesShowMiniCard,alertId:t.activeAlert.id})})))}),[]),a.createElement(g.b.Mini,(0,S.__assign)({},(0,C.Sh)(s?Aa.wrapper:Ma.wrapper,za.smartPhrasesWrapper,i?Ma.bundleContainer:null),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert},hideActivateButton:!0}),a.createElement("div",{className:za.smartPhrasesContainer},a.createElement(xr,{className:za.smartPhrasesTitle,title:t.activeAlert.title,emoji:t.activeAlert.emoji,hideBetaBadge:!0}),a.createElement("div",{className:za.smartPhrasesIntentDetectedFeedback},a.createElement(_.zx.Ghost,{title:c.card.smartPhrases.intentDetectedFeedbackYes,name:"smart-phrases-"+t.activeAlert.intent+"-intent-detected-feedback-yes",active:t.activeAlert.intentDetectedFeedback===fe.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE,disabled:Boolean(t.activeAlert.intentDetectedFeedback),onClick:function(e){var r,i;n.next({type:w.l.Type.smartPhrasesFeedback,alertId:t.activeAlert.id,cardId:t.id,feedbackType:fe.cm.SMART_PHRASES_INTENT_DETECTED_ACCURATE}),n.next({type:w.l.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:t.activeAlert},clickPoint:{x:null!==(r=null==e?void 0:e.clientX)&&void 0!==r?r:0,y:null!==(i=null==e?void 0:e.clientY)&&void 0!==i?i:0}})}},a.createElement(Ee.JO.VotedYes,null)),a.createElement(_.zx.Ghost,{title:c.card.smartPhrases.intentDetectedFeedbackNo,name:"smart-phrases-"+t.activeAlert.intent+"-intent-detected-feedback-no",active:t.activeAlert.intentDetectedFeedback===fe.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE,disabled:Boolean(t.activeAlert.intentDetectedFeedback),onClick:B.hz((function(){n.next({type:w.l.Type.smartPhrasesFeedback,alertId:t.activeAlert.id,cardId:t.id,feedbackType:fe.cm.SMART_PHRASES_INTENT_DETECTED_INACCURATE}),n.next({type:w.l.Type.alertIgnore,alertId:t.activeAlert.id,id:t.id,eligibleForDismissSurvey:u.X.isEligibleForDismissSurvey(t)})}))},a.createElement(Ee.JO.VotedNo,null)))))};!function(e){e.Bundle=function(e){var t=e.card,n=e.actions;if(u.X.isSmartPhrases(t))return a.createElement(ha,{card:t,actions:n,useBundleContainer:!0});var r=fa(t.activeAlert)[0];return a.createElement(g.b.Mini,(0,S.__assign)({},(0,C.Sh)(Ma.wrapper,Ma.bundleContainer,Ma.dot,r),{actions:n,cardId:t.id,getActiveAlert:function(){return t.alerts[0]},counter:a.createElement(O.CL,{className:Ma.alertsCounter},t.alerts.length)}),a.createElement(o.F.div,{className:Ma.miniContainer},a.createElement("div",{className:Ma.highlightedText},u.X.bundleTitle(t))))},e.Standard=function(e){var t=e.card,n=e.actions;if(u.X.isSmartPhrases(t))return a.createElement(ha,{card:t,actions:n});var r=fa(t.activeAlert),i=r[0],s=r[1],c=a.useContext(b.m.Context);return a.createElement(g.b.Mini,(0,S.__assign)({},(0,C.Sh)(Ma.wrapper,Ma.dot,i),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert}}),a.createElement(o.F.div,{className:Ma.miniContainer},a.createElement("div",{className:Ma.highlightedText},t.activeAlert.highlightTexts[0]),a.createElement("div",{className:Ma.middleDot},""),(0,l.pipe)(t.activeAlert.extraProperties.vox,y.map((function(e){return a.createElement(pa,{vox:e,theme:{logo:Ma.cardLogo}})})),y.getOrElse((function(){return a.createElement(a.Fragment,null,a.createElement(da,{hasEmoji:me.$.hasTone(t.activeAlert),action:u.X.miniTitle(t,c),theme:{wrapper:s,logo:Ma.cardLogo}}),me.$.isDemoPremium(t.activeAlert)&&a.createElement(Ee.JO.Paid,{width:14,className:za.premiumIcon}),me.$.isTakeaway(t.activeAlert)&&a.createElement(Ee.JO.Megaphone,{width:16,className:Aa.takeawayIconStandard}))}))),(0,l.pipe)(t.renderOptions.isNew,h.U((function(e){return y.isSome(e)?a.createElement(ma,{key:"new-label"}):null})))))},e.TwoLined=function(e){var t=e.card,n=e.actions;if(u.X.isSmartPhrases(t))return a.createElement(ha,{card:t,actions:n,twoLined:!0});var r=fa(t.activeAlert),i=r[0],o=r[1],s=a.useContext(b.m.Context);return a.createElement(g.b.Mini,(0,S.__assign)({},(0,C.Sh)(Aa.wrapper,Aa.dot,i),{actions:n,cardId:t.id,getActiveAlert:function(){return t.activeAlert}}),a.createElement("div",{className:Aa.miniContainer},(0,l.pipe)(t.activeAlert.extraProperties.vox,y.map((function(e){return a.createElement(pa,{vox:e,theme:{logo:Aa.cardLogo,label:Aa.subTitle}})})),y.getOrElse((function(){return a.createElement(a.Fragment,null,a.createElement(da,{hasEmoji:me.$.hasTone(t.activeAlert),action:u.X.miniTitle(t,s),theme:{wrapper:(0,C.Sh)(o,Aa.ctaText,Aa.subTitle).className,logo:Aa.cardLogo}}),me.$.isDemoPremium(t.activeAlert)&&a.createElement(Ee.JO.Paid,{width:14,className:Aa.premiumIcon}),me.$.isTakeaway(t.activeAlert)&&a.createElement(Ee.JO.Megaphone,{width:16,className:Aa.takeawayIconMini}))}))),a.createElement("div",{className:ba},t.activeAlert.highlightTexts[0])))}}(ji||(ji={}));var ga="0 1px 8px rgba(109, 117, 141, .18)",va={$nest:{"&:before":{top:I.u.rem(.85),left:0}}},ya="miniTwoLinedHighlightedText",ba=I.u.joinClasses([ya,I.u.style({overflow:"hidden",marginTop:I.u.rem(-.25),color:x.Il.CoreNeutral90,textOverflow:"ellipsis"})]),wa={height:I.u.rem(3.25),borderRadius:I.u.rem(de.Jr),boxShadow:ga,$nest:(Hi={"&:hover":{boxShadow:ga}},Hi["&:hover .miniTwoLinedHighlightedText"]={borderColor:"transparent"},Hi)},_a={top:I.u.rem(.7)},Sa={fontWeight:I.u.important(400),fontSize:I.u.rem(.75)},Ca={position:"absolute",top:I.u.rem(.7),left:I.u.rem(.5),minWidth:"initial",minHeight:"initial",width:I.u.rem(1.25),height:I.u.rem(.85),background:x.Il.CoreNeutral0,fill:x.Il.CoreYellow50},xa={position:"absolute",left:I.u.rem(.5),minWidth:"initial",minHeight:"initial",background:x.Il.CoreNeutral0},Ia=(0,S.__assign)((0,S.__assign)({},xa),{top:I.u.rem(.6)}),Aa=I.u.stylesheet({dot:[va],wrapper:[wa],miniContainer:[{flexDirection:"column"}],cardLogo:[_a],subTitle:[Sa],ctaText:[{overflow:"hidden",textOverflow:"ellipsis"}],premiumIcon:[Ca],takeawayIconMini:[Ia],takeawayIconStandard:[xa]}),Ea={height:I.u.rem(3),$nest:{"&:hover .highlightText":{borderColor:"transparent"}}},ka={$nest:{"&:before":{top:I.u.px(1),bottom:0,left:0}}},Ta={height:I.u.important(I.u.rem(2.5)),borderRadius:I.u.rem(de.Jr)},La={color:x.Il.CoreNeutral50,display:"flex",width:I.u.rem(2),height:I.u.percent(100),justifyContent:"center",alignItems:"center"},Pa={overflow:"hidden",color:x.Il.CoreNeutral90,textOverflow:"ellipsis"},Ra={display:"inline-block",padding:"0 "+I.u.rem(.5)},Na={top:0,bottom:0,left:I.u.rem(.5),margin:"auto"},Ma=I.u.stylesheet({wrapper:[Ea],dot:[ka],miniContainer:[{display:"flex",justifyContent:"flex-end",alignItems:"center"}],bundleContainer:[Ta],alertsCounter:[La],highlightedText:[Pa],middleDot:[Ra],cardLogo:[Na]}),Fa={color:x.Il.CoreNeutral50,fontWeight:300},Oa={position:"absolute",left:I.u.rem(.5),width:I.u.rem(1),height:I.u.rem(1),background:x.Il.CoreNeutral0},Ba={marginLeft:I.u.rem(.5)},Da={position:"absolute",top:0,bottom:0,left:I.u.rem(.5),margin:"auto",minWidth:"initial",minHeight:"initial",width:I.u.rem(1),height:I.u.rem(1),background:x.Il.CoreNeutral0,fill:x.Il.CoreYellow50},Ua={$nest:(zi={},zi["& ."+la.B.contentWrapper]={margin:0},zi)},Wa={color:x.Il.CoreNeutral90,fontSize:I.u.rem(.875),lineHeight:I.u.rem(1.125),paddingLeft:I.u.rem(.75)},Ha={display:"flex",alignItems:"center",position:"absolute",right:I.u.rem(.5),$nest:{'& div[role="button"]:first-child':{marginRight:I.u.rem(.125)}}},za=I.u.stylesheet({ctaText:[{$nest:{"&:first-letter":{textTransform:"uppercase"}}}],cta:[Fa],cardLogo:[Oa],newLabel:[Ba],premiumIcon:[Da],smartPhrasesWrapper:[Ua],smartPhrasesContainer:[{display:"flex",alignItems:"center",justifyContent:"space-between"}],smartPhrasesTitle:[Wa],smartPhrasesIntentDetectedFeedback:[Ha]});function ja(e){var t=e.href,n=e.children,r=e.className;return a.createElement("a",{target:"_blank",rel:"noopener noreferrer",className:r,href:t},n)}var Ga,qa={MLA:"https://owl.purdue.edu/owl/research_and_citation/mla_style/mla_formatting_and_style_guide/mla_works_cited_electronic_sources.html",APA:"https://owl.purdue.edu/owl/research_and_citation/apa_style/apa_formatting_and_style_guide/reference_list_electronic_sources.html",Chicago:"https://owl.purdue.edu/owl/research_and_citation/chicago_manual_17th_edition/cmos_formatting_and_style_guide/web_sources.html"},$a={display:"block",color:x.Il.CoreNeutral90,fontWeight:"bold"},Va={overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},Xa={display:"block",color:x.Il.CoreBlue50,fontWeight:"normal"},Ya={color:A.VR},Za={color:A.VR},Ja={color:x.Il.CoreCyan50,fontWeight:"bold",fontSize:I.u.rem(.9375)},Ka={marginTop:I.u.rem(.3),color:x.Il.CoreNeutral90},Qa={position:"relative",marginLeft:I.u.rem(-.5)},eo={position:"absolute",top:0,left:0,display:"flex",margin:I.u.rem(.5625)+" 0 0 "+I.u.rem(.4375),color:A.VR,pointerEvents:"none"},to={display:"block",padding:I.u.rem(1.4375)+" 0 0 "+I.u.rem(.4375),borderRadius:I.u.rem(de.fx),backgroundColor:A.zh,transitionDuration:I.u.seconds(0),$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:A.jj}}},no={display:"flex",color:x.Il.CoreBlue50,pointerEvents:"all",alignItems:"center"},ro={minWidth:I.u.rem(1),minHeight:I.u.rem(1),stroke:x.Il.CoreBlue50},io={width:I.u.percent(100),pointerEvents:"all"},ao={color:x.Il.CoreBlue50,textDecoration:"none"},oo={position:"absolute",right:0,bottom:0,marginLeft:I.u.rem(.5)},so={$nest:{"& i":{color:A.UE}}},uo=I.u.stylesheet({plagiarismTitle:[$a],plagiarismTitleContent:[Va],titleUrl:[Va,Xa],titleBy:[Ya],plagiarismP2:[Za],percent:[Ja],textToCopy:[Va,Ka],referenceWrapper:[Qa],referenceData:[eo],copyableReference:[to],citationStyleSelect:[no],citationStyleIcon:[ro],citationStyleDdlButton:[io],descriptionLink:[ao],expandBtn:[oo],more:[so]}),co=function(e){return B.yG(e,{allowedTags:["b","i","br"]})},lo=function(e){var t=e.card,n=a.useContext(b.m.Context);return a.createElement(O.XY,{className:uo.plagiarismP2},n.plagiarism.percentileDescription(a.createElement("span",{className:uo.percent},t.meta.percentile,"%")))},po=function(e){var t=e.title,n=e.url;return a.createElement(O.Xk,{className:uo.plagiarismTitle},a.createElement("div",(0,S.__assign)({className:uo.plagiarismTitleContent},co(t))),(0,l.pipe)(n,y.map((function(e){return a.createElement(_.zx,{name:"url-button",href:e,target:"_blank",rel:"noopener noreferrer",styleType:O.ZT.Type.Base,className:uo.titleUrl},e)})),y.toNullable))},fo=function(e){var t=e.title,n=e.authors;return a.createElement(O.Xk,{className:uo.plagiarismTitle},a.createElement("div",(0,S.__assign)({className:uo.plagiarismTitleContent},co(t))),(0,l.pipe)(n,y.map((function(e){return a.createElement(O.XY,{className:uo.plagiarismTitleContent},"",a.createElement("span",{className:uo.titleBy},"by"),"",a.createElement("span",(0,S.__assign)({},co(e))))})),y.toNullable))},mo=function(e){var t=e.alert;return"publication"===t.plagiarismType.source?a.createElement(fo,{title:t.title,authors:t.plagiarismType.authors}):a.createElement(po,{title:t.title,url:t.plagiarismType.url})},ho=function(){var e,t=a.useContext(b.m.Context);return a.createElement(O.XY,null,t.plagiarism.cardDescription((e=uo.descriptionLink,function(t){var n=t.type;return a.createElement(ja,{href:qa[n],className:e},n)})))},go=function(e){var t=e.card,n=e.dismissActions,r=a.useContext(b.m.Context),i=t.alerts.map((function(e){return e.id}));return a.createElement(_.zx.Ghost,{name:"ignore",title:r.dismiss,onClick:B.hz((function(){return n.next({type:w.l.Type.dismissBatch,alerts:i})}))},a.createElement(Ee.JO.Ignore,null))},vo=function(e){var t=e.visualState;return a.createElement(an,{visualState:t,className:uo.more},a.createElement(ho,null))},yo=function(e){var t=e.onLeftClick,n=e.onRightClick,r=e.currentMatch,i=e.totalMatch,o=e.replaceOneMatch,s=void 0===o||o,u=e.disableOnEnd,c=void 0===u||u,l=e.style,d=a.useContext(b.m.Context).card.matchesNavigation;return 0===i?null:1===i&&s?a.createElement("div",(0,S.__assign)({},(0,C.Sh)(_o.matchesRow,l.matchesRow||!1)),a.createElement(O.ck,(0,S.__assign)({},(0,C.Sh)(_o.matchesCount,l.matchesCount||!1)),d.numberOfMatches(i))):a.createElement("div",(0,S.__assign)({},(0,C.Sh)(_o.matchesRow,l.matchesRow||!1)),a.createElement(_.zx.Ghost,{disabled:c&&0===r,name:"left",title:d.prev,onClick:t},a.createElement(Ee.JO.Arrow,(0,S.__assign)({},(0,C.Sh)(_o.leftButtonIcon,l.leftButtonIcon||!1)))),a.createElement(O.ck,(0,S.__assign)({},(0,C.Sh)(_o.matchesCount,l.matchesCount||!1)),d.currentMatchPosition(r+1,i)),a.createElement(_.zx.Ghost,{disabled:c&&r===i-1,name:"right",title:d.next,onClick:n},a.createElement(Ee.JO.Arrow,(0,S.__assign)({},(0,C.Sh)(_o.rightButtonIcon,l.rightButtonIcon||!1)))))},bo={display:"inline-block",verticalAlign:"middle",$nest:{"& > * + *":{marginLeft:I.u.rem(.25)}}},wo={textTransform:"uppercase",letterSpacing:I.u.px(.8),lineHeight:I.u.rem(2)},_o=I.u.stylesheet({matchesRow:[bo],leftButtonIcon:[{transform:"rotate(90deg)"}],rightButtonIcon:[{transform:"rotate(270deg)"}],matchesCount:[wo]}),So=function(e){var t=e.card,n=e.actions;return a.createElement(yo,{onLeftClick:function(){return n.next({type:w.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:"left"})},onRightClick:function(){return n.next({type:w.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"anotherAlert",card:t},direction:"right"})},currentMatch:t.activeAlertIndex,totalMatch:t.alerts.length,style:{}})},Co=n(55415),xo=n(88056),Io=n(50628),Ao=function(){function e(){}return e.copy=function(e,t){this._clearSelection();var n=this._createHiddenSpan(e);return this.select(n),this._copy(e,t).then((function(){n.parentElement.removeChild(n)})).catch((function(e){throw n.parentElement.removeChild(n),e}))},e.select=function(e){if(window.getSelection&&document.createRange){var t=window.getSelection();(n=document.createRange()).selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}else if("createTextRange"in document.body&&"selection"in document){var n;(n=document.body.createTextRange()).moveToElementText(this),n.select()}},e._clearSelection=function(){var e=window.getSelection?window.getSelection():document.selection;"removeAllRanges"in e?e.removeAllRanges():"empty"in e&&e.empty()},e._createHiddenSpan=function(e){var t=document.createElement("span");return t.setAttribute("style",["all: unset","position: fixed","top -999px","left -999px","opacity: 0","background transparent","white-space: pre","-webkit-user-select: text","-moz-user-select: text","-ms-user-select: text","user-select: text"].join(";")),t.textContent=e,document.body.appendChild(t),t},e._copy=function(e,t){return new Promise((function(n,r){try{(t?window.clipboardData.setData("text",e):document.execCommand("copy"))?n():r(new Error("Copy API doesn't work"))}catch(e){r(e)}}))},e.copyApiAvailable=new Ri.X(!0),e}();try{_t.R(window,"click").pipe(Io.P()).subscribe((function(){document.queryCommandSupported("copy")||Ao.copyApiAvailable.next(!1)}))}catch(e){Ao.copyApiAvailable.next(!1)}!function(e){e.Context=a.createContext(xo.Y.invariantContent("CopyToClipboard")),e.ContextMock=function(t){var n=t.children;return a.createElement(e.Context.Provider,{value:function(e){return Ao.copy(e,!1)},children:n})}}(Ga||(Ga={}));var Eo,ko=function(e){var t=e.textToCopy,n=e.children;return a.createElement(Ga.Context.Consumer,null,(function(e){return a.createElement(_.zx.Flat,{key:"copy_title",name:"copy_title",title:"Click to copy",className:uo.copyableReference,onClick:function(){return e(t,"referenceCopied")}},n,a.createElement("div",(0,S.__assign)({className:uo.textToCopy},(r=t,B.yG(r,{allowedTags:["b","i","br"]})))));var r}))},To={mla:"MLA",apa:"APA",chicago:"Chicago"},Lo=Co.XP(To),Po=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,S.__extends)(t,e),t._renderPublication=function(e){var t=v.h.create("mla");return a.createElement(o.F.div,{key:"publication",className:uo.referenceWrapper},t.view((function(n){return a.createElement(a.Fragment,null,a.createElement(ko,{key:"rf1"+n,textToCopy:e.citationStyle[n]}),a.createElement(O.x4,{className:uo.referenceData},a.createElement(b.m.Context.Consumer,null,(function(e){return e.plagiarism.publicationReferenceDescription(a.createElement(Qe.L,{vAlign:"top",name:"plagiarism",label:a.createElement(_.zx,{name:"citation-style-select",active:!1,className:uo.citationStyleSelect},To[n])},Lo.map((function(e){return a.createElement(_.zx.Flat,{className:uo.citationStyleDdlButton,key:e,name:"citation-button-"+e,active:t.view((function(t){return t===e})),onClick:function(){return t.set(e)}},To[e])}))))}))))})))},t._renderWeb=function(e,t){return a.createElement("div",{key:"web",className:uo.referenceWrapper},a.createElement(ko,{textToCopy:e+(0,l.pipe)(t.url,y.fold((function(){return""}),(function(e){return". "+e})))},a.createElement(b.m.Context.Consumer,null,(function(e){var t=e.plagiarism;return a.createElement(O.x4,{className:uo.referenceData},t.webReferenceDescription)}))))},t.prototype.render=function(){var e=this.props.alert;return"publication"===e.plagiarismType.source?t._renderPublication(e.plagiarismType):t._renderWeb(e.title,e.plagiarismType)},t}(a.Component),Ro=function(e){var t=e.card,n=e.actions;return a.createElement(W,{visualState:t.visualState,onFocus:function(){return n.next({type:w.l.Type.alertCardShow,cardType:w.l.CardType.defaultCard})},theme:Vi(t.renderOptions.layoutDensity),body:a.createElement(a.Fragment,null,a.createElement(lo,{card:t}),a.createElement(mo,{alert:t.activeAlert}),a.createElement(Po,{alert:t.activeAlert,feedbackActions:n})),mainActions:a.createElement(go,{card:t,dismissActions:n}),footer:a.createElement(vo,{visualState:t.visualState}),navigation:a.createElement(So,{actions:n,card:t}),subActions:a.createElement(rn,{actions:n,card:t,mode:"mini"})})};!function(e){e.Standard=function(e){var t=e.card,n=e.actions,r=t.alerts[0];return a.createElement(g.b.Mini,(0,S.__assign)({cardId:t.id,getActiveAlert:function(){return r}},(0,C.Sh)(Go.wrapper,Go.dot,Go.dotOutcomesPlagiarism),{actions:n}),a.createElement("div",{className:Go.miniContainer},a.createElement("span",(0,S.__assign)({key:"title"},(0,C.Sh)(Go.text,"publication"===r.plagiarismType.source&&Go.fullText)),r.title),"web"===r.plagiarismType.source?(0,l.pipe)(r.plagiarismType.url,y.map(le.Wq),y.filter(d.Dw),y.map((function(e){return a.createElement("span",{key:"url",className:Go.domain}," ",e)})),y.toNullable):(0,l.pipe)(r.plagiarismType.authors,y.map((function(e){return a.createElement("span",{key:"publication",className:Go.publication}," ",e)})),y.toNullable)))},e.TwoLined=function(e){var t=e.card,n=e.actions,r=t.alerts[0],i="web"===r.plagiarismType.source?(0,l.pipe)(r.plagiarismType.url,y.map(le.Wq),y.filter(d.Dw)):r.plagiarismType.authors;return a.createElement(g.b.Mini,(0,S.__assign)({cardId:t.id,getActiveAlert:function(){return r}},(0,C.Sh)(Bo.wrapper,Go.dotOutcomesPlagiarism,(0,l.pipe)(i,y.fold((function(){return Bo.dotInTheMiddle}),(function(){return Bo.dot})))),{actions:n}),a.createElement("div",{className:Bo.miniContainer},(0,l.pipe)(i,y.map((function(e){return a.createElement("span",{className:Bo.subTitle},e)})),y.toNullable),a.createElement("span",(0,S.__assign)({key:"title"},(0,C.Sh)(Bo.text)),r.title)))}}(Eo||(Eo={}));var No={overflow:"hidden",color:x.Il.CoreNeutral90,textOverflow:"ellipsis"},Mo={height:I.u.rem(3.5)},Fo={overflow:"hidden",marginBottom:I.u.rem(-.25),textOverflow:"ellipsis",fontSize:I.u.rem(.75)},Oo={$nest:{"&:before":{top:I.u.rem(.85),bottom:0}}},Bo=I.u.stylesheet({text:[No],wrapper:[Mo],miniContainer:[{display:"flex",flexDirection:"column"}],dotInTheMiddle:[{top:0,bottom:0,left:0}],subTitle:[Fo],dot:[Oo]}),Do={overflow:"hidden",color:x.Il.CoreNeutral90,textOverflow:"ellipsis"},Uo={maxWidth:I.u.percent(100),flexShrink:0},Wo={height:I.u.rem(3)},Ho={overflow:"hidden",maxWidth:I.u.percent(100),textOverflow:"ellipsis",flexShrink:0},zo={$nest:{"&:before":{top:I.u.px(1),bottom:0}}},jo={$nest:{"&:before":{backgroundColor:x.Il.CoreCyan50}}},Go=I.u.stylesheet({text:[Do],fullText:[Uo],wrapper:[Wo],miniContainer:[{display:"flex"}],domain:[Ho],publication:[{overflow:"hidden",textOverflow:"ellipsis"}],dot:[zo],dotOutcomesPlagiarism:[jo]});function qo(e,t,n){var r=t.activeAlert,i=t.activeHighlightIndex,a=r.getHighlightRanges(),o=(i+("left"===e?a.length-1:1))%a.length;n.next({type:w.l.Type.cardMatchesNavigationButtonClick,transitionTo:{kind:"sameAlert",card:t,highlightIndex:o},direction:e})}var $o,Vo=function(e){var t=e.card,n=e.actions,r=e.selectedLabelIndex,i=e.isChecking,o=a.useContext(b.m.Context),s=v.h.create(!1);return bt.P.useSubscriptionTo(i.pipe(St.b((function(e){return s.set(e)})))),a.createElement(Jn,{applyMessage:t.activeAlert.todoAction,checkingMessage:o.card.checking,title:o.card.todoAction(t.activeAlert.todoAction),checkingInProgress:s,onClick:function(){n.next({type:w.l.Type.alertApply,alertId:t.activeAlert.id,alternativeIndex:r.get(),cardType:w.l.getCardType(t)})}})},Xo=function(e){var t=e.card,n=e.actions;return a.createElement(yo,{onLeftClick:function(){return qo("left",t,n)},onRightClick:function(){return qo("right",t,n)},currentMatch:t.activeHighlightIndex,totalMatch:t.activeAlert.getHighlightRanges().length,disableOnEnd:!1,style:{}})},Yo=function(e){var t=e.activeAlert,n=e.selectedLabelIndex,r=e.actions,o=a.useContext(b.m.Context);return a.createElement("div",{className:Sn.optionsContainer},t.labels.map((function(e,t){return a.createElement(a.Fragment,{key:"option-"+t},a.createElement(i.Item,{className:Sn.optionLabel,onChange:function(){n.set(t),r.next({type:w.l.Type.alternativeReplacementRadioButtonClick,index:t})},checked:n.view((function(e){return e===t}))},a.createElement(O.XY,{className:Sn.optionRadio},e.label)),a.createElement(O.x4,{className:Sn.optionExample},e.replacementTexts.join("; ")),a.createElement(O.x4,{className:Sn.optionSecondaryAttribute},o.card.matchesNavigation.numberOfMatches(e.matches)))})))},Zo=function(e){var t=e.card,n=e.actions,r=e.isChecking,i=e.isCheckingGlobal,o=v.h.create(0);return a.createElement(W,{visualState:t.visualState,onFocus:function(){return n.next({type:w.l.Type.alertCardShow,cardType:w.l.getCardType(t)})},theme:(0,S.__assign)({wrapper:Sn.superWrapper,content:i.pipe(h.U((0,d.RN)(Sn.loadingWrapperInvisible,Sn.loadingWrapper)))},Vi(t.renderOptions.layoutDensity)),extra:a.createElement(ur,{isChecking:i}),body:a.createElement(a.Fragment,null,a.createElement(ar,{alert:t.activeAlert,options:t.renderOptions,meta:t.meta}),a.createElement(ir,{alert:t.activeAlert}),a.createElement(Wn,{card:t,isChecking:r}),a.createElement(Un,{description:t.meta.explanation,actions:n,layoutDensity:t.renderOptions.layoutDensity}),a.createElement(Yo,{activeAlert:t.activeAlert,selectedLabelIndex:o,actions:n})),mainActions:a.createElement(qn,{card:t,feedbackActions:n}),footer:a.createElement(a.Fragment,null,a.createElement(Kn,{card:t}),a.createElement(Vo,{selectedLabelIndex:o,card:t,actions:n,isChecking:r})),navigation:a.createElement(Xo,{card:t,actions:n}),subActions:a.createElement(rn,{actions:n,card:t,mode:"mini"})})};!function(e){e.Full=function(e){var t=e.card,n=e.actions,r=u.X.useCardStates(t),i=r.isChecking,s=r.isCheckingGlobal,l=r.transform,d=function(e){return a.createElement($i,{card:e,actions:n,isChecking:i,transform:l,isCheckingGlobal:s})};return a.createElement(o.F.Fragment,null,t.pipe(m.x((function(e,t){return e.hashCode()===t.hashCode()})),h.U((0,c.flow)(u.X.match({plagiarism:function(e){return a.createElement(Ro,{card:e,actions:n})},super:function(e){return a.createElement(Zo,{card:e,actions:n,isChecking:i,isCheckingGlobal:s})},smartPhrases:d,default:d}),u.X.foldCard))))},e.Mini=function(t){var n=t.card,r=t.actions;return a.createElement(o.F.Fragment,null,n.pipe(h.U((function(t){return u.X.isBundle(t)?a.createElement(e.MiniSingleLined,{card:t,actions:r}):f.j.Density.matchL((function(){return a.createElement(e.MiniSingleLined,{card:t,actions:r})}),(function(){return a.createElement(e.MiniTwoLined,{card:t,actions:r})}),(function(){return a.createElement(e.MiniTwoLined,{card:t,actions:r})}))(t.renderOptions.layoutDensity)}))))},e.MiniSingleLined=function(e){var t=e.card,n=e.actions;function r(e){return u.X.isBundle(e)?a.createElement(ji.Bundle,{card:e,actions:n}):a.createElement(ji.Standard,{card:e,actions:n})}return(0,l.pipe)(t,u.X.match({plagiarism:function(e){return a.createElement(Eo.Standard,{card:e,actions:n})},smartPhrases:r,super:r,default:r}),u.X.foldCard)},e.MiniTwoLined=function(e){var t=e.card,n=e.actions;function r(e){return a.createElement(ji.TwoLined,{card:e,actions:n})}return(0,l.pipe)(t,u.X.match({plagiarism:function(e){return a.createElement(Eo.TwoLined,{card:e,actions:n})},smartPhrases:r,super:r,default:r}),u.X.foldCard)},e.Success=g.b.Success,e.FeedbackForm=function(e){var n=e.cardData,r=e.actions;function i(e){return a.createElement(ca,{card:e,actions:r})}return(0,l.pipe)(n,u.X.match({plagiarism:function(e){return t("CardComponent").getLogger("FeedbackForm").error("Tried to draw a feedback form for a plagiarism alert",e),null},smartPhrases:i,default:i,super:i}),u.X.foldCard)};var t=(0,d.HP)(p.C8.Logging.getLogger)}($o||($o={}));var Jo,Ko,Qo,es=n(70276);!function(e){e.Full=function(e){var n=e.card,s=e.actions,d=u.X.useCardStates(n),p=d.isChecking,f=d.isCheckingGlobal,g=d.transform,v=function(e){return i("CardBundle").error("rendering fallback for card",e),null},y=n.pipe((function(e){return e.lift(new es.G((function(e){return e.activeAlert.id})))}),Ue.w((function(e){return e.pipe(m.x((function(e,t){return e.activeAlertIndex===t.activeAlertIndex})),h.U((function(t){return{activeAlertIndex:t.activeAlertIndex,activeAlertId:t.activeAlert.id,card:(0,l.pipe)(e,m.x((function(e,t){return e.hashCode()===t.hashCode()&&e.visualState.transitionId===t.visualState.transitionId})),Fe.shareReplay({bufferSize:1,refCount:!0}))}})))}))),b=function(e,t){var n=t.alerts.length,r=1===n?xs.bundleInnerContainer:2===n?xs.bundleInnerContainer2Cards:xs.bundleInnerContainerNCards;return a.createElement(o.F.div,{className:r},a.createElement($i,{card:t,actions:s,isChecking:p,transform:e,isCheckingGlobal:f}))};return a.createElement(r,{card:n,actions:s},a.createElement(t,{state:y,stateToClassMapper:function(e,t){return e?e.activeAlertId===t.activeAlertId||e.activeAlertIndex===t.activeAlertIndex?{prev:(0,Ae.EJ)(xs.inBundleToUpdatedCardOld),next:(0,Ae.EJ)(xs.inBundleToUpdatedCardNew)}:e.activeAlertIndex<t.activeAlertIndex?{prev:(0,Ae.EJ)(xs.inBundleToNextCardOld),next:(0,Ae.EJ)(xs.inBundleToNextCardNew)}:{prev:(0,Ae.EJ)(xs.inBundleToPrevCardOld),next:(0,Ae.EJ)(xs.inBundleToPrevCardNew)}:{prev:(0,Ae.EJ)(""),next:(0,Ae.EJ)("")}}},(function(e){return a.createElement(o.F.div,{className:e.view,onAnimationEnd:"prev"===e.type?e.done:c.constVoid},(0,l.pipe)(e.state.card,h.U((0,c.flow)(u.X.match({plagiarism:v,super:v,smartPhrases:function(t){return b("prev"===e.type?Oe.of(t.transform):g,t)},default:function(t){return b("prev"===e.type?Oe.of(t.transform):g,t)}}),u.X.foldCard))))})))};var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return(0,S.__extends)(t,e),t}(Ae.l5),n=function(e){var t=e.alertCount;return 1===t?a.createElement(a.Fragment,null):2===t?a.createElement("div",{className:xs.bundleFakeCard1}):a.createElement(a.Fragment,null,a.createElement("div",{className:xs.bundleFakeCard1}),a.createElement("div",{className:xs.bundleFakeCard2}))},r=function(e){var t=e.children,r=e.card,i=e.actions;return a.createElement(o.F.div,{className:xs.bundleCardWrapper},a.createElement(fr,{card:r,actions:i}),a.createElement(o.F.div,{className:xs.cardBundleContainer},t,(0,l.pipe)(function(e){return(0,l.pipe)(e,h.U((function(e){return u.X.isBundle(e)?y.some(e.alerts.length):y.none})))}(r),h.U(y.map((function(e){return a.createElement(n,{key:e,alertCount:e})}))),h.U(y.toNullable))))},i=(0,d.HP)(p.C8.Logging.getLogger)}(Qo||(Qo={}));var ts,ns=.25,rs="0 1px 8px rgba(109, 117, 141, .18)",is=I.u.keyframes({"0%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),as=I.u.keyframes({from:{transform:"translateX(0)",opacity:1},to:{transform:"translateX(-100px)",opacity:0}}),os=I.u.keyframes({from:{transform:"translateX(-100px)",opacity:0},to:{transform:"translateX(0)",opacity:1}}),ss=I.u.keyframes({from:{opacity:0,transform:"scale(.95) translateY(-15px)"},to:{opacity:1,transform:"scale(1) translateY(0)"}}),us=I.u.keyframes({from:{opacity:1,transform:"scale(1) translateY(0)"},to:{opacity:0,transform:"scale(.95) translateY(-15px)"}}),cs={position:"relative",borderRadius:I.u.rem(de.Jr),background:x.Il.CoreNeutral0,boxShadow:rs,zIndex:2},ls={marginTop:I.u.rem(.75)},ds={marginTop:I.u.rem(1.25)},ps={position:"absolute",top:I.u.px(-5),right:I.u.rem(.5),left:I.u.rem(.5),zIndex:-1,display:"block",height:I.u.percent(100),borderRadius:I.u.rem(de.Jr),backgroundColor:x.Il.CoreNeutral1,boxShadow:rs,content:"' '"},fs={position:"absolute",top:I.u.px(-10),right:I.u.rem(1),left:I.u.rem(1),zIndex:-2,display:"block",height:I.u.rem(2),borderRadius:I.u.rem(de.Jr),backgroundColor:x.Il.CoreNeutral10,boxShadow:rs,content:"' '"},ms={borderRadius:I.u.rem(.75),background:x.Il.CoreNeutral20,margin:I.u.rem(-.25)+" "+I.u.rem(-.25),padding:I.u.rem(.25)+" "+I.u.rem(.25),$nest:(Jo={},Jo["& ."+U.g.cozyCardContainerSelector]={margin:0,boxShadow:"none"},Jo["& ."+U.g.fullCardSelector]={padding:I.u.rem(.75)+" "+I.u.rem(.5)+" "+I.u.rem(.5)+" "+I.u.rem(1)},Jo["& [role=dropdown-list]"]={transform:"translateY("+I.u.rem(-.5)+")"},Jo)},hs={position:"absolute",top:I.u.rem(.8),right:I.u.rem(1),margin:0},gs={borderRadius:I.u.rem(de.Jr),background:x.Il.CoreNeutral0,boxShadow:rs},vs={display:"block",position:"absolute",top:0,$nest:(Ko={},Ko["& ."+U.g.bundleInnerContainerSelector]={margin:0},Ko)},ys={animation:us+" "+I.u.seconds(ns)+" ease-out"},bs={animation:os+" "+I.u.seconds(ns)+" ease-out"},ws={animation:as+" "+I.u.seconds(ns)+" ease-in"},_s={animation:ss+" "+I.u.seconds(ns)+" ease-in"},Ss={display:"none",animation:is+" "+I.u.seconds(ns)+" ease-in"},Cs={animation:is+" "+I.u.seconds(ns)+" ease-in"},xs=(0,S.__assign)((0,S.__assign)({},I.u.stylesheet({bundleInnerContainer:[cs],bundleCardWrapper:[ms],minimalBetaLabel:[hs],compactCardContainer:[gs],cardBundleContainer:[{position:"relative",zIndex:2}],inBundleMovingCard:[vs],inBundleToPrevCardOld:[vs,ys],inBundleToPrevCardNew:[bs],inBundleToNextCardOld:[vs,ws],inBundleToNextCardNew:[_s],inBundleToUpdatedCardOld:[Ss],inBundleToUpdatedCardNew:[Cs]})),{bundleInnerContainer:I.u.joinClasses([U.g.bundleInnerContainerSelector,I.u.style(cs)]),bundleInnerContainer2Cards:I.u.joinClasses([U.g.bundleInnerContainerSelector,I.u.style(cs,ls)]),bundleInnerContainerNCards:I.u.joinClasses([U.g.bundleInnerContainerSelector,I.u.style(cs,ds)]),bundleFakeCard1:I.u.joinClasses([U.g.bundleFakeCard1Selector,I.u.style(ps)]),bundleFakeCard2:I.u.joinClasses([U.g.bundleFakeCard2Selector,I.u.style(fs)])});!function(e){e.Card=function(e){return s.UI.Node.make((function(t){var n=t.view,r=n("view");return a.createElement(o.F.Fragment,null,r.pipe(m.x((function(e,t){return e.id===t.id&&e.visualState.transitionId===t.visualState.transitionId&&e.visualState.transition.type===t.visualState.transition.type})),h.U((function(t){return a.createElement(g.b.Card,{miniCard:a.createElement($o.Mini,{card:r,actions:e}),fullCard:u.X.isBundle(t)&&!u.X.isSmartPhrases(t)?a.createElement(Qo.Full,{card:r,actions:e}):a.createElement($o.Full,{card:r,actions:e}),successCard:a.createElement($o.Success,{isLastCard:n("isLastCard"),actions:e}),feedbackForm:a.createElement($o.FeedbackForm,{cardData:t,actions:e}),actions:e,card:t})}))))}))}}(ts||(ts={}))},14196:(e,t,n)=>{"use strict";n.d(t,{e:()=>f});var r,i=n(27378),a=n(71215),o=n(8125),s=n(51465),u=n(22823),c=n(91473),l=n(10002),d=n(77176),p=n(38524);!function(e){!function(e){!function(e){e.toggleNonPriorityCards="toggleNonPriorityCards"}(e.Kind||(e.Kind={})),function(e){!function(e){e.collapsed="collapsed",e.expanded="expanded"}(e.NextState||(e.NextState={}))}(e.ToggleNonPriorityCards||(e.ToggleNonPriorityCards={}))}(e.Event||(e.Event={})),function(e){e.toggleNonPriorityCards=function(e,t,n){return{id:"toggleNonPriorityCards",when:l.R.isWithAlertsId,what:p.nL.Effect.Applicator.create(e.pipe(d.U((function(e){return function(r){return p.nL.hasItems(r)&&(0,p.yi)(r.currentLens)?(n(e.nextState),r.patch({currentLens:t.toggleNonPriorityList(e.nextState)(r.currentLens)})):r}}))))}}}(e.SideEffects||(e.SideEffects={}))}(r||(r={}));var f,m=n(90351),h=n(13097),g=n(79844),v=n(39499),y=n(45836),b=function(e){var t=e.onClick,n=e.collapsed,r=i.useContext(g.m.Context).priorityList;return i.createElement(v.zx.Tertiary,{name:"card-list-more",className:x.toggleNonPriority,title:i.createElement("div",{className:x.tooltip},r.toggleButtonTooltip(n)),onClick:t},n?r.expand:r.collapse)},w=function(){var e=i.useContext(g.m.Context).priorityList;return i.createElement("div",{className:x.toggleNonPriorityHint},i.createElement(y.x4,null,e.hint))},_={padding:u.u.rem(.5)+" "+u.u.rem(.25),width:u.u.rem(12.75),whiteSpace:"normal",lineHeight:u.u.rem(1)},S={padding:u.u.rem(.5),borderRadius:u.u.rem(h.fx),backgroundColor:m.Il.CoreNeutral10},C={$nest:{"&[data-textpos='everywhere']":{marginTop:u.u.rem(1),padding:"0 "+u.u.rem(2)},"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:m.Il.CoreNeutral10}}},x=u.u.stylesheet({tooltip:[_],toggleNonPriority:[C],toggleNonPriorityHint:[S]});!function(e){e.Toggle=s.UI.Node.make((function(e){var t=e.view,o=e.notify;return i.createElement(a.F.Fragment,null,t("view").pipe(d.U((function(e){var t=c.a.isCollapsed(e);return i.createElement(i.Fragment,null,!c.a.isHidden(e)&&i.createElement("div",{className:n.moreBtnContainer},i.createElement(b,{collapsed:t,onClick:o({kind:r.Event.Kind.toggleNonPriorityCards,nextState:t?r.Event.ToggleNonPriorityCards.NextState.expanded:r.Event.ToggleNonPriorityCards.NextState.collapsed})})))}))))})),e.Hint=s.UI.Node.make((function(e){var t=e.view;return i.createElement(a.F.Fragment,null,t("view").pipe(d.U(c.$.isVisible),d.U((0,o.RN)(i.createElement(w,null),null))))}));var t={display:"flex",height:u.u.rem(3),alignItems:"center",justifyContent:"center"},n=u.u.stylesheet({moreBtnContainer:[t]})}(f||(f={}))},23124:(e,t,n)=>{"use strict";n.d(t,{H:()=>r});var r,i=n(59312),a=n(27378),o=n(71215),s=n(85746),u=n(19962),c=n(51465),l=n(22823),d=n(13097),p=n(16782),f=n(41398),m=n(66310),h=n(24209),g=n(49708),v=n(85985),y=n(17343),b=n(76974),w=n(13444),_=n(50628),S=n(40151),C=n(2834),x=n(78259),I=n(28043),A=n(60430),E=n(77176),k=n(93508);!function(e){var t,n;!function(e){e.front="front",e.back="back"}(t=e.Layer||(e.Layer={})),function(e){e.completePositionAnimation="completePositionAnimation",e.changePosition="changePosition"}(n=e.ActionKind||(e.ActionKind={})),e.Cell=c.UI.Grid.make((function(e){var r=e.slots,c=e.state,l=e.notify,d=new p.t,T=c.pipe(f.M(d),m.w((function(e){var t=e[0],n=e[1];return t.position.animationInProgress?h.T(g.R(n,"transitionend").pipe(v.h((function(e){return e.target===n&&"transform"===e.propertyName})),y.h(void 0)),b.of(void 0).pipe(w.g(200))).pipe(_.P()):S.c()})),C.b(l({kind:n.completePositionAnimation}))),L=c.pipe(f.M(d),m.w((function(e){var t=e[0],n=e[1];return t.height.watched?x.YC(n).pipe(v.h((function(e){return t.height.value!==e.height||!t.height.isValid||e.height>0}))):S.c()})),I.x(),C.b((function(e){var t=e.height;return l({kind:n.changePosition,height:t})()})));A.P.useSubscriptionTo(h.T(T,L));var R=c.pipe(E.U((function(e){return e.position.top})),E.U((function(e){return u.ux.translateY(e)})),I.x()),N=c.pipe(E.U((function(e){return e.layer===t.front?1:0})),I.x()),M=c.pipe(E.U((function(e){return e.position})),I.x((function(e,t){return e.top===t.top})),E.U((function(e){return e.animationInProgress?P.animate:void 0})),k.O(void 0));return a.createElement(o.F.div,(0,i.__assign)({},(0,s.Sh)(P.item,M),{style:{transform:R,zIndex:N},mount:function(e){null!==e&&d.next(e)}}),r.item)}))}(r||(r={}));var T={position:"absolute",boxSizing:"border-box",width:l.u.percent(100),contain:"layout"},L={transition:"transform "+l.u.seconds(d.v4/1e3)+" linear"},P=l.u.stylesheet({item:[T],animate:[L]})},71831:(e,t,n)=>{"use strict";n.d(t,{g:()=>c});var r=n(489),i=n(73805),a=n(64909),o=n(45442),s=n(42490),u=n(77176),c=function(e,t){return o.Z.fromSideEffect((function(n){var o=n.kind===s.H.Dialogue.Action.Kind.doneClicked?function(e,t){return{kind:t.kind,unmutedCategories:(0,i.pipe)(e.state.get(),a.map((function(e){var t=e.categories;return Array.from(t.values())})),a.getOrElse((function(){return new Array})),r.filter((function(e){return!e.isMuted})),r.map((function(e){return e.id})))}}(e,n):n;s.H.Dialogue.Action.shouldCloseDialogue(o)&&t.onClose(),e.actionEvents.next(o)}),e.state.pipe(u.U(a.getOrElse((function(){return s.H.Dialogue.State.empty})))))}},17082:(e,t,n)=>{"use strict";n.d(t,{B:()=>X});var r,i,a=n(73805),o=n(51465),s=n(27378),u=n(9261);!function(e){e.close="close"}(r||(r={})),function(e){e.Static=o.UI.Grid.make((function(e){return s.createElement(u.Pj,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:e.notify({kind:r.close})},e.slots.content)}))}(i||(i={}));var c,l=n(42490),d=n(59312),p=n(71215),f=n(85746),m=n(43675),h=n(22232),g=n(90351),v=n(22823),y=n(79844),b=n(39499),w=n(41439),_=n(45836),S=n(60430),C=n(77176),x=o.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return S.P.useEffectOnDidMount(n({kind:l.H.Dialogue.Action.Kind.modalOpened})),s.createElement(u.u_,{className:$.wrapper,close:n({kind:l.H.Dialogue.Action.Kind.closeClicked})},s.createElement(u.u_.Header,{className:$.modalHeader},s.createElement(s.Fragment,null,t.header),s.createElement("div",{className:$.subHeader},t.subheader)),s.createElement(u.u_.Body,{name:"mutedModalBody",className:$.modalBody},s.createElement(s.Fragment,null,t.categories)),s.createElement(u.u_.Footer,{className:$.modalFooter},s.createElement(s.Fragment,null,t.footer)))})),I=o.UI.Node.make((function(e){var t=e.view,n=e.notify,r=e.state,i=s.useContext(y.m.Context).mutedAlerts.dialogue.suggestions;return s.createElement(p.F.div,{className:$.categoryRow},s.createElement(_.XY,{className:$.categoryName},t("description")),s.createElement(_.x4,{className:$.categoryCount},(0,a.pipe)(r,C.U((function(e){return e.isMuted?i(e.alertsCount):""})))),s.createElement(p.F.div,{className:$.categoryState},(0,a.pipe)(r,C.U((function(e){return s.createElement(R,{name:"mutedAlertsOnOff_"+e.id,isOn:!e.isMuted,onClick:n({kind:l.H.Dialogue.Action.Kind.categoryClicked,categoryId:e.id,isMuted:!e.isMuted})})})))))})),A=o.UI.List.make(m.A7(),I),E=o.UI.Node.make((function(e){var t=e.view,n=e.notify;return s.createElement(p.F.Fragment,null,(0,a.pipe)(t("count"),C.U((function(e){return s.createElement(P,{count:e,key:"mutedCountInfo"})}))),s.createElement(b.zx.Primary,{name:"mutedModalDone",onClick:n({kind:l.H.Dialogue.Action.Kind.doneClicked})},"Done"))})),k=o.UI.Node.make((function(){var e=s.useContext(y.m.Context).mutedAlerts.dialogue.header;return s.createElement(_.H1,null,e)})),T=o.UI.Node.make((function(){var e=s.useContext(y.m.Context).mutedAlerts.dialogue.subHeader;return s.createElement(_.XY,null,e)})),L=o.UI.Knot.make(x,{header:k,subheader:T,categories:A,footer:E}),P=function(e){var t=e.count,n=s.useContext(y.m.Context).mutedAlerts.dialogue.footerSuggestions;return 0===t?null:s.createElement("div",{className:$.countInfo},s.createElement(w.JO.GreenOk,{className:$.okIcon,width:16}),s.createElement(_.XY,null,n(t)))},R=function(e){var t=e.isOn,n=e.name,r=e.onClick,i=s.useContext(y.m.Context).mutedAlerts.dialogue;return s.createElement(b.zx.Ghost,(0,d.__assign)({},(0,f.Sh)($.categoryStateButton,t&&G),{name:n,onClick:r}),t?i.off:i.on)},N=(0,a.pipe)(o.UI.squash(L),o.UI.contramapState((function(e){return{categories:e.categories,footer:e}})),o.UI.mapAction((function(e){switch(e.key){case"categories":return e.action.action;case"footer":case"root":return e.action;default:(0,h.vE)(e)}}))),M={display:"flex",flexDirection:"column",minHeight:v.u.rem(23),maxHeight:v.u.rem(33),width:v.u.rem(36),backgroundColor:g.Il.CoreNeutral0,textAlign:"left"},F={padding:"0 "+v.u.rem(2)+" "+v.u.rem(1)+" "+v.u.rem(2)},O={marginBottom:0,paddingBottom:0,backgroundColor:g.Il.CoreNeutral0,flexShrink:0},B={marginTop:v.u.rem(.5625),paddingBottom:v.u.rem(.6875),borderBottom:"1px solid "+g.Il.CoreNeutral20},D={minHeight:v.u.rem(4)},U={display:"flex",color:g.Il.CoreNeutral90,alignItems:"center",flex:1,justifyContent:"flex-start"},W={marginLeft:v.u.rem(-.5)},H={display:"flex",padding:v.u.rem(.75)+" 0",alignItems:"center",$nest:{"&:not(:first-of-type)":{borderTop:"1px solid "+g.Il.CoreNeutral20}}},z={display:"flex",paddingRight:v.u.rem(.25),width:v.u.rem(12.25),color:g.Il.CoreNeutral90,fontWeight:600,lineHeight:v.u.rem(1.3125),justifyContent:"flex-start"},j={display:"flex",paddingRight:v.u.rem(.25),width:v.u.rem(12.25),color:g.Il.CoreNeutral50,lineHeight:v.u.rem(1.3125),justifyContent:"flex-start"},G="isOn",q={marginTop:v.u.rem(-.25),marginBottom:v.u.rem(-.25),color:g.Il.CoreBlue50,textTransform:"none",letterSpacing:0,fontWeight:600,fontSize:v.u.rem(g.xv.BodySize),$nest:(c={"&[data-textpos=everywhere]":{paddingRight:v.u.rem(.5),paddingLeft:v.u.rem(.5)}},c["&."+G]={color:g.Il.CoreRed50},c)},$=v.u.stylesheet({wrapper:[M],modalBody:[F],modalHeader:[O],subHeader:[B],modalFooter:[D],countInfo:[U],okIcon:[W],categoryRow:[H],categoryName:[z],categoryCount:[j],categoryState:[{display:"flex",justifyContent:"flex-end"}],categoryStateButton:[q]}),V={kind:l.H.Dialogue.Action.Kind.closeClicked},X=(0,a.pipe)(o.UI.Knot.make(i.Static,{content:N}),o.UI.squash,o.UI.contramapState((function(e){return{content:e}})),o.UI.mapAction((function(e){var t=e.action;return t.kind===r.close?V:t})))},93162:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r,i=n(27378),a=n(27221),o=n(71215),s=n(90351),u=n(51465),c=n(22823),l=n(13097),d=n(79844),p=n(39499),f=n(32577),m=n(41439),h=n(77176);!function(e){var t;!function(e){e.switchToPriority="switchToPriority",e.switchToAll="switchToAll",e.openSetGoals="openSetGoals"}(t=e.Actions||(e.Actions={}));e.Switch=u.UI.Node.make((function(e){var n=e.state,r=e.notify,s=i.useContext(d.m.Context).priorityLens,u=a.h.create(!1);return i.createElement(o.F.Fragment,null,n.pipe(h.U((function(e){var n=e.allAlertsCount,a=e.priorityAlertsCount,c="priority"===e.selectedLens,l=c?a:n;return i.createElement(f.L,{name:"priorityLensSwitch",appearanceBehavior:"mouseClick",showDelay:0,closeDelay:100,vAlign:"bottom",theme:{dropdownContainer:k.dropdownContainer,dropdownList:k.dropdownContent},onVisibilityChange:function(e){return u.set(e)},label:i.createElement(o.F.Fragment,null,u.pipe(h.U((function(e){return i.createElement("div",{className:e?k.labelOpened:k.labelClosed},c?s.prioritySuggestion:s.allSuggestion,l>0&&i.createElement("span",{className:k.alertCount}," "," ",l," "),i.createElement(m.JO.Arrow,{direction:e?m.n4.up:m.n4.down,className:k.labelArrow}))}))))},i.createElement(p.zx.Flat,{name:"priorityAlerts",className:c?k.boldLensButton:k.lensButton,onClick:r(t.switchToPriority)},i.createElement(m.JO.Star,{width:12}),s.prioritySuggestion,c?i.createElement(m.JO.Yes,{className:k.checkMarkIcon}):null),c&&a===n?i.createElement("div",{className:k.disabledLensButton},i.createElement(m.JO.Formatting.BulletList,{width:21}),s.disabledAllSuggestion):i.createElement(p.zx.Flat,{name:"allAlerts",className:c?k.lensButton:k.boldLensButton,onClick:r(t.switchToAll)},i.createElement(m.JO.Formatting.BulletList,{width:21}),s.allSuggestion,c?null:i.createElement(m.JO.Yes,{className:k.checkMarkIcon})),i.createElement("div",{className:k.separator}),i.createElement("div",{className:k.description},i.createElement(m.JO.Info,{className:k.descriptionIcon}),i.createElement("div",null,s.description)))}))))}))}(r||(r={}));var g={display:"flex",width:c.u.rem(16)},v={zIndex:l.FY,marginTop:0,fontSize:c.u.rem(.875),lineHeight:c.u.rem(1.3125)},y={display:"flex",boxSizing:"border-box",padding:c.u.rem(.1875)+" "+c.u.rem(.25)+" "+c.u.rem(.1875)+" "+c.u.rem(.25),height:c.u.rem(1.5),borderRadius:c.u.rem(l.fx),color:s.Il.CoreNeutral90,textTransform:"uppercase",letterSpacing:c.u.rem(.025),fontSize:c.u.rem(.625),lineHeight:c.u.rem(1.125),cursor:"pointer",userSelect:"none",$nest:{"&:hover":{backgroundColor:s.Il.CoreNeutral20}}},b={backgroundColor:s.Il.CoreNeutral10},w={color:s.Il.CoreNeutral50,whiteSpace:"pre"},_={minWidth:c.u.rem(1),minHeight:c.u.rem(1),marginLeft:c.u.rem(.5625)},S={padding:"0 "+c.u.rem(.5),color:s.Il.CoreNeutral90,$nest:{"& i:first-child":{margin:0}}},C={display:"flex",padding:"0 "+c.u.rem(.5),height:c.u.rem(2),color:s.Il.CoreNeutral50,alignItems:"center",cursor:"not-allowed"},x={margin:c.u.rem(.5)+" "+c.u.rem(1),width:"calc(100% - "+c.u.rem(2)+")",height:c.u.px(1),backgroundColor:s.Il.CoreNeutral20},I={display:"flex",padding:"0 "+c.u.rem(.5)+" "+c.u.rem(.5)+" "+c.u.rem(.5),fontSize:c.u.rem(.75),lineHeight:c.u.rem(1.125),alignItems:"center"},A={marginBottom:"auto",minHeight:c.u.rem(1.25)},E={color:s.Il.CoreBlue60,cursor:"pointer"},k=c.u.stylesheet({dropdownContainer:[g],dropdownContent:[v],labelClosed:[y],labelOpened:[y,b],alertCount:[w],labelArrow:[_],lensButton:[S],disabledLensButton:[C],boldLensButton:[S,{fontWeight:"bold"}],checkMarkIcon:[{marginLeft:"auto"}],separator:[x],description:[I],descriptionIcon:[A],descriptionLink:[E]})},51100:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r,i,a=n(27378),o=n(71215),s=n(51465),u=n(9261),c=n(59312),l=n(73805),d=n(27221),p=n(85746),f=n(64909),m=n(94503),h=n(79844),g=n(39499),v=n(34095),y=n(16323),b=n(45836),w=n(90351),_=n(22823),S=n(71031),C=n(13097),x=n(41439),I=function(e){var t=e.upgradeAction,n=e.size,r=e.title,i=e.className,o=r||a.useContext(h.m.Context).goPremium;return a.createElement(g.zx,(0,c.__assign)({name:"upgrade"},(0,p.Sh)(i,"big"===n?D.baseBig:"link"===n?D.link:D.baseSmall),{onClick:t}),"link"===n?a.createElement(x.JO.PaidLink,{width:14,className:D.linkIcon}):a.createElement(x.JO.Paid,{className:"big"===n?D.bigIcon:D.icon}),o)},A={background:w.Il.CoreGreen60,borderRadius:_.u.rem(C.fx),boxShadow:"0 2px 5px "+_.u.color(S.UE).fade(.35).toRGBA().toString(),color:w.Il.CoreNeutral0,textTransform:"uppercase",letterSpacing:_.u.rem(C.rX),fontWeight:"bold",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:_.u.color(w.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:_.u.color(w.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},E={padding:"0 "+_.u.rem(3)+" 0 "+_.u.rem(2),fontSize:_.u.rem(.8125),lineHeight:_.u.rem(3)},k={padding:"0 "+_.u.rem(2)+" 0 "+_.u.rem(.5),fontSize:_.u.rem(.6875),lineHeight:_.u.rem(2)},T={background:w.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:_.u.color(w.Il.CoreGreen60).tint(.1).toRGBA().toString()},"&:not([data-disabled='true']):active":{background:_.u.color(w.Il.CoreGreen60).tint(.2).toRGBA().toString()}}},L={padding:"0 "+_.u.rem(3)+" 0 "+_.u.rem(2),fontSize:_.u.rem(.8125),lineHeight:_.u.rem(3)},P={padding:"0 "+_.u.rem(2)+" 0 "+_.u.rem(.5),fontSize:_.u.rem(.6875),lineHeight:_.u.rem(2)},R={fill:w.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:w.Il.CoreNeutral0}}},N={marginRight:_.u.rem(.2)},M={color:w.Il.CoreGreen60,fontSize:_.u.rem(.75),transition:"transform .2s ease-out",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{transform:"scale(1.05)"},"&:not([data-disabled='true']):active":{transition:"none",transform:"scale(1)"}}},F={color:w.Il.CoreGreen60},O={fill:w.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:w.Il.CoreGreen60}}},B={fill:w.Il.CoreGreen60,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{fill:w.Il.CoreGreen60}}},D=_.u.stylesheet({base:[A],baseBig:[A,E],baseSmall:[A,k],baseUpHookRedesign:[A,T],baseBigUpHookRedesign:[E,T,L],baseSmallUpHookRedesign:[k,T,P],icon:[R],bigIcon:[R,N],link:[M],linkUpHookRedesign:[M,F],linkIconUpHookRedesign:[O],linkIcon:[B]}),U=n(60430),W=n(2834),H=n(45980),z=.8125,j={display:"flex",flexDirection:"column",maxHeight:"90vh",width:_.u.rem(41.5),backgroundColor:w.Il.CoreNeutral0,textAlign:"left"},G={padding:_.u.rem(1.125)+" "+_.u.rem(2)+" "+_.u.rem(1),paddingBottom:_.u.rem(1)},q={paddingBottom:0,backgroundColor:w.Il.CoreNeutral0,flexShrink:0,$nest:{"&:after":{position:"absolute",bottom:0,display:"block",width:"calc(100% - "+_.u.rem(4)+")",height:_.u.px(1),background:w.Il.CoreNeutral20,content:"''"}}},$={display:"block",margin:_.u.rem(z)+" 0",color:w.Il.CoreNeutral90,fontWeight:w.xv.SmallLightWeight,lineHeight:_.u.rem(1.5)},V={minHeight:_.u.rem(4)},X={display:"flex",$nest:{"&:not(:last-child)":{marginBottom:_.u.rem(1.25),borderBottom:"1px solid "+w.Il.CoreNeutral20}}},Y="setGoalsToneButton",Z={marginBottom:_.u.rem(-.5),maxWidth:_.u.rem(27),justifyContent:"initial",flexWrap:"wrap",$nest:(r={},r["& > ."+Y]={margin:"0 0 "+_.u.rem(.5),marginLeft:_.u.important(0),$nest:{"&:not(:last-child)":{marginRight:_.u.rem(.5)}}},r)},J={width:_.u.rem(7),textTransform:"capitalize",lineHeight:_.u.rem(2)},K={marginTop:_.u.rem(z)},Q={margin:"0 0 "+_.u.rem(1.5)+" "+_.u.rem(7)},ee={margin:"0 0 "+_.u.rem(1.5)+" "+_.u.rem(7)},te={display:"flex",width:_.u.percent(100),justifyContent:"space-between"},ne={color:w.Il.CoreNeutral90,fontWeight:300,fontSize:_.u.rem(.8125)},re=_.u.stylesheet({wrapper:[j],modalBody:[G],modalHeader:[q],itemDescription:[$],modalFooter:[V],row:[X],toneButtons:[Z],rowHeader:[J],extraContent:[K],title:[Q],description:[ee],image:[{position:"absolute"}],footerWrapper:[te],checkboxText:[ne]}),ie=function(e){var t=e.name,n=e.items,r=e.sticky,i=e.theme,o=void 0===i?{}:i,s=e.extraContent,u=e.children;return a.createElement("div",{className:re.row},a.createElement("div",null,a.createElement(b.H3,{className:re.rowHeader},t),s),a.createElement("div",null,a.createElement(g.zx.Group,{sticky:r,className:o.buttonsGroup},n.map((function(e){return a.createElement(g.zx.White,(0,c.__assign)({className:o.button,name:"context-"+t+"-"+e.key},e))}))),a.createElement(b.x4,{className:re.itemDescription},u)))},ae=function(e){var t=e.items,n=e.current,r=e.shouldDisable,i=e.itemTitle,a=void 0===i?H.identity:i;return{sticky:!0,items:t.map((function(e){return{key:e,active:n.view((function(t){return t===e})),onClick:function(){return n.set(e)},disabled:r&&r(e),children:a(e)}}))}},oe=function(e,t){var n=e.items,r=e.current;return{items:n.map((function(e){return{key:e,active:r.view((function(t){return(0,l.pipe)(t,f.exists((function(t){return t.has(e)})))})),onClick:function(){return r.modify((function(t){var n=(0,l.pipe)(t,f.fold((function(){return new Set}),(function(e){return new Set(e)})));return n.has(e)?n.delete(e):n.add(e),f.some(n)}))},children:t(e)}}))}},se=function(e){var t=e.blocks,n=e.features,r=e.showOnLoad,i=e.close,o=e.upgrade,s=e.reset,c=e.showOnLoadChanged,l=a.useContext(m.a.Context);return a.createElement(u.u_,{className:re.wrapper},a.createElement(u.u_.Header,{className:re.modalHeader},a.createElement(ce,null)),a.createElement(u.u_.Body,{name:"goalsBody",className:re.modalBody},a.createElement(ue,{features:n,upgradeAction:o,blocks:t})),a.createElement(u.u_.Footer,{className:re.modalFooter},a.createElement(le,{supportsSetGoalsLoader:!n.demoMode&&l.has(m.a.Flag.supportsSetGoalsLoader),onDone:i,reset:s,showOnLoad:r,showOnLoadChanged:c})))},ue=function(e){var t=e.blocks,n=e.features,r=e.upgradeAction,i=a.useContext(h.m.Context).goals,s=t.audience,u=t.formality,d=t.domain,p=t.tone,m=t.intent;return a.createElement(a.Fragment,null,a.createElement(ie,(0,c.__assign)({name:"audience"},ae(s)),s.current.view((function(e){return e&&i.sections.audience[e]((0,l.pipe)(t.audience.default,f.exists((function(t){return t===e}))))}))),a.createElement(ie,(0,c.__assign)({name:"formality"},ae(u)),u.current.view((function(e){return e?i.sections.formality[e]:""}))),a.createElement(ie,(0,c.__assign)({name:"domain"},ae((0,c.__assign)((0,c.__assign)({},d),{itemTitle:function(e){return"mail"===e?"email":e}})),{extraContent:a.createElement(o.F.div,{className:re.extraContent},n.isFree?a.createElement(I,{size:"link",upgradeAction:r}):null)}),d.current.view((function(e){return n.isFree?i.sections.domain.free:e?i.sections.domain[e]:""}))),a.createElement(ie,(0,c.__assign)({name:"tone",theme:{buttonsGroup:re.toneButtons,button:Y}},oe(p,(function(e){return a.createElement(y.d,{key:e},i.sections.tone.options[e])}))),i.sections.tone.experimental),a.createElement(ie,(0,c.__assign)({name:"intent"},oe(m,(function(e){return i.sections.intent.options[e]}))),i.sections.intent.experimental))},ce=function(){var e=a.useContext(h.m.Context).goals;return a.createElement(a.Fragment,null,a.createElement(de,null),a.createElement(b.H1,{className:re.title},e.title),a.createElement(b.XY,{className:re.description},e.header))},le=function(e){var t=e.supportsSetGoalsLoader,n=e.showOnLoad,r=e.showOnLoadChanged,i=e.reset,o=e.onDone,s=a.useContext(h.m.Context).goals,u=d.h.create(n);return U.P.useSubscriptionTo(u.pipe(W.b(r))),a.createElement("div",(0,c.__assign)({},(0,p.Sh)(t&&re.footerWrapper)),t&&a.createElement(v.Ys,{checked:u,name:"set-goals"},a.createElement(b.x4,{className:re.checkboxText},s.footer.showModalOnStart)),a.createElement(g.zx.Group,null,a.createElement(g.zx.Ghost,{name:"reset",onClick:i},s.footer.reset),a.createElement(g.zx.Primary,{name:"closeSetContext",onClick:o},s.footer.done)))},de=function(){return a.createElement("svg",{className:re.image,width:"69",height:"80",viewBox:"0 0 69 80"},a.createElement("g",{fill:"none",fillRule:"evenodd"},a.createElement("path",{d:"M28.935 70C12.955 70 0 57.045 0 41.065 0 25.085 12.955 12.13 28.935 12.13c15.98 0 28.936 12.954 28.936 28.935C57.87 57.045 44.917 70 28.936 70zm0-12.242c9.22 0 16.694-7.474 16.694-16.693 0-9.22-7.475-16.694-16.695-16.694s-16.693 7.475-16.693 16.695 7.474 16.693 16.693 16.693z",fill:"#4C7AF1"}),a.createElement("path",{d:"M28.935 57.758c-9.22 0-16.693-7.474-16.693-16.693 0-9.22 7.474-16.694 16.693-16.694 9.22 0 16.694 7.475 16.694 16.695s-7.475 16.693-16.695 16.693zm0-11.13a5.564 5.564 0 1 0 0-11.128 5.565 5.565 0 0 0 .001 11.129z",fill:"#BCDBFB"}),a.createElement("circle",{fill:"#FFF",cx:"28.935",cy:"41.065",r:"5.565"}),a.createElement("path",{stroke:"#4C7AF1",strokeLinecap:"round",strokeWidth:"1.5",d:"M15.024 68.016L9.46 78.5m32.274-10.484L47.298 78.5"}),a.createElement("path",{d:"M61.96 13.367a.65.65 0 0 1 .645.656.65.65 0 0 1-.646.655h-6.075L29.35 41.7a.636.636 0 0 1-.913 0 .663.663 0 0 1 0-.927L54.972 13.75V7.59a.65.65 0 0 1 .645-.656.65.65 0 0 1 .646.656v5.777h5.696zm3.17-3.215a.65.65 0 0 1 .646.655.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V4.372a.65.65 0 0 1 .646-.655.65.65 0 0 1 .644.655v5.78h5.696zm3.17-3.218a.65.65 0 0 1 .647.656.65.65 0 0 1-.646.655h-6.34a.65.65 0 0 1-.647-.655V1.155A.65.65 0 0 1 61.96.5a.65.65 0 0 1 .645.655v5.78H68.3z",fill:"#4C7AF1"}),a.createElement("path",{d:"M49.267 20.486l-8.586 8.757",stroke:"#FFF",strokeWidth:"1.3"})))},pe=n(50628),fe=n(77176);!function(e){var t;e.Modal=s.UI.Node.make((function(e){var n=e.state,r=e.notify;return U.P.useSubscriptionTo(n.pipe(pe.P(),W.b((function(e){return r({kind:t.open,source:e.source})()})))),a.createElement(o.F.Fragment,null,n.pipe(fe.U((function(e){var n=r({kind:t.close,source:e.source,context:e.context,showOnLoad:e.showOnLoad});return a.createElement(u.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:n},a.createElement(se,{blocks:e.blocks,features:e.features,close:n,upgrade:r({kind:t.upgrade}),reset:r({kind:t.reset}),showOnLoad:e.showOnLoad,showOnLoadChanged:function(e){return r({kind:t.showOnLoadChanged,value:e})()}}))}))))})),function(e){e.open="open",e.close="close",e.upgrade="upgrade",e.reset="reset",e.showOnLoadChanged="showOnLoadChanged"}(t=e.ActionsKind||(e.ActionsKind={}))}(i||(i={}))},17128:(e,t,n)=>{"use strict";n.d(t,{q:()=>ee});var r,i=n(27378),a=n(71215),o=n(22232),s=n(51465),u=n(79844),c=n(87325),l=n(39499),d=n(9261),p=function(){return i.createElement("svg",{width:"128",height:"177"},i.createElement("defs",null,i.createElement("rect",{id:"a",y:"14",width:"128",height:"128",rx:"64"})),i.createElement("g",{fill:"none",fillRule:"evenodd"},i.createElement("ellipse",{fill:"#F1F2FA",cx:"64",cy:"173",rx:"48",ry:"4"}),i.createElement("path",{d:"M27 0h62a5 5 0 0 1 5 5v91a5 5 0 0 1-5 5H24a5 5 0 0 1-5-5V8a8 8 0 0 1 8-8z",fill:"#F1F2FA"}),i.createElement("mask",{id:"b",fill:"#fff"},i.createElement("use",{xlinkHref:"#a"})),i.createElement("use",{fill:"#A2BCFF",xlinkHref:"#a"}),i.createElement("path",{d:"M116.708 48.783a4.144 4.144 0 0 1 5.672-1.465 4.138 4.138 0 0 1 1.466 5.667l-17.955 30.462a4.141 4.141 0 0 1-3.57 2.039 4.145 4.145 0 0 1-2.879-1.164l-12.527-12.1a4.138 4.138 0 0 1-.099-5.855 4.144 4.144 0 0 1 5.858-.099l8.747 8.45 15.287-25.935zm-63.446 45.53h58.877a4.141 4.141 0 0 1 4.142 4.139 4.141 4.141 0 0 1-4.142 4.14H53.262a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zM8.793 17.33h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm0 17.526h31.735a4.141 4.141 0 0 1 4.143 4.14 4.141 4.141 0 0 1-4.143 4.14H8.793a4.141 4.141 0 0 1-4.143-4.14 4.141 4.141 0 0 1 4.143-4.14zm4.99 68.985a4.74 4.74 0 0 1-4.686 4.794 4.74 4.74 0 0 1-.111-9.477 4.74 4.74 0 0 1 4.798 4.683zm16.757 16.106a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14c0 9.416-7.665 17.076-17.087 17.076S4.65 129.363 4.65 119.947a4.141 4.141 0 0 1 4.143-4.14 4.141 4.141 0 0 1 4.143 4.14c0 4.85 3.948 8.796 8.802 8.796 4.853 0 8.802-3.946 8.802-8.796zM8.793 76.46c-1.06 0-2.12-.405-2.93-1.213a4.138 4.138 0 0 1 0-5.855l4.274-4.27-4.273-4.27a4.138 4.138 0 0 1 0-5.855 4.145 4.145 0 0 1 5.859 0l4.273 4.27 4.273-4.27a4.144 4.144 0 0 1 5.858 0 4.138 4.138 0 0 1 0 5.855l-4.273 4.27 4.274 4.27a4.138 4.138 0 0 1-2.93 7.068c-1.06 0-2.12-.405-2.929-1.213l-4.273-4.27-4.273 4.27a4.133 4.133 0 0 1-2.93 1.213zm87.342 44.285l13.678 9.075a4.138 4.138 0 0 1 1.16 5.739 4.144 4.144 0 0 1-5.743 1.159l-11.387-7.555-11.386 7.555a4.143 4.143 0 0 1-4.378.128l-12.844-7.478-11.078 7.35c-.705.468-1.5.691-2.288.691a4.14 4.14 0 0 1-2.295-7.589l13.227-8.776a4.144 4.144 0 0 1 4.377-.128l12.844 7.478 11.53-7.65a4.145 4.145 0 0 1 4.583 0zM31.23 86.814a4.141 4.141 0 0 1 4.142-4.14 4.141 4.141 0 0 1 4.143 4.14v19.402a4.141 4.141 0 0 1-4.143 4.14 4.141 4.141 0 0 1-4.142-4.14V86.814z",fill:"#BDCFFF",mask:"url(#b)"}),i.createElement("path",{d:"M36 12h65a5 5 0 0 1 5 5v88a8 8 0 0 1-8 8H36a5 5 0 0 1-5-5V17a5 5 0 0 1 5-5z",fill:"#7CA1FF",mask:"url(#b)"}),i.createElement("rect",{fill:"#FFF",x:"25",y:"6",width:"75",height:"101",rx:"5"}),i.createElement("path",{d:"M38 21h49a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1zm0 13h32a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H38a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z",fill:"#F1F2FA"})))},f=n(54071),m=n(45836),h=n(77176),g=n(59312),v=n(85746),y=n(76024);!function(e){function t(e,t){var n=t/60,r=y.nH(e/n);return r.s=r.h>0&&r.m>10?0:Math.floor(r.s),r}e.calculateReadingTime=function(e){return t(e,250)},e.calculateSpeakingTime=function(e){return t(e,130)},e.generateStats=function(t,n){var r={words:t,chars:n,sentences:Math.floor(t/5),readingTime:{},speakingTime:{},uniqueWords:40*Math.random(),uniqueWordsIndex:100*Math.random(),rareWords:20*Math.random(),rareWordsIndex:100*Math.random(),wordLength:5.4,wordLengthIndex:100*Math.random(),sentenceLength:16.7,sentenceLengthIndex:100*Math.random(),readabilityScore:73,readabilityDescription:"Your text is likely to be understood by a reader who has at least 7th grade education (age 12)"};return r.readingTime=e.calculateReadingTime(r.words),r.speakingTime=e.calculateSpeakingTime(r.words),r}}(r||(r={}));var b=n(18208),w=n(64909),_=n(90351),S=n(22823),C=n(71031),x=n(13097),I=n(41439),A=n(73805),E=n(27221),k=n(2844),T=n(66310),L=n(93508),P=n(16118),R=n(76974),N=n(13444),M=function(e){var t=e.score,n=e.documentIsEmpty,r=e.sidebarOpen,o=void 0===r?E.h.create(!0):r,s=e.successIcon,u=e.progressIcon,c=e.zeroIcon,l=void 0===c?null:c,d=t.pipe(h.U(w.map((function(e){return e.rank})))),p=k.aj(t,n,(function(e,t){return(0,A.pipe)(e,w.fold((function(){return!1}),(function(e){return 100===e.rank&&!t})))})),f=o.pipe(T.w((function(e){return e?d.pipe(L.O(w.none),P.G(),T.w((function(e){var t=e[0],n=e[1];return(0,A.pipe)(n,w.fold((function(){return R.of(l)}),(function(e){return p.pipe(L.O(!1),P.G(),T.w((function(n){var r=n[0];return n[1]?R.of(s):(0,A.pipe)(t,w.filter((function(){return!r})),w.fold((function(){return R.of(u(e)).pipe(N.g(1),L.O(u(0)))}),(function(){return R.of(u(e))})))})))})))}))):R.of(null)})),L.O(null));return i.createElement(a.F.Fragment,null,f)},F=n(52479);function O(e){var t=e.value,n=e.className,r=e.leftCustomClass,o=e.rightCustomClass,s=E.h.create(!1);requestAnimationFrame((function(){return requestAnimationFrame((function(){return s.set(!0)}))}));var u=k.aj(F.Dx(t),s,(function(e,t){return t?Math.max(5,Math.abs(e-50))+"%":0})),c=function(e,t,n){return F.Dx(e).pipe(h.U((function(e){return e<50?t:n})))};return i.createElement(a.F.div,(0,g.__assign)({},(0,v.Sh)(function(e){return F.Dx(e).pipe(h.U((function(e){return e<50?z.leftSideWrapper:z.rightSideWrapper})))}(t),n)),i.createElement(a.F.div,(0,g.__assign)({},(0,v.Sh)(c(t,z.leftSideProgress,z.rightSideProgress),r&&o&&c(t,r,o)),{style:{width:u}})))}!function(e){e.Label=function(e){var t=e.value,n=e.className,r=i.useContext(u.m.Context).performance,a=t>66?r.aboveAverage:t>50?r.average:r.belowAverage;return i.createElement(m.x4,{className:n},a)}}(O||(O={}));var B,D={position:"relative",zIndex:1,display:"flex",width:S.u.percent(100),height:S.u.rem(.25),borderRadius:S.u.rem(x.fx)},U={height:S.u.percent(100),backgroundColor:C.FW,transition:"width .8s ease-in-out 0s"},W={marginRight:S.u.percent(50),borderTopLeftRadius:S.u.rem(.25),borderBottomLeftRadius:S.u.rem(.25)},H={marginLeft:S.u.percent(50),borderTopRightRadius:S.u.rem(.25),borderBottomRightRadius:S.u.rem(.25)},z=S.u.stylesheet({wrapper:[D],leftSideWrapper:[D,{justifyContent:"flex-end"}],rightSideWrapper:[D,{justifyContent:"flex-start"}],progress:[U],leftSideProgress:[U,W],rightSideProgress:[U,H]}),j=n(63979),G={display:"flex",flexDirection:"column",maxHeight:"90vh",width:S.u.rem(32),height:S.u.rem(41),background:_.Il.CoreNeutral0},q={padding:S.u.rem(2.75)+" "+S.u.rem(1)+" 0 "+S.u.rem(2),minHeight:S.u.rem(5.1),height:S.u.rem(5.1),backgroundColor:_.Il.CoreNeutral0},$={marginRight:S.u.rem(1),paddingBottom:S.u.rem(.3),borderBottom:"1px solid "+C.xO},V={padding:"0 "+S.u.rem(1)+" "+S.u.rem(1)+" "+S.u.rem(2)},X={padding:"0 "+S.u.rem(1.9),minHeight:S.u.rem(4),height:S.u.rem(4)},Y={position:"absolute",top:S.u.rem(-5.15),right:0,bottom:0,left:0,margin:"auto"},Z={display:"flex",flexDirection:"column",marginTop:S.u.rem(7.15),marginBottom:S.u.rem(2),paddingRight:S.u.rem(1),alignItems:"center"},J={wordSpacing:S.u.rem(.05),fontSize:S.u.rem(.875),lineHeight:S.u.rem(1.5)},K={padding:S.u.rem(1.3)+" "+S.u.rem(2.6),textAlign:"center"},Q=S.u.prefixedStylesheet("statistics",{wrapper:[G],modalHeader:[q],modalHeaderUnderline:[$],modalReady:[{transition:"opacity .2s"}],modalEmpty:[{opacity:0}],modalBody:[V],modalFooter:[X],loader:[Y],zeroStateContainer:[Z],performanceText:[J],zeroStateText:[J,K]});!function(e){e.number="number",e.time="time",e.percentage="percentage"}(B||(B={}));var ee,te=function(e){switch(e){case B.number:case B.percentage:return ke.numberRowData;case B.time:return ke.timeRowData;default:return(0,o.vE)(e)}},ne=function(e){var t=e.type,n=e.value,r=e.info,a=e.children,s=e.dataName;return i.createElement("div",{className:ke.row,"data-name":s},i.createElement("div",{className:te(t)},i.createElement("div",{className:ke.metricTitle},a),i.createElement("div",{className:ke.metric},function(e,t){switch(e){case B.number:return(Math.round(10*t)/10).toLocaleString();case B.time:return y.g2(t);case B.percentage:return Math.round(t)+"%";default:return(0,o.vE)(e)}}(t,n))),r&&i.createElement(l.RZ,{title:r}))},re=function(e){var t=e.state,n=i.useContext(u.m.Context).performance,o=t.stats,s=t.score,c=t.documentIsEmpty;return i.createElement(i.Fragment,null,i.createElement("section",{className:ke.titleSection},i.createElement("div",{className:ke.titleColumns},i.createElement(a.F.div,(0,g.__assign)({},(0,v.Sh)(Q.performanceText,ke.headerDescription)),100===s.rank?n.score100:n.scoreUnder100(s.rank)),i.createElement(M,{score:R.of(w.some(s)),documentIsEmpty:R.of(c),successIcon:i.createElement(I.JO.CheckmarkAnimated,{key:"modal-checkmark",width:50,className:ke.checkmark}),progressIcon:function(e){return i.createElement(j.P,{key:"modal-performance-progress",colorType:j.P.ColorType.royalBlue,fontSize:j.P.FontSize.small,percentage:e,theme:Te})}}))),i.createElement("section",{className:ke.wordCountSection},i.createElement(m.H2,{className:ke.sectionHeaderUnderline},n.wordCount),i.createElement("div",{className:ke.wordCountColumns},i.createElement("div",{className:ke.firstColumn},i.createElement(ne,{type:B.number,value:Math.max(o.chars-1,0)},n.characters),i.createElement(ne,{type:B.number,value:o.words},n.words),i.createElement(ne,{type:B.number,value:o.sentences},b._6(o.sentences,n.sentence,n.sentences))),i.createElement("div",{className:ke.secondColumn},i.createElement(ne,{type:B.time,value:r.calculateReadingTime(o.words)},n.readingTime),i.createElement(ne,{type:B.time,value:r.calculateSpeakingTime(o.words)},n.speakingTime)))),i.createElement("section",{className:ke.readabilitySection},i.createElement("div",{className:ke.sectionHeaderWrapper},i.createElement(m.H2,null,n.readability),i.createElement(m.CL,null,n.sectionTitleDescription)),i.createElement("div",{className:ke.readabilityColumns},i.createElement("div",{className:ke.firstColumn},i.createElement(ne,{type:B.number,value:o.wordLength},n.wordLengthTitle),i.createElement(ne,{type:B.number,value:o.sentenceLength},n.sentenceLengthTitle),i.createElement(ne,{type:B.number,value:o.readabilityScore,info:n.readabilityDescription,dataName:"readability"},n.readabilityScore)),i.createElement("div",{className:ke.secondColumn},i.createElement("div",{className:ke.row},i.createElement(O,{value:o.wordLengthIndex,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),i.createElement(O.Label,{value:o.wordLengthIndex,className:ke.progressLabel})),i.createElement("div",{className:ke.row},i.createElement(O,{value:o.sentenceLengthIndex,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),i.createElement(O.Label,{value:o.sentenceLengthIndex,className:ke.progressLabel})),i.createElement("div",{className:ke.verticalPillar}))),i.createElement(m.CL,{className:ke.readabilityDescr},o.readabilityDescription)),i.createElement("section",null,i.createElement("div",{className:ke.sectionHeaderWrapper},i.createElement(m.H2,null,n.vocabulary),i.createElement(m.CL,null,n.sectionTitleDescription)),i.createElement("div",{className:ke.vocabularyColumns},i.createElement("div",{className:ke.firstColumn},i.createElement(ne,{type:B.percentage,value:o.uniqueWords,info:n.uniqueWords},n.uniqueWordsTitle),i.createElement(ne,{type:B.percentage,value:o.rareWords,info:n.rareWords},n.rareWordsTitle)),i.createElement("div",{className:ke.secondColumn},i.createElement("div",{className:ke.row},i.createElement(O,{value:o.uniqueWords,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),i.createElement(O.Label,{value:o.uniqueWords,className:ke.progressLabel})),i.createElement("div",{className:ke.row},i.createElement(O,{value:o.rareWords,className:ke.progressBar,leftCustomClass:ke.leftProgress,rightCustomClass:ke.rightProgress}),i.createElement(O.Label,{value:o.rareWords,className:ke.progressLabel})),i.createElement("div",{className:ke.verticalPillar})))))},ie={marginBottom:S.u.rem(2.4)},ae={display:"flex",marginTop:S.u.rem(.9),marginRight:S.u.rem(1),justifyContent:"space-between"},oe={marginBottom:S.u.rem(1.5)},se={display:"flex",marginTop:S.u.rem(.8)},ue={marginBottom:S.u.rem(2.4)},ce={display:"flex",marginTop:S.u.rem(.8)},le={display:"flex",marginTop:S.u.rem(.8)},de={flexBasis:S.u.percent(50)},pe={position:"relative",paddingLeft:S.u.rem(.5),flexBasis:S.u.percent(50)},fe={display:"flex",height:S.u.rem(2),alignItems:"center"},me={display:"flex",justifyContent:"space-between"},he={width:S.u.rem(10),fontFeatureSettings:x.Q9+", "+x.g_},ge={width:S.u.rem(13)},ve={marginRight:S.u.rem(1),paddingBottom:S.u.rem(.5),borderBottom:"1px solid "+C.xO},ye={width:S.u.percent(80),whiteSpace:"pre-line"},be={display:"inline-block",color:_.Il.CoreBlue50,textAlign:"right",fontWeight:"bold",fontSize:S.u.rem(.875),lineHeight:S.u.rem(2)},we={display:"inline-block",color:_.Il.CoreNeutral90,fontSize:S.u.rem(.875),lineHeight:S.u.rem(2)},_e={width:S.u.rem(3.2),height:S.u.rem(3.2),fontWeight:"bold"},Se={width:S.u.rem(6),backgroundColor:C.xO},Ce={marginLeft:S.u.rem(1.125)},xe={backgroundImage:C.BZ},Ie={backgroundImage:C.Xd},Ae={display:"block",paddingTop:S.u.rem(.5)},Ee={position:"absolute",top:S.u.rem(.5),left:S.u.rem(3.5),width:S.u.rem(.0625),height:S.u.rem(3),backgroundColor:C.jj},ke=S.u.stylesheet({titleSection:[ie],titleColumns:[ae],wordCountSection:[oe],wordCountColumns:[se],readabilitySection:[ue],readabilityColumns:[ce],vocabularyColumns:[le],firstColumn:[de],secondColumn:[pe],row:[fe],rowData:[me],numberRowData:[me,he],timeRowData:[me,ge],sectionHeaderUnderline:[ve],sectionHeaderWrapper:[ve,{display:"flex",alignItems:"baseline",justifyContent:"space-between"}],headerDescription:[ye],metric:[be],metricTitle:[we],checkmark:[{alignItems:"center"}],circleProgressBar:[_e],progressBar:[Se],progressLabel:[Ce],leftProgress:[xe],rightProgress:[Ie],readabilityDescr:[Ae],verticalPillar:[Ee]}),Te={radialProgressBar:ke.circleProgressBar};!function(e){var t;e.ModalView=s.UI.Grid.make((function(n){var r=n.slots,a=n.state,o=(0,n.notify)({kind:t.close});return i.createElement(d.ay,{positionType:"fixed",animate:!0,smallResolution:"resize",onClose:o},i.createElement(e.ModalContent,{state:a,downloadButton:r.downloadButton,onClose:o}))})),function(e){e.close="close"}(t=e.ActionsKind||(e.ActionsKind={})),e.ModalContent=function(t){var n=t.state,r=t.downloadButton,a=t.onClose;return i.createElement(d.u_,{className:Q.wrapper},i.createElement(d.u_.Header,{className:Q.modalHeader},i.createElement(e.Header,{state:n})),i.createElement(d.u_.Body,{name:"performanceBody",className:Q.modalBody,wrapperClassName:n.pipe(h.U((function(e){return e.type===c.g.State.Type.EMPTY?Q.modalEmpty:Q.modalReady})))},i.createElement(e.Body,{state:n})),i.createElement(d.u_.Footer,{className:Q.modalFooter},i.createElement(g,{downloadButton:r,onClose:a})))};var n=function(){var e=i.useContext(u.m.Context);return i.createElement("div",{className:Q.zeroStateContainer},i.createElement(p,null),i.createElement("div",{className:Q.zeroStateText},e.performance.notEnoughTextToCalculateStats))};e.Header=function(e){var t=e.state,n=i.useContext(u.m.Context);return i.createElement(a.F.Fragment,null,t.pipe(h.U((function(e){return i.createElement(m.H2,{key:"statisticsHeader",className:e.type===c.g.State.Type.READY?Q.modalHeaderUnderline:""},n.performance.title)}))))};var r=function(){return i.createElement(f.$,{size:64,className:Q.loader,variation:"blue"})};e.Body=function(e){var t=e.state;return i.createElement(a.F.Fragment,null,t.pipe(h.U((function(e){switch(e.type){case c.g.State.Type.EMPTY:return null;case c.g.State.Type.LOADING:case c.g.State.Type.ERROR:return i.createElement(r,{key:"statisticsLoading"});case c.g.State.Type.SHORT_CONTENT:return i.createElement(n,{key:"statisticsEmpty"});case c.g.State.Type.READY:return i.createElement(re,{key:"statisticsContent",state:e});default:return(0,o.vE)(e)}}))))};var g=function(e){var t=e.downloadButton,n=e.onClose;return i.createElement(i.Fragment,null,t,i.createElement(l.zx.Primary,{name:"close-stats",onClick:n},"Close"))}}(ee||(ee={}))},52268:(e,t,n)=>{"use strict";n.d(t,{wK:()=>f,JT:()=>m,hM:()=>h});var r=n(73805),i=n(64909),a=n(8125),o=n(22232),s=n(88903),u=n(45442),c=n(15228),l=n(77176);function d(e){return{title:e.title,firstLine:i.fromNullable(e.firstLine)}}function p(e){switch(e){case c.g.SuccessType.applied:case c.g.SuccessType.large:return"growComplete";default:return"growStart"}}function f(e,t,n){return function(){return e.pipe(l.U((function(e){var r=function(e,t,n){var r=t.successLens;switch(e){case c.g.SuccessType.zero:return r.emptyText;case c.g.SuccessType.small:return r.smallText;case c.g.SuccessType.large:return r.largeText;case c.g.SuccessType.applied:return n?r.fixedTextDemoPremiumUpHook:{title:r.fixedText.titles[(0,a.TN)(9)]};default:return(0,o.vE)(e)}}(e,n,t);return{kind:p(e),caption:i.some(d(r))}})))}}function m(e){return function(){return e.pipe(l.U((function(e){return{kind:p(e),caption:i.none}})))}}function h(e){return u.Z.animatingFlow(e,(function(e){return(0,r.pipe)(e,i.fold((function(){return i.some(s.right("fadein"))}),(function(){return i.some(s.both("fadeout","fadein"))})))}))}},56157:(e,t,n)=>{"use strict";n.d(t,{q:()=>T});var r=n(27378),i=n(73805),a=n(71215),o=n(83078),s=n(90351),u=n(51465),c=n(22823),l=n(45836),d=n(77176),p=u.UI.Node.make((function(){return r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("g",{clipPath:"url(#clip0)"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#D7F7F0"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.399 71.25l11.766-6.85c1.994-1.14 4.587-.83 6.182.831L60.504 77.164",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",fill:"#D1CEF4"}),r.createElement("path",{d:"M63.994 66.787l9.074-10.48c1.795-2.075 4.787-2.801 7.28-1.66L64.194 74.674",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094-1.495 11.206 1.495-11.206z",fill:"#D1CEF4"}),r.createElement("path",{d:"M62.897 59.213l2.393-5.396-.199-2.075c-.399-3.32 1.396-6.434 4.288-7.679l.997 10.377-5.883 20.234S47.442 87.229 46.743 89.2c-.598 1.66.2 11.311.698 15.046.4 3.217-20.64 4.047-19.943 1.246 1.297-4.462 4.587-15.046 5.186-17.537.997-3.528-.599-12.348 2.991-18.677 1.596-2.802 5.983-9.858 7.18-13.075 1.396-3.424 1.595-7.678 1.595-7.678 5.385 1.349 3.69 9.961 1.595 14.942-2.193 5.292 6.382 4.67 8.676.726 1.695-3.009 2.891-5.292 2.891-5.292l-.398-5.5-.4-.31c-2.492-2.283-3.29-6.019-1.794-9.235l6.382 7.263 1.495 8.094zm0 0l-1.495 11.206",stroke:"#0E101A",strokeMiterlimit:"10"})),r.createElement("path",{d:"M54.822 50.297c0 1.948-1.496 3.59-3.49 3.59-1.995 0-3.49-1.54-3.49-3.59 0-2.052 1.495-5.231 3.49-5.231 1.994 0 3.49 3.282 3.49 5.23z",fill:"#F6DF6C",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M58.411 32.86s-2.194-4.307 1.596-7.897c3.09-2.974 8.276-4.41 10.07-4.923.3-.102.6.205.6.513-.1 1.436-.5 5.026-1.995 7.795-1.695 3.18-6.183 6.359-10.27 4.513zM54.123 37.066s3.49-8.41-9.273-13.334c-.3-.102-.698.206-.599.513.2 1.026.5 3.077.699 5.026.398 4.82 1.396 10.462 9.173 7.795z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M51.431 45.066c.598-4.41 2.393-9.334 7.28-12.513",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("defs",null,r.createElement("clipPath",{id:"clip0"},r.createElement("rect",{x:"27.482",y:"24.867",width:"57.037",height:"76.267",rx:"28.518",fill:"#fff"}))))})),f=u.UI.Node.make((function(){return r.createElement("svg",{width:"112",height:"126",fill:"none",xmlns:"http://www.w3.org/2000/svg"},r.createElement("rect",{x:"28",y:"26.25",width:"56",height:"73.5",rx:"28",fill:"#DBEBFF"}),r.createElement("path",{d:"M78.5 103.284S73.702 64.99 25.9 42.79",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M73.797 88.742s-4.895-9.307 4.512-21.619c0 0 6.91 7.465-4.512 21.619z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M73.701 88.839S69.958 78.95 54.696 77.98c0 0 .96 10.082 19.005 10.858zM63.239 71.195s-6.335-6.496-1.728-19.001c0 .096 7.583 4.362 1.728 19z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M63.143 71.292s-5.567-7.174-18.43-4.072c0 0 3.36 8.143 18.43 4.072zM50.089 57.526s-5.952-4.363-3.84-15.027c0 0 6.623 2.52 3.84 15.026z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M49.993 57.623s-5.376-5.042-15.358-.873c0 0 3.743 6.108 15.358.873z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.314 52.097c-4.8-3.297-10.27-6.399-16.414-9.21",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M36.65 48.413s-4.607-2.327-4.319-9.986c0-.097 4.895.97 4.32 9.986z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M36.65 48.51S32.331 45.6 25.9 49.673c0-.097 3.264 3.78 10.75-1.163z",fill:"#D7E8A9",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M42.778 85.615c0-2.917-2.194-5.216-4.978-5.216 2.785 0 4.978-2.298 4.978-5.216 0 2.918 2.194 5.216 4.979 5.216-2.785 0-4.979 2.299-4.979 5.216z",fill:"#D1CEF4",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M56.597 42.094c0-2.652-1.994-4.742-4.525-4.742 2.531 0 4.525-2.09 4.525-4.741 0 2.652 1.995 4.742 4.526 4.742-2.531 0-4.526 2.09-4.526 4.741z",fill:"#FCF5D0",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M80.06 61.062c0-3.13-2.354-5.596-5.341-5.596 2.987 0 5.34-2.465 5.34-5.595 0 3.13 2.354 5.595 5.341 5.595-2.987 0-5.34 2.466-5.34 5.596z",fill:"#F8C6DA",stroke:"#0E101A",strokeMiterlimit:"10",strokeLinejoin:"round"}),r.createElement("path",{d:"M77 43.212c5.412 0 9.8-4.43 9.8-9.895 0-5.464-4.388-9.894-9.8-9.894-5.412 0-9.8 4.43-9.8 9.894 0 5.465 4.388 9.895 9.8 9.895z",fill:"#15C39A",stroke:"#0E101A",strokeMiterlimit:"10"}),r.createElement("path",{d:"M83.037 29.695c-.35-.353-1.05-.353-1.487 0l-6.125 6.184-2.625-2.65c-.35-.353-1.05-.353-1.487 0-.175.177-.263.442-.263.707 0 .265.088.53.263.706l3.412 3.446c.175.176.438.265.7.265.263 0 .525-.089.7-.265l6.825-6.89c.438-.443.438-1.061.087-1.503z",fill:"#fff"}))})),m=u.UI.Node.make((function(e){var t=e.view;return r.createElement("div",{"data-name":"success-lens-text",className:E.newSuccessText},r.createElement(l.H4,{key:"title"},t("title")),r.createElement("div",{className:E.newSuccessDescription},r.createElement(a.F.div,{className:E.newSuccessDescriptionText},(0,i.pipe)(t("firstLine"),d.U(o.QP)))))})),h=u.UI.Union.asOption(m),g=u.UI.Grid.make((function(e){var t=e.slots;return r.createElement(a.F.div,{className:E.newSuccessContainer},t.image,t.caption)})),v=u.UI.Knot.make(g,{image:p,caption:h}),y=u.UI.Knot.make(g,{image:f,caption:h}),b=u.UI.Union.make("kind",{growStart:v,growComplete:y}),w=c.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),_=c.u.keyframes({"0%":{opacity:1},"100%":{opacity:0}}),S={animation:w+" 300ms linear forwards"},C={position:"absolute",top:0,width:c.u.percent(100),animation:_+" 200ms linear forwards"},x={width:c.u.percent(100),marginTop:c.u.rem(.5)},I={marginTop:c.u.rem(.25)},A={fontSize:c.u.rem(s.xv.NewSuccessDescriptionSize),color:s.Il.CoreNeutral50,letterSpacing:s.xv.NewSuccessDescriptionLetterSpacing,lineHeight:c.u.rem(s.xv.NewSuccessDescriptionLineHeight),fontWeight:s.xv.NewSuccessDescriptionWeight},E=c.u.stylesheet({success_fadein:[S],success_fadeout:[C],newSuccessContainer:[{textAlign:"center"}],newSuccessText:[x],newSuccessDescription:[I],newSuccessDescriptionText:[A]}),k=u.UI.Transition.make({fadein:E.success_fadein},{fadeout:E.success_fadeout}),T=u.UI.Animated.make(k,b)},45440:(e,t,n)=>{"use strict";n.d(t,{r:()=>v});var r,i=n(27378),a=n(73805),o=n(64909),s=n(51465),u=n(22823),c=n(79176),l=n(79844),d=n(41439),p=n(45836),f=s.UI.Grid.make((function(e){var t=e.slots;return i.createElement("div",{className:_.grid},i.createElement("div",{className:_.iconWrapper},t.icon),i.createElement("div",{className:_.titleWrapper},t.title),i.createElement("div",{className:_.bottomWrapper},t.bottom))})),m=s.UI.Node.make((function(){var e=i.useContext(l.m.Context).successLens.paidView;return i.createElement(p.H4,null,e.title)})),h=s.UI.Node.make((function(){return i.createElement(d.JO.GreenOk,{width:32})})),g=s.UI.Knot.make(f,{icon:h,title:m,bottom:s.UI.Union.make("kind",(r={},r[c.n.State.hidden]=s.UI.Node.empty,r[c.n.State.expanded]=c.n.TogglableExpandedPanel,r))}),v=(0,a.pipe)(s.UI.squash(g),s.UI.contramapState((function(e){return(0,a.pipe)(e,o.fold((function(){return{bottom:{kind:c.n.State.hidden}}}),(function(e){return{bottom:{kind:c.n.State.expanded,showCloseButton:!1,alertsState:e}}})))}))),y={marginTop:u.u.rem(3.5)},b={marginTop:u.u.rem(1.375)},w={marginTop:u.u.rem(2.675)},_=u.u.stylesheet({grid:[{display:"flex",flexDirection:"column",alignItems:"center"}],iconWrapper:[y],titleWrapper:[b],bottomWrapper:[w]})},79126:(e,t,n)=>{"use strict";n.d(t,{Q:()=>d});var r=n(45980),i=n(64909),a=n(22232),o=n(77176),s=n(66265),u=n(93508),c=n(66310),l=n(79176);function d(e){return(0,r.flow)(o.U((function(e){switch(e.key){case l.n.State.expanded:switch(e.action.kind){case"collapse":return i.some(l.n.State.minimized);case"upgrade":case"onUpgradeButtonMount":return i.none;default:return(0,a.vE)(e.action)}case l.n.State.minimized:switch(e.action.action){case"onClick":return i.some(l.n.State.expanded);default:return(0,a.vE)(e.action.action)}default:return(0,a.vE)(e)}})),s.oA,u.O(l.n.State.minimized),c.w((function(t){return e.pipe(o.U(i.fold((function(){return{kind:l.n.State.hidden}}),(function(e){switch(t){case l.n.State.minimized:return{kind:l.n.State.minimized,alertsCount:e.count};case l.n.State.expanded:return{kind:l.n.State.expanded,showCloseButton:!0,alertsState:{count:e.count,alerts:e.alerts()}};case l.n.State.hidden:return{kind:l.n.State.hidden};default:return(0,a.vE)(t)}}))))})))}},79176:(e,t,n)=>{"use strict";n.d(t,{n:()=>Le});var r,i,a,o,s,u,c,l,d,p,f=n(51465),m=n(27378),h=n(73805),g=n(71215),v=n(22232),y=n(64909),b=n(79844),w=n(39499),_=n(59312),S=n(85746),C=n(19962),x=n(90351),I=n(22823),A=n(71031),E=n(94503),k=n(41439),T=n(54071),L=n(14611),P=n(52479),R=n(58199),N=n(77176),M=n(57091),F=n(93508);!function(e){function t(e){return 0===e?"":e>=1e3?Math.min(Math.trunc(e/1e3),9)+"k+":String(e)}var n=function(e){var t=e.className,n=e.isChecking,r=e.type,i=e.animateFade,a=void 0===i||i,o=L.f.fadeOutState(n),s=o.state,u=o.complete,c="checking-complete";return m.createElement(g.F.div,(0,_.__assign)({},(0,S.Sh)(se.loader,t),{role:"loader"}),a?s.pipe(N.U((function(e){return"end"===e?m.createElement("div",{key:"checking-complete",className:c}):m.createElement(T.$,{key:"spinner",variation:r,size:"100%",className:"fadeOut"===e?se.fadeOut:void 0,onTransitionEnd:u})}))):n.pipe(N.U((function(e){return e?m.createElement(T.$,{variation:r,size:"100%"}):m.createElement("div",{className:c})}))))},r=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,u=e.suffix,c=void 0===u?"":u,l=m.useContext(E.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,S.Sh)(se.roundCounter,P.ab(s,T.$.getClassName(se)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 32",className:se.circular},m.createElement("g",null,m.createElement("circle",{r:"15.75",cx:"16",cy:"16"}),m.createElement("text",(0,_.__assign)({x:"16",y:"17"},C.h5(l.has(E.a.Flag.supportsSVGDominantBaseline)),{fontSize:a>=100?14:18,"data-name":n},(0,S.Sh)(q,i.counterContent)),t(a),c))))},i=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,u=e.suffix,c=void 0===u?"":u,l=m.useContext(E.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,S.Sh)(se.ovalCounter,P.ab(s,T.$.getClassName(se)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 20",className:se.circular},m.createElement("rect",{width:"32",height:"20",rx:"10"}),m.createElement("text",(0,_.__assign)({x:"16",y:"10.5"},C.h5(l.has(E.a.Flag.supportsSVGDominantBaseline)),{fontSize:11,"data-name":n},(0,S.Sh)(q,i.counterContent)),t(a),c)))};e.Counter=function(e){var t=e.theme,n=void 0===t?{}:t,a=e.count,o=e.type,s=void 0===o?"white":o,u=a>=100?i:r;return m.createElement(u,{theme:(0,_.__assign)((0,_.__assign)({},n),{counterWrapper:(0,S.Sh)(n.counterWrapper,se.flexCounter).className}),count:a,type:s})},e.OutcomeCounter=function(e){var n=e.name,r=e.theme,i=void 0===r?{}:r,a=e.count,o=e.type,s=void 0===o?"white":o,u=e.suffix,c=e.fontSize,l=void 0===c?12:c,d=m.useContext(E.a.Context);return m.createElement(g.F.div,(0,_.__assign)({},(0,S.Sh)(se.outcomeCounter,P.ab(s,T.$.getClassName(se)),i.counterWrapper),{role:"counter"}),m.createElement("svg",{viewBox:"0 0 32 18",className:se.circular},m.createElement("rect",(0,_.__assign)({},function(e,t){return t||e>=100?{width:32}:e>=10?{x:4,width:24}:{x:7,width:18}}(a,!!u),{height:18,rx:9})),m.createElement("text",(0,_.__assign)({x:"50%",y:"10px"},C.h5(d.has(E.a.Flag.supportsSVGDominantBaseline)),{fontSize:l,"data-name":n},(0,S.Sh)(q,i.counterContent)),t(a),u)))},e.MainMeter=function(e){var t=e.count,i=e.isChecking,a=e.className,o=0===t;return m.createElement("div",(0,_.__assign)({},(0,S.Sh)(se.meter,a)),m.createElement(n,{isChecking:i,type:o?"green":"red"}),0===t?m.createElement(k.JO.Grammarly,null):m.createElement(r,{count:t,type:"red",name:"toolbar-mistakes"}))},e.LensNavMeter=function(e){var t=e.count,i=e.isChecking;return m.createElement("div",{className:se.lensNavMeter},m.createElement(n,{isChecking:i,type:"red"}),m.createElement(r,{count:t,type:"white",name:"toolbar-mistakes"}))},e.PlagiarismMeter=function(e){var t=e.count,r=e.isChecking,a=e.className;return m.createElement("div",(0,_.__assign)({},(0,S.Sh)(se.plagiarismMeter,a)),m.createElement(n,{isChecking:r,type:"violet",animateFade:!1}),m.createElement(g.F.div,{className:se.wrapper},t.pipe(M.a(r),N.U((function(e){var t=e[0],n=e[1];return 0===t?m.createElement(k.JO.NotificationInfo,{className:se.plagiarismIcon,key:"icon",width:20}):!n&&m.createElement(i,{count:t,type:"violet",key:"value",suffix:m.createElement("tspan",{fontSize:8,dominantBaseline:"center"},"%")})})),F.O(null))))},e.PlagiarismOutcomesMeter=function(t){var r=t.count,i=t.isChecking,a=t.className;return m.createElement("div",(0,_.__assign)({},(0,S.Sh)(se.plagiarismMeter,a)),m.createElement(n,{isChecking:i,type:"cyan",animateFade:!1}),m.createElement(g.F.div,{className:se.wrapper},r.pipe(M.a(i),N.U((function(t){var n=t[0],r=t[1];return R.g.isMin(n)?m.createElement(k.JO.CheckmarkOutcomes,{className:se.plagiarismOutcomeIcon,key:"icon",width:20}):!r&&m.createElement(e.OutcomeCounter,{count:R.g.prism.reverseGet(n),type:"cyan",key:"value",suffix:m.createElement("tspan",{fontSize:11},"%")})})),F.O(null))))}}(p||(p={}));var O,B=1.25,D={position:"absolute",top:0,right:0,bottom:0,left:0,overflow:"visible",margin:"auto",width:I.u.percent(100),height:I.u.percent(100)},U={position:"absolute",width:I.u.percent(150),height:I.u.percent(150),transform:"translate(-17%, -17%)"},W={position:"relative",display:"inline-flex"},H={width:I.u.percent(100),height:I.u.percent(100)},z={minWidth:I.u.rem(2),width:I.u.percent(100),height:I.u.rem(B)},j={maxWidth:I.u.rem(2),height:I.u.rem(B)},G="counterText",q=I.u.joinClasses([G,I.u.style({fontWeight:"bold",textAnchor:"middle",fill:x.Il.CoreNeutral0})]),$={fill:A.zh,$nest:(r={},r["& .counterText"]={fill:A.FW},r)},V={fill:x.Il.CoreRed50,$nest:(i={},i["& .counterText"]={fill:x.Il.CoreNeutral0},i)},X={fill:x.Il.CoreGreen50,$nest:(a={},a["& .counterText"]={fill:x.Il.CoreNeutral0},a)},Y={fill:x.Il.CoreBlue50,$nest:(o={},o["& .counterText"]={fill:x.Il.CoreNeutral0},o)},Z={fill:"transparent",$nest:(s={},s["& .counterText"]={fill:A.FW},s)},J={fill:A.lh,$nest:(u={},u["& .counterText"]={fill:x.Il.CoreNeutral0},u)},K={fill:A.AX,$nest:(c={},c["& .counterText"]={fill:x.Il.CoreNeutral0},c)},Q={fill:x.Il.CoreYellow60,$nest:(l={},l["& .counterText"]={fill:x.Il.CoreNeutral0},l)},ee={fill:x.Il.CoreCyan50,$nest:(d={},d["& .counterText"]={fill:x.Il.CoreNeutral0},d)},te={width:I.u.rem(1.5),height:I.u.rem(1.5)},ne={margin:"0 "+I.u.rem(.25)},re={width:I.u.rem(2),height:I.u.rem(B)},ie={margin:I.u.rem(-1)+" 0"},ae={$nest:{"&:not([data-disabled='true'])[data-active='true'], &:not([data-disabled='true'])[data-hovered='true']":{fill:x.Il.CoreCyan50}}},oe={width:I.u.rem(2),height:I.u.rem(1.125),position:"relative"},se=I.u.stylesheet({fadeOut:[{opacity:0,transition:"opacity .5s linear"}],circular:[D],loader:[U],wrapper:[W],roundCounter:[W,H],ovalCounter:[W,z],flexCounter:[W,j],gray:[$],red:[V],green:[X],blue:[Y],white:[Z],violet:[J],yellow:[K],orange:[Q],cyan:[ee],meter:[W,te],lensNavMeter:[W,te,ne],plagiarismMeter:[W,re],plagiarismIcon:[ie],plagiarismOutcomeIcon:[ie,ae],outcomeCounter:[W,{position:"absolute",left:0},oe]}),ue=n(45836),ce=n(13097),le={position:"relative",borderRadius:I.u.rem(ce.fx),boxShadow:"0 1px 7px 0 rgba(129, 137, 169, .2)",userSelect:"none"},de={padding:I.u.rem(1)+" "+I.u.rem(2)},pe={display:"flex",boxSizing:"border-box",padding:I.u.rem(1.25)+" "+I.u.rem(.5)+" "+I.u.rem(1.25)+" "+I.u.rem(1.25),height:I.u.rem(3),cursor:"pointer",justifyContent:"flex-start",alignItems:"center",$nest:{"&:before":{position:"absolute",right:I.u.rem(.5),bottom:I.u.rem(-.5),left:I.u.rem(.5),zIndex:-20,display:"block",height:I.u.rem(2),borderRadius:I.u.rem(ce.fx),backgroundColor:x.Il.CoreNeutral0,boxShadow:"0 "+I.u.rem(.25)+" "+I.u.rem(1.625)+" 0 rgba(198, 203, 222, .25)",content:"' '"}}},fe={marginLeft:I.u.rem(.8),fontSize:I.u.rem(.85),lineHeight:I.u.rem(1)},me={display:"flex",width:I.u.percent(100),alignItems:"center",justifyContent:"space-between"},he={position:"relative",padding:I.u.rem(1)+" "+I.u.rem(2)+" "+I.u.rem(2),userSelect:"none"},ge={position:"absolute",top:I.u.rem(.2),right:I.u.rem(.3),cursor:"pointer"},ve={paddingRight:I.u.rem(1),textAlign:"left",fontSize:I.u.rem(.75),lineHeight:I.u.rem(1.15)},ye={marginTop:I.u.rem(.6),fontSize:I.u.rem(.875),flexShrink:0},be={display:"flex",marginBottom:I.u.rem(.6),justifyContent:"flex-end",flexShrink:0},we={marginRight:"auto",lineHeight:I.u.rem(1.3125)},_e={marginTop:I.u.rem(.21),minWidth:I.u.rem(1.5),flexShrink:0},Se={display:"flex",width:I.u.percent(100),justifyContent:"center",alignItems:"center"},Ce={display:"flex",width:I.u.percent(100),height:I.u.rem(2),borderRadius:I.u.rem(ce.fx),backgroundColor:x.Il.CoreYellow60,color:x.Il.CoreNeutral0,fontWeight:"bold",justifyContent:"center",alignItems:"center",$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{backgroundColor:x.Il.CoreYellow50}}},xe={display:"flex",marginTop:I.u.rem(1),justifyContent:"center"},Ie={position:"absolute",top:I.u.rem(.7),left:I.u.rem(.22),fill:x.Il.CoreNeutral90,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{fill:x.Il.CoreNeutral90}}},Ae=I.u.stylesheet({wrapper:[le],maximizedWrapper:[de],minimizedWrapper:[pe],shadowWrapper:[{position:"relative",zIndex:1}],minimizedText:[fe],minimizedContent:[me],maximizedContainer:[he],maximizedCloseButtonContainer:[ge],maximizedHeader:[ve],alertCategoryContainer:[ye],alertCategory:[be],categoryHumanContainer:[we],alertCounterContainer:[_e],premiumButtonWrapper:[Se],premiumButton:[Ce],premiumButtonContainer:[xe],icon:[Ie]}),Ee=n(64437),ke=function(e){return f.UI.Grid.make((function(t){var n=t.slots;return m.createElement(g.F.div,(0,_.__assign)({},(0,S.Sh)(Ae.wrapper,e,Ee.m.fullCard)),m.createElement(k.JO.PaidLink,{width:14,className:Ae.icon}),n.body)}))},Te=f.UI.Node.make((function(e){var t=e.notify;return m.createElement(g.F.div,{className:Ae.maximizedCloseButtonContainer},m.createElement(ue.zx,{name:"close",onClick:t("onClick")},m.createElement(k.JO.Close,{width:11})))}));!function(e){!function(e){e.onUpgrade="onUpgrade",e.onUpgradeButtonMount="onUpgradeButtonMount"}(e.ActionsKind||(e.ActionsKind={}))}(O||(O={}));var Le,Pe=f.UI.Node.make((function(e){var t=e.state,n=e.notify,r=m.useContext(b.m.Context);return m.createElement(m.Fragment,null,m.createElement("div",{className:Ae.maximizedHeader},m.createElement(g.F.Fragment,null,t.pipe(N.U((function(e){var t=e.count;return t>0?t>1?m.createElement(m.Fragment,{key:"plural"},r.sidebar.content.premiumIssues.foundTitlePlural.description1,"",t,"",r.sidebar.content.premiumIssues.foundTitlePlural.description2):m.createElement(m.Fragment,{key:"singular"},r.sidebar.content.premiumIssues.foundTitleSingular.description1,"",t,"",r.sidebar.content.premiumIssues.foundTitleSingular.description2):null}))))),m.createElement(g.F.div,{className:Ae.alertCategoryContainer},t.pipe(N.U((function(e){return e.alerts.map((function(e){return m.createElement("div",{key:e.category,className:Ae.alertCategory},m.createElement("div",{className:Ae.categoryHumanContainer},e.categoryHuman),m.createElement("div",{className:Ae.alertCounterContainer},m.createElement(p.Counter,{count:e.count,type:"orange"})))}))})))),m.createElement("div",{className:Ae.premiumButtonContainer},m.createElement("div",{ref:function(e){n({kind:O.ActionsKind.onUpgradeButtonMount,element:y.fromNullable(e)})()},className:Ae.premiumButtonWrapper},m.createElement(w.zx,{name:"upgrade",styleType:ue.ZT.Type.Base,className:Ae.premiumButton,onClick:n({kind:O.ActionsKind.onUpgrade})},r.seeWhatsInPremium))))})),Re=f.UI.Composite.make(ke(Ae.maximizedWrapper),f.UI.Group.make({closeButton:f.UI.Union.make("kind",{hidden:f.UI.Node.empty,visible:Te}),content:Pe})),Ne=(0,h.pipe)(f.UI.squash(Re),f.UI.mapAction((function(e){switch(e.key){case"content":switch(e.action.kind){case O.ActionsKind.onUpgrade:return{kind:"upgrade"};case O.ActionsKind.onUpgradeButtonMount:return{kind:"onUpgradeButtonMount",element:e.action.element};default:return(0,v.vE)(e.action)}case"closeButton":switch(e.action.action){case"onClick":return{kind:"collapse"};default:return(0,v.vE)(e.action.action)}default:return(0,v.vE)(e)}})),f.UI.contramapState((function(e){return{closeButton:{kind:e.showCloseButton?"visible":"hidden"},content:e.alertsState}}))),Me=f.UI.Node.make((function(e){var t=e.state,n=m.useContext(b.m.Context);return m.createElement(g.F.div,{className:Ae.minimizedContent},m.createElement("div",{className:Ae.minimizedText},n.premiumSuggestions),t.pipe(N.U((function(e){var t=e.alertsCount;return t>0&&m.createElement(p.OutcomeCounter,{type:"orange",key:"advancedCounter-counter",count:t})}))))})),Fe=f.UI.Grid.make((function(e){var t=e.slots,n=e.notify;return m.createElement("div",{className:Ae.shadowWrapper,onClick:n("onClick")},t.body)})),Oe=f.UI.Knot.make(Fe,{body:f.UI.Composite.make(ke(Ae.minimizedWrapper),Me)}),Be=(0,h.pipe)(f.UI.squash(Oe),f.UI.contramapState((function(e){return{body:e}})));!function(e){var t,n,r;!function(e){e.hidden="hidden",e.minimized="minimized",e.expanded="expanded"}(r=e.State||(e.State={})),e.TogglableExpandedPanel=f.UI.Union.make("kind",((t={})[r.hidden]=f.UI.Node.empty,t[r.expanded]=Ne,t)),e.ToggablePanel=f.UI.Union.make("kind",((n={})[r.hidden]=f.UI.Node.empty,n[r.minimized]=Be,n[r.expanded]=Ne,n))}(Le||(Le={}))},14611:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r,i=n(49708),a=n(77176),o=n(93508),s=n(85985),u=n(17343),c=n(36303),l=n(24209),d=n(99391),p=n(83840),f=n(8473),m=n(15789),h=n(2768),g=n(50628),v=n(79462),y=n(28043),b=n(32952),w=n(66310),_=n(76974);!function(e){var t=function(){function e(){}return Object.defineProperty(e,"observable",{get:function(){return this._obs||(this._obs=i.R(document,"visibilitychange").pipe(a.U((function(){return document.hidden})),o.O(document.hidden),s.h(Boolean),u.h(void 0),c.r(1)))},enumerable:!1,configurable:!0}),e}();function n(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return l.T.apply(d,e.map((function(e){return e.pipe(p.i())}))).pipe(f.o((function(e){return e.hasValue})),m.D())}e.Hidden=t,e.mergeUntilAnyCompletes=n,e.createAnimationObservable=function(e,r,i){return n(function(e,t,n){return v.y.create((function(r){var i,a=window.requestAnimationFrame(o);function o(s){i||(i=s);var u=s-i;u<n?(r.next(Math.round(e+u/n*(t-e))),a=window.requestAnimationFrame(o)):(r.next(t),r.complete())}return function(){return window.cancelAnimationFrame(a)}})).pipe(y.x())}(e,r,i).pipe(h.R(t.observable)),t.observable.pipe(u.h(r),g.P()))},e.fadeOutState=function(e){var t=new b.xQ;return{state:e.pipe(w.w((function(e){return e?_.of("inProgress"):l.T(_.of("fadeOut"),t.pipe(u.h("end")))}))),complete:function(){return t.next(!0)}}},e.rafSequence=function(e,t){return void 0===t&&(t=!1),v.y.create((function(n){var r;function i(){n.next(e.shift()),e.length&&(r=requestAnimationFrame(i))}return t?i():r=requestAnimationFrame(i),function(){return cancelAnimationFrame(r)}}))}}(r||(r={}))},42499:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var r,i=n(18625),a=n(49708);!function(e){var t="scrollaction";e.emit=function(e){return window.dispatchEvent(new CustomEvent(t,{detail:e}))},e.observe=i.P((function(){return a.R(window,t)}))}(r||(r={}))},60430:(e,t,n)=>{"use strict";n.d(t,{P:()=>r});var r,i=n(27378),a=n(27221),o=n(22232),s=n(64909),u=n(19962),c=n(78259),l=n(66310),d=n(76974),p=n(93508),f=n(77176);!function(e){e.useSubscriptionTo=function(e){i.useEffect((function(){var t=e.subscribe();return function(){return t.unsubscribe()}}),[e])};var t=new Set;function n(){return i.useMemo((function(){var e=a.h.create(s.none);return{ref:e,onMount:function(t){return e.set(s.fromNullable(t))}}}),[])}e.useSingleton=function(e){i.useEffect((function(){return(0,o.kG)(!t.has(e),"Component "+e+" can be mounted only once!"),t.add(e),function(){t.delete(e)}}),[])},e.useElWatcher=n,e.useRectWatcher=function(){var e=n(),t=e.ref,r=e.onMount;return{rect:t.pipe(l.w(s.fold((function(){return d.of(s.none)}),(function(e){return c.YC(e).pipe(p.O(u.UL.fromEl(e)),f.U(s.some))})))),onMount:r}},e.useEffectOnDidMount=function(e){i.useEffect(e,[])},e.useEffectOnWillUnmount=function(e){i.useEffect((function(){return e}),[])}}(r||(r={}))},95053:(e,t,n)=>{"use strict";n.d(t,{vM:()=>p,aW:()=>r});var r,i=n(489),a=n(45980),o=n(73805),s=n(22232),u=n(83078),c=n(64909),l=n(65772),d=n(89943);function p(e,t){return t.reduce((function(t,n){var r="function"==typeof e?e(n):n[e],i=t.get(r);return i||(i=[],t.set(r,i)),i.push(n),t}),new Map)}!function(e){e.URI="ImmutableSortedMap",e.create=function(t,n,r){var i=Array.isArray(t)?new Map(t.map((function(e){return[n(e),e]}))):t,a=e.orderKeys(i,r);return i.forEach((function(e){return(0,s.kG)(m(e),"init value should implement IEquals",(function(){return JSON.stringify(e)}))})),new f(i,a,r,n)},e.empty=function(e,t){return new f(new Map,[],t,e)},e.diff=function(e,t){var n=e.clear();return e.reduce((function(e,n,r){var i=e.added,a=e.preserved,o=e.removed,s=e.changed,c=i.has(r)?i.remove(r):i;if(t.has(r)){var l=n.equals(u.MH(t.get(r)).value);return{removed:o,added:c,preserved:l?a.add(n):a,changed:l?s:s.add(n)}}return{removed:o.add(n),added:c,preserved:a,changed:s}}),{removed:n,added:t,preserved:n,changed:n})},e.unsafeGet=function(e,t){return u.MH(t.get(e)).value},e.unsafeGetBy=function(e){return function(t){return u.MH(t.get(e)).value}},e.unsafeGetAt=function(e,t){return u.MH(t.getAt(e))},e.unsafeGetAtBy=function(e){return function(t){return u.MH(t.getAt(e))}},e.nonEmpty=function(e){return e.size>0},e.lowerBound=function(e,t){for(var n=-1,r=e.size;n+1!==r;){var i=n+(r-n>>1);t(u.MH(e.getAt(i)))?n=i:r=i}return n+1},e.createKeySorter=function(e,t){return function(n,r){return t(e(n),e(r))}},e.orderKeys=function(t,n){return Array.from(t.keys()).sort(e.createKeySorter((function(e){return t.get(e)}),n))},e.takeByKey=function(e,t,n){var r=(0,o.pipe)(n,i.findIndex((function(t){return t===e}))),a=c.fromNullable(t.get(e));return(0,s.kG)(c.isNone(r)&&c.isNone(a)||c.isSome(r)&&c.isSome(a),"unsynced hash&order"),u.vB((function(e,t){return{index:e,value:t}}))(r,a)},e.getFoldableWithIndex=function(){return{URI:e.URI,_E:void 0,reduce:function(e,t,n){return e.reduce(n,t)},foldMap:function(e){return function(t,n){return t.reduce((function(t,r){return e.concat(t,n(r))}),e.empty)}},reduceRight:function(e,t,n){return e.reduce((function(e,t){return n(t,e)}),t)},reduceWithIndex:function(e,t,n){return e.reduce((function(e,t,r){return n(r,e,t)}),t)},reduceRightWithIndex:function(e,t,n){return e.reduce((function(e,t,r){return n(r,t,e)}),t)},foldMapWithIndex:function(e){return function(t,n){return t.reduce((function(t,r,i){return e.concat(t,n(i,r))}),e.empty)}}}}}(r||(r={}));var f=function(){function e(e,t,n,r){this._hash=e,this._order=t,this._comp=n,this._getKey=r,(0,s.kG)(e.size===t.length,"every hash entry should has order")}return e.prototype.get=function(e){return r.takeByKey(e,this._hash,this._order)},e.prototype.getIndex=function(e){return c.fromPredicate((function(e){return e>-1}))(this._order.indexOf(e))},e.prototype.getAt=function(e){return c.fromNullable(this._hash.get(this._order[e]))},e.prototype.has=function(e){return this._hash.has(e)},e.prototype.find=function(e,t){if(void 0===t&&(t=0),t<0)return c.none;for(var n=t;n<this._order.length;n++){var r=this._order[n],i=this._hash.get(r);if(e(i))return c.some({index:n,value:i})}return c.none},e.prototype.findFrom=function(e,t){return this.find(e,t)},e.prototype.findRight=function(e,t){if(t&&t>=this._order.length)return c.none;for(var n=t||this._order.length-1;n>=0;n--){var r=this._order[n],i=this._hash.get(r);if(e(i))return c.some({index:n,value:i})}return c.none},e.prototype.findRightFrom=function(e,t){return this.findRight(e,t)},e.prototype.map=function(t,n){var i=this;void 0===n&&(n=this._comp);var a=new Map;this._order.forEach((function(e,n){var r=i._hash.get(e),o=t(r,e,n);(0,s.kG)(m(o),"transformed value should implement IEquals",(function(){return JSON.stringify(o)})),a.set(e,o)}));var o=r.orderKeys(a,n);return new e(a,o,n,this._getKey)},e.prototype.mapTo=function(e){var t=this;return this._order.map((function(n,r){return e(t._hash.get(n),n,r)}))},e.prototype.filter=function(t){var n=this,r=new Map,i=this._order.filter((function(e){var i=n._hash.get(e),a=t(i,e);return a&&r.set(e,i),a}));return new e(r,i,this._comp,this._getKey)},e.prototype.reduce=function(e,t){var n=this;return this._order.reduce((function(t,r,i){return e(t,n._hash.get(r),r,i)}),t)},e.prototype.modifyWith=function(t,n){var i=new Map(this._hash),a=this._order.slice(),o=function(e,t){var o=r.takeByKey(t,i,a),u=n(t,e,o);(0,s.kG)(m(u),"modified value should implement IEquals",(function(){return JSON.stringify(u)})),i.set(t,u),c.isNone(o)&&a.push(t)};return t instanceof Array?t.forEach((function(e){var t=e[0],n=e[1];return o(n,t)})):t.forEach(o),a.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,a,this._comp,this._getKey)},e.prototype.patchWith=function(t,n){var i=new Map(this._hash),l=this._order.slice(),d=function(e,t){var d=r.takeByKey(t,i,l),p=n(t,e,d);(0,s.kG)(u.wo(m)(p),"patched value should implement IEquals",(function(){return JSON.stringify(p)})),(0,o.pipe)(p,c.fold((function(){(0,o.pipe)(d,c.fold(a.constVoid,(function(e){var n=e.index;i.delete(t),l.splice(n,1)})))}),(function(e){i.set(t,e),c.isNone(d)&&l.push(t)})))};return t instanceof Array?t.forEach((function(e){var t=e[0],n=e[1];return d(n,t)})):t.forEach(d),l.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,l,this._comp,this._getKey)},e.prototype.add=function(t){var n=this,i=new Map(this._hash),a=this._order.slice();return(Array.isArray(t)?t:[t]).forEach((function(e){var t=n._getKey(e);(0,s.kG)(m(e),"added value should implement IEquals",(function(){return JSON.stringify(e)})),i.set(t,e),-1===a.indexOf(t)&&a.push(t)})),a.sort(r.createKeySorter((function(e){return i.get(e)}),this._comp)),new e(i,a,this._comp,this._getKey)},e.prototype.update=function(t,n){var i=this;return(0,o.pipe)(this.get(t),c.fold((function(){return l.left("Provided key "+t+" not found in the map")}),(function(a){var o=a.value,s=new Map(i._hash),u=i._order.slice();return s.set(t,n(o)),u.sort(r.createKeySorter((function(e){return s.get(e)}),i._comp)),l.right(new e(s,u,i._comp,i._getKey))})))},e.prototype.remove=function(t){(0,s.kG)(this.has(t),"can not remove unknown key: "+t);var n=new Map(this._hash);return n.delete(t),new e(n,d.CE(t,this._order),this._comp,this._getKey)},e.prototype.clear=function(){return new e(new Map,[],this._comp,this._getKey)},e.prototype.hashCode=function(){var e=7;return this._hash.forEach((function(t){return e+=t.hashCode()})),e},e.prototype.equals=function(e){return this.hashCode()===e.hashCode()&&this.size===e.size&&this.values().every((function(t,n){return t.equals(u.MH(e.getAt(n)))}))},e.prototype.values=function(){var e=this;return this._order.map((function(t){return e._hash.get(t)}))},e.prototype.keys=function(){return this._order},Object.defineProperty(e.prototype,"size",{get:function(){return this._order.length},enumerable:!1,configurable:!0}),e}();function m(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}},40250:(e,t,n)=>{"use strict";n.d(t,{l:()=>r});var r,i=n(73805),a=n(64909);!function(e){e.update=function(e,t,n){return e.update(t,n)},e.filter=function(e,t){return e.filter(t)},e.get=function(e,t,n){return(0,i.pipe)(e.get(t),a.filter((function(e){return n(e.value)})))},e.find=function(e,t){return e.find(t)}}(r||(r={}))},19787:(e,t,n)=>{"use strict";n.d(t,{m:()=>x});var r,i=n(489),a=n(45980),o=n(73805),s=n(27221),u=n(64909),c=n(22788),l=n(89943),d=n(8125),p=n(83078),f=n(10002),m=n(32952),h=n(52479),g=n(77176),v=n(67434),y=n(28043),b=n(41398),w=n(99391),_=n(41199),S=n(50634),C=n(38524);!function(e){var t=function(){this.alertHovered=new m.xQ,this.alertClicked=new m.xQ,this.highlightedAlert=s.h.create(u.none)};e.Mock=t}(r||(r={}));var x=function(e,t,n,r,s){var m=this;this._ded=e,this._state=t,this._markAlertMapper=n,this._alertsReader=r,this._getActiveItemWithAlert=s,this._focusedItem=this._state.view(C.nL.getActiveItem(this._getActiveItemWithAlert)),this._focusedLens=this._state.view("currentLens"),this._marksToAlertTupleArray=function(e){return(0,o.pipe)(e,u.map((0,a.flow)(i.filterMap((function(e){return m._markAlertMapper.getAlertByMark(e)})),i.sort(c.contramap((function(e){var t=e.alert;return{type:t.lensType,priority:t.lensPriority}}))(f.R.ord)))))},this.alertHovered=h.b2.inRaf(this._ded.hoveredMarks).pipe(g.U(this._marksToAlertTupleArray),g.U(u.map(i.map((function(e){return e.alert})))),v.R((function(e,t){return(0,o.pipe)(t,u.chain((function(t){return(0,o.pipe)(e,u.filter((function(e){return-1!==t.indexOf(e)})),u.fold((function(){return u.fromNullable(t[0])}),u.some))})))}),u.none),g.U(u.filter((function(e){return m._alertsReader.isInteractable(e.id)&&!_.$.isPlagiarism(e)}))),y.x()),this.alertClicked=h.b2.inRaf(this._ded.activeMarks).pipe(g.U(this._marksToAlertTupleArray),b.M(this._focusedItem,this._focusedLens),v.R((function(e,t){var n=t[0],r=t[1],i=t[2],a=function(t){return(0,o.pipe)(e,u.exists((function(e){return e.alert.id===t.alert.id})))},s=function(e){return(0,o.pipe)(r,u.exists((function(t){return t.activeAlert.id===e.alert.id})))},c=function(e){return i.meta.filter(e.alert)};return(0,o.pipe)(n,u.chain((function(e){return(0,o.pipe)(e,l.N6([(0,d.W9)(a,s),s,(0,d.W9)(a,c),c,a]),u.fold((function(){return u.fromNullable(e[0])}),u.some))})))}),p.cS()),y.x(u.getEq(S.E.eq).equals),w.shareReplay({refCount:!0,bufferSize:1}))}},73343:(e,t,n)=>{"use strict";n.d(t,{t:()=>r});var r,i=n(59312),a=n(45980),o=n(8125),s=n(17753),u=n(10002),c=(0,o.W9)(s.bZ.isRegistered,(0,a.not)(s.bZ.isMuted)),l=function(e){return function(t){return(0,o.W9)(c,e(t))}};!function(e){var t,n;e.create=function(e,t){var n=l((function(t){return e[t]}));return{lensFilters:new Map(Object.entries(e)),alertVisibleInText:function(e,n){return(0,o.W9)(l((function(e){return t[e]}))(e),function(e){return function(t){return e||s.bZ.isPriority(t)}}(n))},alertVisibleInSidebar:n,getLensesFilter:function(t){return e[t]},alertCanBeDisplayed:c,alertIsBulkAcceptable:function(e){return(0,o.W9)(n(e),s.bZ.isBulkAcceptable)}}};var r=function(e){return function(t){return e===t.lensId}},d=function(e){return(0,o.W9)(r(u.R.OutcomeId.fromPriorityOutcomeId(e)),s.bZ.isPriority)};e.defaultLensFilters=((t={})[u.R.SpecialId.Clarity]=r(u.R.SpecialId.Clarity),t[u.R.SpecialId.Correctness]=r(u.R.SpecialId.Correctness),t[u.R.SpecialId.Delivery]=r(u.R.SpecialId.Delivery),t[u.R.SpecialId.Engagement]=r(u.R.SpecialId.Engagement),t[u.R.SpecialId.Vox]=r(u.R.SpecialId.Vox),t[u.R.SpecialId.ClarityPriority]=d(u.R.SpecialId.ClarityPriority),t[u.R.SpecialId.CorrectnessPriority]=d(u.R.SpecialId.CorrectnessPriority),t[u.R.SpecialId.DeliveryPriority]=d(u.R.SpecialId.DeliveryPriority),t[u.R.SpecialId.EngagementPriority]=d(u.R.SpecialId.EngagementPriority),t[u.R.SpecialId.VoxPriority]=d(u.R.SpecialId.VoxPriority),t[u.R.SpecialId.Plagiarism]=r(u.R.SpecialId.Plagiarism),t[u.R.SpecialId.DraftAI]=a.constFalse,t[u.R.SpecialId.Premium]=r(u.R.SpecialId.Premium),t[u.R.SpecialId.AllAlerts]=s.bZ.belongsToAllAlerts,t[u.R.SpecialId.Closed]=a.constFalse,t[u.R.SpecialId.Priority]=s.bZ.belongsToPriorityLens,t[u.R.SpecialId.PredictionTakeaways]=s.bZ.belongsToPredictionTakeaways,t[u.R.SpecialId.PredictionEmogenie]=s.bZ.belongsToPredictionEmogenie,t[u.R.SpecialId.RealTimeProofit]=r(u.R.SpecialId.RealTimeProofit),t),e.defaultTextFilters=(0,i.__assign)((0,i.__assign)({},e.defaultLensFilters),((n={})[u.R.SpecialId.Closed]=s.bZ.isCriticalImpact,n[u.R.SpecialId.Premium]=(0,o.Kg)(e.defaultLensFilters[u.R.SpecialId.Premium],s.bZ.belongsToAllAlerts),n)),e.priorityTextFilters=function(e){var t;return(t={})[u.R.SpecialId.Premium]=(0,o.W9)(e[u.R.SpecialId.Premium],s.bZ.isPriority),t}}(r||(r={}))},95722:(e,t,n)=>{"use strict";n.d(t,{Oe:()=>r,rG:()=>i,Bd:()=>a});var r,i,a,o=n(59312),s=n(42654),u=n(17753);!function(e){e.eq=(0,s.contramap)((function(e){return e.alert}))(u.bZ.ordId),e.isPending=function(e){return null!==e.state.scheduled&&(e.state.scheduled.visualState!==e.state.current.visualState||e.state.scheduled.updateRanges||e.state.scheduled.forceUpdate)},e.isOneOf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e===t.state.current.visualState}))}},e.notAnyOf=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return e!==t.state.current.visualState}))}},e.canBeChanged=function(t){return function(n){return t&&a.applied===n.state.current.visualState?t===a.disposed:u.bZ.State.isBulkApplied(n.alert.state)||e.notAnyOf(a.applied,a.disposed)(n)}},e.isOrWillBe=function(e){return function(t){return null===t.state.scheduled?t.state.current.visualState===e:t.state.scheduled.visualState===e}},e.willBe=function(e){return function(t){return null!==t.state.scheduled&&t.state.scheduled.visualState===e}}}(r||(r={})),function(e){e.updateRanges=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{updateRanges:t})},e.forceUpdate=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{forceUpdate:t})},e.updateVisualState=function(e,t){return(0,o.__assign)((0,o.__assign)({},e),{visualState:t})},e.from=function(e){return{visualState:e,updateRanges:!1,forceUpdate:!1}}}(i||(i={})),function(e){e.initial="initial",e.highlighted="highlighted",e.visible="visible",e.faded="faded",e.hidden="hidden",e.success="success",e.applied="applied",e.disposed="disposed"}(a||(a={})),function(e){e.isApplied=function(t){return t===e.applied}}(a||(a={}))},20892:(e,t,n)=>{"use strict";n.d(t,{v:()=>C});var r=n(59312),i=n(489),a=n(45980),o=n(73805),s=n(49524),u=n(25656),c=n(24645),l=n(60705),d=n(65772),p=n(64909),f=n(22232),m=n(83078),h=n(89943),g=n(68983),v=n(8125),y=n(92932),b=n(17753),w=n(41199),_=n(78090),S=n(95722),C=function(){function e(e,t,n,r,i,u,c,l){var f=this;this._alert=e,this._alertsService=t,this._alertRangeService=n,this._changeMarksInDEd=r,this._create=i,this._update=u,this._remove=c,this._onTransitionEnd=l,this._currentState=S.rG.from(S.Bd.initial),this._scheduledState=S.rG.from(S.Bd.visible),this.id=this._alert("id").id,this._marksMap=new Map,this._alertRef=this._alertsService.takeReference(this._alert("_alertRef"),"mark"),this._shouldInitMark=!0,this._tryToUpdateRangesInAlert=function(e){if(!e.to.updateRanges||!(0,o.pipe)(f._alertRangeService.hasNewRangesForUpdate(f.id),d.fold(a.constFalse,s.y)))return p.none;var t=(0,o.pipe)(f._alertRangeService.applyPendingRangesUpdate(f.id),d.mapLeft((function(e){return x("markAlert").error("cannot apply pending ranges",e)})),p.fromEither,p.chain(s.y),p.filter((function(e){var t=e.addedHighlightedRanges,n=e.removedHighlightedRanges;return t.length>0||n.length>0})));return(0,o.pipe)(t,p.map((function(e){return{commit:function(){return e.removedHighlightedRanges[1]()},ranges:{added:e.addedHighlightedRanges,removed:e.removedHighlightedRanges[0]}}})))},this._dispose=function(){f._marksMap.clear(),d.either.map(f._alertRef,(function(e){return e.dispose()}))},this._disposeIfEmpty=function(){0===f._marksMap.size&&f._dispose()},d.either.mapLeft(this._alertRef,(function(e){return x("markAlert").warn("can not take alertRef",e)}))}return Object.defineProperty(e.prototype,"state",{get:function(){return{current:this._currentState,scheduled:this._scheduledState}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"alert",{get:function(){return this._alert()},enumerable:!1,configurable:!0}),e.prototype.scheduleApply=function(e){return this._throwWhenNotAllowedState(e),this._throwWhenInFinaleState(e),(0,f.kG)(e!==S.Bd.initial,"Cannot schedule change "+this.id+" from "+this._currentState.visualState+" to initial state"),this._currentState.visualState!==S.Bd.initial||e!==S.Bd.disposed&&!S.Bd.isApplied(e)?this._scheduledState&&this._scheduledState.forceUpdate?this._scheduledState=S.rG.updateVisualState(this._scheduledState,e):this._currentState.visualState!==e||this._currentState.updateRanges?this._scheduledState=S.rG.updateVisualState(this._currentState,e):this._scheduledState=null:(this._scheduledState=null,this._currentState=S.rG.from(S.Bd.disposed),this._dispose()),this},e.prototype.scheduleUpdate=function(){this._throwWhenInFinaleState(),this._scheduledState=S.rG.updateRanges(this._scheduledState||this._currentState,!0)},e.prototype.scheduleForceUpdate=function(){this._throwWhenInFinaleState(),this._scheduledState=S.rG.forceUpdate(this._scheduledState||this._currentState,!0)},e.prototype.apply=function(){var e=this;if(S.Oe.isPending(this)){this._throwWhenInFinaleState();var t=this._getTransition();(0,o.pipe)(this.change(),p.filter((function(e){return e.rawMark.length>0})),p.map((function(n){e._handleBasicEvent(n.rawMark),n.commit(),e._onTransitionEnd(t,e)})))}},e.prototype.applyWith=function(e){var t=(0,r.__spreadArrays)([this],e);this._handleMultipleHighlights(t,(function(e){return e.change()}))},e.prototype.markByIndex=function(e){try{return this._throwWhenInFinaleState(),this._shouldInitMark&&(this._shouldInitMark=!1,this.apply()),this._markbyIndex(e)}catch(e){return p.none}},Object.defineProperty(e.prototype,"mark",{get:function(){return this.markByIndex(0)},enumerable:!1,configurable:!0}),e.prototype._iterateOverMarkAlerts=function(e,t){e.forEach((function(e){var n=e.change,r=e.ma;n.rawMark.forEach((function(e){"create"===e.action?r._setMarkAndCheckFinaleState(e.id,(0,o.pipe)(t.created.get(e.id)||d.left(new Error("Cannot get unknown mark")),p.fromEither)):"remove"===e.action&&r._removeMark(e.id)})),n.commit(),r._disposeIfEmpty()}))},e.prototype._handleMultipleHighlights=function(e,t){var n=e.map((function(e){return[e,t(e)]})).filter((function(e){var t=e[0],n=e[1];return(0,o.pipe)(n,p.filter((function(e){return 0!==e.rawMark.length||(x("markAlert").warn("rawAction must have rawMark array",{rawAction:e.action,state:(0,r.__assign)((0,r.__assign)({},t.toJSON()),{alert:void 0})}),!1)})),p.isSome)})).map((function(e){var t=e[0],n=e[1];return{ma:t,change:m.MH(n)}}));if(0!==n.length){var i=h.VS(n.map((function(e){return e.change.rawMark}))),a=this._changeMarksInDEd(i);this._iterateOverMarkAlerts(n,a)}},Object.defineProperty(e.prototype,"_mark",{get:function(){return this._markbyIndex(0)},enumerable:!1,configurable:!0}),e.prototype._markbyIndex=function(e){return this._marksMap.size>e?0===e?this._marksMap.values().next().value:Array.from(this._marksMap.values())[e]:p.none},e.prototype._setMarkAndCheckFinaleState=function(e,t){this._throwWhenInFinaleState(),this._setMark(e,t)},e.prototype._setMark=function(e,t){this._shouldInitMark=!1,this._marksMap.set(e,t)},e.prototype._removeMark=function(e){this._marksMap.delete(e)},e.prototype.change=function(){var e=this;(0,f.kG)(S.Oe.isPending(this),"Next state should be scheduled to change it",(function(){return JSON.stringify({currentState:e._currentState,aid:e.id})}));var t=this._commitTransition();return t.from.visualState!==t.to.visualState||t.to.forceUpdate||t.to.updateRanges?p.some(this._getRawActionForApply(t)):p.none},e.prototype._handleBasicEvent=function(e){var t=this,n=this._changeMarksInDEd(e);e.forEach((function(e){if(e.action===c.v.Change.ActionType.remove)t._removeMark(e.id);else{var r=(0,o.pipe)(p.fromNullable(t._marksMap.get(e.id)),p.chain(s.y),p.alt((function(){return(0,o.pipe)((e.action===c.v.Change.ActionType.create?n.created.get(e.id):n.updated.get(e.id))||d.left(new Error("Cannot get unknown mark")),p.fromEither)})));t._setMark(e.id,r)}})),this._disposeIfEmpty()},e.prototype._getTransition=function(){var e=this;return(0,f.kG)(S.Oe.isPending(this),"Next state should be scheduled to change it",(function(){return JSON.stringify({currentState:e._currentState,aid:e.id})})),{from:this._currentState,to:this._scheduledState}},e.prototype._commitTransition=function(){var e=this._getTransition();return this._currentState=(0,r.__assign)((0,r.__assign)({},e.to),{updateRanges:!1,forceUpdate:!1}),this._scheduledState=null,e},e.prototype._getRawActionForApply=function(e){var t=this;switch(e.from.visualState){case S.Bd.initial:return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit()}))),{action:"create",commit:u.Z,rawMark:this._getHighlightRanges((function(n){return t._create((function(){return n}),e)(n.meta.id)}))};default:switch(e.to.visualState){case S.Bd.disposed:var n=S.Bd.isApplied(e.from.visualState)||b.bZ.State.isRemoved(this.alert.state)&&w.$.isApplicableAlert(this.alert)&&this._getAppliedRanges(a.constVoid).length>0?this._getAppliedRanges((function(e,t){return{id:t().meta.id,range:t}})):this._getHighlightRanges((function(e){return{id:e.meta.id,range:function(){return e}}}));return{action:"remove",commit:(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit})),p.getOrElse((function(){return a.constVoid}))),rawMark:n.map((function(e){return t._remove(e.range)(e.id)}))};case S.Bd.applied:var i=this._getHighlightRanges((function(e){return t._remove((function(){return e}))(e.meta.id)})),c=(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(e){return e.commit})),p.getOrElse((function(){return a.constVoid}))),l=this._getAppliedRanges((function(n,r){return t._create(r,e)(r().meta.id)}));return{action:"replace",commit:c,rawMark:(0,r.__spreadArrays)(i,l)};default:var d=function(){return b.bZ.State.isBulkApplied(t._alert("_getRawActionForApply").state)?t._getAppliedRanges((function(e,t){return t()})):t._getHighlightRanges(s.y)};return(0,o.pipe)(this._tryToUpdateRangesInAlert(e),p.map((function(n){var r=n.commit,i=n.ranges;return t._getReplaceAction(e,d(),i.removed,r)})),p.getOrElse((function(){return{action:"update",commit:u.Z,rawMark:d().map((function(n){return t._update((function(){return n}),e)(n.meta.id)}))}})))}}},e.prototype._getReplaceAction=function(e,t,n,i){var a=this;return{action:"replace",commit:i,rawMark:(0,r.__spreadArrays)(n.map((function(e){return a._remove((function(){return e}))(e.meta.id)})),t.map((function(t){return a._create((function(){return t}),e)(t.meta.id)})))}},e.prototype._getAppliedRanges=function(e){var t=this;return(0,o.pipe)(this._alertRangeService.getAppliedRanges(this.id),d.fold((function(e){return x("markAlert").error("cannot get applied ranges",{error:e.message,alert:w.$.snapshot(t._alert("_getAppliedRanges"))}),[]}),i.mapWithIndex(e)))},e.prototype._getHighlightRanges=function(e){var t=this;return(0,o.pipe)(this._alertRangeService.getHighlightRanges(this.id),d.fold((function(n){return x("markAlert").warn("cannot get highlight ranges via range service",{error:n,alert:t._alert("_getHighlightRanges")}),(0,o.pipe)(t._alert("_getHighlightRanges_Fallback").getHighlightRanges(),i.map(e))}),i.map(e)))},e.prototype._throwWhenNotAllowedState=function(e){var t=this._alert("_throwWhenNotAllowedState");(0,f.kG)(!(!w.$.isDefault(t)&&!w.$.isSuper(t))||(!e||b.bZ.State.isBulkApplied(t.state)||!S.Bd.isApplied(e)),"Applied state isn't allowed for "+this.id)},e.prototype._throwWhenInFinaleState=function(e){(0,f.kG)(e&&S.Oe.isOneOf(S.Bd.applied)(this)?e===S.Bd.disposed||b.bZ.State.isBulkApplied(this._alert("_throwWhenInFinaleState").state):S.Oe.notAnyOf(S.Bd.disposed)(this),"'"+this._currentState.visualState+"' MarkAlert '"+this.id+"' cannot be changed"+(e?" to '"+e+"' ":""))},e.prototype.toJSON=function(){return{current:this._currentState,scheduled:this._scheduledState,mark:{id:(0,o.pipe)(this._mark,p.map((function(e){return e.id})),p.toUndefined),range:(0,o.pipe)(this._mark,p.map((function(e){return e.range})),p.toUndefined)},alert:this._alert("toJSON")}},e.prototype.equals=function(e){return S.Oe.eq.equals(this,e)},e.prototype.hashCode=function(){return(0,_.AC)(this.id)},e}();!function(e){e.compareTo=function(e){var t=(0,g.W)(l.SV.distanceFrom)(e);return function(e,n){return(0,v.qu)(Math.min.apply(Math,e.alert.getHighlightRanges().map(t)),Math.min.apply(Math,n.alert.getHighlightRanges().map(t)))}}}(C||(C={}));var x=(0,v.HP)(y.C8.Logging.getLogger)},42490:(e,t,n)=>{"use strict";n.d(t,{H:()=>a});var r,i,a,o=n(59312),s=n(73805),u=n(27221),c=n(22232),l=n(42654),d=n(64510),p=n(64909),f=n(489),m=n(76606),h=n(45980),g=n(47442),v=n(5942),y=n(43675),b=n(8125),w=n(65772),_=n(22788),S=n(97523),C=n(92932),x=n(17753),I=n(73510),A=n(52479),E=n(32952),k=n(85985),T=n(77176),L=n(2834),P=n(16118),R=n(40151),N=n(76779);!function(e){e.create=function(e){return{getAlertMuteCategory:function(t){return(0,s.pipe)(e.getById(t),p.chain((function(e){return e.muteCategory})),p.map((function(e){return e.id})))}}},e.getAlerts=function(e,t){var n={byCategory:new Map(t.map((function(e){return[e,[]]}))),all:[]};return(0,s.pipe)(e.get(),N.p.reduce(n,(function(e,n){var r=n.alert;return(0,s.pipe)(r.muteCategory,p.filter((function(e){return t.includes(e.id)})),p.map((function(e){return e.id})),p.alt((function(){return p.fromNullable(t.find(x.bZ.belongsToSpecialCategory(r)))})),p.fold((function(){return e}),(function(t){return e.byCategory.get(t).push(r),e.all.push(r),e})))})))}}(r||(r={})),function(e){var t,n;!function(e){!function(e){e.ord=_.ordString,e.show=m._3,e.create=function(e){return e}}(e.Id||(e.Id={})),e.isSpecial=function(e){return Object.values(g.JW.SpecialCategory).includes(e)},e.specialCategoryDescription="Special category"}(t=e.Category||(e.Category={})),function(e){e.filter=function(e){return d.filter((function(t){return e(t.id)}))},e.filterWithCount=function(e,t){return function(n){var i=Array.from(n.keys()),a=r.getAlerts(t,i).byCategory;return(0,s.pipe)(n,d.filterMap((function(t){return e(t.id)?p.some((0,o.__assign)((0,o.__assign)({},t),{alertsCount:a.get(t.id).filter(x.bZ.isRegistered).length})):p.none})))}}}(n=e.BaseMutedCategories||(e.BaseMutedCategories={})),function(e){var i;!function(e){var t;!function(e){e.BeforeCategoriesMuted="BeforeCategoriesMuted",e.CategoriesChanged="CategoriesChanged"}(t=e.Type||(e.Type={})),e.isMuteEvent=function(e){return e.type===t.BeforeCategoriesMuted},e.isChangedEvent=function(e){return e.type===t.CategoriesChanged}}(i=e.Events||(e.Events={})),e.create=function(e,a,o,c,l){var d=C.C8.Logging.getLogger("MutedAlertsModel"),m=u.h.create(new Map),b=new E.xQ,_=new I.w.Keeper;return _.push(e.pipe(k.h(v.h.is("session_started")),T.U((function(e){return t=e.userMutedCategories,n=t.map((function(e){return[e.userMuteCategory,{id:e.userMuteCategory,description:e.userMuteCategoryDescription,scope:e.userMuteScope}]})),new Map(n);var t,n})),L.b(A.wW(m)),L.b((function(){return b.next({type:i.Type.CategoriesChanged})}))).subscribe(),m.pipe(P.G(),T.U((function(e){return function(e,n){return{muted:y.uz(t.Id.ord)(e,n),unmuted:y.uz(t.Id.ord)(n,e)}}(e[0],e[1])})),T.U(function(e){return function(t){var n=t.muted,i=t.unmuted;return{toMute:r.getAlerts(e,n).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Muted})),toUnmute:r.getAlerts(e,i).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Unmuted}))}}}(o)),L.b((function(e){var t=e.toMute,n=e.toUnmute;t.length>0&&c.changeMuteState(t,x.bZ.MuteStateType.Muted),n.length>0&&c.changeMuteState(n,x.bZ.MuteStateType.Unmuted)}))).subscribe()),{events:b,mutedCategories:m,muteCategories:function(e,n){(0,s.pipe)(a.sendFeedback({kind:g.Mw.MUTE,userMuteScope:l,userMuteCategories:e}),S.mapLeft((function(e){d.warn("Alerts could not be muted on CAPI",e)})))();var u=r.getAlerts(o,e),c=u.all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Muted}));0===c.length&&d.warn("No alerts were muted on category mute",{categoryIds:e});var h=function(e,n,r){return function(i){var a=new Map(i);return e.forEach((function(e,i){t.isSpecial(i)?a.set(i,{id:i,scope:n,description:t.specialCategoryDescription}):(0,s.pipe)(f.lookup(0,e),p.chain((function(e){return e.muteCategory})),p.fold((function(){return r.error("No alerts to mute",i)}),(function(e){return a.set(i,{id:e.id,description:e.description,scope:n})})))})),a}}(u.byCategory,l,d)(m.get());return n&&b.next({type:i.Type.BeforeCategoriesMuted,muteScope:l,categories:e.map((function(e){return h.get(e)})),affectedAlerts:c}),m.set(h),b.next({type:i.Type.CategoriesChanged}),w.right(void 0)},unmuteCategories:function(e){return(0,s.pipe)(a.sendFeedback({kind:g.Mw.UNMUTE,userMuteScope:l,userMuteCategories:e}),S.mapLeft((function(e){d.warn("Alerts could not be un-muted on CAPI",e)})))(),0===r.getAlerts(o,e).all.filter((function(e){return e.mute!==x.bZ.MuteStateType.Unmuted})).length&&d.warn("No alerts were unmuted on category mute",{categoryIds:e}),m.modify(function(e,t){return function(n){var r=new Map(n);return e.forEach((function(e){n.has(e)?r.delete(e):t.error("Tried to unmute a category which is not muted",e)})),r}}(e,d)),b.next({type:i.Type.CategoriesChanged}),w.right(void 0)},getMutedCategories:function(){return(0,s.pipe)(m.get(),n.filterWithCount((0,h.not)(t.isSpecial),o))},getMutedSpecialCategories:function(){return(0,s.pipe)(m.get(),n.filter(t.isSpecial))},loadCachedMutedCategories:function(e){m.set(e)},dispose:function(){return _.dispose()}}},function(e){e.create=function(){return{events:R.c(),mutedCategories:u.h.create(new Map),getMutedCategories:function(){return new Map},getMutedSpecialCategories:function(){return new Map},muteCategories:function(e,t){return w.right(void 0)},unmuteCategories:function(e){return w.right(void 0)},loadCachedMutedCategories:b.ZT,dispose:b.ZT}}}(e.Mock||(e.Mock={}))}(e.CategoriesModel||(e.CategoriesModel={}))}(i||(i={})),function(e){!function(e){e.eq=l.getStructEq({id:i.Category.Id.ord,description:l.eqString,isMuted:l.eqBoolean,alertsCount:l.eqNumber})}(e.Category||(e.Category={})),function(t){function n(e){return(0,o.__assign)((0,o.__assign)({},e),{isMuted:!0})}function r(e){return(0,s.pipe)(e,d.map(n))}function i(e){return{categories:e,count:Array.from(e.values()).reduce((function(e,t){return t.isMuted?e:e+t.alertsCount}),0)}}!function(e){e.empty={categories:new Map,count:0}}(t.State||(t.State={})),function(e){var t;!function(e){e.categoryClicked="categoryClicked",e.doneClicked="doneClicked",e.closeClicked="closeClicked",e.modalOpened="modalOpened"}(t=e.Kind||(e.Kind={})),e.shouldCloseDialogue=function(e){return e.kind===t.closeClicked||e.kind===t.doneClicked}}(t.Action||(t.Action={})),function(t){t.create=function(t){var n=u.h.create(p.none),a=n.view(p.map(i)),l=new E.xQ,d=l.subscribe(function(t,n){return function(i){switch(i.kind){case e.Dialogue.Action.Kind.categoryClicked:t.modify(p.map((function(e){var t=new Map(e),n=e.get(i.categoryId);return t.set(i.categoryId,(0,o.__assign)((0,o.__assign)({},n),{isMuted:i.isMuted})),t})));break;case e.Dialogue.Action.Kind.doneClicked:n.unmuteCategories(i.unmutedCategories),t.set(p.none);break;case e.Dialogue.Action.Kind.closeClicked:t.set(p.none);break;case e.Dialogue.Action.Kind.modalOpened:t.set(p.some((0,s.pipe)(n.getMutedCategories(),r)));break;default:(0,c.vE)(i)}}}(n,t));return{state:a,actionEvents:l,dispose:function(){return d.unsubscribe()}}}}(t.ViewModel||(t.ViewModel={}))}(e.Dialogue||(e.Dialogue={}))}(a||(a={}))},45429:(e,t,n)=>{"use strict";n.d(t,{DV:()=>Y,eZ:()=>Z,UC:()=>J});var r,i,a,o=n(59312),s=n(45980),u=n(73805),c=n(49524),l=n(12447),d=n(59443),p=n(95574),f=n(22232),m=n(83078),h=n(8125),g=n(55415),v=n(65772),y=n(64909),b=n(92932),w=n(17753),_=n(10002),S=n(52479),C=n(66265),x=n(78259),I=n(76974),A=n(77176),E=n(17343),k=n(93508),T=n(28043),L=n(18625),P=n(66310),R=n(40151),N=n(24209),M=n(91224),F=n(38194),O=n(598),B=n(83401),D=n(41398),U=n(55721),W=n(95093),H=n(16118),z=n(85985),j=n(66910),G=n(91402),q=n(38524),$=n(71517),V=n(46616),X=n(13338);!function(e){e.CARD_CONTENT_OFFSET_REM=3.4,e.WITH_LABEL_CARD_CONTENT_OFFSET_REM=e.CARD_CONTENT_OFFSET_REM+1,e.contentOffsetGetter=function(t,n){return void 0===t&&(t=e.CARD_CONTENT_OFFSET_REM),void 0===n&&(n=e.WITH_LABEL_CARD_CONTENT_OFFSET_REM),function(e,r){return Math.round((e?n:t)*r)}}}(r||(r={})),function(e){e.cardPositionGetter=function(e,t){return function(n,r){var i=new V.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return p.vM((function(){return(0,u.pipe)(e.view(q.nL.getLens).get(),y.chain((function(e){var t=e.items;return(0,u.pipe)(t.get(n),y.map((function(e){var t=e.value;return(0,u.pipe)(r,y.fold((function(){return(0,s.flow)($.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop,i.converters.viewportToWindow)(t.positionState.absTop)}),s.identity))})))})),m.MH)}))}},e.cardPositionInViewportGetter=function(e,t){return function(n,r){var i=new V.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return p.vM((function(){return(0,u.pipe)(e.view(q.nL.getLens).get(),y.chain((function(e){var t=e.items;return(0,u.pipe)(t.get(n),y.chain((function(e){var a,o,c,l=e.value;return(0,u.pipe)(r,y.map(i.converters.windowToViewport),y.alt((function(){return y.some((0,s.flow)($.L.AbsTop.ISO.wrap,i.converters.absTopToViewportTop)(l.positionState.absTop))})),y.map((a=l,o=function(e,t){return(0,u.pipe)(t.get(e),y.map((function(e){var n=e.index;return{before:(0,u.pipe)(t.getAt(n-1),y.map((function(e){return e.positionState.height})),y.getOrElse((function(){return 0}))),after:(0,u.pipe)(t.getAt(n+1),y.map((function(e){return e.positionState.height})),y.getOrElse((function(){return 0})))}})),y.getOrElse((function(){return{before:0,after:0}})))}(n,t),c=i.viewport,function(e){var t=(0,X.v_)({cardTop:e,cardHeight:a.positionState.height,viewportHeight:c.height,padding:o});return $.L.FromViewportTop.ISO.modify($.L.concatC(-t))(e)})),y.map(i.converters.viewportToWindow))})))})),m.MH)}))}}}(i||(i={})),function(e){var t=function(e,t,n,r){var i=r.viewport.get(),a=r.scrollTop.get(),o=$.L.converters(a,$.r.FromWindowTop.ISO.unwrap(i.top),r.paddingTop.get());return p.vM((function(){return(0,u.pipe)(q.nL.getLens(n),y.chain((function(t){return t.items.get(e)})),y.map((function(e){return $.L.AbsTop.ISO.wrap(e.value.positionState.absTop)})),y.map((function(e){return o.absTopToViewportTop(e)})),y.fold((function(){throw new f.ej("Cannot get offset for unknown card")}),(function(e){var n=o.windowToViewport(t);return $.L.FromViewportTop.ISO.unwrap(e)-$.L.FromViewportTop.ISO.unwrap(n)})))}))};e.moveCardToPositionSyncGetter=function(e,n){return function(r){return(0,u.pipe)(t(r.id,r.position,e.get(),n),v.chain((function(e){return n.moveCardsBy(e,"moveCardToPositionAnimated")})))}},e.moveCardToPositionAnimatedGetter=function(e,n){return function(r){return(0,u.pipe)(t(r.id,r.position,e.get(),n),v.fold((function(e){return G._(e)}),(function(e){return n.moveCardsByAnimated(e,"moveCardToPositionAnimated")})))}}}(a||(a={}));var Y,Z,J,K=n(32917),Q=n(36473);!function(e){e[e.ANIMATE_ALL=0]="ANIMATE_ALL",e[e.ANIMATE_MARK=1]="ANIMATE_MARK",e[e.NO_ANIMATION=2]="NO_ANIMATION"}(Y||(Y={})),function(e){e.cardSuggestedPositionGetter=function(e,t){return function(n,r,i,a){var o="cardTop"===a?0:t(r);return(0,u.pipe)(e(n,(0,u.pipe)(i,y.map($.r.FromWindowTop.ISO.modify($.L.concatC(-o))))),v.map((function(e){return{top:e,contentOffset:o}})))}},e.getSuperScrollMapper=function(t,n,o){var s=a.moveCardToPositionAnimatedGetter(t,n),c=a.moveCardToPositionSyncGetter(t,n),l=r.contentOffsetGetter();return{setCardPosition:function(e,t,n,r){var i={top:r,contentOffset:l(t,o.get())};return(n?s({id:e,position:r}):I.of(c({id:e,position:r})).pipe(A.U(p.MH))).pipe(E.h(i),k.O(i),T.x())},getCardSuggestedPosition:e.cardSuggestedPositionGetter(i.cardPositionGetter(t,n),(function(e){return l(e,o.get())})),getCardSuggestedPositionInViewport:e.cardSuggestedPositionGetter(i.cardPositionInViewportGetter(t,n),(function(e){return l(e,o.get())})),willFitViewport:function(e,r){return(0,u.pipe)(t.get(),(function(t){return!!q.nL.hasItems(t)&&function(e,t){return function(n,r){var i=new V.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,u.pipe)(e.currentLens.items,(function(e){return(0,u.pipe)(e.get(n),y.map((function(e){var t=e.value;return 0===(0,X.v_)({cardTop:i.converters.windowToViewport(r),cardHeight:t.positionState.height,viewportHeight:i.viewport.height,padding:{before:0,after:0}})})))}),m.MH)}}(t,n)(e,r)}))}}}}(Z||(Z={})),function(e){e.getMapper=function(e,t,n){return{moveAlertHighlightInViewport:function(t,n,r){return e.ensureAlertHighlightInViewport(t,$.r.FromWindowTop.ISO.unwrap(n),r)},getMarkAlertPosition:function(r){return(0,u.pipe)(e.getMarkByAlert(r),y.chain((function(i){return(0,u.pipe)(i.getRect(),v.map(l.n.relativeToViewport),v.map((function(e){return y.some(e.top)})),v.getOrElse((function(){return n.debug("Cached alert is missing, falling back to flush"),function(n){return t.flushChanges(),(0,u.pipe)(e.getMarkByAlert(n),y.chain((function(e){return(0,u.pipe)(y.fromEither((0,u.pipe)(e.getRect(),v.map(l.n.relativeToViewport),v.map((function(e){return e.top})))))})))}(r)})),y.map($.r.FromWindowTop.ISO.wrap))})))}}}}(J||(J={}));var ee,te;!function(){function e(e,t){this._cardPositions=e,this._markPositions=t,this._log=b.C8.Logging.root.getLogger("AlignmentViewModel")}e.prototype.alignCardToMark=function(e,t,n){var r=this,i=e.id,a=e.renderOptions.features,o=e.activeAlert,s=e.activeHighlightIndex;return L.P((function(){return I.of(r._markPositions.getMarkAlertPosition({alert:o,highlightIndex:s}))})).pipe(P.w(y.fold(R.c,(function(e){return I.of(e)}))),A.U((function(e){return{mark:e,card:p.MH(r._cardPositions.getCardSuggestedPositionInViewport(i,a.has(Q.j.Features.showLabel),y.some(e),"cardContentTop"))}})),P.w((function(e){var u=e.card,c=e.mark;return N.T(r._cardPositions.setCardPosition(i,a.has(Q.j.Features.showLabel),t===Y.ANIMATE_ALL,$.r.FromWindowTop.ISO.modify($.L.concatC(-u.contentOffset))(c)),S.Ft(r._markPositions.moveAlertHighlightInViewport({alert:o,highlightIndex:s},$.r.FromWindowTop.ISO.modify($.L.concatC(u.contentOffset))(u.top),t===Y.ANIMATE_ALL?d.uq.initial:d.uq.none))(n))})),E.h(S.PU),M.K((function(e){return r._log.error("Cannot align card to mark",e),R.c()})),F.B())},e.prototype.alignMarkToCard=function(e,t,n){var r=this,i=e.id,a=e.renderOptions.features,o=e.activeHighlightIndex,s=e.activeAlert;return L.P((function(){return I.of(r._markPositions.getMarkAlertPosition({alert:s,highlightIndex:o}))})).pipe(C.oA,P.w((function(e){var t=p.MH(r._cardPositions.getCardSuggestedPositionInViewport(i,a.has(Q.j.Features.showLabel),y.none,"cardContentTop"));return r._cardPositions.setCardPosition(i,a.has(Q.j.Features.showLabel),!1,$.r.FromWindowTop.ISO.modify($.L.concatC(-t.contentOffset))(e)).pipe(T.x(),E.h((0,u.pipe)(n,y.filter((function(e){return r._cardPositions.willFitViewport(i,$.r.FromWindowTop.ISO.modify($.L.concatC(-t.contentOffset))(e))})),y.getOrElse((function(){return $.r.FromWindowTop.ISO.modify($.L.concatC(t.contentOffset))(t.top)})))))})),P.w((function(e){return r._markPositions.moveAlertHighlightInViewport({alert:s,highlightIndex:o},e,t===Y.ANIMATE_ALL?d.uq.fake:d.uq.none)})),E.h(S.PU),M.K((function(e){return r._log.error("Cannot align mark to card",e),R.c()})),F.B())},e.prototype.alignMarkTo=function(e,t,n,r){var i=this;return L.P((function(){return I.of(i._markPositions.getMarkAlertPosition(t))})).pipe(A.U(y.map((0,s.flow)($.r.FromWindowTop.ISO.modify((function(e){return e-$.r.FromWindowTop.ISO.unwrap(n)})),$.r.FromWindowTop.ISO.unwrap))),C.oA,P.w((function(e){return i._markPositions.moveAlertHighlightInViewport(t,n,r===Y.ANIMATE_ALL?d.uq.initial:d.uq.none).pipe(E.h(e))})),P.w((function(t){var n=p.MH(i._cardPositions.getCardSuggestedPositionInViewport(e.id,e.renderOptions.features.has(Q.j.Features.showLabel),y.none,"cardContentTop"));return i._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(Q.j.Features.showLabel),!1,$.r.FromWindowTop.ISO.modify($.L.concatC(t))(n.top))})),E.h(S.PU),M.K((function(e){return i._log.error("Cannot align mark to suggested position",e),R.c()})),F.B())},e.prototype.alignCardTo=function(e,t,n){var r=this,i=n!==Y.NO_ANIMATION;return L.P((function(){return I.of(p.MH(r._cardPositions.getCardSuggestedPosition(e.id,e.renderOptions.features.has(Q.j.Features.showLabel),y.some(t),"cardTop")))})).pipe(P.w((function(t){return r._cardPositions.setCardPosition(e.id,e.renderOptions.features.has(Q.j.Features.showLabel),i,t.top)})),E.h(S.PU),M.K((function(e){return r._log.error("Cannot align card to required top",e),R.c()})),F.B())}}();!function(e){var t=function(){this.alignCardToMark=function(){return R.c()},this.alignMarkToCard=function(){return R.c()},this.alignCardTo=function(){return R.c()},this.alignMarkTo=function(){return R.c()}};e.Mock=t}(ee||(ee={})),function(e){var t,n;!function(e){var t;!function(e){e.below="below",e.above="above",e.intersects="intersects"}(t=e.RelativePosition||(e.RelativePosition={})),e.getRelativePosition=function(e,n,r){return n.top+r>e.bottom?t.below:e.top>n.bottom?t.above:t.intersects}}(t||(t={})),e.createAlignmentOnTypingEffect=function(e,t,n,r){var i=e.view(q.nL.mapper((function(e){var t=e.currentLens;return(0,u.pipe)(y.some(t),y.filter(X.Bk))}))).pipe(A.U(y.chain(r),y.filter(X.S4)),C.cp((function(e){return n.pipe(P.w(S.b2.rafScheduler),P.w((function(){return t.alignCardToMark(e,Y.NO_ANIMATION,!1)})))})));return{id:"alignmentOnTyping",when:_.R.isWithAlertsId,what:q.nL.Effect.Applicator.create(i.pipe(O.c(B.F())))}},e.createAlignOnDisjointedAreasEffect=function(e,n,r,i){var a=e.view((0,s.flow)(q.nL.getLens,y.filter((function(e){return y.isNone(q.In.getActiveItem(e))&&e.isCardsHeightValid&&e.items.size>0})))),o=a.pipe(A.U(y.isSome),T.x(),P.w(S.Ft(r.changes.pipe(k.O(S.PU),P.w(S.b2.rafScheduler),A.U((function(){return y.some(function(e){var t=e.viewport.getValue();return{top:Math.min(t.text.top,t.wrapper.top),bottom:t.text.bottom}}(r))})),A.U(y.filter((function(e){return e.top-e.bottom!=0})))))),D.M(a.pipe(A.U(y.map((function(e){return e.items})))),m.vB((function(r,a){return(0,u.pipe)(K.YA(e,i),y.map((function(e){return{top:$.r.FromWindowTop.ISO.unwrap(e.top),bottom:$.r.FromWindowTop.ISO.unwrap(e.bottom)}})),y.chain((function(e){return(0,u.pipe)(function(e,n,r){var i=(0,u.pipe)(e.getAt(0),y.map((function(e){return e.positionState.height})),y.getOrElse((function(){return 0}))),a=t.getRelativePosition(n,r,i);switch(a){case t.RelativePosition.above:return(0,u.pipe)(e.getAt(0),y.map((function(e){return{card:e,top:n.top}})));case t.RelativePosition.below:return(0,u.pipe)(e.getAt(0),y.map((function(e){return{card:e,top:n.bottom-e.positionState.height}})));case t.RelativePosition.intersects:return y.none;default:return(0,f.vE)(a)}}(a,r,e),y.map((function(e){var t=e.card,r=e.top;return n.alignCardTo(t,$.r.FromWindowTop.ISO.wrap(r),Y.NO_ANIMATION)})))})),y.getOrElse(R.c))}))),P.w(y.fold(R.c,c.y)));return{id:"alignOnDisjointedAreas",when:_.R.isWithAlertsId,what:q.nL.Effect.Applicator.create(o.pipe(O.c(B.F())))}},e.createAlignOnResizeSideEffect=function(e,t,n,r,i){void 0===i&&(i=S.b2.rafScheduler);var a=e.view(q.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return y.some({currentLens:t,alertSource:n})}))).view(y.filter((function(e){var t=e.currentLens;return(0,X.Bk)(t)}))).view(y.chain((function(e){var t=e.currentLens,n=e.alertSource;return(0,u.pipe)(r(t),y.filter(X.S4),y.map((function(e){return{card:e,source:n,lensId:t.id}})))}))),o=x.Qr.pipe(U.p(100),W.T(n),D.M(a,(function(e,t){return t})),P.w(i),P.w(y.fold(R.c,(function(e){var n=e.card;return t.alignCardToMark(n,Y.NO_ANIMATION,!1)}))));return{id:"alignOnResizeSideEffect",when:_.R.isWithAlertsId,what:q.nL.Effect.Applicator.create(o.pipe(O.c(B.F())))}},function(e){e.skip="skip"}(n=e.SkipAlertActionSource||(e.SkipAlertActionSource={})),e.createAlignmentSideEffect=function(e,t,r,i,a,l){void 0===i&&(i=function(e,t){return t}),void 0===l&&(l=S.b2.rafScheduler);var d=(0,h.Kg)(j.l.isAlertMinicardButtonClick,j.l.isSwitchToClosestByViewport,j.l.isAlertCardShow,j.l.isCardExpand,j.l.isBulkAcceptItemShow),p=N.T(e.view(q.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return y.some({currentLens:t,alertSource:n})}))).pipe(k.O(y.none),A.U(y.map((function(e){return e.currentLens.id}))),H.G(),z.h((function(e){var t=e[0],n=e[1];return(0,u.pipe)(m.vB((function(e,t){return e!==t}))(t,n),y.exists(c.y))})),E.h(y.none)),e.view(q.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return y.some({currentLens:t,alertSource:n})}))).pipe(z.h(y.exists((function(e){var t=e.currentLens;return(0,X.Bk)(t)}))),A.U(y.chain((function(e){var t=e.currentLens,n=e.alertSource;return(0,u.pipe)(a(t),y.filter(X.S4),y.map((function(e){return{card:e,source:n,lensId:t.id}})))}))))).pipe(T.x((0,s.flow)(m.vB((function(e,t){return e.lensId===t.lensId&&e.card.activeAlert.id===t.card.activeAlert.id&&e.card.visualState.transition.type===t.card.visualState.transition.type&&e.card.activeHighlightIndex===t.card.activeHighlightIndex})),y.exists(c.y)))),f=r.pipe(z.h(d),A.U(y.some),k.O(y.none),H.G(),z.h((0,s.flow)((0,s.tupled)(m.vB((function(e,t){return!j.l.isAlertCardShow(t)||!j.l.isAlertMinicardButtonClick(e)}))),y.getOrElse(s.constFalse))),A.U((function(e){var t=e[1];return(0,u.pipe)(t,y.filter(j.l.isAlertMinicardButtonClick),y.map(g.ei("clickPoint")))})),k.O(y.none)).pipe(P.w((function(e){return p.pipe(z.h(y.exists((function(e){return e.source===w.l$.sidebar}))),A.U((0,s.flow)(y.chain((function(t){return y.some((0,o.__assign)((0,o.__assign)({},t),{clickPoint:e}))})))))}))),v=p.pipe(z.h(y.exists((function(e){return e.source!==w.l$.sidebar}))),A.U((function(e){return(0,u.pipe)(e,y.chain((function(e){return y.some((0,o.__assign)((0,o.__assign)({},e),{clickPoint:y.none}))})))}))),b=N.T(f,v).pipe(k.O(y.none),H.G(),A.U((function(e){var t=e[0],n=e[1];return(0,u.pipe)(n,y.map((function(e){return{card:e.card,source:e.source,animate:(0,u.pipe)(t,m.wo((function(t){return t.lensId===e.lensId}))),clickPoint:(0,u.pipe)(n,y.chain(g.ei("clickPoint")),y.map((0,s.flow)(g.ei("y"),$.r.FromWindowTop.ISO.wrap)))}})))})),P.w(y.fold(R.c,l)),P.w((function(e){var r=e.card,a=e.source,o=e.animate,s=e.clickPoint;return(0,u.pipe)(i(r,a),(function(e){return e===n.skip?B.C:function(e,n,r,i){if(r===w.l$.text)return t.alignCardToMark(e,n?Y.ANIMATE_ALL:Y.NO_ANIMATION,!0);if(r===q.h8.forceText)return t.alignCardToMark(e,Y.NO_ANIMATION,!1);var a=r===w.l$.sidebar;return t.alignMarkToCard(e,a?n?Y.ANIMATE_ALL:Y.ANIMATE_MARK:Y.NO_ANIMATION,i)}(r,o,e,s)}))})));return{id:"alignmentSideEffect",when:_.R.isWithAlertsId,what:q.nL.Effect.Applicator.create(b.pipe(O.c(B.F())))}}}(te||(te={}))},38264:(e,t,n)=>{"use strict";n.d(t,{dv:()=>C,Xx:()=>te});var r,i=n(59312),a=n(95686),o=n(45980),s=n(73805),u=n(32952),c=n(27221),l=n(47442),d=n(72635);!function(e){var t;e.URI="IOOption",e.ioOption=(0,i.__assign)({URI:e.URI},(0,d.D)(a.io)),t=(0,s.pipeable)(e.ioOption),e.map=t.map,e.chain=t.chain,e.ap=t.ap,e.alt=t.alt,e.apFirst=t.apFirst,e.apSecond=t.apSecond,e.of=e.ioOption.of,e.fold=function(t,n){return function(r){return e.ioOption.fold(r,t,n)}},e.fromM=e.ioOption.fromM}(r||(r={}));var p=n(22232),f=n(83078),m=n(8125),h=n(489),g=n(65772),v=n(64909),y=n(92932),b=n(17753),w=n(24273),_=n(10002),S=n(66910);var C,x=function(){function e(t,n){void 0===n&&(n=new URLSearchParams),this.base=t,this.params=n;var r=e._toString(t,n).length;(0,p.kG)(r<e.MAX_URL_LENGTH,"url exceeded length limit",String(r))}return e.prototype.addParams=function(t){var n,r=Object.entries(t).reduce((function(e,t){var n=t[0],r=t[1];return e.append(n,r),e}),(n=this.params,new URLSearchParams(n.toString())));return new e(this.base,r)},e.prototype.toString=function(){return e._toString(this.base,this.params)},e._toString=function(e,t){var n=t.toString();return e+(n.length?"?"+n:"")},e.MAX_URL_LENGTH=2083,e}(),I=n(73510),A=n(95053),E=n(598),k=n(40151),T=n(76974),L=n(66310),P=n(91402),R=n(77176),N=n(79462),M=n(83401),F=n(77843),O=n(93508),B=n(95093),D=n(85985),U=n(36919),W=n(2834),H=n(67434),z=n(38194),j=n(80900),G=n(13444),q=n(49524),$=n(40250),V=n(45429),X=n(41199),Y=n(40644),Z=n(50536),J=n(87280),K=n(38524),Q=n(31346);!function(e){e.changeAlertEffect=function(e,t,n,r,i,a,o,u){return{id:"changeAlertEffect",when:_.R.isWithAlertsId,what:K.nL.Effect.SwitchAlert.create(t.actionEvents.pipe(L.w((function(t){var c=e.get();if(!K.nL.hasCards(c))return P._(new p.ej("Cannot update state without cards"));switch(t.type){case S.l.Type.alertMinicardButtonClick:return(0,s.pipe)(i.getRegistered(t.alertHighlight.alert.id),v.fold((function(){return u.error("somehow we got click on non registered alert",{alert:X.$.snapshot(t.alertHighlight.alert),alertInRepo:(0,s.pipe)(i.getById(t.alertHighlight.alert.id),v.map(X.$.fromModel),v.map(X.$.snapshot)),state:K.nL.snapshot(Z.Mq.snapshot,r)(c)}),k.c()}),(function(){return T.of(t.alertHighlight)})));case S.l.Type.cardMatchesNavigationButtonClick:var l=t.transitionTo;switch(l.kind){case"anotherAlert":return(0,s.pipe)("right"===t.direction?n.nextAlert(l.card):(0,s.pipe)(n.prevAlert(l.card),f.vx(n.anyRegisteredAlert(l.card))),v.fold(k.c,(function(e){return T.of({alert:e,highlightIndex:0})})));case"sameAlert":return(0,s.pipe)(i.getRegistered(l.card.activeAlert.id),v.fold(k.c,(function(){return T.of({alert:l.card.activeAlert,highlightIndex:l.highlightIndex})})));default:return(0,p.vE)(l)}case S.l.Type.switchToClosestByViewport:return function(e,t,n,r){var i=function(e){return(0,s.pipe)(t,v.map((function(t){return t.alignMarkToCard(e,V.DV.ANIMATE_ALL,v.none).pipe(E.c(k.c()))})),v.getOrElse((function(){return k.c()})))};return(0,s.pipe)(r((function(t){return(t.lensId===e.id||_.R.isMainLens(e.id))&&!b.bZ.isPremium(t)}),"middleOfTheViewport"),v.fold(k.c,(function(t){return(0,s.pipe)(n(e),v.filter((function(e){return e.activeAlert.id===t.alert.id})),v.fold((function(){return T.of(t)}),i))})))}(c.currentLens,a,r,o);default:return k.c()}})),R.U((function(e){return{alertHighlight:e,alertSource:b.l$.sidebar,options:{order:"lensOrder"}}}))))}},e.createSendActiveAlertFeedbacksEffect=function(e,t,n,r,i){var a=e.view(K.nL.getActiveAlert(t)).pipe(R.U(v.filter((function(e){return v.isSome(r.getRegistered(e.id))&&!b.bZ.isInPremiumLens(e)}))),L.w(v.fold(k.c,(function(t){return N.y.create((function(){return(0,s.pipe)(n.applyFeedback(t.id,{kind:l.PZ.LOOKED,subtype:w.J.getSubTypeFromLens(e.get().currentLens.id)},b.l$.sidebar),g.fold(i.handler("Failed to send LOOKED feedback").error,o.constVoid)),function(){v.isSome(r.getRegistered(t.id))&&(0,s.pipe)(n.applyFeedback(t.id,{kind:l.PZ.CLOSED,subtype:w.J.getSubTypeFromLens(e.get().currentLens.id)},b.l$.sidebar),g.fold(i.handler("Failed to send CLOSED feedback: ").error,o.constVoid))}}))}))));return{id:"sendActiveAlertFeedbacksEffect",when:o.constTrue,what:K.nL.Effect.Applicator.create(a.pipe(E.c(M.F())))}}}(C||(C={}));var ee,te=function(){function e(e,t,n,r,a,c,d,h,_,C,x,E,k){var T=this;this._ops=e,this._navigationEvents=t,this._cardFactory=n,this._alertsService=r,this._markOnboardingAsSeen=a,this._markMuteQuotedAdviceAsDismissed=c,this._sendToUpgradeExperiment=h,this._sendToSignInExperiment=_,this._getActiveItemWithAlert=x,this._checksFeedCapabilities=E,this._lensState=k,this._log=y.C8.Logging.getLogger("CardsViewModelImpl",y.zW.LogLevel.DEBUG),this._subs=new I.w.Keeper,this._flushCompleteTransition=new u.xQ,this._flushPositionAnimation=new u.xQ,this.actionEvents=new u.xQ,this.completePositionAnimation=new u.xQ,this.changePosition=new u.xQ,this._transitionBuffer=F.F(100).pipe(O.O(0),B.T(this._flushCompleteTransition)),this._positionAnimationBuffer=F.F(100).pipe(O.O(0),B.T(this._flushPositionAnimation)),this._startTransitionStateChanges=this.actionEvents.pipe(D.h(S.l.isStartTransitionTo),R.U((function(e){return function(t){var n=t.currentLens,r=T._applyStartVSChange(n.items,[[e.id,e.transition]]);return K.nL.Prism.getLens().compose(Q.v.Prism.items).set(r,t)}}))),this._completeTransitionStateChanges=this.actionEvents.pipe(D.h(S.l.isCompleteTransitionTo),U.f(this._transitionBuffer),D.h(m.Dw),R.U((function(e){return function(t){var n=t.currentLens,r=T._applyCompleteVSChange(n.items,e.map((function(e){return[e.id,e.transitionId]})));return T._log.isEnabled(y.zW.LogLevel.TRACE)&&T._log.trace("batch transition complete",{events:e,diff:A.aW.diff(n.items,r)}),K.nL.Prism.getLens().compose(Q.v.Prism.items).set(r,t)}}))),this._changePositionEffect=this.changePosition.pipe(R.U((function(e){var t=e.id,n=e.height;return function(e){var r=(0,s.pipe)($.l.update(e.currentLens.items,t,(function(e){return T._checksFeedCapabilities.changePosition(J.Z.changeHeight(e.positionState,n))(e)})),g.fold((function(){return e.currentLens.items}),o.identity));return K.nL.Prism.getLens().compose(Q.v.Prism.items).set(r,e)}}))),this._transitionEndStateChanges=this.completePositionAnimation.pipe(U.f(this._positionAnimationBuffer),D.h(m.Dw),R.U((function(e){return function(t){var n=t.currentLens.items,r=e.map((function(e){return[e,!1]})).reduce((function(e,t){var n=t[0],r=t[1];return(0,s.pipe)($.l.update(e,n,(function(e){return T._checksFeedCapabilities.changePosition(J.Z.changeAnimationInProgress(e.positionState,r))(e)})),g.fold((function(){return e}),o.identity))}),n);return K.nL.Prism.getLens().compose(Q.v.Prism.items).set(r,t)}}))),this._switchToNextChanges=this.actionEvents.pipe(D.h((function(e){return e.type===S.l.Type.switchToNext})),R.U((function(){return function(e){return e.patch({currentLens:(0,s.pipe)(K.nL.hasItems(e)?T._checksFeedCapabilities.findNextAlert(e.currentLens):v.none,v.fold((function(){return(0,s.pipe)(K.nL.getActiveAlert(T._getActiveItemWithAlert)(e),v.fold((function(){throw new p.ej("Can not switch from non-existing card")}),(function(t){return T._checksFeedCapabilities.release(t)(e.currentLens)})))}),(function(t){return K.nL.hasItems(e)?T._checksFeedCapabilities.selectItemByAlert(t)(e.currentLens):e.currentLens}))),switchOrder:"lensOrder",alertSource:b.l$.sidebar})}}))),this._dismissMuteQuotedAdvice=this.actionEvents.pipe(D.h(S.l.isDismissMuteQuotedAdvice),W.b(this._markMuteQuotedAdviceAsDismissed),R.U((function(){return function(e){var t=e.currentLens.items.filter((0,o.flow)(Y.X.getActiveAlert,v.exists(X.$.isInQuotes))).keys().map((function(e){return[e,!1]})).reduce((function(e,t){var n=t[0];return(0,s.pipe)($.l.update(e,n,T._cardFactory.hideMuteQuotedAdvice),g.fold((function(){return e}),o.identity))}),e.currentLens.items);return K.nL.Prism.getLens().compose(Q.v.Prism.items).set(t,e)}}))),this._changeUserInput=this.actionEvents.pipe(D.h(S.l.isChangeUserInput),W.b((function(e){var t=e.alertId,n=e.userInput;T._alertsService.changeGapValue(t,n)})),R.U((function(e){var t=e.cardId,n=e.userInput;return function(e){var r=(0,s.pipe)($.l.update(e.currentLens.items,t,(function(e){return T._cardFactory.updateUserInput(e,n?v.some(n):v.none)})),g.fold((function(){return e.currentLens.items}),o.identity));return K.nL.Prism.getLens().compose(Q.v.Prism.items).set(r,e)}}))),this._focusChecksFeedItem=this.actionEvents.pipe(D.h(S.l.isMiniItemClick),R.U((function(e){return function(t){return t.patch({currentLens:(0,s.pipe)(t.currentLens.items.find((function(t){return t.id===e.id})),v.fold((function(){return T._log.error("Can not switch from non-existing item"),t.currentLens}),(function(){return(0,o.unsafeCoerce)((0,s.pipe)(t.currentLens,T._checksFeedCapabilities.selectItemById(e.id)))}))),switchOrder:"lensOrder",alertSource:b.l$.sidebar})}}))),this._applyTakeawayFeedback=this.actionEvents.pipe(D.h(S.l.isTakeawayFeedbackAction),R.U((function(e){var t=e.alertId,n=e.type;return function(e){var r=e.currentLens.items.filter((0,o.flow)(Y.X.getActiveAlert,v.exists((function(e){return e.id===t})))).keys().map((function(e){return(0,o.tuple)(e,n)})).reduce((function(e,t){var n=t[0],r=t[1];return(0,s.pipe)($.l.update(e,n,(function(e){return T._cardFactory.updateTakeawayFeedback(e,v.some(r===S.l.Type.takeawayCorrectlyDetected?b.TO.correctlyDetected:r===S.l.Type.takeawayIncorrectlyDetected?b.TO.incorrectlyDetected:(0,p.vE)(r)))})),g.fold((function(){return e}),o.identity))}),e.currentLens.items);return K.nL.Prism.getLens().compose(Q.v.Prism.items).set(r,e)}}))),this._smartPhrasesFeedback=this.actionEvents.pipe(D.h(S.l.isSmartPhrasesFeedbackAction),R.U((function(e){var t=e.cardId,n=e.alertId,r=e.feedbackType;return(0,s.pipe)(T._alertsService.changeSmartPhrasesFeedback(n,r),g.map((function(e){return{newAlert:e,cardId:t}})))})),W.b((function(e){return T._sendSmartPhrasesUpdateStateAction(e)})),R.U((function(e){return T._updateSmartPhrasesCard(e)}))),this._smartPhrasesShowMoreIdeas=this.actionEvents.pipe(D.h(S.l.isSmartPhrasesShowMoreIdeasAction),R.U((function(e){var t=e.cardId,n=e.alertId;return(0,s.pipe)(T._alertsService.rotateSmartPhrasesReplacements(n),g.map((function(e){return{newAlert:e,cardId:t}})))})),W.b((function(e){return T._sendSmartPhrasesUpdateStateAction(e)})),R.U((function(e){return T._updateSmartPhrasesCard(e)}))),this._smartPhrasesApply=this.actionEvents.pipe(D.h(S.l.isSmartPhrasesApplyAction),R.U((function(e){var t=e.cardId,n=e.alertId,r=e.replacementIndex;return(0,s.pipe)(T._alertsService.discardSmartPhrasesReplacement(n,r),g.map((function(e){return{newAlert:e,cardId:t}})))})),W.b((function(e){return T._sendSmartPhrasesUpdateStateAction(e)})),W.b((function(e){return T._sendSmartPhrasesHighlightLastAppliedReplacementAction(e)})),R.U((function(e){return T._updateSmartPhrasesCard(e)}))),this._smartPhrasesHighlightLastAppliedReplacement=this.actionEvents.pipe(D.h(S.l.isSmartPhrasesHighlightLastAppliedReplacementAction),R.U((function(e){var t=e.cardId,n=e.alertId;return(0,s.pipe)(T._alertsService.highlightSmartPhrasesLastAppliedReplacement(n),g.map((function(e){return{newAlert:e,cardId:t}})))})),R.U((function(e){return T._updateSmartPhrasesCard(e)}))),this._smartPhrasesRestoreOriginalHighlight=this.actionEvents.pipe(D.h(S.l.isSmartPhrasesRestoreOriginalHighlightAction),R.U((function(e){var t=e.cardId,n=e.alertId;return(0,s.pipe)(T._alertsService.restoreSmartPhrasesOriginalHighlight(n),g.map((function(e){return{newAlert:e,cardId:t}})))})),D.h((function(e){return(0,s.pipe)(e,g.fold(o.constTrue,(function(e){var t=e.newAlert;return Boolean(t)})))})),R.U((function(e){return T._updateSmartPhrasesCard(e)}))),this._sendToUpgrade=(0,s.pipe)(this._sendToUpgradeExperiment,v.map((function(e){return e(T.actionEvents)}))),this._sendToSignIn=(0,s.pipe)(this._sendToSignInExperiment,v.map((function(e){return e(T.actionEvents)}))),this._sendFeedback=(0,o.flow)((function(e,t){return T._alertsService.applyFeedback(e,(0,i.__assign)((0,i.__assign)({},t),{subtype:w.J.getSubTypeFromLens(T._lensState.get().currentLens.id)}),b.l$.sidebar)}),g.fold(this._log.handler("error calling alert service to send a feedback").error,o.constVoid)),this._showIgnoreForm=new u.xQ,this._showIgnoreFormEffect=(0,s.pipe)(this._showIgnoreForm,R.U((function(e){return function(t){return K.nL.Prism.getLens().compose(Q.v.Prism.items).set(T._applyStartVSChange(t.currentLens.items,[[e.id,{type:"feedback_form",clockwise:!0,options:e.options}]]),t)}}))),this._handleAlertIgnore=(0,o.flow)(ne((function(e){return function(){return T._sendFeedback(e,{kind:l.PZ.IGNORE})}}),(function(e){return function(){return T._showIgnoreForm.next(e)}})),(function(e){return T.actionEvents.pipe(D.h(S.l.isAlertIgnoreAction)).subscribe((function(t){return e(t)()}))})),this.hovered=this.actionEvents.pipe(D.h(S.l.isHoverAction),W.b((function(){return T._ops.flush()})),H.R((function(e,t){return"hover"===t.kind?v.some(t.id):(0,s.pipe)(e,v.filter((function(e){return e!==t.id})))}),v.none),z.B()),this.flushTransitionTo=function(){return T._flushCompleteTransition.next()},this.flushPositionAnimation=function(){return T._flushPositionAnimation.next()},this._subs.push(this._handleAlertFeedbacks(),this._handleTakeawayFeedbacks(),this._handleIngoreFormSubmit(),this._handleAlertIgnore(C),this._applyAlerts(),this._dismissAlertsBatch(),this._newFeatureSeen(),this._handleSmartPhrasesDone(),this._handleSmartPhrasesApplyLast()),(0,s.pipe)(d,f.bw((function(e){return T._subs.push(T._handleMuteCategories(e))})))}return e.prototype._applyStartVSChange=function(e,t){var n=this;return t.reduce((function(e,t){var r=t[0],i=t[1];return(0,s.pipe)($.l.update(e,r,(function(e){return n._checksFeedCapabilities.transitionTo(i)(e)})),g.fold((function(){return e}),o.identity))}),e)},e.prototype._applyCompleteVSChange=function(e,t){var n=this;return t.reduce((function(e,t){var r=t[0],i=t[1];return(0,s.pipe)(e.get(r),v.map((function(e){return e.value})),v.fold((function(){return g.right(e)}),(function(t){return"removed"===t.visualState.transition.type?g.right(e.remove(r)):$.l.update(e,r,(function(e){return e.visualState.transitionId===i?n._checksFeedCapabilities.completeTransition(i)(e):e}))})),g.fold((function(){return e}),o.identity))}),e)},e.prototype._sendSmartPhrasesHighlightLastAppliedReplacementAction=function(e){var t=this;return(0,s.pipe)(e,g.map((function(e){var n=e.newAlert,r=e.cardId;return n&&n.replacementsLength>0?(0,s.pipe)(j.H(100),W.b((function(){return t.actionEvents.next({type:S.l.Type.smartPhrasesHighlightLastAppliedReplacement,alertId:n.id,cardId:r})})),G.g(2e3)).subscribe((function(){return t.actionEvents.next({type:S.l.Type.smartPhrasesRestoreOriginalHighlight,alertId:n.id,cardId:r})})):void 0})))},e.prototype._sendSmartPhrasesUpdateStateAction=function(e){var t=this;return(0,s.pipe)(e,g.map((function(e){var n=e.newAlert;return n?t.actionEvents.next({type:S.l.Type.smartPhrasesUpdateState,alertId:n.id,state:n.getAlertState()}):void 0})))},e.prototype._updateSmartPhrasesCard=function(e){var t=this;return function(n){return(0,s.pipe)(e,g.chainW((function(e){var r=e.newAlert,i=e.cardId;return $.l.update(n.currentLens.items,i,(function(e){return t._cardFactory.updateSmartPhrasesAlert(e,r)}))})),g.fold((function(e){return t._log.error("Error updating SmartPhrases card.",e),K.nL.Prism.getLens().compose(Q.v.Prism.items).set(n.currentLens.items,n)}),(function(e){return K.nL.Prism.getLens().compose(Q.v.Prism.items).set(e,n)})))}},e.prototype._handleAlertFeedbacks=function(){var e=this;return this.actionEvents.pipe(D.h(S.l.isAlertFeedbackAction)).subscribe((function(t){var n=t.alertId,r=t.feedbackType;return e._sendFeedback(n,{kind:r})}))},e.prototype._handleTakeawayFeedbacks=function(){var e=this;return this.actionEvents.pipe(D.h(S.l.isTakeawayAction)).subscribe((function(t){switch(t.type){case S.l.Type.takeawayCorrectlyDetected:return e._sendFeedback(t.alertId,{kind:l.PZ.ACCEPTED,replacementText:t.takeawayText});case S.l.Type.takeawayIncorrectlyDetected:return e._sendFeedback(t.alertId,{kind:l.PZ.IGNORE});case S.l.Type.takeawayDismiss:return e._sendFeedback(t.alertId,{kind:l.PZ.IGNORE,pnameQualifier:t.isLikelyToBeRead?l.N_.likelyToBeReadTakeaway:l.N_.unlikelyToBeReadTakeaway});case S.l.Type.takeawayResolve:return e._sendFeedback(t.alertId,{kind:l.PZ.ACKNOWLEDGED,pnameQualifier:t.isLikelyToBeRead?l.N_.likelyToBeReadTakeaway:l.N_.unlikelyToBeReadTakeaway});default:(0,p.vE)(t)}}))},e.prototype._handleSmartPhrasesDone=function(){var e=this;return this.actionEvents.pipe(D.h(S.l.isSmartPhrasesDoneAction)).subscribe((function(t){var n=t.alertId;return e._sendFeedback(n,{kind:l.PZ.ACKNOWLEDGED})}))},e.prototype._handleSmartPhrasesApplyLast=function(){var e=this;return this.actionEvents.pipe(D.h(S.l.isSmartPhrasesUpdateStateAction),D.h((function(e){return 0===e.state.replacementsLength}))).subscribe((function(t){var n=t.alertId;return e.actionEvents.next({type:S.l.Type.smartPhrasesDone,alertId:n})}))},e.prototype._handleIngoreFormSubmit=function(){var e=this;return this.actionEvents.pipe(D.h(S.l.isAlertIgnoreFeedbackFormSubmit)).subscribe((function(t){var n=t.alertId,r=t.reason;return e._sendFeedback(n,{kind:l.PZ.IGNORE,reason:r})}))},e.prototype._handleMuteCategories=function(e){var t=this;return this.actionEvents.pipe(D.h(S.l.isMuteCategoryAction)).subscribe((function(n){return(0,s.pipe)(e.muteCategories([n.categoryId],!0),g.fold(t._log.handler("error calling categories model to mute category").error,o.constVoid))}))},e.prototype._applyAlerts=function(){var e=this;return this.actionEvents.pipe(D.h(S.l.isAlertApplyAction)).subscribe((function(t){return(0,s.pipe)(e._alertsService.apply(t.alertId,t.alternativeIndex,b.l$.sidebar,w.J.getSubTypeFromLens(e._lensState.get().currentLens.id)),g.fold(e._log.handler("error calling alert service to apply an alert").error,o.constVoid))}))},e.prototype._dismissAlertsBatch=function(){var e=this;return this.actionEvents.pipe(D.h(S.l.isDismissAlertsBatchAction)).subscribe((function(t){return(0,s.pipe)(e._alertsService.dismissBatch(t.alerts,w.J.getSubTypeFromLens(e._lensState.get().currentLens.id)),g.fold(e._log.handler("error calling alert service to dismiss alerts batch").error,o.constVoid))}))},e.prototype._newFeatureSeen=function(){var e=this;return this.actionEvents.pipe(D.h(S.l.isOnboardingClose)).subscribe((function(t){return(0,s.pipe)(e._markOnboardingAsSeen(t.value))}))},e.prototype.getApplicatorEffects=function(){return(0,s.pipe)([[this._startTransitionStateChanges,"startTransitionStateChanges"],[this._completeTransitionStateChanges,"completeTransitionStateChanges"],[this._changePositionEffect,"changePositionEffect"],[this._transitionEndStateChanges,"transitionEndStateChanges"],[this._switchToNextChanges,"switchToNextChanges"],[this._dismissMuteQuotedAdvice,"dismissMuteQuotedAdvice"],[this._changeUserInput,"changeUserInput"],[this._applyTakeawayFeedback,"applyTakeawayFeedback"],[this._smartPhrasesFeedback,"smartPhrasesFeedback"],[this._smartPhrasesShowMoreIdeas,"smartPhrasesShowMoreIdeas"],[this._smartPhrasesApply,"smartPhrasesApply"],[this._smartPhrasesHighlightLastAppliedReplacement,"smartPhrasesHighlightLastAppliedReplacement"],[this._smartPhrasesRestoreOriginalHighlight,"smartPhrasesRestoreOriginalHighlight"],[this._focusChecksFeedItem,"focusChecksFeedItem"],[this.actionEvents.pipe(D.h(S.l.isNavigation),W.b(this._navigationEvents),E.c(k.E)),"navigationEvents"],[(0,s.pipe)(this._sendToUpgrade,v.fold((function(){return k.E}),q.y)),"sendToUpgrade"],[(0,s.pipe)(this._sendToSignIn,v.fold((function(){return k.E}),q.y)),"sendToSignIn"],[this._showIgnoreFormEffect,"showIgnoreFormEffect"]],h.map((function(e){var t=e[0];return{id:"cardsViewModel.effects."+e[1],when:_.R.isWithAlertsId,what:K.nL.Effect.Applicator.create(t)}})))},e.prototype.dispose=function(){this._subs.dispose()},e}();!function(e){var t=function(){var e=this;this.animate=c.h.create(!0),this.clockwise=c.h.create(!0),this.toggleAnimations=function(){return e.animate.modify((function(e){return!e}))},this.completePositionAnimation=new u.xQ,this.actionEvents=new u.xQ,this.flushTransitionTo=o.constVoid,this.sideEffect={id:"cardsViewModelMock",when:_.R.isWithAlertsId,what:K.nL.Effect.Applicator.create(k.c())},this.changePosition=new u.xQ,this.dispose=m.ZT};e.Mock=t,function(e){e.sendToUpgrade=function(e,t,n){return function(r){return r.pipe(D.h((function(e){return e.type===S.l.Type.toUpgrade})),R.U((function(){return function(r){return n(),e.actions.openUrl(new x(t.funnel.plans).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenaliPremiumPreviewCard"})),r}})))}},e.sendToSignIn=function(e,t){return function(n){return n.pipe(D.h((function(e){return e.type===S.l.Type.toSignIn})),R.U((function(){return function(n){return e.actions.openUrl(new x(t.funnel.signin).addParams({utm_medium:"internal",utm_source:"upHook",utm_campaign:"editorDenalianonymousUserGenericSignInPrompt"})),n}})))}}}(e.Experiments||(e.Experiments={}))}(ee||(ee={}));var ne=function(e,t){return function(n){return function(i){return(0,s.pipe)(i.eligibleForDismissSurvey,a.of,r.chain((function(e){return(0,s.pipe)(n,a.map((function(t){return t?v.none:v.some(e)})))})),r.fold((function(){return e(i.alertId)}),(function(e){return t({id:i.id,options:e})})))}}}},24740:(e,t,n)=>{"use strict";n.d(t,{$:()=>H});var r,i=n(489),a=n(45980),o=n(73805),s=n(21694),u=n(95648),c=n(65772),l=n(80229),d=n(64909),p=n(17753),f=n(22232),m=n(59312),h=n(64450),g=n(95574),v=n(53521);function y(e,t){var n=t.text;t.ops.reduce((function(t,n,r){return u.JU.isInsertString(n)?(e.insertString(n.insert,n,r),t):u.JU.isInsertGap(n)?(e.insertGap("",n,r),t):u.JU.isInsert(n)?t:u.JU.isDelete(n)?(e.remove(t.slice(0,n.delete),n,r),t.slice(n.delete)):u.JU.isRetain(n)?(e.retain(t.slice(0,n.retain),n,r),t.slice(n.retain)):(0,f.vE)(n)}),n)}function b(e){return 0===e.replace(/ /g,"").length}function w(e,t){(0,o.pipe)(e,i.last,d.fold((function(){b(t.text)||e.push(t)}),(function(n){n.type===t.type?n.text+=t.text:e.push(t)})))}function _(e){return(0,o.pipe)(g.vM((function(){return(0,o.pipe)(e,l.map((function(t){var n=[];return y({insertString:function(t,n){if(n.type===u.JU.Type.Main)throw new T("Remove transform contains main insert",e)},insertGap:function(){throw new T("Remove transform contains gap insert",e)},retain:function(e,t){t.type!==u.JU.Type.Optional&&w(n,{type:v.GP.Text,text:e})},remove:function(e,t){var r=t.type;w(n,{type:r!==u.JU.Type.Main||b(e)?v.GP.Text:v.GP.Delete,text:e})}},t),n})),i.flatten)})),c.chain((0,a.flow)(c.fromPredicate((function(e){return e.length>0}),(function(){return new T("Remove transform contains no data",e)})),c.map((function(e){return{type:r.Type.Remove,remove:e}})))))}function S(e){return(0,o.pipe)(g.vM((function(){return(0,o.pipe)(e,l.map((function(t){var n=[];return y({insertString:function(t,n){if(n.type===u.JU.Type.Main)throw new T("Multi-remove transform contains main insert",e)},insertGap:function(){throw new T("Multi-remove transform contains gap insert",e)},retain:function(e){w(n,{type:v.GP.Text,text:e})},remove:function(e,t){var r=t.type;w(n,{type:r!==u.JU.Type.Main||b(e)?v.GP.Text:v.GP.Delete,text:e})}},t),n})))})),c.chain((0,a.flow)(c.fromPredicate((function(e){return e.length>=2&&e.every((function(e){return e.length>=2}))}),(function(){return new T("Incomplete multi-remove",e)})),c.map((function(e){return{type:r.Type.RemoveOr,removes:e}})))))}function C(e){return(0,o.pipe)(g.vM((function(){return(0,o.pipe)(e,l.map((function(t){var n=[];return y({insertString:function(e,t){var r=t.type;w(n,{type:r!==u.JU.Type.Optional?v.GP.Insert:v.GP.Text,text:e})},insertGap:function(){throw new T("Insert transform contains gap insert",e)},retain:function(e,t){(t.type!==u.JU.Type.Optional||n.length>0)&&w(n,{type:v.GP.Text,text:e})},remove:function(t,n){if(n.type===u.JU.Type.Main)throw new T("Insert transform contains main delete",e)}},t),n})))})),c.chain((0,a.flow)(l.fromArray,c.fromOption((function(){return new T("Incomplete insert",e)})),c.map((function(e){return{type:r.Type.Insert,inserts:e}})))))}function x(e){var t=e.reduce((function(e,t){var n=t[0],r=t[1],i=n.map((function(e){return e.text})).join("");return e.substitutions.push(i),e.inserts.push(r),i.length>e.longestSubstitution.length&&(e.longestSubstitution=i),e}),{substitutions:[],inserts:[],longestSubstitution:""}),n=t.substitutions,a=t.longestSubstitution,s=t.inserts,u=(0,o.pipe)(n,l.map((function(e){return a.split(e).join("")})));return(0,o.pipe)(i.zipWith(s,u,(function(e,t){return t&&e.push({type:v.GP.Text,text:t}),e})),l.fromArray,c.fromOption((function(){return new Error("Substitution processing error")})),c.map((function(e){return{type:r.Type.Substitution,remove:[{type:v.GP.Delete,text:a}],inserts:e}})))}function I(e){if(!("list"in e))return d.none;switch(e.list){case"bullet":case"dashed":case"ordered":return d.some({kind:e.list,indent:"number"==typeof e.indent&&Number.isInteger(e.indent)?e.indent:0});default:return d.none}}function A(e){return(0,o.pipe)(e,c.fromPredicate((function(e){return 1===e.length}),(function(){return new T("Expected full-sentence transform to have 1 alternative",e)})),c.map((0,a.flow)(l.head,(function(t){var n={blockStart:0,ops:[],kind:v._k.PlainText};return y({insertString:function(e,t){var r=e.split("\n");if(1===r.length)n.ops.push({type:v.GP.Insert,text:e});else for(var i=(0,o.pipe)(t.attributes,I,d.fold((function(){return a.constVoid}),(function(e){var t=e.kind,r=e.indent;return function(){n.ops.splice(n.blockStart,1,{type:v.GP.List,kind:t,indent:r}),n={kind:v._k.WithFormatting,ops:n.ops,blockStart:n.blockStart}}}))),s=0,u=r.length-1;s<=u;s++){var c=r[s];c&&n.ops.push({type:v.GP.Insert,text:c}),s<u&&(i(),n.blockStart=n.ops.length,n.ops.push({type:v.GP.Insert,text:"\n"}))}},insertGap:function(){throw new T("Full sentence transform contains gap insert",e)},retain:function(e){n.ops.push({type:v.GP.Text,text:e})},remove:function(e){n.ops.push({type:v.GP.Delete,text:e})}},t),n}))),c.chain((0,a.flow)(d.fromPredicate((function(e){return e.ops.length>0})),c.fromOption((function(){return new T("Got empty full sentence transform",e)})),c.map((function(e){var t=e.ops,n=e.kind;return{type:r.Type.FullSentence,ops:t,kind:n}})))))}function E(e){return(0,o.pipe)(g.vM((function(){return(0,o.pipe)(e,l.map((function(t){var n=s.s.normalizeDelta(new h.i(t.ops));if(2!==n.ops.length)throw new T("SmartPhrases transform must contain exactly 2 operations",e);if(!s.s.isRetain(n.ops[0]))throw new T("SmartPhrases transform first operation must be a retain",e);if(!s.s.isInsertString(n.ops[1]))throw new T("SmartPhrases transform second operation must be an insert",e);var r=[];return y({insertString:function(t,n){if(n.type!==u.JU.Type.Main)throw new T("SmartPhrases transform insert operation must be of type MAIN",e);w(r,{type:v.GP.Insert,text:t})},insertGap:function(){throw new T("SmartPhrases transform contains gap insert",e)},retain:function(){},remove:function(){throw new T("SmartPhrases transform contains delete",e)}},t),r})))})),c.chain((0,a.flow)(l.fromArray,c.fromOption((function(){return new T("Incomplete SmartPhrases transform",e)})),c.map((function(e){return{type:r.Type.SmartPhrases,inserts:e}})))))}function k(e){return(0,o.pipe)(g.vM((function(){return(0,f.kG)(1===e.length,"One gap transform does not contain exactly one alternative"),(0,o.pipe)(e,l.head,(function(e){var t=[],n=[],r=!1;return y({insertString:function(e,i){var a=i.type;w(r?n:t,{type:a!==u.JU.Type.Optional?v.GP.Insert:v.GP.Text,text:e})},insertGap:function(){(0,f.kG)(!r,"One gap transform does not contain exactly one gap insert"),r=!0},retain:function(e,i){var a=i.type,o=r?n:t;(a!==u.JU.Type.Optional||o.length>0)&&w(o,{type:v.GP.Text,text:e})},remove:a.constVoid},e),(0,f.kG)(r,"One gap transform does not contain exactly one gap insert"),(0,f.kG)(t.length>0||n.length>0,"One gap transform does not contain at least one text insert"),{left:t,right:n}}))})),c.map((function(e){var t=e.left,n=e.right;return{type:r.Type.OneGap,left:t,right:n}})),c.mapLeft(T.fromError(e)))}!function(e){!function(e){e[e.Remove=0]="Remove",e[e.RemoveOr=1]="RemoveOr",e[e.Insert=2]="Insert",e[e.Substitution=3]="Substitution",e[e.FullSentence=4]="FullSentence",e[e.SmartPhrases=5]="SmartPhrases",e[e.OneGap=6]="OneGap"}(e.Type||(e.Type={})),function(e){e.parse=function(t){var n=t[0];if(n.isFullSentence)return e.FullSentence;if(n.isSmartPhrases)return e.SmartPhrases;switch(n.type){case u.r3.Type.Insert:return e.Insert;case u.r3.Type.Remove:return t.length>1?e.RemoveOr:e.Remove;case u.r3.Type.Substitution:return n.ops.find(u.JU.isInsertGap)?e.OneGap:e.Substitution;default:return(0,f.vE)(n.type)}}}(e.Type||(e.Type={})),e.create=function(t){var n=e.Type.parse(t);switch(n){case e.Type.Remove:return _(t);case e.Type.RemoveOr:return S(t);case e.Type.Insert:return C(t);case e.Type.Substitution:return function(e){return(0,o.pipe)(g.vM((function(){return(0,o.pipe)(e,l.map((function(t){var n=[[],[]];return y({insertString:function(e,t){t.type!==u.JU.Type.Optional&&w(n[1],{type:v.GP.Insert,text:"\n"===e?" ":e})},insertGap:function(){throw new T("Substitution transform contains gap insert",e)},remove:function(e){w(n[0],{type:v.GP.Delete,text:e})},retain:function(e,t){if(t.type!==u.JU.Type.Optional||0!==n[0].length){var r={type:v.GP.Text,text:e};n[0].push(r),n[1].push(r)}}},t),(0,f.kG)(n[0].length>0,"Substituted part is empty"),(0,f.kG)(n[1].length>0,"Inserts are empty"),n})))})),c.chain(x),c.mapLeft(T.fromError(e)))}(t);case e.Type.FullSentence:return A(t);case e.Type.SmartPhrases:return E(t);case e.Type.OneGap:return k(t);default:return(0,f.vE)(n)}}}(r||(r={}));var T=function(e){function t(t,n){var r=e.call(this,t)||this;return r.alternatives=n,r}return(0,m.__extends)(t,e),t.fromError=function(e){return function(n){var r=new t(n.message,e);return r.stack=n.stack,r}},t.prototype.toString=function(){return"Hydration error: "+this.message+"\n  ops: "+this.alternatives.map((function(e){return e.ops.map(u.JU.anonymize)}))},t}(f.sH),L=n(8125),P=n(92932),R=function(e,t){switch(e.kind){case"replacement":return function(e,t){(0,f.kG)((0,L.Dw)(e),"transforms should have at least one element");var n=e[0];return N(n)>-1?v.nV.create(M(n),e.map(F),t,!0):v.zE.create(e,t)}(e.content.map((function(e){return[{type:v.GP.Insert,text:e}]})),t);case"transform":return function(e,t){(0,f.kG)((0,L.Dw)(e),"transforms should have at least one element");var n=e[0];return N(n)>-1?v.nV.create(M(n),e.map(F),t):function(e){return 2===e.length&&B(e)}(e)?v.fi.create(e[0],e[1],t):B(e)?v.zE.create(e,t):v.n6.create(e,t)}(e.content.map(W),t);default:return(0,f.vE)(e.kind)}};function N(e){return e.findIndex((function(e){return"arrow"===e.type}))}function M(e){return e.slice(0,N(e))}function F(e){return e.slice(N(e)+1)}function O(e){return e.every((function(e){return"delete"!==e.type}))}function B(e){return e.every(O)}function D(e,t){return{re:new RegExp("^("+e+")([\\s\\S]*)$"),createResult:t}}var U=[D("(?:\\<span class='gr_grammar_del'\\>([\\S\\s]*?)\\</span\\>)",(function(e){return{type:v.GP.Delete,text:e[2]}})),D("(?:\\<span class='gr_grammar_ins'\\>([\\S\\s]*?)\\</span\\>)",(function(e){return{type:v.GP.Insert,text:e[2]}})),D("()",(function(e){return{type:v.GP.Arrow}})),D("([^<>]+)",(function(e){return{type:v.GP.Text,text:e[1]}}))];function W(e){function t(e){for(var t=0,n=U;t<n.length;t++){var r=n[t],i=e.match(r.re);if(null!==i)return[r.createResult(i),i[i.length-1]]}}function n(t){var n=["<span class='gr_grammar_del'>","<span class='gr_grammar_ins'>",""].map((function(e){return t.indexOf(e)}));if(n.findIndex((function(e){return 0===e}))>0)throw new Error("Couldn't parse transform: "+e);if(n=n.filter((function(e){return e>0})),(0,L.Dw)(n)){var r=Math.min.apply(Math,n);return[{type:v.GP.Text,text:t.substring(0,r)},t.substring(r)]}return[{type:v.GP.Text,text:t},""]}for(var r=[],i=e,a=!1,o=0,s=void 0;(0,L.Dw)(i);){var u=t(i);void 0===u&&(a=!0);var c=u||n(i),l=c[0],d=c[1];s&&s.type===v.GP.Text&&l.type===v.GP.Text?s.text+=l.text:(s&&s.type===v.GP.Delete&&l.type===v.GP.Insert&&(r.push({type:v.GP.Arrow}),o++),r.push(l)),l.type===v.GP.Arrow&&o++,s=r[r.length-1],i=d}return(a||!(0,L.Dw)(r)||o>1)&&P.C8.Logging.getLogger("model.editor.alert_replacement").warn("Bad parsing of transform",{transformHtml:e,transformPartCount:r.length,arrowCount:o}),r}var H=(0,a.flow)((function(e){return(0,a.flow)((function(t){return z(e,p.eT.isFullSentence(t.cardType),p.eT.isSmartPhrases(t.cardType))(t.alternatives)}),c.chain(r.create))}),(function(e){return function(t){return(0,o.pipe)(t.content,c.fold((function(e){return c.right(R(e,t.todo))}),(0,a.flow)(e,c.map((function(e){return function(e,t){switch(e.type){case r.Type.Substitution:return v.nV.create(e.remove,e.inserts,t);case r.Type.Insert:return 2===e.inserts.length?v.fi.create(e.inserts[0],e.inserts[1],t):v.zE.create(e.inserts,t);case r.Type.Remove:return v.n6.create([e.remove],t);case r.Type.RemoveOr:return v.fz.create(e.removes,t);case r.Type.FullSentence:return function(e,t){switch(e.kind){case v._k.WithFormatting:return v.i3.createWithFormatting(e.ops,t);case v._k.PlainText:return v.i3.createPlainText(e.ops,t);default:return(0,f.vE)(e)}}(e,t);case r.Type.SmartPhrases:return v.zE.create(e.inserts,t);case r.Type.OneGap:return v.G7.create(e,t);default:return(0,f.vE)(e)}}(e,t.todo)})))))}}));function z(e,t,n){var r=(0,a.flow)(e,(function(e){return e.delta.reduce((function(e,t){return s.s.isInsertString(t)?e+t.insert:e}),"")}));return(0,a.flow)(function(e,t,n){return function(r){return(0,o.pipe)(r,i.filterMap((function(r){return(0,o.pipe)(r.type,d.map((function(i){var a=r.ops[0];if(a&&u.JU.isOptionalRetain(a)){var o=u.JU.length(a);return{text:e(o,r.lengthAffected-o),ops:r.ops.slice(1),type:i,isFullSentence:t,isSmartPhrases:n}}return{text:e(0,r.lengthAffected),ops:r.ops,type:i,isFullSentence:t,isSmartPhrases:n}})))})),l.fromArray)}}(r,t,n),c.fromOption((function(){return new Error("Alternative array is empty")})))}},53521:(e,t,n)=>{"use strict";n.d(t,{GP:()=>r,b$:()=>i,zE:()=>a,n6:()=>o,fz:()=>s,fi:()=>u,nV:()=>c,_k:()=>l,i3:()=>d,G7:()=>p});var r,i,a,o,s,u,c,l,d,p,f=n(59312),m=n(42654),h=n(8125);!function(e){e.Delete="delete",e.Insert="insert",e.Text="text",e.List="list",e.Arrow="arrow"}(r||(r={})),function(e){!function(e){e[e.InsertList=0]="InsertList",e[e.DeleteList=1]="DeleteList",e[e.DeleteOr=2]="DeleteOr",e[e.InsertOr=3]="InsertOr",e[e.Arrow=4]="Arrow",e[e.FullSentence=5]="FullSentence",e[e.OneGap=6]="OneGap"}(e.Type||(e.Type={})),e.eq=m.fromEquals((function(e,t){return e.type===t.type&&e.tooltipText===t.tooltipText&&JSON.stringify(e.labels)===JSON.stringify(t.labels)})),e.isFullSentence=function(t){return t.type===e.Type.FullSentence},e.isOneGap=function(t){return t.type===e.Type.OneGap},e.isRegular=function(t){return!(e.isFullSentence(t)||e.isOneGap(t))}}(i||(i={})),function(e){e.create=function(e,t){return{labels:e,tooltipText:t,type:i.Type.InsertList}}}(a||(a={})),function(e){e.create=function(e,t){return{labels:e,tooltipText:t,type:i.Type.DeleteList}}}(o||(o={})),function(e){e.create=function(e,t){return{labels:e,tooltipText:t,type:i.Type.DeleteOr}}}(s||(s={})),function(e){e.create=function(e,t,n){return{type:i.Type.InsertOr,labels:[e,t],tooltipText:n}}}(u||(u={})),function(e){function t(e,t){return(0,f.__spreadArrays)(e,t).map((function(e){return e.text.length})).reduce(h.Sm,0)>30}e.create=function(e,n,r,a){return{type:i.Type.Arrow,original:e,labels:n,tooltipText:r,onlyReplacements:a||t(e,n[0])}}}(c||(c={})),function(e){e.WithFormatting="WithFormatting",e.PlainText="PlainText"}(l||(l={})),function(e){e.createPlainText=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:l.PlainText}},e.createWithFormatting=function(e,t){return{type:i.Type.FullSentence,labels:e,tooltipText:t,kind:l.WithFormatting}}}(d||(d={})),function(e){e.create=function(e,t){return{type:i.Type.OneGap,labels:{left:e.left.map((function(e){return(0,f.__assign)((0,f.__assign)({},e),{type:r.Text})})),right:e.right.map((function(e){return(0,f.__assign)((0,f.__assign)({},e),{type:r.Text})}))},tooltipText:t}}}(p||(p={}))},50634:(e,t,n)=>{"use strict";n.d(t,{E:()=>r});var r,i=n(42654);!function(e){e.eq=(0,i.getStructEq)({alert:(0,i.contramap)((function(e){return e.id}))(i.eqStrict),highlightIndex:i.eqStrict}),e.getEq=function(){return e.eq}}(r||(r={}))},40644:(e,t,n)=>{"use strict";n.d(t,{X:()=>T});var r=n(59312),i=n(22902),a=n(71102),o=n(76606),s=n(45980),u=n(73805),c=n(64909),l=n(22232),d=n(489),p=n(65772),f=n(42654),m=n(8125),h=n(22788),g=n(92932),v=n(17753),y=n(53521),b=n(77176),w=n(28043),_=n(99391),S=n(78090),C=n(41199),x=n(11742),I=n(87280),A=n(17031),E=n(62712),k=n(36473),T=function(){function e(t,n,r,i,a,o,s,l,d,p,f,m,h,g,v){this.id=t,this.alerts=n,this.activeAlertIndex=r,this.activeHighlightIndex=i,this.positionState=a,this.visualState=o,this.meta=s,this.lensId=l,this.renderOptions=d,this.muteCategory=p,this.order=f,this.initialAlertId=m,this.removedAlertsIds=h,this.cachedTransform=g,this.userInput=v,this.kind=e.Kind,this.activeAlert=e._getAlertByIndex(this.activeAlertIndex,this.alerts),this.transform=(0,u.pipe)(this.cachedTransform,c.map((function(e){return e.labels})))}return e._getAlertByIndex=function(e,t){var n=t[e];return(0,l.kG)(!!n,"Active alert index should point to an alert"),n},Object.defineProperty(e.prototype,"activeAlertRemoved",{get:function(){return this.removedAlertsIds.has(this.activeAlert.id)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"scheduledToDispose",{get:function(){return e.willBeDisposed(this,this.removedAlertsIds)},enumerable:!1,configurable:!0}),e.prototype.hashCode=function(){return(0,S.NO)({id:this.id,activeAlertId:this.activeAlert.id,metaHashCode:this.meta.hashCode(),alertsCount:this.alerts.length,takeawayFeedbackWithAlertId:(0,u.pipe)(this.alerts,d.filterMap((function(e){return(0,u.pipe)(e,c.fromPredicate(C.$.isTakeaway),c.filterMap((function(e){return e.extraProperties.takeaway})),c.filterMap((function(e){return e.feedback})),c.map((function(t){return e.id+t})))}))).join(""),removedAlertsIdsCount:this.removedAlertsIds.size,activeHighlightIndex:this.activeHighlightIndex,userInput:L.show(this.userInput),smartPhrasesAlertHashCode:C.$.isSmartPhrases(this.activeAlert)?v.Xi.calculateHashCode(this.activeAlert):void 0})},e.prototype.equals=function(t){return e.eq.equals(this,t)},e.prototype.toJSON=function(){return(0,r.__assign)((0,r.__assign)({},this),{renderOptions:k.j.toJSON(this.renderOptions)})},e}();!function(e){function t(e){return e.activeAlert.type===C.$.Type.default}e.Kind="AlertCard",e.isPriority=function(e){return C.$.isPriority(e.activeAlert)},e.isFocused=function(e){switch(e.visualState.transition.type){case"expanded":case"focused":case"presuccess":case"success":case"feedback_form":return!0;default:return!1}},e.getActiveAlert=function(e){return(0,u.pipe)(c.fromNullable(e.activeAlert),c.filter((function(t){return Object.values(C.$.Type).includes(t.type)&&!E.J.isBulkAcceptItem(e)})))},e.getRemoveAlertsCapability=function(t,n,i){return function(a,o){return function(l){var d=new Set(a.map((function(e){return e.id})));return r(l)?i(a,o)(l):e.hasAnyOfAlerts(d)(l)?t.remove(l,[l.activeAlert],(0,u.pipe)(o,c.map((function(e){return n.compare(l,e)>0})),c.getOrElse(s.constTrue))):l}}},e.hasAlert=function(e){return function(t){return void 0!==t.alerts.find((function(t){return t.id===e}))}},e.hasAnyOfAlerts=function(e){return function(t){return t.alerts.some((function(t){return e.has(t.id)}))}},e.willBeDisposed=function(e,t){return e.alerts.every((function(e){return t.has(e.id)}))},e.canBeFocused=function(t){return function(n){return!n.scheduledToDispose&&(0,u.pipe)(e.getActiveAlert(n),c.exists((function(e){return t.isRegistered(e.id)})))}},e.getId=function(e){return e.id},function(e){e.default="default",e.plagiarism="plagiarism",e.super="super"}(e.Type||(e.Type={})),(0,l.L0)(null),e.isDefaultView=t,e.match=function(e){return function(n){if(function(e){return e.activeAlert.type===C.$.Type.plagiarism}(n))return p.right(e.plagiarism(n));if(function(e){return e.activeAlert.type===C.$.Type.super}(n))return p.right(e.super(n));if(function(e){return e.activeAlert.type===C.$.Type.smartPhrases}(n))return p.right(e.smartPhrases(n));if(t(n))return p.right(e.default(n));var r={lensId:n.activeAlert.lensId,lensType:n.activeAlert.lensType};return p.left(new Error("Cannot render unknown card type with alert: ["+JSON.stringify(r,null,2)+"]"))}},e.eq=f.fromEquals((function(e,t){return e.hashCode()===t.hashCode()&&I.Z.eq.equals(e.positionState,t.positionState)&&A.t.eq.equals(e.visualState,t.visualState)&&e.meta.equals(t.meta)&&a.getEq(C.$.eq).equals(e.alerts,t.alerts)&&(0,m.As)(e.removedAlertsIds,t.removedAlertsIds)&&e.lensId===t.lensId}));var n=h.getMonoid();function r(e){return e.renderOptions.showBundle}e.defaultOrd=(0,i.fold)(n)([(0,u.pipe)(h.ordBoolean,h.contramap((0,s.flow)(e.getActiveAlert,c.isSome))),(0,u.pipe)(h.ordNumber,h.contramap((function(e){return e.order}))),(0,u.pipe)(h.ordString,h.contramap((function(e){return e.initialAlertId})))]),e.isCardOpen=function(e){return"expanded"===e.transition.type||(0,u.pipe)(e.from,c.exists((function(t){return"expanded"===t&&"rendered"===e.transition.type})))},e.isCardPresuccess=function(e){return"presuccess"===e.transition.type},function(e){e.eq=f.fromEquals((function(e,t){return e.type===t.type&&e.clockwise===t.clockwise}))}(e.Transition||(e.Transition={})),e.hasTransform=function(e){return c.isSome(e.transform)},e.hasFullSentenceTransform=function(e){return v.eT.isFullSentence(e.activeAlert.extraProperties.cardType)},e.hasOneGapTransform=function(e){return(0,u.pipe)(e.transform,c.exists(y.b$.isOneGap))},e.isSmartPhrases=function(e){return C.$.isSmartPhrases(e.activeAlert)},e.isSimple=function(e){return v.eT.isSimple(e.activeAlert.extraProperties.cardType)},e.isBundle=r,e.bundleTitle=function(e){return(0,u.pipe)(e.meta.bundleInfo,c.map((function(e){return e.title})),c.getOrElse((function(){return"Other"})))},e.isEligibleForDismissSurvey=function(e){return e.activeAlert.dismissSurvey},e.miniTitle=function(e,t){return C.$.isTakeawayWithoutFeedback(e.activeAlert)?t.card.takeaway.defaultTitle:e.activeAlert.miniCardTitle},e.useCardStates=function(e){return{isChecking:e.pipe(b.U((function(e){return e.meta.checking===x.n.CheckingState.Checking})),w.x(),_.shareReplay({bufferSize:1,refCount:!0})),isCheckingGlobal:e.pipe(b.U((function(e){return e.meta.checking===x.n.CheckingState.Full})),w.x(),_.shareReplay({bufferSize:1,refCount:!0})),transform:e.pipe(b.U((function(e){return e.transform})),_.skipBy(c.getEq(y.b$.eq)))}},e.foldCard=p.getOrElse((function(e){return o("CardComponent").error("Got an unexpected card type",e),null}));var o=(0,m.HP)(g.C8.Logging.getLogger)}(T||(T={}));var L=c.getShow(o._3)},11742:(e,t,n)=>{"use strict";n.d(t,{n:()=>r});var r,i=n(64909),a=n(58199),o=n(78090);!function(e){var t;!function(e){e.Idle="idle",e.Checking="checking",e.Full="full"}(t=e.CheckingState||(e.CheckingState={}));var n=function(){function e(e,t,n,r,i,a){this.percentile=e,this.explanation=t,this.checking=n,this.ranges=r,this.showMuteQuotedAdvice=i,this.bundleInfo=a}return e.prototype.equals=function(e){return this.hashCode()===e.hashCode()},e.prototype.hashCode=function(){return(0,o.NO)({percentile:a.g.prism.reverseGet(this.percentile),explanation:this.explanation,checking:this.checking,ranges:this.ranges.map((function(e){return e.meta.id})).join(),showMuteQuotedAdvice:this.showMuteQuotedAdvice})},e}();e.Impl=n,e.empty=function(e,r,o,s){return void 0===e&&(e=""),void 0===r&&(r=a.g.MIN),void 0===o&&(o=t.Idle),void 0===s&&(s=[]),new n(r,e,o,s,!1,i.none)},e.create=function(e){var r=e.explanation,o=void 0===r?"":r,s=e.percentile,u=void 0===s?a.g.MIN:s,c=e.checking,l=void 0===c?t.Idle:c,d=e.ranges,p=void 0===d?[]:d,f=e.bundleInfo,m=void 0===f?i.none:f;return new n(u,o,l,p,!1,m)}}(r||(r={}))},15066:(e,t,n)=>{"use strict";n.d(t,{R:()=>r});var r,i=n(45980),a=n(73805),o=n(22788),s=n(64909),u=n(22232),c=n(58199),l=n(40644),d=n(11742);!function(e){e.ord=(0,a.pipe)(o.ordNumber,o.contramap((0,i.flow)(l.X.getActiveAlert,s.chain((function(e){return e.bundleInfo})),s.fold((function(){return Number.MAX_SAFE_INTEGER}),(function(e){return e.rank}))))),e.isExtendableWithAlerts=function(e){switch(e.visualState.transition.type){case"added":case"expanded":case"focused":case"hidden":case"rendered":return!0;case"feedback_form":case"removed":case"presuccess":case"success":return!1;default:return(0,u.vE)(e.visualState.transition.type)}},e.getAlertOutcomeBundle=function(e){return(0,a.pipe)(e.bundleInfo,s.fold((function(){return{id:"other",title:"Other"}}),(function(e){return{id:e.title.toLowerCase().replace(" ",""),title:e.title}})))},e.getBundleCardMeta=function(e,t,n){var r=t.map((function(e){return e.getHighlightRanges()[0]}));return new d.n.Impl(c.g.fromRatio(n.progress),n.explanation,d.n.CheckingState.Idle,r,!1,s.some(e))},e.getRemoveAlertsCapability=function(t){return function(n,r){return function(o){var u=new Set(n.map((function(e){return e.id})));if(l.X.isBundle(o)&&l.X.hasAnyOfAlerts(u)(o)){var c=t.remove(o,n,(0,a.pipe)(r,s.map((function(t){return e.ord.compare(o,t)>0})),s.getOrElse(i.constTrue)));return(0,a.pipe)(r,s.exists((function(e){return e.id===o.id})))?t.selectNextAlert(c,e.ord,(function(t,n){return e.getBundleCardMeta(e.getAlertOutcomeBundle(n),c.alerts,n)})):c}return o}}}}(r||(r={}))},78264:(e,t,n)=>{"use strict";n.d(t,{Dv:()=>P,VC:()=>R,u0:()=>N,vM:()=>O,Py:()=>M});var r=n(59312),i=n(22902),a=n(45980),o=n(73805),s=n(27221),u=n(64909),c=n(22232),l=n(8125),d=n(83078),p=n(65772),f=n(92932),m=n(17753),h=n(10002),g=n(16118),v=n(50628),y=n(77176),b=n(93508),w=n(85985),_=n(66310),S=n(99391),C=n(73510),x=n(24209),I=n(2834),A=n(52479),E=n(41398),k=n(38524),T=n(78792),L=n(31346),P=function(e,t,n,r){return void 0===r&&(r=function(){return u.none}),function(i){return e(i)?i.currentLens.kind===k._L.abstract?u.none:(0,o.pipe)(u.fromPredicate(k.nL.hasItems)(i),u.chain((function(e){return n.findNextAlert(e.currentLens)})),u.alt((function(){return r(i)})),u.map(T.l.toLensAlert)):t(i)}},R=function(e,t,n,r,i,a){return void 0===a&&(a=function(){return!0}),function(s){var c=s.currentLens;return c.kind===k._L.abstract?u.none:c.kind===k._L.persistent?(0,o.pipe)(k.nL.getActiveAlertHighlight(r)(s),u.fold((function(){return k.nL.hasItems(s)?i.findNextAlert(s.currentLens):u.none}),(function(t){return e.findNextAlertInTextByLens(t,c.id,L.v.Priority.nonPriorityAlertsVisible(s))})),u.alt((function(){return a()&&(L.v.State.isInGlobalSuccess(s)||h.R.isOutcomeId(s.currentLens.id)&&e.hasZeroFreeAlerts(n))?e.findPremiumAlert():u.none})),u.map(T.l.toLensAlert)):(0,o.pipe)(function(a){return(0,o.pipe)(u.fromPredicate(k.nL.hasItems)(a),u.chain((function(e){return i.findNextAlert(e.currentLens)})),u.map(T.l.toLensAlert),u.alt((function(){return(0,o.pipe)(k.nL.getActiveAlertHighlight(r)(a),u.fold((function(){return t(m.bZ.isRegisteredApplicableAlert,"cursor")}),(function(t){return e.findNextAlertInText(t,m.bZ.isApplicableAlert)})),u.map((function(e){return{alert:e.alert,highlightIndex:e.highlightIndex,lensId:n.get()}})))})))}(s),u.alt((function(){return(0,o.pipe)(e.findPremiumAlert(),u.map(T.l.toLensAlert))})))}};function N(e,t){return function(n,r){return t.findClosestAlertHighlight(e(r),n)}}var M,F=function(e){return e.pipe(g.G(),v.P((function(e){var t=e[0],n=e[1];return"idle"!==t&&"idle"===n})),y.U((function(){})))},O=function(){function e(e,t){this._subs=new C.w.Keeper,this.firstOpeningOfDocumentWithAlerts=s.h.create(!1);var n=F(e),r=function(e){return(0,o.pipe)(e,w.h((function(e){return k.nL.hasCards(e)&&u.isSome(k.In.getActiveItem(e.currentLens))})),y.U((function(){})))}(t);this._subs.push((0,o.pipe)(t,v.P((function(e){return k.nL.hasCards(e)})),_.w((function(){return(0,o.pipe)(x.T(r,n),y.U(a.constFalse),b.O(!0))})),I.b(A.wW(this.firstOpeningOfDocumentWithAlerts))).subscribe())}return e.prototype.dispose=function(){this._subs.dispose()},e}();!function(e){var t=(0,l.HP)(f.C8.Logging.getLogger);e.focusFirstCardAfterBigCheck=function(e,n,r,i,a){var s=F(n),c=n.pipe(b.O("idle"),g.G(),v.P((function(e){return e[0],"idle"===e[1]})),w.h((function(e){return"full"===e[0]})),y.U((function(){}))),l=function(e,t){var n=F(e);return t.bigPaste.pipe(_.w((function(){return n})),y.U((function(){})),S.shareReplay({bufferSize:1,refCount:!0}))}(n,i);return(0,o.pipe)(x.T(s,c,l),E.M(e,a,r),w.h((function(e){e[0];var t=e[1],n=e[2];return e[3]&&!n&&k.nL.hasCards(t)&&u.isNone(k.In.getActiveItem(t.currentLens))})),y.U((function(){return k.nL.Effect.FocusBehavior.focusFirst})),I.b((function(e){return t("AutoFocus.sideEffects.focusFirstCardAfterBigCheck").trace("emit: ",e)})))},e.getSideEffect=function(e,t){var n=(0,o.pipe)(e,y.U(function(e){return function(t){return function(n){switch(t.kind){case k.nL.Effect.FocusBehaviorType.noFocus:return n;case k.nL.Effect.FocusBehaviorType.unFocus:return k.nL.Prism.getLensWithItems().modify(e.unselectItem(),n);case k.nL.Effect.FocusBehaviorType.focusFirst:return(0,o.pipe)(e.findFirstAlert(n.currentLens),u.fold((function(){return n}),(function(t){return k.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n)})));case k.nL.Effect.FocusBehaviorType.focusNext:return(0,o.pipe)(e.findNextAlert(n.currentLens),u.fold((function(){return n}),(function(t){return k.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t),n)})));case k.nL.Effect.FocusBehaviorType.focusAlert:return k.nL.Prism.getLensWithItems().modify(e.selectItemByAlert(t.alertHighlight),n);default:(0,c.vE)(t)}}}}(t)));return{id:"autoFocusEffect",when:h.R.isWithAlertsId,what:k.nL.Effect.ItemsApplicator.create(n)}},e.whenFirstOpeningDocumentWithAlerts=function(e){return function(){return e.firstOpeningOfDocumentWithAlerts.get()}},e.whenShouldVerifyCurrentLens=function(e,n){return function(r){var i="AutoFocus.stateValidator.whenShouldVerifyCurrentLens";return!(!k.nL.hasItems(r)||!n.shouldVerify(r.currentLens))&&((0,o.pipe)(k.nL.getActiveAlert(e)(r),u.filter(m.bZ.isInDuplicatedState),u.fold((function(){return t(i).debug("Current alert removed, should verify current lens...")}),(function(e){return t(i).info("Current alert removed as it's a duplicate, should verify current lens...",e.toString())}))),!0)}},e.whenNoActiveCard=function(e){return e.currentLens.items.size>0&&u.isNone(k.In.getActiveItem(e.currentLens))},e.behaviorToEffect=function(e){return function(n){return function(r){return(0,o.pipe)(n(r)?e(r):u.none,d.bw((function(e){return t("AutoFocus.stateValidator").debug("'behavior triggered: "+e.kind)})))}}},e.getDefaultBehavior=function(t,n){return(0,o.pipe)([(0,o.pipe)(e.whenShouldVerifyCurrentLens(t,n),e.behaviorToEffect((function(){return u.some(k.nL.Effect.FocusBehavior.focusNext)})))],(0,i.fold)((0,i.getFunctionMonoid)(u.getFirstMonoid())()))},e.getFocusFromCacheBehavior=function(t,n,r,s,c,d){return(0,o.pipe)([(0,o.pipe)(e.whenShouldVerifyCurrentLens(s,c),e.behaviorToEffect((function(){return u.some(k.nL.Effect.FocusBehavior.focusNext)}))),(0,o.pipe)((0,l.W9)((function(){return n.get()}),(0,l.W9)((0,l.W9)((0,l.W9)(e.whenFirstOpeningDocumentWithAlerts(r),(function(){return t})),e.whenNoActiveCard),(0,o.pipe)(d,u.map((function(e){return(0,a.not)(e.willShowBulkAccept)})),u.getOrElse((function(){return a.constTrue}))))),e.behaviorToEffect((function(){return u.some(k.nL.Effect.FocusBehavior.focusFirst)})))],(0,i.fold)((0,i.getFunctionMonoid)(u.getFirstMonoid())()))},e.getFirstApiAlignmentOverride=function(){var e=s.h.create(!0);return function(t,n){var r=n;return e.get()&&n===m.l$.api&&(r=m.l$.text),e.set(!1),r}},e.getStateTransformer=function(e,n,i,a,s,l,d){return function(f){var m=f.state,h=f.metadata,g=t("AutoFocus.stateTransformer");if(!k.nL.hasCards(m)||!k.nL.hasItems(m))return g.trace("state has no items, returning original state"),p.left({state:m,metadata:h});var v=e(m);if(g.trace("effect: ",{state:m,metadata:h,effect:v}),u.isNone(v))return g.trace("no effect selected, returning original state"),p.left({state:m,metadata:h});if(l(v.value),v.value.kind===k.nL.Effect.FocusBehaviorType.unFocus||v.value.kind===k.nL.Effect.FocusBehaviorType.noFocus)return p.left({state:k.nL.Prism.getLensWithItems().modify(a.unselectItem(),m),metadata:h});var y=s.get()&&"text"!==m.alertSource;return g.trace("shouldAutoFocus",{autoJumpEnabled:s,alertSource:m.alertSource,shouldAutoFocus:y}),(0,o.pipe)(v,u.chain((function(e){switch(e.kind){case k.nL.Effect.FocusBehaviorType.noFocus:case k.nL.Effect.FocusBehaviorType.unFocus:return u.none;case k.nL.Effect.FocusBehaviorType.focusFirst:return(0,o.pipe)(a.findFirstAlert(m.currentLens),u.map((function(e){return(0,r.__assign)((0,r.__assign)({},e),{lensId:m.currentLens.id})})));case k.nL.Effect.FocusBehaviorType.focusNext:return n(m);case k.nL.Effect.FocusBehaviorType.focusAlert:return u.some((0,r.__assign)((0,r.__assign)({},e.alertHighlight),{lensId:m.currentLens.id}));default:(0,c.vE)(e)}})),u.map((function(e){return(0,c.kG)(u.isSome(i.getRegistered(e.alert.id)),"lens alert should be in registered state",(function(){return e.alert.toString()})),e})),u.fold((function(){return m.currentLens.kind===k._L.active?p.right(p.right({lensId:d.get(),alertSource:m.alertSource,options:{order:m.switchOrder,toFocus:k.nL.Effect.FocusBehavior.noFocus}})):p.left({state:m,metadata:h})}),(function(e){var t=e.alert,n=e.highlightIndex,r=e.lensId;return m.currentLens.meta.filter(t)?p.left(y?{state:k.nL.Prism.getLensWithItems().modify(a.selectItemByAlert({alert:t,highlightIndex:n}),m),metadata:{sourceId:"LSM.updateActiveState"}}:{state:m,metadata:h}):p.right(y?p.left({alertHighlight:{alert:t,highlightIndex:n},alertSource:m.alertSource,options:{lensId:r,order:m.switchOrder,toFocus:k.nL.Effect.FocusBehavior.focusFirst}}):p.right({lensId:r,alertSource:m.alertSource,options:{order:m.switchOrder,toFocus:k.nL.Effect.FocusBehavior.noFocus}}))})))}}}(M||(M={}))},50536:(e,t,n)=>{"use strict";n.d(t,{Nf:()=>r,Ls:()=>A,IG:()=>i,EB:()=>T,Mq:()=>a});var r,i,a,o=n(59312),s=n(22902),u=n(45980),c=n(73805),l=n(60705),d=n(64909),p=n(22232),f=n(83078),m=n(65772),h=n(89943),g=n(92932),v=n(17753),y=n(10002),b=n(58199),w=n(41199),_=n(40644),S=n(11742),C=n(17031),x=n(87280),I=n(36473);function A(e,t,n,r,a,s,l){var h=function(e){function t(t,n,r){var i=g.C8.Logging.getLogger("CardFactory");return(0,c.pipe)(n,d.filter((function(e){return!r||(0,c.pipe)(t,d.exists((function(t){return e.id===t.id&&e.rev===t.revision})))})),d.alt((function(){return(0,c.pipe)(t,d.chain((function(t){return(0,c.pipe)(e(t),m.fold((function(e){return i.error("Could not hydrate transform",e,{alertId:t.id}),n}),(function(e){return d.some({id:t.id,rev:t.revision,labels:e})})))})))})))}return function(e){var n=e.activeAlert.type===w.$.Type.super||e.activeAlert.type===w.$.Type.plagiarism||e.activeAlert.type===w.$.Type.premium||v.eT.isSimple(e.activeAlert.extraProperties.cardType)?d.none:t(e.activeAlert.getTransform(),e.cachedTransform,!(e.meta.checking!==S.n.CheckingState.Idle||e.activeAlertRemoved));return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,n,e.userInput)}}(e),y=g.C8.Logging.getLogger("CardFactory");function b(e,t){var n=new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,t,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput);return"focused"===t.transition.type||"expanded"===t.transition.type?h(n):n}function I(e,t){var n=C.t.to(e.visualState,t);return(0,c.pipe)(b(e,n),(function(n){return t.type===e.visualState.transition.type||"expanded"!==t.type&&"focused"!==t.type?n:H(n,x.Z.invalidateHeight(e.positionState))}))}function A(e,t,n){void 0===n&&(n=!0);var r=new Set(t.map((function(e){return e.id}))),i=new Set(e.removedAlertsIds);r.has(e.activeAlert.id)&&i.add(e.activeAlert.id);var a=e.alerts.reduce((function(t,n,i){return!r.has(n.id)||_.X.isFocused(e)&&n.id===e.activeAlert.id?{remainingAlerts:t.remainingAlerts.concat([n]),activeAlertIndex:t.activeAlertIndex}:{remainingAlerts:t.remainingAlerts,activeAlertIndex:t.activeAlertIndex+(i<e.activeAlertIndex?-1:0)}}),{remainingAlerts:[],activeAlertIndex:e.activeAlertIndex}),o=a.remainingAlerts,s=a.activeAlertIndex,u=_.X.willBeDisposed(e,r)?new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,r,e.cachedTransform,e.userInput):new _.X(e.id,o,s,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,i,e.cachedTransform,e.userInput);return u.scheduledToDispose?I(u,{type:"removed",clockwise:n}):u}function O(e,t,s,u,f,m,h,g){var y=function(e,t){var n=t[e];return(0,p.kG)(!!n,"Active alert index should point to an alert"),n}(s,t),I=F(y),A=(0,o.__spreadArrays)(t).sort(v.bZ.ord.compare).map((function(e){return w.$.fromModelWithTakeawayFeedback(e,l.getTakeawayFeedback(e.id))})),k=A[0];(0,p.kG)(!!k,"The card must contain at least 1 alert");var T=(0,c.pipe)(a,d.chain((function(e){return e.getAlertMuteCategory(t[0].id)}))),L=new _.X(e,A,E(y.id,A),u,x.Z.empty,C.t.initial({type:"rendered",clockwise:!0}),new S.n.Impl(f.percentile,f.explanation,f.checking,f.ranges,n.features.has(i.Features.enableMuteQuotedAdvice)&&w.$.isInQuotes(k),f.bundleInfo),m,i.toCardRenderOptions(n,m,r(k),g),T,k.getHighlightRanges()[0].end,k.id,new Set,d.none,I);return(0,c.pipe)(h,d.fold((function(){return L}),(function(e){return b(L,e)})))}function B(e,n,r,i,a){var o=n.alert,s=n.highlightIndex;void 0===a&&(a=function(e){return e}),(0,p.kG)(!e.removedAlertsIds.has(o.id),"Cannot select removed alert");var l=e.alerts.filter((function(t){return!e.removedAlertsIds.has(t.id)})),f=(0,c.pipe)(r,d.map((function(t){return i.compare(e,t)>0})),d.getOrElse(u.constTrue)),m=(0,c.pipe)(r,d.exists((function(t){return t.id===e.id}))),g=m?e.positionState:x.Z.invalidateHeight(e.positionState),v=m&&_.X.isCardOpen(e.visualState)?"expanded":"focused",y=(0,c.pipe)(t.getById(o.id),d.chain(F)),b=E(o.id,l),w=(0,c.pipe)(r,d.fold((function(){return C.t.initial({type:v,clockwise:f})}),(function(t){return C.t.to(e.visualState,{type:v,clockwise:f})})));return h(new _.X(e.id,l,b,s,g,w,a(e.meta,o),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,y))}var D=function(e){return t.isRegistered(e.id)};function U(e){var t=e.alerts;return d.fromNullable(t.slice(e.activeAlertIndex+1).find(D))}function W(e){var t=e.alerts;return d.fromNullable(t.slice(0,e.activeAlertIndex).reverse().find(D))}function H(e,t){return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,t,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}return{shouldAnimateAlertApply:n.shouldAnimateAlertApply,create:O,createFromAlert:function(e){return function(t){return O(t.id,[t],0,0,S.n.empty(v.bZ.isApplicableAlert(t)?t.explanation:void 0),e,d.none,!1)}},createFocused:function(e){return N(e,(function(t,r,i){return O(t,[r],0,i,M(r,n),e,d.some(C.t.initial({type:"focused",clockwise:!0},!0)),!1)}),(function(t,n,r){return O(t,n,r,0,L(n),e,d.some(C.t.initial({type:"focused",clockwise:!0},!0)),!1)}))},createFocusedBundle:function(e){return function(t,n,r,i){return O(t,r,i,0,T(n,r,r[i]),e,d.some(C.t.initial({type:"focused",clockwise:!0},!0)),!0)}},createRendered:function(e){return N(e,(function(t,r){return O(t,[r],0,0,M(r,n),e,d.some(C.t.initial({type:"rendered",clockwise:!0},!1)),!1)}),(function(t,n){return O(t,n,0,0,L(n),e,d.some(C.t.initial({type:"rendered",clockwise:!0},!1)),!1)}))},createRenderedBundle:function(e){return function(t,n,r){return O(t,r,0,0,T(n,r,r[0]),e,d.some(C.t.initial({type:"rendered",clockwise:!0},!1)),!0)}},createAdded:function(e){return N(e,(function(t,r){return O(t,[r],0,0,M(r,n),e,d.some(C.t.initial({type:"added",clockwise:!0},!0)),!1)}),(function(t,n){return O(t,n,0,0,L(n),e,d.some(C.t.initial({type:"added",clockwise:!0},!0)),!1)}))},createAddedBundle:function(e){return function(t,n,r){return O(t,r,0,0,T(n,r,r[0]),e,d.some(C.t.initial({type:"added",clockwise:!0},!0)),!0)}},prevAlert:W,nextAlert:U,anyRegisteredAlert:function(e){var n=e.alerts;return(0,c.pipe)(n.filter((function(e){return t.isRegistered(e.id)})),(function(e){return e[e.length-1]}),d.fromNullable)},select:B,selectFirstAlert:function(e,t,n,r){void 0===r&&(r=function(e){return e});var i=e.alerts.filter((function(t){return!e.removedAlertsIds.has(t.id)}));(0,p.kG)(i.length>0,"Selectable card must have at least one not removed alert");var a=i[0];return B(e,{alert:a,highlightIndex:0},t,n,r)},selectNextAlert:function(e,t,n){return void 0===n&&(n=function(e){return e}),e.activeAlertRemoved&&!e.scheduledToDispose?(0,c.pipe)(U(e),f.vx(W(e)),d.map((function(r){return B(e,{alert:r,highlightIndex:0},d.none,t,n)})),d.getOrElse((function(){return e}))):e},unselect:function(e,t,n){var r=(0,c.pipe)(t,d.map((function(t){return n.compare(e,t)>0})),d.getOrElse(u.constTrue)),i=(0,c.pipe)(t,d.exists((function(t){return t.id===e.id})))?e.positionState:x.Z.invalidateHeight(e.positionState);return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,i,e.scheduledToDispose||s&&!w.$.isPriority(e.activeAlert)&&"hidden"===e.visualState.transition.type?e.visualState:C.t.to(e.visualState,{type:"rendered",clockwise:r}),e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},addBundleAlerts:function(e,t){(0,p.kG)(e.renderOptions.showBundle,"cannot add new alerts to a non-bundled card"),(0,p.kG)(t.every((function(e){return v.bZ.isRegistered(e)})),"cannot add non registered alerts");var n=new Set(t.map((function(e){return e.id}))),r=new Set(e.removedAlertsIds);n.forEach((function(e){r.delete(e)}));var i=e.alerts.filter((function(e){return!n.has(e.id)})).concat(t.map((function(e){return w.$.fromModelWithTakeawayFeedback(e,l.getTakeawayFeedback(e.id))}))).sort(w.$.ord.compare);return new _.X(e.id,i,E(e.activeAlert.id,i),e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,r,e.cachedTransform,e.userInput)},addPlagiarismAlerts:function(e,t){var n=e.alerts.concat(t.map(w.$.fromModel)).sort(w.$.ord.compare).filter((function(t){var n=w.$.isPlagiarism(t);return n||y.error("Encountered non-plagiarism alert in plagiarism card",{alert:t,cardId:e.id}),n}));return R(new _.X(e.id,n,E(e.activeAlert.id,n),e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput),n)},remove:A,changePlagiarismMetaWithAlerts:R,updateWith:function(e,t){(0,p.kG)(void 0!==e.alerts.find((function(e){return e.id===t.id})),"can not receive updates for unknown alert",(function(){return t.toString()}));var r=function(e,t){var r;r=v.bZ.getCheckingState(t)===v.bZ.CheckingState.CHECKING?"focused"===e.visualState.transition.type||"expanded"===e.visualState.transition.type?S.n.CheckingState.Checking:S.n.CheckingState.Full:S.n.CheckingState.Idle;var i=P(t,r,n);return new _.X(e.id,e.alerts.map((function(e){return e.id===t.id?w.$.fromModelWithTakeawayFeedback(t,l.getTakeawayFeedback(e.id)):e})),e.activeAlertIndex,k(e,i),e.positionState,e.visualState,i,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}(e,t);switch(t.state.type){case v.bZ.State.Type.REGISTERED:var i="focused"===r.visualState.transition.type||"expanded"===r.visualState.transition.type?h(r):r;return"success"===r.visualState.transition.type||"presuccess"===r.visualState.transition.type?I(i,{type:"focused",clockwise:r.visualState.transition.clockwise}):i;case v.bZ.State.Type.REMOVED:return"focused"!==r.visualState.transition.type&&"expanded"!==r.visualState.transition.type||!r.alerts.every((function(e){return v.bZ.isCapiDone(e)&&e.allowUpdate&&v.bZ.isRated(r.activeAlert)}))?A(r,[t],!0):I(r,{type:"presuccess",clockwise:r.visualState.transition.clockwise});case v.bZ.State.Type.APPLIED:case v.bZ.State.Type.BEING_APPLIED:return A(r,[t],!0);default:return(0,p.vE)(t.state)}},changePosition:H,transitionTo:I,completeTransition:function(e,t){return b(e,C.t.complete(e.visualState,t))},hideMuteQuotedAdvice:function(e){return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,new S.n.Impl(e.meta.percentile,e.meta.explanation,e.meta.checking,e.meta.ranges,!1,e.meta.bundleInfo),e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},updateUserInput:function(e,t){return new _.X(e.id,e.alerts,e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,t)},updateTakeawayFeedback:function(e,t){return new _.X(e.id,e.alerts.map((function(n,r){return r===e.activeAlertIndex?w.$.updateTakeawayFeedback(n,t):n})),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)},updateSmartPhrasesAlert:function(e,t){return new _.X(e.id,e.alerts.map((function(n,r){return r===e.activeAlertIndex&&w.$.isSmartPhrases(n)?w.$.updateSmartPhrasesAlert(n,t):n})),e.activeAlertIndex,e.activeHighlightIndex,e.positionState,e.visualState,e.meta,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}}}function E(e,t){var n=t.findIndex((function(t){return t.id===e}));return(0,p.kG)(-1!==n,"Alert must exist"),n}function k(e,t){if((0,p.kG)(t.ranges.length>0,"Incorrect card meta: rangeIds empty. Card ID "+e.id+", activeAlert: "+e.activeAlert.toString()),0===e.activeHighlightIndex||e.meta.ranges.length===t.ranges.length)return e.activeHighlightIndex;var n=e.meta.ranges[e.activeHighlightIndex];return(0,p.kG)(void 0!==n,"AHI not found in rangeIds"),(0,c.pipe)(d.some(t.ranges.findIndex((function(e){return e.meta.id===n.meta.id}))),d.filter((function(e){return-1!==e})),d.alt((function(){return h.OI(t.ranges,n,l.SV.ordEnd)})),d.getOrElse((function(){return t.ranges.length-1})))}function T(e,t,n){var r=t.map((function(e){return e.getHighlightRanges()[0]}));return new S.n.Impl(b.g.fromRatio(n.progress),n.explanation,S.n.CheckingState.Idle,r,!1,d.some(e))}function L(e){var t=e.map((function(e){return e.getHighlightRanges()[0]})),n=(0,c.pipe)(e.map((function(e){return b.T.groupSum.concat(b.T.MAX,b.T.groupSum.inverse(e.progress))})),(0,s.fold)(b.T.groupSum),b.g.fromRatio);return new S.n.Impl(n,"",S.n.CheckingState.Idle,t,!1,d.none)}function P(e,t,n){var r=n.features.has(i.Features.enableMuteQuotedAdvice)&&e.extraProperties.isInQuotes;return new S.n.Impl(b.g.fromRatio(e.progress),e.explanation,t,e.getHighlightRanges(),r,d.none)}function R(e,t){var n=L(t);return new _.X(e.id,e.alerts,e.activeAlertIndex,k(e,n),e.positionState,e.visualState,n,e.lensId,e.renderOptions,e.muteCategory,e.order,e.initialAlertId,e.removedAlertsIds,e.cachedTransform,e.userInput)}function N(e,t,n){switch(e){case y.R.SpecialId.Plagiarism:return n;case y.R.SpecialId.AllAlerts:case y.R.SpecialId.Correctness:case y.R.SpecialId.Clarity:case y.R.SpecialId.Engagement:case y.R.SpecialId.Delivery:case y.R.SpecialId.CorrectnessPriority:case y.R.SpecialId.ClarityPriority:case y.R.SpecialId.EngagementPriority:case y.R.SpecialId.DeliveryPriority:case y.R.SpecialId.Priority:case y.R.SpecialId.PredictionTakeaways:case y.R.SpecialId.PredictionEmogenie:case y.R.SpecialId.Vox:case y.R.SpecialId.VoxPriority:case y.R.SpecialId.RealTimeProofit:return t;default:return(0,p.vE)(e)}}function M(e,t){return P(e,v.bZ.getCheckingState(e)===v.bZ.CheckingState.IDLE?S.n.CheckingState.Idle:S.n.CheckingState.Full,t)}function F(e){return v.bZ.isOneGap(e)&&""!==e.gapValue?d.some(e.gapValue):d.none}!function(e){e.mock={getTakeawayFeedback:function(){return d.none}}}(r||(r={})),function(e){var t;e.toCardRenderOptions=function(e,n,r,i){var a=new Set;return(y.R.isMainLens(n)||e.features.has(t.showCardLabelInOutcomes)&&n!==y.R.SpecialId.Plagiarism)&&a.add(I.j.Features.showLabel),e.features.has(t.enableMuteQuotedAdvice)&&a.add(I.j.Features.enableMuteQuotedAdvice),e.features.has(t.showBulkAcceptIcon)&&a.add(I.j.Features.showBulkAcceptIcon),e.features.has(t.showAnonymousUserFooters)&&a.add(I.j.Features.showAnonymousUserFooters),e.features.has(t.showPremiumTrialFooters)&&a.add(I.j.Features.showPremiumTrialFooters),e.features.has(t.showPremiumTrialFooters)&&a.add(I.j.Features.showPremiumTrialFooters),e.features.has(t.showNewPremiumCardLabels)&&a.add(I.j.Features.showNewPremiumCardLabels),e.features.has(t.showPersistentPremiumCardLabels)&&a.add(I.j.Features.showPersistentPremiumCardLabels),{features:a,layoutDensity:e.cardLayoutDensityMode,isNew:r,upgradeDemoPremiumNotice:e.upgradeDemoPremiumNotice,showBundle:i}},function(e){e.showCardLabelInOutcomes="showCardLabelInOutcomes",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showBulkAcceptIcon="showBulkAcceptIcon",e.showNewPremiumCardLabels="showNewPremiumCardLabels",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels"}(t=e.Features||(e.Features={})),e.Default={features:new Set([t.showCardLabelInOutcomes]),cardLayoutDensityMode:I.j.Density.cozy,shouldAnimateAlertApply:v.bZ.isAccepted,upgradeDemoPremiumNotice:I.Y.yellow}}(i||(i={})),function(e){e.snapshot=function(e){return{cardId:e.id,vs:{incomplete:e.visualState.incomplete,tr:e.visualState.transition},as:(0,c.pipe)(e.alerts.map((function(e){return e.id}))),aai:e.activeAlertIndex,ahi:e.activeHighlightIndex}}}(a||(a={}))},10584:(e,t,n)=>{"use strict";n.d(t,{R7:()=>d});var r=n(64909),i=n(10002),a=n(66910),o=n(52479),s=n(77176),u=n(38524),c=n(13338),l={cardsBeyondViewport:5,cardsAroundActive:100},d=function(e,t,n,d,p,f){void 0===p&&(p=l),void 0===f&&(f=o.b2.rafScheduler);var m=function(e){return!e.positionState.visible&&e.visualState.incomplete?(d.next({type:a.l.Type.completeTransitionTo,id:e.id,transitionId:e.visualState.transitionId}),n.completeTransition(e.visualState.transitionId)(e)):e},h=e.pipe(s.U(u.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return r.some({currentLens:t,alertSource:n})})))),g=(0,c.nM)(h,t.viewport,t.scrollTop,t.paddingTop,f).pipe(s.U((function(e){return{viewport:e.viewport,scrollTop:e.scrollTop,paddingTop:e.paddingTop,completeTransition:m}})),s.U((0,c.GC)({cardsBeyondViewport:p.cardsBeyondViewport,cardsAroundActive:p.cardsAroundActive,changePosition:n})));return{id:"manageCardsVisibility",when:i.R.isWithAlertsId,what:u.nL.Effect.Applicator.create(g)}}},32917:(e,t,n)=>{"use strict";n.d(t,{i$:()=>f,YA:()=>m});var r=n(45980),i=n(73805),a=n(64909),o=n(52479),s=n(55935),u=n(93508),c=n(99391),l=n(38524),d=n(71517),p=n(46616),f=function(e){return o.Hl(e.scrollTop.pipe(s.T(1)),100,!0).pipe(u.O(!1),c.shareReplay({bufferSize:1,refCount:!0}))},m=function(e,t){var n=new p.Db.Impl(t.scrollTop.get(),t.viewport.get(),t.paddingTop.get());return(0,i.pipe)(e.view(l.nL.getLens).get(),a.chain((function(e){var t=e.items,o=e.cardsHeight;return(0,i.pipe)(t.getAt(0),a.map((function(e){var t=(0,r.flow)(d.L.AbsTop.ISO.wrap,n.converters.absTopToViewportTop,n.converters.viewportToWindow)(e.positionState.absTop);return{top:t,bottom:d.r.FromWindowTop.ISO.modify(d.L.concatC(o))(t)}})))})))}},41394:(e,t,n)=>{"use strict";n.d(t,{o:()=>v});var r=n(73805),i=n(27221),a=n(65772),o=n(8125),s=n(92932),u=n(32952),c=n(79462),l=n(14611),d=n(16118),p=n(77176),f=n(93508),m=n(2834),h=n(76974),g=n(71517),v=function(e){var t=this;this._validateOffset=e,this._log=s.C8.Logging.getLogger("CardsListScrollManager"),this.scrollTop=i.h.create(0),this.paddingTop=i.h.create(0),this.viewport=i.h.create({top:g.r.FromWindowTop.ISO.wrap(0),height:0}),this.scrollOffset=new u.xQ,this.moveCardsBy=function(e,n){return t._log.debug("Cards list moved by "+e+", from: "+n),t.scrollOffset.next(e),a.right(void 0)},this.moveCardsByAnimated=function(e,n){return t._log.debug("Cards list moved by "+e+", from: "+n),c.y.create((function(n){return(0,r.pipe)(t._validateOffset(e,t),a.fold((function(e){return n.thrownError(e),o.ZT}),(function(){var r=2*t.viewport.get().height,i=Math.abs(e)>r?(e>0?1:-1)*r:e,a=e-i,o=l.f.createAnimationObservable(0,i,200).pipe(d.G(),p.U((function(e){var t=e[0];return e[1]-t})),f.O(a),m.b((function(e){return t.scrollOffset.next(e)}))).subscribe({error:function(e){return n.error(e)},complete:function(){return n.complete()}});return function(){return o.unsubscribe()}})))}))}};!function(){function e(){this.scrollOffset=h.of(42)}e.prototype.getContentOffset=function(e){throw new Error("Method not implemented.")},e.prototype.moveCardsBy=function(e,t){throw new Error("Method not implemented.")},e.prototype.moveCardsByAnimated=function(e,t){throw new Error("Method not implemented.")}}()},71517:(e,t,n)=>{"use strict";n.d(t,{r:()=>r,L:()=>i});var r,i,a=n(42654),o=n(19542),s=n(64681);!function(e){!function(e){e.ISO=(0,s.k4)()}(e.FromWindowTop||(e.FromWindowTop={}))}(r||(r={})),function(e){!function(e){e.ISO=(0,s.k4)(),e.equals=(0,s.Eh)(a.eqNumber).equals}(e.FromViewportTop||(e.FromViewportTop={})),function(e){e.ISO=(0,s.k4)()}(e.AbsTop||(e.AbsTop={})),function(e){e.ISO=(0,s.k4)()}(e.CardTop||(e.CardTop={})),e.concatC=function(e){return function(t){return e+t}};var t=function(e){return new o.aD(e)};e.converters=function(n,r,i){var a=t(e.concatC(i)).get,o=t(e.concatC(-n)).get;return{windowToViewport:t(e.concatC(-r)).get,viewportToWindow:t(e.concatC(r)).get,cardTopToViewport:o,viewportToCardTop:t(e.concatC(n)).get,absTopToViewportTop:function(e){return o(a(e))},absTopToCardTop:a}}}(i||(i={}))},46616:(e,t,n)=>{"use strict";n.d(t,{Db:()=>i});var r,i,a,o=n(42654),s=n(71517);!function(e){e.above="above",e.below="below",e.hidden="hidden"}(r||(r={})),function(e){var t=function(e,t,n){this.scrollTop=e,this.viewport=t,this.converters=s.L.converters(e,s.r.FromWindowTop.ISO.unwrap(t.top),n)};e.Impl=t}(i||(i={})),function(e){var t=(0,o.getStructEq)({top:o.eqNumber,height:o.eqNumber});e.eqDimensionsTuple=(0,o.getTupleEq)(t,t)}(a||(a={}))},13338:(e,t,n)=>{"use strict";n.d(t,{S4:()=>_,Bk:()=>S,v_:()=>x,Sd:()=>I,nM:()=>k,GC:()=>T});var r=n(45980),i=n(73805),a=n(83078),o=n(64909),s=n(42654),u=n(89943),c=n(95053),l=n(77176),d=n(28043),p=n(66310),f=n(52479),m=n(2844),h=n(85985),g=n(87280),v=n(17031),y=n(38524),b=n(31346),w=n(71517),_=function(e){return-1!==["focused","expanded"].indexOf(e.visualState.transition.type)&&!e.scheduledToDispose},S=function(e){return e.isCardsHeightValid&&(0,i.pipe)(y.In.getActiveItem(e),a.wo((function(e){return!e.scheduledToDispose})))},C=function(e){return e.isCardsHeightValid&&(0,i.pipe)(y.In.getActiveItem(e),a.wo((function(e){return!e.scheduledToDispose})))};function x(e){var t=e.cardTop,n=e.cardHeight,r=e.viewportHeight,i=e.padding,a=w.L.FromViewportTop.ISO.unwrap(t),o=a+n;return n>r?a:a<0?n+i.before<r?a-i.before:a:o>r?n+i.after<r?o-r+i.after:o-r:a<i.before?n+i.after+i.before<r?a-i.before:n+i.after<r?a-i.after:i.before:r-o<i.after&&n+i.after<r?i.after-(r-o):0}var I=function(e){return e.pipe(l.U(o.filter((function(e){var t=e.currentLens;return C(t)}))))},A=o.getEq(s.getStructEq({id:s.fromEquals(s.strictEqual),positionState:s.getStructEq({height:s.fromEquals(s.strictEqual),absTop:s.fromEquals(s.strictEqual)}),visualState:v.t.eq})),E=o.getEq(s.fromEquals((function(e,t){return A.equals(y.In.getActiveItem(e),y.In.getActiveItem(t))&&e.items.size===t.items.size&&u.Hx(e.items.keys(),t.items.keys(),(function(e,t){return e===t}))}))),k=function(e,t,n,r,a){return e.pipe(l.U(o.map((function(e){return e.currentLens.id}))),d.x(s.eqStrict.equals),l.U(o.isSome),p.w(f.Ft(m.aj(t,n,r,I(e).pipe(l.U(o.map((function(e){return e.currentLens}))),d.x(E.equals),p.w(a))))),h.h((function(e){e[0],e[1],e[2];var t=e[3];return(0,i.pipe)(t,o.exists(C))})),l.U((function(e){return{viewport:e[0],scrollTop:e[1],paddingTop:e[2]}})))},T=function(e){var t=e.cardsBeyondViewport,n=e.cardsAroundActive,s=e.changePosition;return function(e){var u=e.viewport,l=e.scrollTop,d=e.paddingTop,p=e.completeTransition;return function(e){var f=e.currentLens,m=function(e,t,n,r){return e.size<2||Math.floor(t.height/Math.min(a.MH(e.getAt(0)).positionState.height,a.MH(e.getAt(1)).positionState.height))>=e.size?{from:0,to:e.size}:{from:Math.max(0,c.aW.lowerBound(e,(function(e){return e.positionState.absTop+e.positionState.height<n}))-r),to:Math.min(e.size,c.aW.lowerBound(e,(function(e){return e.positionState.absTop<n+t.height}))+r)}}(f.items,u,l-d,t),h=!1,v=f.items.map((function(e,t,a){var u,c,l=(0,r.flow)((u=s,c=e.positionState.watched||function(e){return m.from<=e&&m.to>e||(0,i.pipe)(f.cardIndex,o.exists((function(t){return e>=t-n&&e<=t+n})))}(a),function(e){return e.positionState.visible!==c?u.changePosition(g.Z.changeVisible(e.positionState,c))(e):e}),function(e){return function(t){return!t.positionState.visible&&t.positionState.animationInProgress?e.changePosition(g.Z.changeAnimationInProgress(t.positionState,!1))(t):t}}(s),p)(e);return l!==e?(h=!0,l):e}));return h?y.nL.Prism.getLens().compose(b.v.Prism.items).set(v,e):e}}}},62712:(e,t,n)=>{"use strict";n.d(t,{J:()=>r});var r,i=n(71102),a=n(73805),o=n(42654),s=n(64909),u=n(83078),c=n(11742),l=n(58199),d=n(78090),p=n(87280),f=n(36473),m=n(17031);!function(e){e.id="BulkAcceptItemId",e.Kind="BulkAcceptItem";var t=i.getEq(o.fromEquals((function(e,t){return e.alert.id===t.alert.id})));e.efficientAlertEq=o.fromEquals((function(e,n){return e.length===n.length&&t.equals(e,n)})),e.eqByAlerts=o.fromEquals((function(t,n){return e.efficientAlertEq.equals(t.alerts,n.alerts)})),e.eq=o.fromEquals((function(t,n){return e.eqByAlerts.equals(t,n)&&p.Z.eq.equals(t.positionState,n.positionState)&&m.t.eq.equals(t.visualState,n.visualState)&&t.visibilityState===n.visibilityState})),e.isBulkAcceptItem=function(t){return t.id===e.id},e.isInAppliedState=function(e){return"applied"===e.visibilityState},e.updateAlerts=function(e,t){return new h(t,e.visibilityState,e.positionState,e.visualState,e.showNewLabel)},e.changePosition=function(e){return function(t){return new h(e.alerts,e.visibilityState,t,e.visualState,e.showNewLabel)}},e.completeTransition=function(e,t){return new h(e.alerts,e.visibilityState,e.positionState,m.t.complete(e.visualState,t),e.showNewLabel)},e.transitionTo=function(e,t){return new h(e.alerts,e.visibilityState,e.positionState,m.t.to(e.visualState,t),e.showNewLabel)},e.dismiss=function(e){return new h(e.alerts,"dismissed",e.positionState,m.t.to(e.visualState,{type:"removed",clockwise:!0}),e.showNewLabel)},e.select=function(e,t){return(0,a.pipe)(t,s.filter((function(t){return t.id===e.id})),u.vx((0,a.pipe)(e,s.fromPredicate((function(e){return"focused"===e.visualState.transition.type})))),s.fold((function(){var n=p.Z.invalidateHeight(e.positionState),r={type:"focused",clockwise:!0},i=(0,a.pipe)(t,s.fold((function(){return m.t.initial(r)}),(function(){return m.t.to(e.visualState,r)})));return new h(e.alerts,e.visibilityState,n,i,e.showNewLabel)}),(function(){return e})))},e.unselect=function(e,t){return(0,a.pipe)(t,s.filter((function(t){return t.id===e.id})),u.vx((0,a.pipe)(e,s.fromPredicate((function(e){return"rendered"===e.visualState.transition.type})))),s.fold((function(){var t=p.Z.invalidateHeight(e.positionState),n="hidden"===e.visualState.transition.type?e.visualState:m.t.to(e.visualState,{type:"rendered",clockwise:!0});return new h(e.alerts,e.visibilityState,t,n,e.showNewLabel)}),(function(){return e})))},e.hasAlert=function(e){return function(t){return void 0!==t.alerts.find((function(t){return t.alert.id===e}))}}}(r||(r={}));var h=function(){function e(e,t,n,i,a){this.alerts=e,this.visibilityState=t,this.positionState=n,this.visualState=i,this.showNewLabel=a,this.kind=r.Kind,this.id=r.id,this.renderOptions=f.j.defaultOptions,this.activeAlertIndex=0,this.activeHighlightIndex=0,this.scheduledToDispose=!1,this.activeAlert=e[0].alert;var o=e.map((function(e){return e.alert.getHighlightRanges()[0]}));this.meta=new c.n.Impl(l.g.fromRatio(this.activeAlert.progress),this.activeAlert.explanation,c.n.CheckingState.Idle,o,!1,s.none)}return e.prototype.equals=function(e){return r.eq.equals(this,e)},e.prototype.hashCode=function(){return(0,d.AC)(this.alerts.map((function(e){return e.alert.id})).join())},e}()},89881:(e,t,n)=>{"use strict";n.d(t,{c:()=>r});var r,i=n(42654);!function(e){e.eqById=i.fromEquals((function(e,t){return e.id===t.id}))}(r||(r={}))},87280:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var r,i=n(45980),a=n(42654),o=n(55415);!function(e){e.eq=a.getStructEq({absTop:a.eqNumber,height:a.eqNumber,animationInProgress:a.eqBoolean,visible:a.eqBoolean,isHeightValid:a.eqBoolean,watched:a.eqBoolean}),e.empty={absTop:0,height:0,animationInProgress:!1,visible:!1,isHeightValid:!1,watched:!1},e.create=i.identity,e.dimensionEquals=function(e,t){return e.absTop===t.absTop&&e.height===t.height},e.changeTop=function(e,t){return o.Vx(e,{absTop:t})},e.changeHeight=function(e,t){return o.Vx(e,{height:t,isHeightValid:!0})},e.changeAnimationInProgress=function(e,t){return o.Vx(e,{animationInProgress:t})},e.changeVisible=function(e,t){return o.Vx(e,{visible:t})},e.invalidateHeight=function(e){return o.Vx(e,{isHeightValid:!1})},e.changeWatched=function(e,t){return o.Vx(e,{watched:t})}}(r||(r={}))},91473:(e,t,n)=>{"use strict";n.d(t,{$:()=>r,a:()=>i});var r,i,a=n(73805),o=n(42654),s=n(8125),u=n(78090),c=n(87280),l=n(36473),d=n(17031),p=o.fromEquals((function(e,t){return e.id===t.id&&c.Z.eq.equals(e.positionState,t.positionState)&&d.t.eq.equals(e.visualState,t.visualState)})),f=function(e){return(0,u.NO)({itemId:e.id,transitionType:e.visualState.transition.type,positionState:(0,u.NO)(e.positionState)})};!function(e){e.id="PriorityToggleHintId",e.Kind="PriorityToggleHint",e.create=function(e,n){return new t(e,n,l.j.defaultOptions)},e.hidden={type:"hidden",clockwise:!1},e.visible={type:"rendered",clockwise:!1},e.changePosition=function(t,n){return e.create(t.visualState,n)},e.transitionTo=function(t,n){return e.create((0,a.pipe)(d.t.to(t.visualState,n),(function(e){return d.t.complete(e,e.transitionId)})),t.positionState)},e.isPriorityToggleHint=function(t){return t.id===e.id},e.isVisible=function(t){return t.visualState.transition.type===e.visible.type};var t=function(){function t(t,n,r){this.visualState=t,this.positionState=n,this.renderOptions=r,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}return t.prototype.equals=function(e){return p.equals(this,e)},t.prototype.hashCode=function(){return f(this)},t}()}(r||(r={})),function(e){e.id="PriorityToggleId",e.Kind="PriorityToggle",e.create=function(e,n){return new t(e,n,l.j.defaultOptions)},e.changePosition=function(t,n){return e.create(t.visualState,n)},e.transitionTo=function(t,n){return e.create((0,a.pipe)(d.t.to(t.visualState,n),(function(e){return d.t.complete(e,e.transitionId)})),t.positionState)},e.isPriorityToggle=function(t){return t.id===e.id},e.isPriorityItem=(0,s.Kg)(e.isPriorityToggle,r.isPriorityToggleHint),e.isCollapsed=function(t){return t.visualState.transition.type===e.collapsed.type},e.isExpanded=function(t){return t.visualState.transition.type===e.expanded.type},e.isHidden=function(t){return t.visualState.transition.type===e.hidden.type},e.hidden={type:"hidden",clockwise:!1},e.collapsed={type:"added",clockwise:!1},e.expanded={type:"rendered",clockwise:!1};var t=function(){function t(t,n,r){this.visualState=t,this.positionState=n,this.renderOptions=r,this.kind=e.Kind,this.scheduledToDispose=!1,this.id=e.id}return t.prototype.equals=function(e){return p.equals(this,e)},t.prototype.hashCode=function(){return f(this)},t}()}(i||(i={}))},36473:(e,t,n)=>{"use strict";n.d(t,{Y:()=>r,j:()=>i});var r,i,a=n(59312),o=n(95686),s=n(64909),u=n(22232),c=n(76974);!function(e){e.yellow="yellow",e.gray="gray"}(r||(r={})),function(e){var t;e.toJSON=function(e){return(0,a.__assign)((0,a.__assign)({},e),{isNew:e.isNew._value})},function(e){e.cozy="cozy",e.compact="compact",e.minimal="minimal"}(t=e.Density||(e.Density={})),e.defaultOptions={features:new Set,layoutDensity:t.cozy,isNew:c.of(s.none),upgradeDemoPremiumNotice:r.yellow,showBundle:!1},function(e){function t(t,n,r){return function(i){switch(i){case e.cozy:return t();case e.compact:return n();case e.minimal:return r();default:return(0,u.vE)(i)}}}e.match=function(e,n,r){return t(o.of(e),o.of(n),o.of(r))},e.matchL=t,e.matchOrDefault=function(e){return function(t,n){return function(r){return r===e?t():n()}}}}(t=e.Density||(e.Density={})),function(e){e.showLabel="showLabel",e.enableMuteQuotedAdvice="enableMuteQuotedAdvice",e.showBulkAcceptIcon="showBulkAcceptIcon",e.showAnonymousUserFooters="showAnonymousUserFooters",e.showPremiumTrialFooters="showPremiumTrialFooters",e.showPersistentPremiumCardLabels="showPersistentPremiumCardLabels",e.showNewPremiumCardLabels="showNewPremiumCardLabels"}(e.Features||(e.Features={}))}(i||(i={}))},17031:(e,t,n)=>{"use strict";n.d(t,{t:()=>i});var r,i,a=n(42654),o=n(64909),s=n(22232),u=n(55415);!function(e){e.eq=a.getStructEq({type:a.eqString,clockwise:a.eqBoolean}),e.nominal||(e.nominal={})}(r||(r={})),function(e){e.initial=function(e,t){return void 0===t&&(t=!0),{from:o.none,transitionId:0,transition:e,incomplete:t}},e.eq=a.getStructEq({from:o.getEq(a.eqStrict),transitionId:a.eqStrict,transition:r.eq,incomplete:a.eqStrict}),e.to=function(e,t){return{from:o.some(e.transition.type),transitionId:e.transitionId+1,transition:t,incomplete:!0}},e.complete=function(e,t){return(0,s.kG)(t===e.transitionId,"unexpected transitionId"),u.Vx(e,{incomplete:!1})}}(i||(i={}))},78792:(e,t,n)=>{"use strict";n.d(t,{l:()=>P});var r=n(59312),i=n(95686),a=n(45980),o=n(73805),s=n(65772),u=n(64909),c=n(22232),l=n(92932),d=n(10002),p=n(32952),f=n(77176),m=n(76974),h=n(95300),g=n(24209),v=n(99391),y=n(66310),b=n(52479),w=n(69935),_=n(91224),S=n(41398),C=n(2834),x=n(28043),I=n(598),A=n(83401),E=n(41199),k=n(40644),T=n(38524),L=n(20490),P=function(){function e(e,t,n,c,I,A,k){var P=this;this._state=e,this._stateProvider=t,this._alertsReader=n,this._alertsService=c,this._stateSideEffects=I,this._getActiveAlert=A,this._stateTransformer=k,this.focusLens=function(e,t,n){void 0===n&&(n={toFocus:T.Zz.defaultOptions.focusBehavior}),P._log.debug("focusLens "+e),P._switchLensActions.next({lensId:e,alertSource:t,options:n})},this.focusAlert=function(e,t,n){P._switchAlertActions.next({alertHighlight:e,alertSource:t,options:{order:n}})},this._log=l.C8.Logging.getLogger("FocusedLensManagerImpl"),this._switchLensActions=new p.xQ,this._switchAlertActions=new p.xQ,this._addMetadata=function(e){return function(t){return t.pipe(f.U((function(t){return{source:t,metadata:e}})))}},this._focusLensEffect=function(e){var t=e.lensId,n=e.alertSource,r=e.options,i=r.toFocus,a=void 0===i?T.Zz.defaultOptions.focusBehavior:i,s=r.order;if(P._log.debug("_focusLensEffect ",{alertSource:n,lensId:t}),d.R.isClosedId(t))return(0,o.pipe)(m.of(T.nL.Effect.Applicator.Source.override((0,L.T)())),P._addMetadata({sourceId:"LSM.focusLensEffect"}));if(d.R.isDraftAIId(t))return(0,o.pipe)(m.of(T.nL.Effect.Applicator.Source.override((0,L.zc)())),P._addMetadata({sourceId:"LSM.focusLensEffect"}));var u=P._state.get(),c=u.patch({switchOrder:s||u.switchOrder,alertSource:n});return(0,o.pipe)(P._stateProvider.getLensEventsByLensId(c,t,{focusBehavior:a}),P._addMetadata({sourceId:"LSM.focusLensEffect"}))},this._focusAlertEffect=function(e){var t=e.alertHighlight,n=e.alertSource,r=e.options;P._log.isEnabled(l.zW.LogLevel.TRACE)&&P._log.trace("focusAlert("+t.alert+")");var i=P._state.get(),a=i.patch({switchOrder:r.order||i.switchOrder,alertSource:n});return(0,o.pipe)(P._stateProvider.getLensEventsByAlert(a,function(e,t,n){if(e===d.R.SpecialId.Priority||e===d.R.SpecialId.PredictionTakeaways||e===d.R.SpecialId.PredictionEmogenie||e===d.R.SpecialId.RealTimeProofit)return e;if(void 0!==n)return n;if(e===d.R.SpecialId.Closed||e===d.R.SpecialId.AllAlerts)return d.R.SpecialId.AllAlerts;return t}(i.currentLens.id,t.alert.lensId,r.lensId),t),P._addMetadata({sourceId:"LSM.focusAlertEffect"}))};var R=this._state.get(),N=this._stateTransformer,M=new h.X(R);this._effects=g.T.apply(v,(0,r.__spreadArrays)(this._stateSideEffects.map((function(e){var t=e.when,n=e.what,r=e.id;return P._state.view("currentLens","id").view(t).pipe(y.w(b.Ft((0,o.pipe)(P._effectToApplicator(n),P._addMetadata({sourceId:r})))))})),[g.T(this._switchAlertActions.pipe(f.U(this._focusAlertEffect)),this._switchLensActions.pipe(f.U(this._focusLensEffect))).pipe(w.B())])),this._subs=[this._effects.pipe(_.K((function(e,t){return P._log.error("Got error from effects: ",e),t})),S.M(M,(function(e,t){var n=e.source,r=e.metadata;return{state:n(t),metadata:r}})),_.K((function(e,t){return P._log.error("Got error while applying new state: ",e),t})),f.U(N),_.K((function(e,t){return P._log.error("Got error while transforming state: ",e),t}))).subscribe((function(e){return(0,o.pipe)(e,s.fold((function(e){var t=e.state,n=e.metadata;P._log.isEnabled(l.zW.LogLevel.TRACE)&&P._log.trace("lens state from: "+n.sourceId,t),(0,o.pipe)(P._checkState(t),s.fold((function(e){return P._log.error("incorrect state transition detected",{error:e,state:t})}),(function(){return M.next(t)})))}),s.fold((function(e){return P._switchAlertActions.next(e)}),(function(e){return P._switchLensActions.next(e)}))))})),(0,o.pipe)(M,f.U(T.nL.getActiveAlert(this._getActiveAlert)),C.b((function(e){return P._log.trace("active alert: ",e)})),x.x(u.getEq(E.$.eq).equals),y.w(b.aI((function(e){return(0,o.pipe)(P._alertsService.takeReference(e,"activeCard"),s.mapLeft((function(e){return P._log.error("can not take alertRef",e)})),s.fold(i.of(a.constVoid),(function(e){return e.dispose})))})))).subscribe(),(0,o.pipe)(M,f.U(b.wW(this._state))).subscribe()],T.nL.hasCards(R)&&(0,o.pipe)(T.nL.getActiveAlertHighlight(this._getActiveAlert)(R),u.filter((function(e){return P._alertsReader.isRegistered(e.alert.id)})),u.fold((function(){return P._switchLensActions.next({lensId:R.currentLens.id,alertSource:R.alertSource,options:{order:R.switchOrder,toFocus:T.nL.Effect.FocusBehavior.noFocus}})}),(function(e){return P._switchAlertActions.next({alertHighlight:e,alertSource:R.alertSource,options:{lensId:R.currentLens.id,order:R.switchOrder}})})))}return e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._effectToApplicator=function(e){var t=this;switch(e.type){case T.nL.Effect.Type.Applicator:case T.nL.Effect.Type.ItemsApplicator:return e.source;case T.nL.Effect.Type.SwitchLens:return e.source.pipe(C.b((function(e){return t._switchLensActions.next(e)})),I.c(A.F()));case T.nL.Effect.Type.SwitchAlert:return e.source.pipe(C.b((function(e){return t._switchAlertActions.next(e)})),I.c(A.F()));default:return(0,c.vE)(e)}},e.prototype._checkState=function(e){try{if(T.nL.hasCards(e)){var t=e.currentLens.items.filter(k.X.isFocused);(0,c.kG)(t.size<=1,"cannot have more than one focused card",(function(){return JSON.stringify(t)}))}}catch(e){return s.left(e)}return s.right(void 0)},e.toLensAlert=function(e){var t=e.alert;return{alert:t,highlightIndex:e.highlightIndex,lensId:t.lensId}},e}()},20490:(e,t,n)=>{"use strict";n.d(t,{T:()=>T,zc:()=>L,oq:()=>P});var r=n(59312),i=n(45980),a=n(73805),o=n(42654),s=n(22232),u=n(92843),c=n(64909),l=n(8125),d=n(83078),p=n(92932),f=n(41120),m=n(17753),h=n(10002),g=n(76779),v=n(66654),y=n(76974),b=n(85985),w=n(28043),_=n(77176),S=n(24209),C=n(16118),x=n(66310),I=n(93508),A=n(41199),E=n(38524),k=n(31346),T=function(){return E.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:k.v.Closed.create(i.constFalse,o.fromEquals(i.constFalse))})},L=function(){return E.nL.create({alertSource:m.l$.api,switchOrder:"lensOrder",currentLens:k.v.DraftAI.create()})},P=function(){function e(e,t,n,o,s,u,c,l,d,f){var h=this;void 0===f&&(f=E.nL.FocusFirstFilter.defaultFilter),this._checkingState=e,this._alertsReader=t,this._lenses=n,this._positionManager=o,this._lensPreviewVM=s,this._lensViewFactory=u,this._alertsHandlerFactory=c,this._capabilities=l,this._alertsFilterService=d,this._focusFirstFilter=f,this._transformAlertsDiffToApplicator=function(e){return function(t){return function(n){return E.nL.hasItems(n)?n.patch({currentLens:e(t,(0,i.not)(m.bZ.isMuted))(n.currentLens)}):n}}},this._log=p.C8.Logging.getLogger("FocusedLensManagerImpl"),this._updateMetaSource=function(e){return function(t){return function(n){return e===n.currentLens.id&&E.nL.hasItems(n)?E.nL.Prism.getLensWithItems().modify(h._capabilities.updateMeta(t),n):n}}},this._lensAlerts=function(e){var t=h._alertsFilterService.alertVisibleInSidebar(e.id);return(0,a.pipe)(h._checkingState.get(),g.p.reduce([],(function(e,n){var i=n.alert;return t(i)?(0,r.__spreadArrays)(e,[i]):e})),(function(e){return e.sort(m.bZ.ord.compare)}))}}return e._mapByActiveLensId=function(e,t,n,r){if(h.R.isOutcomeId(e))return r();switch(e){case h.R.SpecialId.Plagiarism:return t();case h.R.SpecialId.Premium:return n();case h.R.SpecialId.AllAlerts:case h.R.SpecialId.Priority:case h.R.SpecialId.PredictionTakeaways:case h.R.SpecialId.PredictionEmogenie:case h.R.SpecialId.RealTimeProofit:return r();default:return(0,s.vE)(e)}},e.prototype._conditionedApplicator=function(e,t){return function(n){return function(r){return e(r,n)?t(n)(r):r}}},e._filterALEvents=function(e){return function(t){return y.of((0,a.pipe)(t,g.p.Diff.filter((function(t){return e(t.alert)})))).pipe(b.h((0,i.not)(u.v.isEmpty)))}},e.prototype.emptyState=function(e){return void 0===e&&(e=h.R.SpecialId.AllAlerts),E.nL.create({currentLens:this._createLens({lensId:e,initialLens:this._lensPreviewVM.getLens(e).get(),visibleAlerts:[],alertHighlight:c.none,alertSource:m.l$.api}),alertSource:m.l$.api,switchOrder:"lensOrder"})},e.prototype.getLensEventsByLensId=function(e,t,n){var r=this;void 0===n&&(n={});var i=this._getActiveLensMeta(t),o=this._lensAlerts(i),s=this._createState(e,c.none,i,t,o),u=n.focusBehavior?this._getAlertToFocus(n.focusBehavior,s):c.none;e.currentLens.id===t&&E.nL.hasItems(e)&&this._capabilities.getActiveAlertsCount(e.currentLens)!==o.length&&this._log.warn("Lens contains inconsistent number of alerts",i.id);var l=E.nL.hasItems(s)?(0,a.pipe)(u,c.fold((function(){return s}),(function(n){return r._createState(e,c.some(n),i,t,o)}))):s;return this._generateEventsFromState(l,this._alertsHandlerFactory(t))},e.prototype.getLensEventsByAlert=function(e,t,n){(0,s.kG)(c.isSome(this._alertsReader.getById(n.alert.id)),"Can't focus non existing alert",n.alert.id);var r=this._getActiveLensMeta(t),i=e.currentLens.meta.id===t&&e.currentLens.meta.filter(n.alert)&&E.nL.hasItems(e)?E.nL.Prism.getLensWithItems().modify(this._capabilities.selectItemByAlert(n),e):this._createState(e,c.some(n),r,t,this._lensAlerts(r));return this._generateEventsFromState(i,this._alertsHandlerFactory(t))},e.prototype.findClosestAlertHighlight=function(e,t){var n=this;return(0,a.pipe)(this._positionManager.findClosestToPosition(e,(function(e){return f.P.is(e)&&f.x.isVisible(e)&&!f.x.isApplied(e)&&(0,a.pipe)(n._alertsReader.getRegistered(e.meta.alertId),c.exists((function(r){return n._alertsFilterService.alertCanBeDisplayed(r)&&t(r)&&r.getHighlightRanges().some((function(t){return t.meta.id===e.meta.id}))})))})),c.chain((function(e){return(0,a.pipe)(n._alertsReader.getRegistered(e.meta.alertId),c.map((function(t){var r={alert:A.$.fromModel(t),highlightIndex:t.getHighlightRanges().findIndex((function(t){return t.meta.id===e.meta.id}))};return r.highlightIndex<0&&(n._log.error("findClosestAlertRange returned a range which doesn't exist in alert.highlightRanges",{alert:r.alert.toString(),range:JSON.stringify(e),positionManagerRanges:JSON.stringify(n._positionManager.findRanges((function(e){return f.P.is(e)&&e.meta.alertId===t.id}))),hasPendingRanges:t.hasNewRangesForUpdate}),r.highlightIndex=0),r})))})))},e.prototype.findNextAlertInText=function(e,t){var n=e.alert,r=e.highlightIndex,i=n.getHighlightRanges();return(0,s.kG)(r<i.length,"AHI is out of highlightRanges length","hr length: "+i.length+", ahi: "+r),this.findClosestAlertHighlight(i[r].end,t)},e.prototype.findNextAlertInTextByLens=function(e,t,n){return this.findNextAlertInText(e,this._alertsFilterService.alertVisibleInText(t,n))},e.prototype.findPremiumAlert=function(){return this._lensPreviewVM.getLens(h.R.SpecialId.Premium).get().count>0?(0,a.pipe)(this._checkingState.get(),g.p.find((0,i.flow)(m.bZ.fromAlertModel,(0,l.W9)(m.bZ.isRegistered,m.bZ.isPremium))),c.map((function(e){return{alert:A.$.fromModel(e.alert),highlightIndex:0}}))):c.none},e.prototype.hasZeroFreeAlerts=function(e){return 0===this._lensPreviewVM.getLens(e.get()).get().priorityCount},e.prototype._getMetaChangesObservable=function(e){return E.nL.hasItems(e)&&e.currentLens.kind===E._L.persistent?this._lensPreviewVM.getLens(e.currentLens.id).view(this._updateMetaSource(e.currentLens.id)):E.nL.hasItems(e)&&e.currentLens.type===E.Nm.lensview?this._lenses.pipe(w.x(v.w.eq.equals),_.U((0,i.flow)(v.w.lookup(e.currentLens.id),c.map(this._updateMetaSource(e.currentLens.id)),c.getOrElse((function(){return E.nL.Effect.Applicator.Source.identity}))))):E.nL.Effect.Applicator.Source.empty},e.prototype._generateEventsFromState=function(t,n){var r=this;return S.T(this._checkingState.pipe(C.G(),_.U((function(e){var t=e[0],n=e[1];return g.p.diff(t,n)})),x.w(e._filterALEvents(t.currentLens.meta.filter)),_.U(this._conditionedApplicator((function(e,t){var n=r._alertsFilterService.getLensesFilter(e.currentLens.id),o=(0,a.pipe)(t,g.p.Diff.filter((0,i.not)((function(e){var t=e.alert;return n(t)}))));return u.v.isEmpty(o)||r._log.info("tried to send event with alerts that do not fit current lens, skipping",{diff:g.p.Diff.show.show(o)}),u.v.isEmpty(o)}),this._transformAlertsDiffToApplicator(n)))),this._getMetaChangesObservable(t)).pipe(I.O(E.nL.Effect.Applicator.Source.override(t)))},e.prototype._getActiveLensMeta=function(t){var n=this,r=e._mapByActiveLensId(t,(function(){return n._lensPreviewVM.getLens(h.R.SpecialId.Plagiarism).get()}),(function(){return n._lensPreviewVM.getLens(h.R.SpecialId.Premium).get()}),(function(){return n._lensPreviewVM.getLens(t).get()}));return(0,s.kG)(void 0!==r,"unknown lensId:"+t),r},e.prototype._createState=function(e,t,n,r,i){var o=this,u=e.alertSource,l=e.switchOrder;(0,s.kG)(d.wo((function(e){var t=e.alert;return c.isSome(o._alertsReader.getInteractable(t.id))}))(t),"we can create state only with alert in registered state",(function(){return(0,a.pipe)(t,c.fold((function(){return"null"}),(function(e){return e.toString()})))}));var p=this._createLens({lensId:r,initialLens:n,visibleAlerts:i,alertHighlight:t,alertSource:u});return E.nL.create({currentLens:p,alertSource:u,switchOrder:l})},e.prototype._createLens=function(e){var t=(0,a.pipe)(this._focusFirstFilter(e),c.map((function(t){var n=t.alert,r=t.highlightIndex;return{alertIndex:e.visibleAlerts.findIndex((0,E.Tl)(n)),highlightIndex:r}})));return this._lensViewFactory.create(e.lensId,e.initialLens,e.visibleAlerts,t)},e.prototype._getAlertToFocus=function(e,t){switch(e.kind){case E.nL.Effect.FocusBehaviorType.noFocus:case E.nL.Effect.FocusBehaviorType.unFocus:return c.none;case E.nL.Effect.FocusBehaviorType.focusFirst:return E.nL.hasItems(t)?this._capabilities.findFirstAlert(t.currentLens):c.none;case E.nL.Effect.FocusBehaviorType.focusNext:return E.nL.hasItems(t)?this._capabilities.findNextAlert(t.currentLens):c.none;case E.nL.Effect.FocusBehaviorType.focusAlert:return c.some(e.alertHighlight);default:(0,s.vE)(e)}},e}()},55969:(e,t,n)=>{"use strict";n.d(t,{is:()=>o,kn:()=>s,ad:()=>u,gi:()=>c});var r=n(22232),i=n(10002),a=n(31346),o=function(e,t){return function(n){if(i.R.isOutcomeId(n))return a.v.WithSuccess.getAlertHandler(e,t);switch(n){case i.R.SpecialId.Plagiarism:return a.v.Plagiarism.getAlertsHandler(e);case i.R.SpecialId.Premium:return a.v.Premium.getAlertsHandler(e);case i.R.SpecialId.AllAlerts:case i.R.SpecialId.Priority:case i.R.SpecialId.PredictionTakeaways:case i.R.SpecialId.PredictionEmogenie:case i.R.SpecialId.RealTimeProofit:return a.v.WithSuccess.getAlertHandler(e,t);default:return(0,r.vE)(n)}}},s=function(e,t,n,r){return function(i){return t(i)?a.v.Bundles.getAlertsHandler(e,r):n(i)}},u=(function(){function e(e,t,n,r,i){this._cardFactory=e,this._alertsFilterService=t,this._inner=n,this._capabilities=r,this._itemEq=i}e.prototype.create=function(e,t,n,r){return i.R.isOutcomeId(e)||i.R.isAllAlerts(e)?a.v.Priority.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._capabilities,this._itemEq):this._inner.create(e,t,n,r)}}(),function(){function e(e,t,n,r,i){this._cardFactory=e,this._alertsFilterService=t,this._lensPredicate=n,this._inner=r,this._itemEq=i}return e.prototype.create=function(e,t,n,r){return this._lensPredicate(t)?a.v.Bundles.create(e,t,n.filter(this._alertsFilterService.alertVisibleInSidebar(e)),r,this._cardFactory,this._itemEq):this._inner.create(e,t,n,r)},e}()),c=function(){function e(e,t,n){this._cardFactory=e,this._alertsFilterService=t,this._itemEq=n}return e.prototype.create=function(e,t,n,o){var s=this,u=function(){return a.v.WithSuccess.create(e,t,n.filter(s._alertsFilterService.alertVisibleInSidebar(e)),o,s._cardFactory,s._itemEq)};if(i.R.isOutcomeId(e))return u();switch(e){case i.R.SpecialId.Plagiarism:return a.v.Plagiarism.create(t,n,o,this._cardFactory,this._itemEq);case i.R.SpecialId.Premium:return a.v.Premium.create(t,n,this._cardFactory,this._itemEq);case i.R.SpecialId.AllAlerts:case i.R.SpecialId.Priority:case i.R.SpecialId.PredictionTakeaways:case i.R.SpecialId.PredictionEmogenie:case i.R.SpecialId.RealTimeProofit:return u();default:return(0,r.vE)(e)}},e}()},31346:(e,t,n)=>{"use strict";n.d(t,{v:()=>r});var r,i=n(59312),a=n(26001),o=n(489),s=n(42654),u=n(22902),c=n(45980),l=n(73805),d=n(88111),p=n(64909),f=n(22232),m=n(83078),h=n(89943),g=n(8125),v=n(65772),y=n(22788),b=n(92843),w=n(55415),_=n(17753),S=n(10002),C=n(95053),x=n(78090),I=n(40250),A=n(41199),E=n(40644),k=n(15066),T=n(50536),L=n(17031),P=n(87280),R=n(91473),N=n(38524);!function(e){var t,n,r,F;!function(e){function t(e){return N.nL.hasSuccess(e)&&n.isInSuccess(e.currentLens)||i(e)&&r.isInSuccess(e)}function i(e){return N.nL.hasSuccess(e)&&(0,N.yi)(e.currentLens)}e.isInSuccess=t,e.isWithPriorityList=i,e.isInGlobalSuccess=function(e){return(N.nL.is(S.R.SpecialId.AllAlerts)(e)||N.nL.is(S.R.SpecialId.Priority)(e))&&t(e)},e.idAndStateMatch=function(e,n){return e.currentLens.id===n.currentLens.id&&t(e)===t(n)}}(t=e.State||(e.State={})),function(t){t.items=d.Ri.create((function(e){return e.items}),(function(t,n){return e.setVisibleItems(t)(n)})),t.feedItems=d.Ri.create((function(e){return e.items}),(function(t,n){return e.setVisibleItems(t)(n)}))}(e.Prism||(e.Prism={})),e.getEq=function(e){return s.fromEquals((function(t,n){if(t.kind===N._L.abstract||n.kind===N._L.abstract)return t.id===n.id;var r=t,i=n;return t.id===n.id&&p.getEq(e).equals(N.In.getActiveItem(r),N.In.getActiveItem(i))&&r.meta.equals(n.meta)&&r.items.equals(i.items)}))},e.lensHash={hashCode:function(e){if(e.kind===N._L.abstract)return(0,x.AC)(e.id);var t,n=e,r=7;return 31*(r=31*(r=31*r+(0,x.AC)(e.id))+(t=N.In.getActiveItem(n),(0,l.pipe)(t,p.fold((function(){return 2433880}),(function(e){return null==e?9735524:e.hashCode()<<2})))))+e.meta.count}},e.getAlertReleaser=function(e){return{release:function(t){return function(n){var r=n.items.map(e.removeAlertFromItem({alerts:[t],state:n})),a=(0,l.pipe)(n.cardIndex,p.chain((function(e){return(0,l.pipe)(r.findRightFrom((function(e){return e.scheduledToDispose}),e),p.map((function(e){return e.index})))})),p.isSome)?N.wj.skip:N.wj.force;return(0,i.__assign)((0,i.__assign)({},n),{animation:a,items:r})}}}},e.getUnselectable=function(e,t){return{unselectItem:function(){return function(n){var r=(0,l.pipe)(n,e,p.map((function(e){return n.items.add((0,l.pipe)(e,t.unselect({nextCard:p.none,ord:n.itemsOrd})))})),p.getOrElse((function(){return n.items})));return(0,i.__assign)((0,i.__assign)({},n),{items:r,animation:N.wj.force,cardIndex:p.none})}}}},e.getSelectableByAlert=function(e,t){return{selectItemByAlert:function(n){return function(r){var a=e(r),o=r.items.find(t.isSelectableByAlert(n));(0,f.kG)(p.isSome(o),"Can not find card for provided alert. Unknown card or it is already disposed.",(function(){return n.alert.toString()}));var s=m.MH(o),u=s.value,c=s.index,d=(0,l.pipe)(a,p.map((function(e){return r.items.add((0,l.pipe)(e,t.unselect({nextCard:p.some(u),ord:r.itemsOrd})))})),p.getOrElse((function(){return r.items}))).add((0,l.pipe)(u,t.selectByAlert({alertHighlight:n,previousCard:a,ord:r.itemsOrd,meta:p.none})));return(0,i.__assign)((0,i.__assign)({},r),{items:d,animation:N.wj.force,cardIndex:p.some(c)})}}}},e.getSelectableById=function(e,t){return{selectItemById:function(n){return function(r){var a=e(r),o=r.items.get(n),s=m.MH(o),u=s.value,c=s.index,d=(0,l.pipe)(a,p.map((function(e){return r.items.add((0,l.pipe)(e,t.unselect({nextCard:p.some(u),ord:r.itemsOrd})))})),p.getOrElse((function(){return r.items}))).add((0,l.pipe)(u,t.select({previousCard:a,ord:r.itemsOrd,meta:p.none})));return(0,i.__assign)((0,i.__assign)({},r),{items:d,animation:N.wj.force,cardIndex:p.some(c)})}}}},e.getMetaUpdatable=function(){return{updateMeta:function(e){return function(t){return(0,i.__assign)((0,i.__assign)({},t),{meta:S.R.WithAlerts.setMeta(e)(t.meta)})}}}},e.getAnimatable=function(e,t){return{finishApplyAnimation:function(n){return function(r){(0,f.kG)(n.every(e.shouldAnimateAlertApply),"Tried to finish animation on non-animated state");var a=r.id,o=function(e){var r=e.items.map(t.removeAlertFromItem({alerts:n,state:e}));return(0,i.__assign)((0,i.__assign)({},e),{items:r})};if(S.R.isOutcomeId(a))return o(r);switch(a){case S.R.SpecialId.Priority:case S.R.SpecialId.AllAlerts:case S.R.SpecialId.PredictionTakeaways:case S.R.SpecialId.PredictionEmogenie:case S.R.SpecialId.RealTimeProofit:return o(r);case S.R.SpecialId.Premium:throw new Error("It's not possible to animate premium alerts");case S.R.SpecialId.Plagiarism:return(0,f.kG)(n.every(_.bZ.isPlagiarism),"tried to finish animation on non plagiarism alert in plagiarism lens"),F.updateWithAlerts(e)(n)(r);default:return(0,f.vE)(a)}}}}},e.getVerifiable=function(){return{shouldVerify:function(e){return(0,l.pipe)(N.In.getActiveItem(e),p.exists((function(e){return e.scheduledToDispose})))||p.isNone(e.items.find((function(e){return!e.scheduledToDispose})))}}},e.getHasAlerts=function(e,t){var n=function(e){return e.id===S.R.SpecialId.Premium||e.id===S.R.SpecialId.Plagiarism?e.meta.count:(0,l.pipe)(N.In.getActiveItem(e),p.chain(E.X.getActiveAlert),p.exists(_.bZ.isCapiDone))&&1===e.items.size?0:e.meta.count};return{getVisibleAlertsCount:n,getActiveAlertsCount:n,findFirstAlert:function(e){return(0,l.pipe)(e.items.filter(t(e)).getAt(0),p.map((function(e){return{alert:e.activeAlert,highlightIndex:e.activeHighlightIndex}})))},findNextAlert:function(n){return(0,f.kG)(p.isSome(N.In.getActiveItem(n))===p.isSome(n.cardIndex),"Lens is in wrong state"),(0,l.pipe)((0,a.gz)(p.option)(N.In.getActiveItem(n),n.cardIndex),p.chain((function(r){var i=r[0],a=r[1];return(0,l.pipe)(e.nextAlert(i),p.alt((function(){return e.prevAlert(i)})),p.alt((function(){return(0,l.pipe)(h.dn(n.items.values(),a,t(n)),p.map((function(e){return e.value.activeAlert})))})))})),m.vx((0,l.pipe)(I.l.find(n.items,t(n)),p.map((function(e){return e.value.activeAlert})))),p.map((function(e){return{alert:e,highlightIndex:0}})))}}},e.setVisibleItems=function(e){return function(t){return(0,i.__assign)((0,i.__assign)({},t),{cardIndex:(0,l.pipe)(N.In.getActiveItem(t),p.chain((function(t){return(0,l.pipe)(e.get(t.id),p.map((function(e){return e.index})))}))),items:e})}},function(t){function n(e,t){return e.id+"_"+t.id}function r(e,t,r,i,a,o){(0,f.kG)((0,l.pipe)(i,m.wo((function(e){var t=e.alertIndex;return void 0!==r[t]}))),"Can not find alert for provided alertIndex");var s=C.aW.create(r.map((function(r,o){return(0,l.pipe)(i,p.exists((function(e){var t=e.alertIndex;return o===t})))?a.createFocused(e)(n(t,r),r,(0,l.pipe)(i,p.fold((function(){return 0}),(function(e){return e.highlightIndex})))):a.createRendered(e)(n(t,r),r)})),E.X.getId,o.compare);return{cardIndex:(0,l.pipe)(i,p.chain((function(e){var t=e.alertIndex;return s.find((function(e){return e.activeAlert.id===r[t].id}))})),p.map((function(e){return e.index}))),hash:s}}t.getCardId=n,t.initCardsHash=r,t.create=function(t,n,i,a,o,s){var u=r(t,n,i,a,o,E.X.defaultOrd),c=u.hash,l=u.cardIndex;return{id:t,type:N.Nm.lensview,kind:N._L.persistent,withPriorityList:!1,meta:n,cardIndex:l,items:c,itemsOrd:E.X.defaultOrd,animation:N.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode:function(){return e.lensHash.hashCode(this)},equals:function(t){return e.getEq(s).equals(this,t)}}},t.isInSuccess=function(e,t){return void 0===t&&(t=c.constTrue),0===e.meta.count&&(0===e.items.filter(t).size||p.isNone(e.items.filter(t).find((function(e){return!e.scheduledToDispose}))))},t.add=function(t,n,r){return function(a){return function(o){var u=a.map((function(i){var a=n.createAdded(o.id)(e.WithSuccess.getCardId(o.meta,i),i);return t(o,i)?a:e.Priority.hideItem(a,r)})),c=o.items.add(u),l=M(c)(o),d=p.getEq(s.eqNumber).equals(l,o.cardIndex)?N.wj.force:N.wj.skip;return(0,i.__assign)((0,i.__assign)({},o),{cardIndex:l,items:c,animation:d})}}},t.remove=function(e){return function(t){return function(n){var r=new Set(t.map((function(e){return e.id}))),a=n.items.map(e.remove((0,c.flow)(E.X.getActiveAlert,p.fold(c.constFalse,(function(e){return r.has(e.id)}))),(function(e){return(0,l.pipe)(N.In.getActiveItem(n),p.map((function(t){return n.itemsOrd.compare(e,t)>0})),p.getOrElse(c.constTrue))}))),o=(0,l.pipe)(n.cardIndex,p.chain((function(e){return(0,l.pipe)(a.findRightFrom((function(e){return e.scheduledToDispose}),e),p.map((function(e){return e.index})))})),p.isSome)?N.wj.skip:N.wj.force,s=(0,l.pipe)(n,M(a));return(0,i.__assign)((0,i.__assign)({},n),{cardIndex:s,items:a,animation:o})}}},t.update=function(e,n,r){return function(i){return function(a){return t.updateWithAlerts(n,e,r)(i.filter((0,g.ff)(n.shouldAnimateAlertApply)))(a)}}},t.updateWithAlerts=function(t,n,r){return function(a){return function(s){if(0===a.length)return s;var u=(0,l.pipe)(a,e.filterAlertInLens(s,r),o.map((function(t){return[e.WithSuccess.getCardId(s.meta,t),t]})),o.reduce(s.items,(function(i,a){var o=a[0],u=a[1];return(0,l.pipe)(i.update(o,r.updateWithAlert(u)),v.fold((function(){var a=t.createAdded(s.id)(o,u);return i.add(n(s,u)?a:e.Priority.hideItem(a,r))}),c.identity))}))),d=M(u)(s);return(0,i.__assign)((0,i.__assign)({},s),{cardIndex:d,items:u,animation:N.wj.proceed})}}},t.getAlertHandler=function(n,r,i){return void 0===i&&(i=c.constTrue),function(a,o){var s=e.applyWithFilter(o,e.applyDiff);return function(e){return(0,l.pipe)(e,s(a,t.add(i,n,r),t.update(i,n,r),t.remove(r)))}}}}(n=e.WithSuccess||(e.WithSuccess={})),function(t){var n=k.R.ord;function r(e){return e.id}function u(e){var t=e.map((function(e){return[k.R.getAlertOutcomeBundle(e),e]}));return C.vM((function(e){var t=e[0];e[1];return r(t)}),t)}function d(e,t,r,i){(0,f.kG)((0,l.pipe)(r,m.wo((function(e){var n=e.alertIndex;return void 0!==t[n]}))),"Can not find alert for provided alertIndex");var a=u(t),o=(0,l.pipe)(r,p.map((function(e){var n=e.alertIndex;return(0,f.kG)(void 0!==t[n],"Can not find alert for provided alertIndex"),t[n]}))),s=p.none,c=C.aW.empty(E.X.getId,n.compare),d=Array.from(a.entries()).reduce((function(t,n){var r=n[0],a=n[1],u=a.map((function(e){e[0];return e[1]})),c=a[0][0];return(0,l.pipe)(o,p.map((function(e){return u.indexOf(e)})),p.filter((function(e){return e>-1})),p.fold((function(){return t.add(i.createRenderedBundle(e)(r,c,u))}),(function(n){var a=i.createFocusedBundle(e)(r,c,u,n);return s=p.some(r),t.add(a)})))}),c);return{cardIndex:(0,l.pipe)(s,p.chain((function(e){return(0,l.pipe)(d.get(e),p.map((function(e){return e.index})))}))),cards:d}}t.getCardId=r,t.initCardsHash=d,t.create=function(t,r,i,a,o,s){var u=d(t,i,a,o),c=u.cards,l=u.cardIndex;return{id:t,type:N.Nm.lensview,kind:N._L.persistent,meta:r,withPriorityList:!1,cardIndex:l,items:c,itemsOrd:n,animation:N.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode:function(){return e.lensHash.hashCode(this)},equals:function(t){return e.getEq(s).equals(this,t)}}},t.add=function(e){return function(t){return function(n){var r=u(t),a=Array.from(r.entries()).reduce((function(t,r){var i=r[0],a=r[1],o=a.map((function(e){e[0];return e[1]})),s=a[0][0];return(0,l.pipe)(t.update(i,(function(t){if(!E.X.isBundle(t))return t;var n=e.addBundleAlerts(t,o);return k.R.isExtendableWithAlerts(n)?n:e.transitionTo(n,{type:"added",clockwise:!0})})),v.fold((function(){return t.add(e.createAddedBundle(n.id)(i,s,o))}),c.identity))}),n.items),o=(0,l.pipe)(n,M(a)),d=p.getEq(s.eqNumber).equals(o,n.cardIndex)?N.wj.force:N.wj.skip;return(0,i.__assign)((0,i.__assign)({},n),{cardIndex:o,items:a,animation:d})}}},t.remove=function(e){return function(t){return function(r){var a=u(t),o=Array.from(a.entries()).reduce((function(t,i){var a=i[0],o=i[1];return(0,l.pipe)(t.update(a,(function(t){if(!E.X.isBundle(t))return t;var i=e.remove(t,o.map((function(e){e[0];return e[1]})),(0,l.pipe)(N.In.getActiveItem(r),p.map((function(e){return r.itemsOrd.compare(t,e)>0})),p.getOrElse(c.constTrue)));return(0,l.pipe)(N.In.getActiveItem(r),p.exists((function(e){return e.id===i.id})))?e.selectNextAlert(i,n,(function(e,t){return(0,T.EB)(k.R.getAlertOutcomeBundle(t),i.alerts,t)})):i})),v.fold((function(){return t}),c.identity))}),r.items),s=(0,l.pipe)(r,M(o));return(0,i.__assign)((0,i.__assign)({},r),{cardIndex:s,items:o,animation:N.wj.force})}}},t.update=function(e,n){return function(r){return function(i){return t.updateWithAlerts(e,n)(r.filter((0,g.ff)(e.shouldAnimateAlertApply)))(i)}}},t.updateWithAlerts=function(n,r){return function(a){return function(s){var d=(0,l.pipe)(a,e.filterAlertInLens(s,r),o.partition(_.bZ.isRegistered)),p=d.left,f=u(d.right),m=Array.from(f.entries()).reduce((function(e,t){var r=t[0],i=t[1],a=i.map((function(e){e[0];return e[1]})),o=i[0][0];return(0,l.pipe)(e.update(r,(function(e){return E.X.isBundle(e)?n.addBundleAlerts(e,a):e})),v.fold((function(){return e.add(n.createAddedBundle(s.id)(r,o,a))}),c.identity))}),t.remove(n)(p)(s).items),h=(0,l.pipe)(s,M(m));return(0,i.__assign)((0,i.__assign)({},s),{cardIndex:h,items:m,animation:N.wj.proceed})}}},t.getAlertsHandler=function(n,r){return function(i,a){return function(o){var s=e.applyWithFilter(a,e.applyDiff);return(0,l.pipe)(o,s(i,t.add(n),t.update(n,r),t.remove(n)))}}},t.getHasAlerts=function(t,n,r){var o=e.getHasAlerts(t,n);return(0,i.__assign)((0,i.__assign)({},o),{findNextAlert:function(e){return(0,l.pipe)((0,a.gz)(p.option)(N.In.getActiveItem(e),e.cardIndex),p.chain((function(n){var i=n[0],a=n[1];return(0,l.pipe)(t.nextAlert(i),p.alt((function(){return t.prevAlert(i)})),p.alt((function(){return(0,l.pipe)(h.XT(e.items.values(),a+1,E.X.canBeFocused(r)),p.alt((function(){return h.XT(e.items.values(),0,E.X.canBeFocused(r))})),p.chain((function(e){return p.fromNullable(e.value.alerts)})),p.map((function(e){return e[0]})))})))})),m.vx((0,l.pipe)(I.l.find(e.items,n(e)),p.chain((function(e){var t=e.value;return p.fromNullable(t.alerts)})),p.map((function(e){return e[0]})))),p.map((function(e){return{alert:e,highlightIndex:0}})))}})}}(e.Bundles||(e.Bundles={})),function(e){e.create=function(){return{id:S.R.SpecialId.DraftAI,type:N.Nm.draftAI,kind:N._L.abstract,meta:S.R.createStaticLens({id:S.R.SpecialId.DraftAI,title:"Draft AI"},S.R.Meta.group.empty,c.constFalse),hashCode:function(){return(0,x.AC)(this.id)},equals:function(e){return this.id===e.id}}}}(e.DraftAI||(e.DraftAI={})),function(r){function a(e){return(0,l.pipe)(N.In.getActiveItem(e),p.chain(E.X.getActiveAlert),p.map((function(e){return!A.$.isPriority(e)})),p.getOrElse((function(){return!1})))}function o(e){return(0,l.pipe)(e.items.get(R.a.id),p.map((function(e){var t=e.value;return R.a.isExpanded(t)})),p.getOrElse((function(){return!1})))}function s(e){return 0!==e.meta.count&&0===e.meta.priorityCount&&0===e.items.filter((function(e){return(0,l.pipe)(E.X.getActiveAlert(e),p.exists(A.$.isPriority))&&!e.scheduledToDispose})).size}r.itemsOrd=(0,u.fold)(y.getMonoid())([(0,l.pipe)(y.ordBoolean,y.contramap((0,c.flow)(E.X.getActiveAlert,p.exists((0,g.ff)(A.$.isPriority))))),(0,l.pipe)(y.ordBoolean,y.contramap(R.$.isPriorityToggleHint)),(0,l.pipe)(y.ordBoolean,y.contramap(R.a.isPriorityToggle)),E.X.defaultOrd]),r.create=function(t,i,a,o,s,u,d){var h=(0,l.pipe)(o,p.map((function(e){var t=e.alertIndex;return a[t]})),p.chain(p.fromNullable),p.map((function(e){return"all"===e.view})),p.getOrElse((function(){return!1}))),g=f(n.initCardsHash(t,i,a,o,s,r.itemsOrd).hash);g=m(g,h,h,u);var v=(0,l.pipe)(o,p.chain((function(e){var t=e.alertIndex;return g.find((0,c.flow)(E.X.getActiveAlert,p.exists((function(e){return e.id===a[t].id}))))})),p.map((function(e){return e.index})));return{id:t,type:N.Nm.lensview,kind:N._L.persistent,itemsOrd:r.itemsOrd,meta:i,cardIndex:v,items:g,animation:N.wj.skip,withPriorityList:!0,isCardsHeightValid:!1,cardsHeight:0,hashCode:function(){return e.lensHash.hashCode(this)},equals:function(t){return e.getEq(d).equals(this,t)}}},r.getHasPriorityToggle=function(t){return{toggleNonPriorityList:function(n){return function(r){var s=o(r);if("collapsed"===n&&!s||"expanded"===n&&s)return r;var u=a(r),c=e.Priority.syncVisibleCards(r.items,!s,!s&&u,t);return(0,i.__assign)((0,i.__assign)({},r),{items:c,cardIndex:u&&s?p.none:r.cardIndex,animation:N.wj.proceed})}}}},r.focusedCardIsNonPriority=a,r.isNonPriorityListOpened=o,r.onlyNonPriorityAlertsLeft=s,r.nonPriorityAlertsVisible=function(e){return!t.isWithPriorityList(e)||o(e.currentLens)},function(e){e.fromLensState=function(e){return function(n){return e.currentLens.id!==n||t.isWithPriorityList(e)&&!o(e.currentLens)?N.FS.priorityAlertsOnly:N.FS.allAlerts}}}(r.LensViewMode||(r.LensViewMode={})),r.isInSuccess=function(e){return n.isInSuccess(e.currentLens,(0,g.ff)(R.a.isPriorityItem))||s(e.currentLens)&&!o(e.currentLens)},r.getSyncVisibleCardsHandler=function(t){return function(n){if(!S.R.isWithSuccessId(n.id))return n;var r=e.Priority.ensureExpandCardIsPresent(n.items),s=a(n);r=e.Priority.syncVisibleCards(r,o(n)||s,s,t);var u=M(r)(n);return(0,i.__assign)((0,i.__assign)({},n),{cardIndex:u,items:r,animation:N.wj.proceed})}};function d(e,t){return"removed"===e.visualState.transition.type||"hidden"===e.visualState.transition.type?e:t.transitionTo({type:"hidden",clockwise:!1})(e)}function f(e){return e.has(R.a.id)||0===e.size?e:e=(e=e.add(R.a.create(L.t.initial(R.a.expanded),P.Z.empty))).add(R.$.create(L.t.initial(R.$.visible),P.Z.empty))}function m(e,t,n,r){var i=function(e){return{transitionTo:function(t){return function(n){return n.visualState.transition.type!==t.type?e.transitionTo(t)(n):n}}}}(r),a=0===e.filter((function(e){return!e.scheduledToDispose&&(0,l.pipe)(E.X.getActiveAlert(e),p.exists((0,g.ff)(A.$.isPriority)))})).size;return e.map((function(e){return(0,l.pipe)(E.X.getActiveAlert(e),p.fold((function(){return R.a.isPriorityItem(e)?a?d(e,r):R.a.isPriorityToggle(e)?t||n?i.transitionTo(R.a.expanded)(e):i.transitionTo(R.a.collapsed)(e):t||n?i.transitionTo(R.$.visible)(e):d(e,r):e}),(function(n){return t||A.$.isPriority(n)?"hidden"===e.visualState.transition.type?i.transitionTo({type:"rendered",clockwise:!0})(e):e:d(e,r)})))}))}r.hideItem=d,r.isAlertVisible=function(e,t){return"priority"===t.view||o(e)},r.ensureExpandCardIsPresent=f,r.syncVisibleCards=m,r.getHasAlerts=function(t,n){return(0,i.__assign)((0,i.__assign)({},e.getHasAlerts(t,n)),{getVisibleAlertsCount:function(e){return(0,l.pipe)(N.In.getActiveItem(e),p.chain(E.X.getActiveAlert),p.exists(_.bZ.isCapiDone))&&1===e.items.size?0:o(e)?e.meta.count:e.meta.priorityCount}})}}(r=e.Priority||(e.Priority={})),function(t){var n=E.X.defaultOrd;t.create=function(t,r,i,a){var o=C.aW.create(r.map(i.createFromAlert(S.R.SpecialId.Premium)),(function(e){return e.id}),n.compare);return(0,f.kG)(o.size>0,"PremiumLensView should have at least one card"),{id:S.R.SpecialId.Premium,kind:N._L.active,type:N.Nm.advanced,meta:t,items:o,itemsOrd:n,cardIndex:p.none,animation:N.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode:function(){return e.lensHash.hashCode(this)},equals:function(t){return e.getEq(a).equals(this,t)}}},t.getAlertsHandler=function(n){return function(r){return e.applyDiff(r,t.add(n),t.update(n),t.remove())}},t.add=function(e){return function(t){return function(n){var r=t.map(e.createFromAlert(n.id)),a=n.items.add(r),o=M(a)(n);return(0,i.__assign)((0,i.__assign)({},n),{cardIndex:o,items:a,animation:N.wj.proceed})}}},t.remove=function(){return function(e){return function(t){var n=new Set(e.map((function(e){return e.id}))),r=t.items.filter((0,c.flow)(E.X.getActiveAlert,p.exists((function(e){return n.has(e.id)})))).reduce((function(e,t){return e.remove(t.id)}),t.items),a=M(r)(t);return(0,i.__assign)((0,i.__assign)({},t),{cardIndex:a,items:r})}}},t.update=function(e){return function(n){return function(r){var i=h.uK(n,_.bZ.isRegistered),a=i[0],o=i[1];return(0,l.pipe)(r,t.remove()(o),t.add(e)(a))}}}}(e.Premium||(e.Premium={})),function(t){var n=E.X.defaultOrd;function r(e){return C.vM("cardId",e)}t.create=function(t,i,a,o,s){(0,f.kG)(t.id===S.R.SpecialId.Plagiarism,"Cannot create plagiarism lens vm on non-plagiarism lens",t.id);var u=C.aW.empty(E.X.getId,n.compare),c=r(i),d=(0,l.pipe)(a,p.map((function(e){var t=e.alertIndex;return(0,f.kG)(void 0!==i[t],"Can not find alert for provided alertIndex"),i[t]}))),m=p.none,h=Array.from(c.entries()).reduce((function(e,t){var n=t[0],r=t[1];return(0,l.pipe)(d,p.map((function(e){return r.indexOf(e)})),p.filter((function(e){return e>-1})),p.fold((function(){return e.add(o.createRendered(S.R.SpecialId.Plagiarism)(n,r))}),(function(t){var i=o.createFocused(S.R.SpecialId.Plagiarism)(n,r,t);return m=p.some(n),e.add(i)})))}),u),g=(0,l.pipe)(m,p.chain((function(e){return(0,l.pipe)(h.get(e),p.map((function(e){return e.index})))})));return{id:S.R.SpecialId.Plagiarism,kind:N._L.persistent,type:N.Nm.plagiarism,meta:t,cardIndex:g,items:h,itemsOrd:n,animation:N.wj.skip,isCardsHeightValid:!1,cardsHeight:0,hashCode:function(){return e.lensHash.hashCode(this)},equals:function(t){return e.getEq(s).equals(this,t)}}},t.updateCardsWithLensMeta=function(e){return function(t){return t.id===S.R.SpecialId.Plagiarism?(0,i.__assign)((0,i.__assign)({},t),{items:t.items.map((function(t){var n=t;return A.$.isPlagiarism(n.activeAlert)?e.changePlagiarismMetaWithAlerts(n,n.alerts.filter(A.$.isPlagiarism)):n}))}):t}},t.add=function(e){return function(t){return function(n){var a=r(t),o=Array.from(a.entries()).reduce((function(t,n){var r=n[0],i=n[1];return(0,l.pipe)(t.update(r,(function(t){return e.addPlagiarismAlerts(t,i)})),v.fold((function(){return t.add(e.createAdded(S.R.SpecialId.Plagiarism)(r,i))}),c.identity))}),n.items),u=(0,l.pipe)(N.In.getActiveItem(n),p.map((function(e){var t=e.id;return m.MH(o.get(t)).index}))),d=p.getEq(s.eqNumber).equals(u,n.cardIndex)?N.wj.force:N.wj.skip;return(0,i.__assign)((0,i.__assign)({},n),{cardIndex:u,items:o,animation:d})}}},t.remove=function(e){return function(t){return function(a){var o=r(t),s=N.In.getActiveItem(a),u=Array.from(o.entries()).reduce((function(t,r){var i=r[0],o=r[1];return(0,l.pipe)(t.update(i,(function(t){var r=(0,l.pipe)(e.remove(t,o,(0,l.pipe)(s,p.map((function(e){return a.itemsOrd.compare(t,e)>0})),p.getOrElse(c.constTrue))),(function(t){return e.changePlagiarismMetaWithAlerts(t,t.alerts.filter(A.$.isPlagiarism))}));return(0,l.pipe)(s,p.exists((function(e){return e.id===r.id})))?e.selectNextAlert(r,n):r})),v.fold((function(){return t}),c.identity))}),a.items);return(0,i.__assign)((0,i.__assign)({},a),{items:u,animation:N.wj.force})}}},t.update=function(e){return function(n){return function(r){return t.updateWithAlerts(e)(n.filter((0,g.ff)(e.shouldAnimateAlertApply)))(r)}}},t.updateWithAlerts=function(e){return function(n){return function(a){var o=h.uK(n,_.bZ.isRegistered),s=o[0],u=o[1],d=r(s),f=Array.from(d.entries()).reduce((function(t,n){var r=n[0],i=n[1];return(0,l.pipe)(t.update(r,(function(t){var n=t;return e.changePlagiarismMetaWithAlerts(n,n.alerts.filter(A.$.isPlagiarism))})),v.fold((function(){return t.add(e.createAdded(S.R.SpecialId.Plagiarism)(r,i))}),c.identity))}),t.remove(e)(u)(a).items),m=(0,l.pipe)(N.In.getActiveItem(a),p.map((function(e){var t=e.id;return(0,l.pipe)(f.get(t),p.map((function(e){return e.index})),p.getOrElse((function(){return 0})))})));return(0,i.__assign)((0,i.__assign)({},a),{cardIndex:m,items:f,animation:N.wj.proceed})}}},t.getAlertsHandler=function(n){return function(r){return e.applyDiff(r,t.add(n),t.update(n),t.remove(n))}}}(F=e.Plagiarism||(e.Plagiarism={})),function(t){var n;t.create=function(t,r){return n||(n={id:S.R.SpecialId.Closed,kind:N._L.abstract,type:N.Nm.closed,meta:S.R.createStaticLens({id:S.R.SpecialId.Closed,title:"Closed"},S.R.Meta.group.empty,t),hashCode:function(){return e.lensHash.hashCode(this)},equals:function(t){return e.getEq(r).equals(this,t)}}),n}}(e.Closed||(e.Closed={})),e.applyDiff=function(e,t,n,r){return function(i){return(0,l.pipe)(e,b.v.reduce(i,(function(e,t){var n=t.alert;return r([n])(e)}),(function(e,t,r){var i=r.alert;return n([i])(e)}),(function(e,n){var r=n.alert;return t([r])(e)})))}},e.applyWithFilter=function(e,t){return function(n,r,i,a){var s=(0,c.flow)(o.partition(e),(function(e){return(0,c.flow)(a(e.left),i(e.right))}));return t(n,(function(t){return r(t.filter(e))}),s,a)}},e.calculateCardsHeight=function(e){return(0,l.pipe)(e.getAt(e.size-1),p.map((function(e){return e.positionState.absTop+e.positionState.height})),p.getOrElse((function(){return 0})))};e.getItemsPositionsUpdateTransformer=function(t){return function(n){var r=n.state,i=n.metadata;if(!N.nL.hasCards(r))return v.left({state:r,metadata:i});var a=N.nL.Prism.getLens();return v.left({state:a.modify(e.updateItemsPositions(t),r),metadata:i})}},e.updateItemsPositions=function(t){return function(n){var r=N.In.getActiveItem(n),a=t.getReferenceHeightItem(n),o=(0,l.pipe)(a,p.chain(w.ei("value")),p.map((function(e){return e.positionState.height}))),s=0,u=(0,l.pipe)(r,m.wo((function(e){return e.positionState.isHeightValid}))),c=(0,l.pipe)(a,p.map(w.ei("index")),p.getOrElse((function(){return e=n.cardIndex,(0,l.pipe)(e,p.map((function(e){return 0===e?1:0})),p.getOrElse((function(){return 0})));var e}))),d=n.items.map((function(e,r,i){var a=m.FX(i)(n.cardIndex),d=a||i===c,f=e.scheduledToDispose||(a?e.positionState.isHeightValid:p.isSome(o)),h=e.scheduledToDispose?0:a?e.positionState.height:(0,l.pipe)(o,p.getOrElse((function(){return e.positionState.height}))),g={absTop:a||u?s:e.positionState.absTop,height:h,animationInProgress:n.animation(e,i),visible:e.positionState.visible,isHeightValid:f,watched:d};return s+=h,P.Z.eq.equals(e.positionState,g)?e:t.changePosition(g)(e)})),f=e.calculateCardsHeight(d),h=(0,l.pipe)(r,m.wo((function(e){return e.positionState.isHeightValid})))&&(0,l.pipe)(d.getAt(c),m.wo((function(e){return e.positionState.isHeightValid})));return(0,i.__assign)((0,i.__assign)({},n),{items:d,cardsHeight:f,isCardsHeightValid:h})}},e.filterAlertInLens=function(e,t){return o.filter((function(n){return _.bZ.isNotRemoved(n)||p.isSome(e.items.find((function(e){return t.hasAlert(n.id)(e)})))}))}}(r||(r={}));var M=function(e){return(0,c.flow)(N.In.getActiveItem,p.chain((function(t){return e.get(t.id)})),p.map((function(e){return e.index})))}},26268:(e,t,n)=>{"use strict";n.d(t,{tn:()=>r,$A:()=>i,EQ:()=>a});var r,i,a,o=n(45980),s=n(73805),u=n(65772),c=n(8125),l=n(95574),d=n(22232),p=n(64909),f=n(83078),m=n(17753),h=n(10002),g=n(32952),v=n(28043),y=n(66310),b=n(40151),w=n(79462),_=n(78674),S=n(77176),C=n(598),x=n(83401),I=n(52479),A=n(99391),E=n(2834),k=n(41199),T=n(50634),L=n(40644),P=n(38524);!function(e){!function(e){e.AppliedAlertAnimationFinished="AppliedAlertAnimationFinished"}(e.Type||(e.Type={}))}(r||(r={})),function(e){var t=function(){function e(){this.events=new g.xQ,this.focusAlertHighlight=function(){return u.left(new Error("Method not implemented."))},this.highlightAlertHighlight=function(){return u.left(new Error("Method not implemented."))},this.moveCursorToHighlight=c.ZT}return e.prototype.ensureAlertHighlightInViewport=function(){throw new Error("Method not implemented.")},e.prototype.getMarkByAlert=function(e){throw new Error("Method not implemented.")},e.prototype.getAlertByMark=function(e){throw new Error("Method not implemented.")},e}();e.Mock=t,e.getHighlightIndex=function(e,t){return(0,s.pipe)(t,u.mapLeft((function(){return new Error("Mark is collapsed")})),u.chain((function(t){return l.vM((function(){var n=m.bZ.isSuperAlert(e)||m.bZ.isPremium(e)&&e.highlightTexts.length>1?e.getHighlightRanges().findIndex((function(e){return e.start===t.start&&e.end===t.end})):0;return(0,d.kG)(-1!==n,"Could not find higlight index by Range for provided Alert",(function(){return JSON.stringify({alertRanges:e.getHighlightRanges(),targetRange:t})})),n}))})))}}(i||(i={})),function(e){e.getHighlightSubscribtion=function(e,t,n){return e.pipe(v.x(p.getEq(k.$.ord).equals),y.w((function(e){return(0,s.pipe)(e,p.fold(b.c,(function(e){return w.y.create((function(){return n.debug("highlight mark: "+e.id),(0,s.pipe)(t.highlightAlertHighlight(e),u.fold((function(t){return n.error("Cannot highlight mark: "+e.id,t),c.ZT}),(function(t){return function(){n.debug("unhighlight mark: "+e.id),t.dispose()}})))}))})))})))},e.highlightMarkByHighlightedCard=function(t,n,r,i,a){var s=e.getHighlightSubscribtion(t.hovered.pipe(_.b(100),S.U((0,o.flow)(p.chain((function(e){var t=n.get();return P.nL.hasCards(t)?t.currentLens.items.find((0,o.flow)(L.X.getActiveAlert,p.exists((function(t){return t.id===e&&i.isRegistered(t.id)})))):p.none})),p.chain((function(e){var t=e.value;return L.X.getActiveAlert(t)}))))),r,a);return{id:"highlightMarkByHighlightedAlert",when:h.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(s.pipe(C.c(x.F())))}},e.focusMarkByActiveAlert=function(e,t,n,r,i){var a=e.view(P.nL.mapper((function(e){var t=e.currentLens,n=e.alertSource;return(0,s.pipe)(r(t),p.map((function(e){return{alert:e.activeAlert,source:n,highlightIndex:e.activeHighlightIndex}})))}))).pipe(y.w(I.b2.rafScheduler),A.skipBy(p.getEq(T.E.getEq())),S.U(p.filter((function(e){return p.isSome(n.getRegistered(e.alert.id))}))),E.b(f.bw((function(e){return i.trace("new alert highlight: ",e)}))),y.w(p.fold((function(){return i.debug("Nothing to focus"),b.c()}),(function(e){return w.y.create((function(){return i.debug("Focus mark: "+e.alert.id+" | "+e.highlightIndex),e.source===m.l$.sidebar&&t.moveCursorToHighlight(e,"start"),(0,s.pipe)(t.focusAlertHighlight(e),u.fold((function(t){return i.error("Cannot focus mark",t,{alertId:e.alert.id,highlightIndex:e.highlightIndex}),c.ZT}),(function(t){return function(){i.debug("Unfocus mark: "+e.alert.id+" | "+e.highlightIndex+"'"),t.dispose()}})))}))}))));return{id:"focusMarkByActiveAlert",when:h.R.isWithAlertsId,what:P.nL.Effect.Applicator.create(a.pipe(C.c(x.F())))}}}(a||(a={}))},65247:(e,t,n)=>{"use strict";n.d(t,{x:()=>l,O:()=>y});var r,i=n(22788),a=n(18208),o=n(68983),s=n(10002),u=n(58199);function c(e){return e+" "+a._6(e,"alert","alerts")}var l,d=function(e,t){return function(n,r,i,a){var o=a?n.count:n.priorityCount;return o>0?c(o):i&l.IsDocumentEmpty?e:t}},p={description:"Improves spelling, grammar, and punctuation.",stateMessage:d("No alerts","Looking good")},f={description:"Helps make your writing easier to understand.",stateMessage:function(e,t,n){var r=(0,o.W)(i.lt(u.g.ord))(t);if(n&l.IsDocumentEmpty)return"So far so good";if(e.count>0){if(u.g.isMin(t))return c(e.count);if(r(u.g.fromNumber(20)))return"Unclear";if(r(u.g.fromNumber(70)))return"A bit unclear";if(r(u.g.fromNumber(85)))return"Mostly clear";if(r(u.g.fromNumber(95)))return"Clear"}return"Very clear"}},m={description:"Helps make your writing more interesting and effective.",stateMessage:function(e,t,n){var r=n&l.IsFreeUser,a=u.g.isMin(t),s=(0,o.W)(i.lt(u.g.ord))(t);if(n&l.IsDocumentEmpty||r&&a)return"Nothing yet";if(r||e.count>0){if(a)return c(e.count);if(s(u.g.fromNumber(20)))return"Bland";if(s(u.g.fromNumber(80)))return"A bit bland";if(s(u.g.fromNumber(95)))return"Engaging"}return"Very engaging"}},h={description:"Helps you make the right impression on your reader.",stateMessage:function(e,t,n){var r=n&l.IsFreeUser,a=u.g.isMin(t),s=(0,o.W)(i.lt(u.g.ord))(t);if(n&l.IsDocumentEmpty||r&&a)return"Nothing yet";if(r||e.count>0){if(a)return c(e.count);if(s(u.g.fromNumber(20)))return"Serious issues";if(s(u.g.fromNumber(40)))return"Very off";if(s(u.g.fromNumber(95)))return"Slightly off"}return"Just right"}},g={description:"Your organizations writing guidelines.",stateMessage:d("Nothing yet","All good")},v=((r={})[s.R.SpecialId.Correctness]=p,r[s.R.SpecialId.CorrectnessPriority]=p,r[s.R.SpecialId.Clarity]=f,r[s.R.SpecialId.ClarityPriority]=f,r[s.R.SpecialId.Engagement]=m,r[s.R.SpecialId.EngagementPriority]=m,r[s.R.SpecialId.Delivery]=h,r[s.R.SpecialId.DeliveryPriority]=h,r[s.R.SpecialId.Vox]=g,r[s.R.SpecialId.VoxPriority]=g,r[s.R.SpecialId.Plagiarism]={description:"Checks for similarities to published writing.",stateMessage:function(e,t,n){return n&l.IsLensVisited&&!(n&l.IsDocumentEmpty)?n&l.IsLensActive?u.g.isMin(t)?"100% original":t+"% unoriginal":"Recheck":"Not checked yet"}},r[s.R.SpecialId.Premium]={description:"Offers more suggestions on how to improve your writing.",stateMessage:function(e,t,n){return n&l.IsDocumentEmpty?"Advanced checks":e.count+" more "+a._6(e.count,"alert","alerts")}},r);function y(e){return v[e]}!function(e){e[e.IsDocumentEmpty=1]="IsDocumentEmpty",e[e.IsLensActive=2]="IsLensActive",e[e.IsLensVisited=4]="IsLensVisited",e[e.IsFreeUser=8]="IsFreeUser"}(l||(l={}))},87325:(e,t,n)=>{"use strict";n.d(t,{g:()=>s});var r,i=n(45980),a=n(64909),o=n(27221);!function(e){!function(e){e[e.CHECKED=0]="CHECKED",e[e.NOT_CHECKED=1]="NOT_CHECKED"}(e.PlagiarismCheckingState||(e.PlagiarismCheckingState={})),function(e){var t=function(){this.downloadStarted=o.h.create(!1),this.beginDownload=i.constVoid,this.tryToInterrupt=i.constVoid,this.generateReport=function(){throw new Error("Method not implemented.")},this.reportData=o.h.create(a.none),this.dedHTML="",this.dispose=i.constVoid};e.Mock=t}(e.ViewModel||(e.ViewModel={}))}(r||(r={}));var s,u=n(76974);!function(e){var t;!function(e){!function(e){e[e.ERROR=0]="ERROR",e[e.EMPTY=1]="EMPTY",e[e.LOADING=2]="LOADING",e[e.SHORT_CONTENT=3]="SHORT_CONTENT",e[e.READY=4]="READY"}(e.Type||(e.Type={}))}(t=e.State||(e.State={})),function(e){var n=function(e,n){void 0===e&&(e={type:t.Type.EMPTY}),void 0===n&&(n=a.some(new r.ViewModel.Mock)),this.statisticsState=e,this.reportViewModel=n,this.state=u.of(this.statisticsState),this.onModalClose=i.constVoid};e.Mock=n}(e.ViewModel||(e.ViewModel={}))}(s||(s={}))},15228:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});var r,i=n(73805),a=n(27221),o=n(47442),s=n(64909),u=n(10002),c=n(38524),l=n(32952),d=n(85985),p=n(77176),f=n(66310),m=n(52479),h=n(93508),g=n(16118),v=n(76974),y=n(50628),b=n(17343),w=n(66265),_=n(2834),S=n(31346);!function(){function e(e,t,n,v,y,b){var w=this;this._state=e,this._documentModel=t,this._trackSuccessStateChanged=n,this._capabilities=v,this.nonPriorityOptions=y,this.mutedAlertsOptions=b,this._getTextAmount=function(e){return 0===e?r.TextAmount.zero:e<=o.hD?r.TextAmount.small:r.TextAmount.large},this._subs=[],this.successState=a.h.create({type:r.SuccessType.zero}),this.textAmount=a.h.create(this._getTextAmount(this._documentModel.documentLength.get().trimmed)),this.actionEvents=new l.xQ,this.applicatorEffects={id:"successViewModel.effects",when:u.R.isWithAlertsId,what:c.nL.Effect.Applicator.create(this.actionEvents.pipe(d.h((function(e){return e.type===r.ActionType.More})),p.U((function(){return function(e){var t=e.patch({currentLens:c.nL.hasItems(e)&&(0,c.yi)(e.currentLens)?w._capabilities.toggleNonPriorityList("expanded")(e.currentLens):e.currentLens});return(0,i.pipe)(c.nL.hasItems(t)?w._capabilities.findFirstAlert(t.currentLens):s.none,s.fold((function(){return t}),(function(e){return t.patch({currentLens:c.nL.hasItems(t)?w._capabilities.selectItemByAlert(e)(t.currentLens):t.currentLens})})))}}))))},this._currentLens=this._state.view((function(e){return{isSuccess:S.v.State.isInSuccess(e),type:e.currentLens.type,nonPriorityAlertsLeft:c.nL.isLensview(e)&&c.nL.hasItems(e)&&0!==w._capabilities.getActiveAlertsCount(e.currentLens),isAllAlerts:u.R.isMainLens(e.currentLens.id)}})),this._listenTextSize=function(){return w._currentLens.view((function(e){return e.isSuccess})).pipe(f.w(m.Ft(w._documentModel.documentLength.view("trimmed"))),p.U(w._getTextAmount)).subscribe(m.wW(w.textAmount))},this._lensSwitch=this._currentLens.pipe(h.O(this._currentLens.get()),g.G(),p.U((function(e){var t=e[0],n=e[1];return n.isSuccess?s.some({prevLensType:t.type,nonPriorityAlertsLeft:n.nonPriorityAlertsLeft,isAllAlerts:n.isAllAlerts}):s.none}))),this._textAmountToSuccessType=function(e){return e===r.TextAmount.zero?{type:r.SuccessType.zero}:e===r.TextAmount.large?{type:r.SuccessType.large}:{type:r.SuccessType.small}},this._subs.push(this._listenTextSize(),this._listenSuccessStateChange()),this.priorityList=(0,i.pipe)(y,s.map((function(e){return{hasNonPriorityAlerts:w._state.view((function(e){return S.v.State.isWithPriorityList(e)&&S.v.Priority.onlyNonPriorityAlertsLeft(e.currentLens)})),reviewNonPriorityAlerts:function(){e.trackNonPriorityToggle(),w.actionEvents.next({type:r.ActionType.More})}}}))),this.mutedAlerts=(0,i.pipe)(b,s.map((function(){return{reviewMutedSuggestions:function(){},mutedSuggestionsCount:w._state.view((function(e){return e.currentLens.meta.mutedCount}))}})))}e.prototype.dispose=function(){this._subs.forEach((function(e){return e.unsubscribe()})),this._subs=[]},e.prototype._listenSuccessStateChange=function(){var e=this;return this._lensSwitch.pipe(w.cp((function(t){return e.textAmount.pipe(p.U(e._textAmountToSuccessType),h.O(t.prevLensType===c.Nm.lensview?{type:r.SuccessType.applied,nonPriorityAlertsLeft:t.nonPriorityAlertsLeft,isAllAlerts:t.isAllAlerts}:e._textAmountToSuccessType(e.textAmount.get())),g.G(),p.U((function(e){var t=e[0],n=e[1];return t.type===r.SuccessType.applied&&n.type!==r.SuccessType.zero?t:n})),f.w((function(t,n){return 0===n?v.of(t):(i=t).type===r.SuccessType.applied||i.type===r.SuccessType.zero?v.of(i):e._documentModel.checkingState.pipe(d.h((function(e){return"checking"!==e})),y.P(),b.h(i));var i})),_.b((function(t){e._trackSuccessStateChanged(t.type===r.SuccessType.applied?"applied":t.type===r.SuccessType.zero?"nothingToCheck":"noIssues")})))}))).subscribe(m.wW(this.successState))}}();!function(e){var t,n;!function(e){e.More="More"}(e.ActionType||(e.ActionType={})),function(e){e.zero="zero",e.small="small",e.large="large"}(t=e.TextAmount||(e.TextAmount={})),function(e){e.zero="zero",e.small="small",e.large="large",e.applied="applied"}(n=e.SuccessType||(e.SuccessType={}));var r=function(){function e(){this.textAmount=a.h.create(t.zero),this.successState=a.h.create({type:n.zero}),this.mutedSuggestionsCount=a.h.create(0),this.hasNonPriorityAlerts=a.h.create(!1)}return e.prototype.reviewMutedSuggestions=function(){throw new Error("Method not implemented.")},e.prototype.reviewNonPriorityAlerts=function(){throw new Error("Method not implemented.")},e.prototype.dispose=function(){throw new Error("Method not implemented.")},e}();e.Mock=r}(r||(r={}))},24023:(e,t,n)=>{"use strict";n.d(t,{Dn:()=>c,AP:()=>d,rD:()=>I,IY:()=>T,$4:()=>U,bb:()=>W});var r,i,a,o=n(22823),s=n(13097),u=n(64437),c="linear",l=o.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),d=o.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),p=o.u.keyframes({from:{opacity:1,transform:"translateY(0) scaleY(1)"},to:{opacity:0,transform:"translateY(-75%) scaleY(.5)"}}),f=o.u.keyframes({"0%":{opacity:0,transform:"scaleY(0)"},"100%":{opacity:1,transform:"scaleY(1)"}}),m=o.u.keyframes({"0%":{opacity:0,transform:"scaleY(.2) translateY(-50%)"},"80%":{opacity:1,transform:"scaleY(.8) translateY(0%)"},"100%":{opacity:1,transform:"scaleY(1)"}}),h=o.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"100%":{opacity:0,transform:"scaleY(0)"}}),g=o.u.keyframes({"0%":{opacity:0,transform:"scale(.8)"},"100%":{opacity:1,transform:"scale(1)"}}),v=o.u.keyframes({"0%, 100%":{opacity:0}}),y=o.u.keyframes({"0%, 59%":{opacity:0},"60%, 100%":{opacity:1}}),b=o.u.keyframes({"0%":{opacity:0},"80%":{opacity:0},"100%":{opacity:1}}),w=o.u.keyframes({"0%":{opacity:1,transform:"scaleY(1)"},"59%":{opacity:1},"60%":{opacity:0},"100%":{opacity:0,transform:"scaleY(0)"}}),_=o.u.keyframes({"0%":{opacity:1},"30%, 100%":{opacity:0}}),S=o.u.keyframes({"0%":{transform:"scaleY(.3)"},"100%":{transform:"scaleY(1)"}}),C=o.u.keyframes({"0%, 20%":{opacity:0},"100%":{opacity:1}}),x={position:"relative",margin:o.u.rem(.5)+" "+o.u.rem(2)+" "+o.u.rem(.5)+" 0",userSelect:"none"},I={position:"absolute",width:o.u.percent(100),pointerEvents:"none"},A={opacity:0,animation:l+" "+o.u.seconds(s.v4/4/1e3)+" "+c+" "+o.u.seconds(s.v4/1e3)+" forwards"},E={transformOrigin:"top",animation:d+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},k={transformOrigin:"bottom",animation:p+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},T={transformOrigin:"top",willChange:"contents"},L={animation:f+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},P={animation:m+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},R={animation:h+" "+o.u.seconds(s.v4/1e3)+" "+c+" reverse forwards"},N={animation:h+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},M={animation:g+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},F={animation:g+" "+o.u.seconds(s.v4/1e3)+" "+c+" reverse forwards"},O={transformOrigin:"top",animation:y+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards",willChange:"contents",$nest:(r={},r["& ."+u.g.successWrapperSelector+" > *"]={animation:b+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},r)},B={position:"absolute",width:o.u.percent(100),transformOrigin:"top",animation:w+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards",pointerEvents:"none",$nest:(i={},i["& ."+u.g.fullCardSelector+" > :not(."+u.g.alignButtonHiddenSelector+")"]={animation:_+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},i["& ."+u.g.fullCardSelector+" > ."+u.g.alignButtonHiddenSelector]={animation:v+" "+o.u.seconds(s.v4/1e3)+" "+c+" none"},i["& ."+u.g.fullCardSelector]={transform:"translateY("+o.u.rem(-1)+")"},i)},D={transformOrigin:"top",animation:S+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards",willChange:"contents",$nest:(a={},a["& ."+u.g.fullCardSelector+" > :not(."+u.g.alignButtonHiddenSelector+")"]={animation:C+" "+o.u.seconds(s.v4/1e3)+" "+c+" forwards"},a["& ."+u.g.fullCardSelector+" > ."+u.g.alignButtonHiddenSelector]={animation:v+" "+o.u.seconds(s.v4/1e3)+" "+c+" none"},a)},U=o.u.stylesheet({wrapper:[x],animationWrapper:[{position:"relative"}],shade:[I],focused2renderedMain:[A],focused2renderedShade:[I,E],focused2renderedShadeClockwise:[I,k],rendered2focusedMainBase:[T],rendered2focusedMain:[T,L],rendered2focusedMainClockwise:[T,P],addedMain:[R],rendered2removedShade:[I,N],openedMain:[M],closedMain:[F],focused2successMain:[O],focused2successShade:[B],success2FocusedMain:[D]}),W=new Map([[d,U.focused2renderedShade],[p,U.focused2renderedShadeClockwise],[h,U.rendered2removedShade],[w,U.focused2successShade]])},93789:(e,t,n)=>{"use strict";n.d(t,{S:()=>R,c:()=>N});var r,i,a,o,s,u,c,l,d=n(22823),p=n(13097),f=n(24023),m=n(64437),h=d.u.keyframes({from:{opacity:0,transform:"translateY(50%)"},to:{opacity:1,transform:"translateY(0)"}}),g=d.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(-25%)"}}),v=d.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(100%)"}}),y=d.u.keyframes({from:{transform:"translateY(0)"},to:{transform:"translateY(150%)"}}),b=d.u.keyframes({from:{opacity:1,transform:"scaleY(1)"},to:{opacity:0,transform:"scaleY(.5)"}}),w=d.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),_=d.u.keyframes({from:{transform:"translateY(-10%)"},to:{transform:"translateY(0)"}}),S=d.u.keyframes({from:{transform:"translateY(100%)"},to:{transform:"translateY(0)"}}),C=d.u.keyframes({from:{transform:"translateY(150%)"},to:{transform:"translateY(0)"}}),x=d.u.keyframes({from:{opacity:0,transform:"scaleY(.2)"},to:{opacity:1,transform:"scaleY(1)"}}),I=d.u.keyframes({from:{opacity:1,transform:"translateY(0)"},to:{opacity:0,transform:"translateY(125%)"}}),A={opacity:0,animation:h+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},E={transformOrigin:"top",animation:f.AP+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards",$nest:(r={},r["& ."+m.g.bundleInnerContainerSelector]={animation:g+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards",$nest:(i={},i["& ."+m.g.bundleFakeCard1Selector]={animation:v+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},i["& ."+m.g.bundleFakeCard2Selector]={animation:y+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},i)},r)},k={transformOrigin:"top",animation:b+" "+d.u.seconds(p.v4/1500)+" "+f.Dn+" forwards",$nest:(a={},a["& ."+m.g.bundleInnerContainerSelector]={animation:g+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards",$nest:(o={},o["& ."+m.g.bundleFakeCard1Selector]={animation:v+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},o["& ."+m.g.bundleFakeCard2Selector]={animation:y+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},o)},a)},T={animation:w+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards",$nest:(s={},s["& ."+m.g.bundleInnerContainerSelector]={animation:_+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards",$nest:(u={},u["& ."+m.g.bundleFakeCard1Selector]={animation:S+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},u["& ."+m.g.bundleFakeCard2Selector]={animation:C+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},u)},s)},L={animation:x+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards",$nest:(c={},c["& ."+m.g.bundleInnerContainerSelector]={animation:_+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards",$nest:(l={},l["& ."+m.g.bundleFakeCard1Selector]={animation:S+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},l["& ."+m.g.bundleFakeCard2Selector]={animation:C+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},l)},c)},P={animation:I+" "+d.u.seconds(p.v4/1e3)+" "+f.Dn+" forwards"},R=d.u.stylesheet({focused2renderedBundleMain:[A],focused2renderedBundleShade:[f.rD,E],focused2renderedBundleShadeClockwise:[f.rD,k],rendered2focusedBundleMain:[f.IY,T],rendered2focusedBundleMainClockwise:[f.IY,L],rendered2focusedBundleShade:[f.rD,P]}),N=new Map([[f.AP,R.focused2renderedBundleShade],[b,R.focused2renderedBundleShadeClockwise],[I,R.rendered2focusedBundleShade]])},16320:(e,t,n)=>{"use strict";n.d(t,{C:()=>h,B:()=>A});var r,i=n(59312),a=n(27378),o=n(71215),s=n(85746),u=n(90351),c=n(22823),l=n(71031),d=n(13097),p=n(66910),f=n(41439),m=n(45836),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._createCardToggler=function(e){return function(){return t.props.actions.next({type:p.l.Type.hover,kind:e,id:t.props.cardId})}},t}return(0,i.__extends)(t,e),t.prototype.componentWillUnmount=function(){this._createCardToggler("unhover")()},t.prototype.render=function(){var e=this.props,t=e.getActiveAlert,n=e.cardId,r=e.actions,u=e.children,c=e.counter,l=e.className,d=e.hideActivateButton;return a.createElement(o.F.div,(0,i.__assign)({"data-aid":n,onClick:function(e){var n=t();r.next({type:p.l.Type.alertMinicardButtonClick,alertHighlight:{highlightIndex:0,alert:n},clickPoint:{x:e.clientX,y:e.clientY}})},onMouseEnter:this._createCardToggler("hover"),onMouseLeave:this._createCardToggler("unhover")},(0,s.Sh)(l,A.wrapper,A.miniCard)),a.createElement(m.XY,{className:A.contentWrapper},u),a.createElement("div",{className:A.iconContainer},c&&a.createElement("div",{className:v},c),d?null:a.createElement("div",{className:b},a.createElement(f.JO.Arrow,{className:A.activeTopIcon}),a.createElement(f.JO.Arrow,{className:A.activeBottomIcon}))))},t}(a.Component),g="baseMiniCounterContainer",v=c.u.joinClasses([g,c.u.style({position:"absolute",height:c.u.percent(100),top:0,right:0,zIndex:d.VN,margin:"auto 0",background:u.Il.CoreNeutral0,opacity:1})]),y="baseMiniActivateBtnSelector",b=c.u.joinClasses([y,c.u.style({position:"absolute",top:0,right:0,height:c.u.percent(100),zIndex:d.VN,display:"flex",flexDirection:"column",margin:"auto 0",background:u.Il.CoreNeutral0,opacity:0,justifyContent:"center"})]),w={position:"relative",display:"flex",overflow:"hidden",borderRadius:c.u.rem(d.fx),background:u.Il.CoreNeutral0,boxShadow:"0 1px 8px rgba(109, 117, 141, .18)",cursor:"pointer",alignItems:"center",$nest:(r={"&:hover":{background:u.Il.CoreNeutral0,boxShadow:"0 1px 12px 0 rgba(129, 137, 169, .2)",transitionDuration:c.u.seconds(.2)}},r["&:hover ."+y]={opacity:1},r["&:hover .baseMiniCounterContainer"]={opacity:0},r)},_={overflow:"hidden",margin:"0 "+c.u.rem(3)+" 0 "+c.u.rem(2),color:l.UE,textOverflow:"ellipsis",whiteSpace:"nowrap",lineHeight:c.u.rem(1.5)},S={position:"absolute",top:0,right:c.u.rem(.5),bottom:0,display:"flex"},C={display:"flex",margin:c.u.rem(.1)+" 0 "+c.u.rem(-1.25),transform:"rotate(180deg)"},x={$nest:{"&:before":{position:"absolute",width:c.u.px(10),height:c.u.px(10),borderRadius:c.u.percent(50),content:"''",transform:"scale(.5)"}}},I={$nest:{"&:before":{margin:"auto 0 auto "+c.u.rem(.75)}}},A=c.u.stylesheet({wrapper:[w],contentWrapper:[_],iconContainer:[S],activeTopIcon:[C],activeBottomIcon:[{display:"flex",height:"auto"}],dotBase:[x],miniCard:[x,I]})},48100:(e,t,n)=>{"use strict";n.d(t,{b:()=>R});var r,i=n(59312),a=n(27378),o=n(45980),s=n(73805),u=n(71215),c=n(27221),l=n(64909),d=n(73313),p=n(40644),f=n(66910),m=n(24023),h=n(93789),g=n(83245),v=function(e){var t=e.children;return a.createElement(u.F.div,{role:"animation-wrapper",className:m.$4.animationWrapper},t)},y=function(e){return(0,s.pipe)(p.X.getActiveAlert(e),l.fold((function(){return e.id}),(function(e){return e.id})))},b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._elementState=d.f.emptyWithName("card"),t}return(0,i.__extends)(t,e),t.prototype._stateToElement=function(e){switch(e){case"added":case"rendered":return this.props.miniCard;case"focused":case"expanded":case"presuccess":return this.props.fullCard;case"success":return this.props.successCard;case"feedback_form":return this.props.feedbackForm;default:return null}},t.prototype.componentWillUnmount=function(){var e=this.props,t=e.card;e.actions.next({type:f.l.Type.completeTransitionTo,id:t.id,transitionId:t.visualState.transitionId})},t.prototype.render=function(){var e=this,t=this.props,n=t.actions,r=t.card;if(!r.visualState.incomplete)return a.createElement(v,null,a.createElement(u.F.div,{key:r.visualState.transition.type},this._stateToElement(r.visualState.transition.type)));var i=p.X.isBundle(r)?(0,g.a)(r.visualState):(0,g.p)(r.visualState),b=i.main,w=i.shade,_=c.h.create(void 0===w?l.none:(0,s.pipe)(r.visualState.from,l.map((function(e){return{state:e,className:w}}))));return!b&&l.isNone(_.get())&&requestAnimationFrame((function(){return n.next({type:f.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId})})),a.createElement(d.f.Context.Provider,{value:this._elementState},a.createElement(v,null,_.view((0,o.flow)(l.map((function(t){var i=t.state,o=t.className;return a.createElement(u.F.div,{className:o,key:"shade"+i+y(r),onAnimationEnd:function(e){h.c.get(e.animationName)!==o&&m.bb.get(e.animationName)!==o||(n.next({type:f.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId}),requestAnimationFrame((function(){return _.set(l.none)})))}},e._stateToElement(i))})),l.toUndefined)),a.createElement(u.F.div,{className:b,key:"expanded"===r.visualState.transition.type?"focused":r.visualState.transition.type,onAnimationEnd:function(){return n.next({type:f.l.Type.completeTransitionTo,id:r.id,transitionId:r.visualState.transitionId})},onTransitionEnd:function(){"presuccess"===r.visualState.transition.type&&n.next({type:f.l.Type.startTransitionTo,id:r.id,transition:{type:"success",clockwise:r.visualState.transition.clockwise}})}},this._stateToElement(r.visualState.transition.type))))},t}(a.Component),w=n(16320),_=n(8125),S=n(90351),C=n(22823),x=n(71031),I=n(13097),A=n(79844),E=n(39499),k=n(41439),T=n(45836),L=n(57091),P=n(64437);!function(e){e[e.stage0=0]="stage0",e[e.stage1=1]="stage1",e[e.stage2=2]="stage2"}(r||(r={}));var R,N=function(e){var t=e.actions,n=e.isLastCard,i=a.useContext(A.m.Context).successLens.fixedText.titles,o=c.h.create(r.stage0),s=function(){return t.next({type:f.l.Type.switchToNext})};return a.createElement(u.F.div,{className:H.successWrapper},a.createElement(T.P1,{className:H.successText,onAnimationEnd:function(){o.set(r.stage1)}},i[(0,_.TN)(i.length)]),a.createElement(u.F.span,null,o.view((function(e){return e>=r.stage1&&a.createElement("span",{onAnimationEnd:function(){return o.set(r.stage2)}},a.createElement(k.JO.CheckmarkAnimated,{className:H.successCheckMark}))}))),a.createElement(u.F.span,{className:H.successBtnHolder},n.pipe(L.a(o,(function(e,t){return t<r.stage2?null:e?a.createElement(E.zx.Caps,{className:H.doneBtn,name:"done",key:"done-btn",onClick:s},"Done"):a.createElement(E.zx.Caps,{className:H.successBtn,name:"next",key:"next-card",onClick:s},"Next")})))))},M=C.u.keyframes({"0%":{opacity:0},"100%":{opacity:1}}),F={fontWeight:"bold",lineHeight:C.u.rem(2),animation:M+" "+C.u.seconds(.2)+" linear forwards"},O={position:"relative",borderRadius:C.u.rem(I.Jr),background:S.Il.CoreNeutral0,boxShadow:"0 "+C.u.rem(.625)+" "+C.u.rem(I.mJ)+" 0 rgba(198, 203, 222, .45)"},B={display:"flex",padding:C.u.rem(1.5)+" "+C.u.rem(2),alignItems:"center"},D={marginLeft:C.u.rem(1),minWidth:0,minHeight:0,width:C.u.rem(1.325),height:C.u.rem(1.325),animation:M+" "+C.u.seconds(.2)+" linear forwards"},U={float:"right",width:C.u.rem(4),textAlign:"center",animation:M+" "+C.u.seconds(.2)+" linear forwards"},W={backgroundColor:S.Il.CoreGreen50,color:S.Il.CoreNeutral0,$nest:{"&:not([data-disabled='true'])[data-hovered='true']":{background:x.mb}}},H=(0,i.__assign)((0,i.__assign)({},C.u.stylesheet({successText:[F],successCheckMark:[D],successBtnHolder:[{marginLeft:"auto",fontWeight:"bold"}],successBtn:[U],doneBtn:[U,W]})),{fullCard:C.u.joinClasses([P.g.fullCardSelector,C.u.style(O)]),successWrapper:C.u.joinClasses([P.g.successWrapperSelector,C.u.style(O,B)])});!function(e){e.Mini=w.C,e.Card=b,e.Success=N}(R||(R={}))},64437:(e,t,n)=>{"use strict";n.d(t,{g:()=>v,m:()=>y});var r=n(59312),i=n(90351),a=n(22823),o=n(71031),s=n(13097),u={position:"relative",borderRadius:a.u.rem(s.Jr),background:i.Il.CoreNeutral0,boxShadow:"0 "+a.u.rem(.625)+" "+a.u.rem(s.mJ)+" 0 rgba(198, 203, 222, .45)"},c={$nest:{"&:before":{position:"absolute",width:a.u.px(10),height:a.u.px(10),borderRadius:a.u.percent(50),content:"''",transform:"scale(.5)"}}},l={$nest:{"&:before":{backgroundColor:o.kl}}},d={$nest:{"&:before":{backgroundColor:o.AX}}},p={$nest:{"&:before":{backgroundColor:i.Il.CoreRed50}}},f={$nest:{"&:before":{backgroundColor:i.Il.CoreBlue50}}},m={$nest:{"&:before":{backgroundColor:i.Il.CoreGreen50}}},h={$nest:{"&:before":{backgroundColor:i.Il.CorePurple50}}},g={$nest:{"&:before":{backgroundColor:i.Il.CoreNeutral50}}},v={fullCardSelector:"fullCard",bundleInnerContainerSelector:"bundleInnerContainer",bundleFakeCard1Selector:"bundleFakeCard1",bundleFakeCard2Selector:"bundleFakeCard2",alignButtonHiddenSelector:"alignButtonHidden",cozyCardContainerSelector:"cozyCardContainer",successWrapperSelector:"successWrapper"},y=(0,r.__assign)((0,r.__assign)({},a.u.stylesheet({dot:[c],dotAdvanced:[d],dotCritical:[l],dotCorrectness:[p],dotClarity:[f],dotEngagement:[m],dotDelivery:[h],dotVox:[g]})),{fullCard:a.u.joinClasses([v.fullCardSelector,a.u.style(u)])})},83245:(e,t,n)=>{"use strict";n.d(t,{p:()=>c,a:()=>l});var r=n(73805),i=n(64909),a=n(8125),o=n(92932),s=n(24023),u=n(93789);function c(e){var t=e.from,n=e.transition;if(!e.incomplete)return{};var a=d("transitionClassMapper");return(0,r.pipe)(t,i.map((function(e){switch(e){case"added":case"rendered":switch(n.type){case"added":return a.error("Impossible transition: "+e+" -> "+n.type),{main:s.$4.addedMain};case"focused":return{main:n.clockwise?s.$4.rendered2focusedMainClockwise:s.$4.rendered2focusedMain};case"removed":return{shade:s.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(n.type){case"rendered":return{main:s.$4.focused2renderedMain,shade:n.clockwise?s.$4.focused2renderedShadeClockwise:s.$4.focused2renderedShade};case"removed":return{main:"",shade:n.clockwise?s.$4.focused2renderedShadeClockwise:s.$4.focused2renderedShade};default:return{}}case"success":switch(n.type){case"removed":return{main:"",shade:n.clockwise?s.$4.focused2renderedShadeClockwise:s.$4.focused2renderedShade};case"focused":return{main:s.$4.success2FocusedMain};default:return{}}case"presuccess":switch(n.type){case"success":return{main:s.$4.focused2successMain,shade:s.$4.focused2successShade};default:return{}}case"removed":switch(n.type){case"added":return a.error("Impossible transition: "+e+" -> "+n.type),{main:s.$4.addedMain};default:return{}}default:return{}}})),i.getOrElse((function(){switch(n.type){case"added":return{main:s.$4.addedMain};case"focused":return{main:s.$4.openedMain};default:return{}}})))}function l(e){var t=e.from,n=e.transition;return e.incomplete?(0,r.pipe)(t,i.map((function(e){switch(e){case"added":case"rendered":switch(n.type){case"added":return d("bundleTransitionClassMapper").error("Impossible transition: "+e+" -> "+n.type),{main:s.$4.addedMain};case"focused":return{main:n.clockwise?u.S.rendered2focusedBundleMainClockwise:u.S.rendered2focusedBundleMain,shade:u.S.rendered2focusedBundleShade};case"removed":return{shade:s.$4.rendered2removedShade};default:return{}}case"expanded":case"focused":switch(n.type){case"rendered":return{main:u.S.focused2renderedBundleMain,shade:n.clockwise?u.S.focused2renderedBundleShadeClockwise:u.S.focused2renderedBundleShade};case"removed":return{main:"",shade:n.clockwise?s.$4.focused2renderedShadeClockwise:s.$4.focused2renderedShade};default:return{}}case"success":switch(n.type){case"removed":return{main:"",shade:n.clockwise?s.$4.focused2renderedShadeClockwise:s.$4.focused2renderedShade};case"focused":return{main:s.$4.success2FocusedMain};default:return{}}case"presuccess":switch(n.type){case"success":return{main:s.$4.focused2successMain,shade:s.$4.focused2successShade};default:return{}}case"removed":switch(n.type){case"added":return d("bundleTransitionClassMapper").error("Impossible transition: "+e+" -> "+n.type),{main:s.$4.addedMain};default:return{}}default:return{}}})),i.getOrElse((function(){switch(n.type){case"added":return{main:s.$4.addedMain};case"focused":return{main:s.$4.openedMain};default:return{}}}))):{}}var d=(0,a.HP)(o.C8.Logging.getLogger)},96261:(e,t,n)=>{"use strict";n.d(t,{sR:()=>be,n4:()=>we,$s:()=>_e,zO:()=>xe,GP:()=>Ie});var r=n(59312),i=n(27378),a=n(489),o=n(45980),s=n(73805),u=n(85746),c=n(55415),l=n(22232),d=n(8125),p=n(79844),f=n(53521),m=n(36473),h=n(39499),g=n(72618),v=n(90351),y=n(22823),b=n(71031),w=n(13097),_=n(73313),S=n(45836);function C(e){return e?function(t){return e+"/"+t}:o.identity}var x=function(e){return i.createElement(S.ZT,(0,r.__assign)({},A(e),{value:e.value,onChange:e.onChange}))},I=function(e){return i.createElement(x,(0,r.__assign)({},e,{nodeType:"input"}))},A=function(e){return(0,r.__assign)({"data-name":(n=e.name,a=i.useContext(_.f.Context).name,void 0===n?n:"string"==typeof n?C(a)(n):n.view(C(a))),mount:(t=e.autofocus,t?function(e){return e&&requestAnimationFrame((function(){return e.focus()}))}:void 0),styleType:S.ZT.Type.P1,nodeType:e.nodeType,placeholder:e.placeholder,onFocus:e.onFocus,onBlur:e.onBlur,onKeyPress:e.onKeyPress},(0,u.Sh)(k.inputField,e.className));var t,n,a},E={width:y.u.percent(100),outline:"none",border:"1px solid "+b.xO,borderRadius:y.u.rem(w.fx),background:v.Il.CoreNeutral0,$nest:{"&::placeholder":{color:b.FW,opacity:1},"&:focus":{borderColor:v.Il.CoreBlue50}}},k=y.u.stylesheet({inputField:[E],textArea:[{resize:"none"}]}),T=(0,n(51657).createTypeStyle)(),L=function(e){var t;return{$nest:(t={},t['&[data-indent="'+e+'"]']={marginLeft:y.u.rem(.5*e)},t)}},P=function(e,t,n,r){var i;return{$nest:(i={},i['&[data-indent="'+t+'"]']={counterIncrement:"card-list"+t,counterReset:r,$nest:{"&:before":{content:"'"+e+"' '\\A\\00a0' counter(card-list"+t+", "+n+") '. '"}}},i)}},R=function(e){return[P(e,0,"decimal","card-list1 card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,1,"lower-alpha","card-list2 card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,2,"lower-roman","card-list3 card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,3,"decimal","card-list4 card-list5 card-list6 card-list7 card-list8"),P(e,4,"lower-alpha","card-list5 card-list6 card-list7 card-list8"),P(e,5,"lower-roman","card-list6 card-list7 card-list8"),P(e,6,"decimal","card-list7 card-list8"),P(e,7,"lower-alpha","card-list8"),P(e,8,"lower-roman","none")]},N="cards-replacements_labels-",M={list:N+"list",item:N+"item",diff:N+"diff",columnList:N+"columnList",itemInsert:N+"itemInsert",deleteAll:N+"deleteAll",crossed:N+"crossed",deleteQuote:N+"deleteQuote",deletePunctuation:N+"deletePunctuation",deleteDoubleComma:N+"deleteDoubleComma",deleteApostrophe:N+"deleteApostrophe",deleteLetter:N+"deleteLetter",deletePunctuationBeforeLetter:N+"deletePunctuationBeforeLetter",itemOriginal:N+"itemOriginal",itemOriginalContent:N+"itemOriginalContent",removeOrContainer:N+"removeOrContainer",itemContext:N+"itemContext",itemContextShifted:N+"itemContextShifted",or:N+"or",arrowInsertsList:N+"arrowInsertsList",cozyArrowInsertsList:N+"cozyArrowInsertsList",inlineHeader:N+"inlineHeader",fullSentenceBackground:N+"fullSentenceBackground",minimalFullSentenceBackground:N+"minimalFullSentenceBackground",fullSentenceDelete:N+"fullSentenceDelete",fullSentenceHidden:N+"fullSentenceHidden",fullSentenceListItem:N+"fullSentenceListItem",fullSentenceBulletListItem:N+"fullSentenceBulletListItem",fullSentenceDashedListItem:N+"fullSentenceDashedListItem",fullSentenceOrderedListItem:N+"fullSentenceOrderedListItem",fullSentenceOrderedListItemWithFormatting:N+"fullSentenceOrderedListItemWithFormatting",fullSentenceDashedListItemWithFormatting:N+"fullSentenceDashedListItemWithFormatting",fullSentenceBulletListItemWithFormatting:N+"fullSentenceBulletListItemWithFormatting",fullSentenceInsert:N+"fullSentenceInsert",fullSentenceInsertPunctuation:N+"fullSentenceInsertPunctuation",itemRemove:N+"itemRemove",oneGapInsert:N+"oneGapInsert",oneGapInput:N+"oneGapInput",smartPhrasesInsert:N+"smartPhrasesInsert"},F={position:"relative",overflow:"hidden",margin:"0 "+y.u.rem(.5)+" "+y.u.rem(.5)+" 0",padding:y.u.rem(.25)+" "+y.u.rem(.5),borderRadius:y.u.rem(w.fx),color:v.Il.CoreNeutral0,textAlign:"left",textOverflow:"ellipsis",whiteSpace:"normal",lineHeight:y.u.rem(1.5),cursor:"pointer",transitionDuration:".2s",overflowWrap:"break-word"},O={position:"relative",fontWeight:"bolder",overflow:"clip",$nest:{"&:after":{position:"absolute",top:"-8%",left:y.u.rem(.3125),width:"1px",height:"120%",background:v.Il.CoreNeutral0,content:"''",opacity:.8}}},B={position:"relative",marginRight:y.u.rem(.5),whiteSpace:"nowrap"},D={overflowX:"hidden",overflowY:"auto",overflowWrap:"anywhere",margin:y.u.rem(1)+" 0",padding:y.u.rem(.5),maxHeight:y.u.rem(12),borderRadius:y.u.rem(w.fx),background:v.Il.CoreNeutral10,color:v.Il.CoreNeutral90,whiteSpace:"pre-wrap",fontWeight:400,fontStyle:"italic",fontFeatureSettings:w.g_+", "+w.xL},U={textDecoration:"line-through",position:"relative",marginRight:y.u.rem(.5),maxWidth:"calc(100% - "+y.u.rem(.5)+")",color:v.Il.CoreRed40,textDecorationLine:"line-through",overflowWrap:"break-word",$nest:{"&:after":{display:"inline-block",marginLeft:y.u.rem(.5),color:v.Il.CoreNeutral50,content:"''",verticalAlign:"middle"}}},W=[L(0),L(1),L(2),L(3),L(4),L(5),L(6),L(7),L(8)],H={display:"flex",alignItems:"flex-start",flexWrap:"wrap",fontFeatureSettings:w.g_+", "+w.xL},z={background:v.Il.BackgroundCardApply,maxWidth:"100%",$nest:{"&[data-hovered='true']":{background:v.Il.CoreGreen50},"&[data-disabled='true']":{background:v.Il.CoreGreen40}}},j={$nest:{"&:after":{transform:"rotate(-25deg)"}}},G={paddingRight:y.u.rem(.35),$nest:{"&:after":{transform:"rotate(25deg)"}}},q={paddingRight:y.u.rem(.3125),$nest:{"&:before":{content:"' '"},"&:after":{transform:"rotate(25deg)"}}},$={textDecoration:"line-through",whiteSpace:"pre-wrap",$nest:{"&:before":{content:"' '"},"&:after":{background:"transparent !important",content:"' '"}}},V={display:"flex",flexBasis:"100%"},X={margin:"0 "+y.u.rem(.5)+" "+y.u.rem(.5)+" 2px",color:v.Il.CoreNeutral60},Y={display:"flex",minWidth:"50%",flexWrap:"wrap",flexBasis:"content"},Z={marginBottom:y.u.rem(.25),color:v.Il.CoreNeutral60,fontWeight:400,fontSize:y.u.rem(.8),lineHeight:y.u.rem(1.2),$nest:{"&:first-letter":{textTransform:"capitalize"}}},J={color:v.Il.CoreRed50,textDecoration:"line-through",fontWeight:600},K={background:v.Il.CoreRed50,$nest:{"&[data-hovered='true'], &[data-disabled='true']":{background:v.Il.CoreRed40}}},Q={$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}},ee={$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}},te={width:"100%",marginTop:y.u.rem(.5),marginBottom:y.u.rem(.25),$nest:{"&[data-disabled='true']":{background:v.Il.CoreNeutral40}}},ne={marginTop:y.u.rem(.5),lineHeight:"calc("+y.u.rem(2)+" - "+y.u.px(2)+")",padding:"0 "+y.u.rem(.5),border:y.u.important(y.u.px(1)+" solid "+v.Il.CoreNeutral50),color:v.Il.CoreNeutral90,$nest:{"&:placeholder-shown":{borderColor:y.u.important(v.Il.CoreNeutral20)}}},re=T.style(F,z),ie=(0,r.__assign)((0,r.__assign)((0,r.__assign)({},F),z),{backgroundColor:v.Il.CoreNeutral10,color:v.Il.CoreGreen60,fontSize:y.u.rem(.875),fontWeight:700,lineHeight:y.u.rem(1.25),$nest:{"&[data-hovered='true']":{background:v.Il.CoreGreen60,color:v.Il.CoreNeutral0}}}),ae={list:y.u.joinClasses([M.list,y.u.style(H),T.style(H)]),item:y.u.joinClasses([M.item,y.u.style(F),T.style(F)]),itemInsert:y.u.joinClasses([M.itemInsert,y.u.style(F,z),re]),deleteAll:y.u.joinClasses([M.deleteAll,y.u.style({textDecoration:"line-through"}),T.style({textDecoration:"line-through"})]),crossed:y.u.joinClasses([M.crossed,y.u.style(O)]),deleteQuote:y.u.joinClasses([M.deleteQuote,y.u.style(O,j),T.style(O,j)]),deletePunctuation:y.u.joinClasses([M.deletePunctuation,y.u.style(O,G),T.style(O,G)]),deleteDoubleComma:y.u.joinClasses([M.deleteDoubleComma,y.u.style({textDecoration:"line-through"}),T.style({textDecoration:"line-through"})]),deleteApostrophe:y.u.joinClasses([M.deleteApostrophe,y.u.style(O,q),T.style(O,q)]),deleteLetter:y.u.joinClasses([M.deleteLetter,y.u.style($),T.style($)]),deletePunctuationBeforeLetter:y.u.joinClasses([M.deletePunctuationBeforeLetter,y.u.style({textDecoration:"line-through"}),T.style({textDecoration:"line-through"})]),itemOriginal:y.u.joinClasses([M.itemOriginal,y.u.style(U),T.style(U)]),itemOriginalContent:y.u.joinClasses([M.itemOriginalContent,y.u.style({color:v.Il.CoreNeutral90}),T.style({color:v.Il.CoreNeutral90})]),removeOrContainer:y.u.joinClasses([M.removeOrContainer,y.u.style(V),T.style(V)]),itemContext:y.u.joinClasses([M.itemContext,y.u.style(B)]),itemContextShifted:y.u.joinClasses([M.itemContextShifted,y.u.style(B,{marginRight:"2px"}),T.style(B,{marginRight:"2px"})]),or:y.u.joinClasses([M.or,y.u.style(X),T.style(X)]),arrowInsertsList:y.u.joinClasses([M.arrowInsertsList,y.u.style(Y),T.style(Y)]),columnList:y.u.joinClasses([M.columnList,y.u.style(Y,{flexDirection:"column",alignItems:"flex-start",maxWidth:"100%"}),T.style(Y)]),cozyArrowInsertsList:y.u.joinClasses([M.arrowInsertsList,y.u.style(Y,{flex:2,flexBasis:"0%"}),T.style(Y)]),inlineHeader:y.u.joinClasses([M.inlineHeader,y.u.style(Z),T.style(Z)]),fullSentenceBackground:y.u.joinClasses([M.fullSentenceBackground,y.u.style(D),T.style(D)]),minimalFullSentenceBackground:y.u.joinClasses([M.minimalFullSentenceBackground,y.u.style(D,{lineHeight:y.u.rem(1.3125)}),T.style(D,{lineHeight:y.u.rem(1.3125)})]),fullSentenceDelete:y.u.joinClasses([M.fullSentenceDelete,y.u.style(J),T.style(J)]),fullSentenceHidden:y.u.joinClasses([M.fullSentenceHidden,y.u.style({display:"none"})]),fullSentenceListItem:y.u.joinClasses([M.fullSentenceListItem,y.u.style.apply(y.u,W),T.style.apply(T,W)]),fullSentenceBulletListItem:y.u.joinClasses([M.fullSentenceBulletListItem,y.u.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}}),T.style({$nest:{"&:before":{content:"'\\A\\00a0\\2022\\00a0'"}}})]),fullSentenceDashedListItem:y.u.joinClasses([M.fullSentenceDashedListItem,y.u.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}}),T.style({$nest:{"&:before":{content:"'\\A\\00a0-\\00a0'"}}})]),fullSentenceOrderedListItem:y.u.joinClasses([M.fullSentenceOrderedListItem,y.u.style.apply(y.u,(0,r.__spreadArrays)(R(""),W)),T.style.apply(T,(0,r.__spreadArrays)(R(""),W))]),fullSentenceOrderedListItemWithFormatting:y.u.joinClasses([M.fullSentenceOrderedListItemWithFormatting,y.u.style.apply(y.u,(0,r.__spreadArrays)(R(""),W)),T.style.apply(T,(0,r.__spreadArrays)(R(""),W))]),fullSentenceBulletListItemWithFormatting:y.u.joinClasses([M.fullSentenceBulletListItemWithFormatting,y.u.style.apply(y.u,(0,r.__spreadArrays)(W,[ee])),T.style.apply(T,(0,r.__spreadArrays)(W,[ee]))]),fullSentenceDashedListItemWithFormatting:y.u.joinClasses([M.fullSentenceDashedListItemWithFormatting,y.u.style.apply(y.u,(0,r.__spreadArrays)(W,[Q])),T.style.apply(T,(0,r.__spreadArrays)(W,[Q]))]),fullSentenceInsert:y.u.joinClasses([M.fullSentenceInsert]),fullSentenceInsertPunctuation:y.u.joinClasses([M.fullSentenceInsertPunctuation]),diff:y.u.joinClasses([M.diff,y.u.style({fontWeight:"bolder"}),T.style({fontWeight:"bolder"})]),itemRemove:y.u.joinClasses([M.itemRemove,y.u.style(F,K)]),oneGapInsert:y.u.joinClasses([M.oneGapInsert,y.u.style(F,z,te),re]),oneGapInput:y.u.joinClasses([M.oneGapInput,y.u.style(ne)]),smartPhrasesInsert:y.u.joinClasses([M.smartPhrasesInsert,y.u.style(ie),T.style(ie)])};y.u.cssRule("."+M.fullSentenceInsert+", ."+M.fullSentenceInsertPunctuation,{color:v.Il.CoreGreen60,fontWeight:600}),y.u.cssRule("."+M.fullSentenceDelete+" + ."+M.fullSentenceInsert,{marginLeft:y.u.rem(.25)}),y.u.cssRule("."+M.fullSentenceOrderedListItemWithFormatting+",\n."+M.fullSentenceDashedListItemWithFormatting+",\n."+M.fullSentenceBulletListItemWithFormatting,{color:v.Il.CoreGreen60,fontWeight:600});var oe=n(4490),se=function(e){var t=e.transform,n=e.title,r=e.disabled,a=e.boldifier,o=void 0===a?pe:a,s=e.classes,u=void 0===s?ae:s,c=e.onClick;return i.createElement(h.zx,{animationMode:g.m.FromClickPoint,name:"apply-insert",onClick:c,title:n,disabled:r,className:u.itemInsert},t.map((function(e,t){return i.createElement(i.Fragment,{key:t},o(e,ae.diff))})))},ue=function(e){var t=e.transform,n=e.title,a=e.classes,o=void 0===a?ae:a,s=e.onClick;return i.createElement(h.zx,(0,r.__assign)({animationMode:g.m.FromClickPoint,name:"apply-remove"},{onClick:s,title:n,className:o.itemRemove}),t.map((function(e,t){return i.createElement(he,{key:t,element:e})})))},ce=function(e){var t=e.transform,n=e.title,a=e.classes,o=void 0===a?ae:a,s=e.onClick,u=e.children;return i.createElement("div",{className:o.removeOrContainer},t.map((function(e,a){return"text"===e.type?i.createElement("span",{key:a,className:a===t.length-1?o.itemContextShifted:o.itemContext},e.text):i.createElement(h.zx,(0,r.__assign)({key:a,animationMode:g.m.FromClickPoint,name:"apply-remove-or"},{onClick:s,title:n,className:o.itemRemove}),i.createElement(he,{element:e}))})),u)},le=function(){return i.createElement("span",{className:ae.or},i.useContext(p.m.Context).card.or)},de=function(e){var t=e.transform,n=e.boldifier,r=void 0===n?pe:n;return i.createElement("div",{className:ae.itemOriginal},i.createElement("span",{className:ae.itemOriginalContent},t.map((function(e,t){return i.createElement(i.Fragment,{key:t},r(e,ae.diff))}))))},pe=c.ei("text"),fe=function(e,t){var n=e.text;return"text"===e.type?n:i.createElement("span",{className:t},n)};function me(e,t){return function(n){return i.createElement(be,{index:t,oldText:e,newText:n.text})}}var he=function(e){var t=e.element,n=e.strikeClass;return"delete"===t.type?i.createElement("span",(0,r.__assign)({},(0,u.Sh)(oe.Re.getClass(ae,t.text),n)),t.text):i.createElement(i.Fragment,null,t.text)};var ge=/^\W/,ve=(0,o.flow)((0,d.RN)((function(e){switch(e.type){case f.GP.Delete:return ae.fullSentenceDelete;case f.GP.Insert:return ge.test(e.text)?ae.fullSentenceInsertPunctuation:ae.fullSentenceInsert;case f.GP.Text:case f.GP.List:return"";default:return(0,l.vE)(e)}}),(function(e){switch(e.type){case f.GP.Delete:return ae.fullSentenceHidden;case f.GP.List:case f.GP.Text:case f.GP.Insert:return"";default:return(0,l.vE)(e)}})),(function(e){return function(t){return(0,r.__assign)({children:t.text},(0,u.Sh)(e(t)))}}),a.map),ye=(0,o.flow)((0,d.RN)((function(e){switch(e.type){case f.GP.Delete:return ae.fullSentenceHidden;case f.GP.List:return"bullet"===e.kind?ae.fullSentenceBulletListItemWithFormatting:"dashed"===e.kind?ae.fullSentenceDashedListItemWithFormatting:ae.fullSentenceOrderedListItemWithFormatting;case f.GP.Insert:case f.GP.Text:return"";default:return(0,l.vE)(e)}}),(function(e){switch(e.type){case f.GP.Delete:return ae.fullSentenceHidden;case f.GP.List:return"bullet"===e.kind?ae.fullSentenceBulletListItem:"dashed"===e.kind?ae.fullSentenceDashedListItem:ae.fullSentenceOrderedListItem;case f.GP.Insert:case f.GP.Text:return"";default:return(0,l.vE)(e)}})),(function(e){return function(t){return t.type===f.GP.List?(0,r.__assign)((0,r.__assign)({},(0,u.Sh)(e(t))),{"data-indent":t.indent}):(0,r.__assign)({children:t.text},(0,u.Sh)(e(t)))}}),a.map),be=function(e){var t=e.index,n=void 0===t?0:t,r=e.oldText,a=e.newText,o=(0,oe.d5)(r,a);return i.createElement(i.Fragment,null,o?[o[0],i.createElement("span",{key:n,className:ae.diff},o[1]),o[2]]:a)},we=function(e){return i.createElement(S.XY,{className:(0,s.pipe)(e.layoutDensity,m.j.Density.matchOrDefault(m.j.Density.minimal)((function(){return ae.minimalFullSentenceBackground}),(function(){return ae.fullSentenceBackground})))},(0,s.pipe)(e.replacements.kind===f._k.WithFormatting?ye(e.showDiff)(e.replacements.labels):ve(e.showDiff)(e.replacements.labels),(0,a.mapWithIndex)((function(e,t){return i.createElement("span",(0,r.__assign)({key:e},t))}))))},_e=function(e){var t=i.useContext(p.m.Context).card,n=""===e.gapValue;return i.createElement(i.Fragment,null,i.createElement(I,{name:"input",placeholder:t.gapCard.placeholder,value:e.gapValue,onChange:function(t){return e.onChange(t.target.value)},onKeyPress:function(e){"Enter"===e.key&&e.currentTarget.nextElementSibling&&e.currentTarget.nextElementSibling.click()},className:ae.oneGapInput}),i.createElement(se,{title:n?"":t.todoAction(e.replacements.tooltipText),boldifier:fe,onClick:e.onApply,classes:{itemInsert:ae.oneGapInsert,inlineHeader:ae.inlineHeader},disabled:n,transform:Se(e.replacements.labels.left,e.gapValue,e.replacements.labels.right)}))},Se=function(e,t,n){return(0,r.__spreadArrays)(e,[{type:f.GP.Insert,text:Ce(e)+(t||"")+Ce(n)}],n)},Ce=function(e){return e.length?" ":""},xe=function(e){var t=e.replacementsLabels,n=e.layoutDensity,a=e.onClick,o=i.useContext(p.m.Context).card.todoAction(t.tooltipText);switch(t.type){case f.b$.Type.InsertList:return i.createElement(S.Xk,{className:ae.list},t.labels.map((function(e,t){return i.createElement(se,(0,r.__assign)({},{key:t,title:o,onClick:a(t)},{transform:e}))})));case f.b$.Type.DeleteList:return i.createElement(S.Xk,{className:ae.list},t.labels.map((function(e,t){return i.createElement(ue,(0,r.__assign)({},{key:t,title:o,onClick:a(t)},{transform:e}))})));case f.b$.Type.Arrow:return function(e,t,n,a){var o=e.labels,s=e.original,u=e.onlyReplacements,c=(1===s.length?[s[0].text,o[0][0].text].map(me):[fe,fe])[0];return i.createElement(S.Xk,{className:ae.list},!u&&i.createElement(de,{transform:s}),i.createElement("div",{className:n===m.j.Density.cozy?ae.cozyArrowInsertsList:o.length>2?ae.columnList:ae.arrowInsertsList},o.map((function(e,n){return i.createElement(se,(0,r.__assign)({},{key:n,title:t,onClick:a(n)},{transform:e,boldifier:c}))}))))}(t,o,n,a);case f.b$.Type.InsertOr:return i.createElement(S.Xk,{className:ae.list},i.createElement(se,(0,r.__assign)({transform:t.labels[0]},{title:o,onClick:a(0)},{boldifier:fe})),i.createElement(le,null),i.createElement(se,(0,r.__assign)({transform:t.labels[1]},{title:o,onClick:a(1)},{boldifier:fe})));case f.b$.Type.DeleteOr:return i.createElement(S.Xk,{className:ae.list},t.labels.map((function(e,n){return i.createElement(ce,(0,r.__assign)({},{key:n,title:o,onClick:a(n)},{transform:e}),n===t.labels.length-2&&i.createElement(le,null))})));case f.b$.Type.FullSentence:case f.b$.Type.OneGap:return null;default:return(0,l.vE)(t)}},Ie=function(e){var t=e.replacementsLabels,n=e.onClick,a=i.useContext(p.m.Context).card.todoAction(t.tooltipText);return i.createElement(i.Fragment,null,t.labels.map((function(e,t){return i.createElement(se,(0,r.__assign)({},{key:t,title:a,onClick:n(t)},{transform:e,classes:{itemInsert:ae.smartPhrasesInsert}}))})))}},4490:(e,t,n)=>{"use strict";var r;function i(e){var t=e.replace(/\s/g,"");return null!==e&&null!==t.match(/^["'.,;:!?\\\/\-()]+$/)}function a(e){return null!==e&&null!==e.match(/^\s+$/)}function o(e,t){if(e.length<=4)return null;var n=function(e,t){if(e===t)return;var n=e.length,r=t.length;if(r>n){if(t.substr(0,n)===e)return{from:n,to:n,oldFragment:"",newFragment:t.substr(n)};if(t.substr(r-n)===e)return{from:0,to:0,oldFragment:"",newFragment:t.substr(0,r-n)}}if(r<n){if(e.substr(n-r)===t)return{from:0,to:n-r,oldFragment:e.substr(0,n-r),newFragment:""};if(e.substr(0,r)===t)return{from:r,to:n,oldFragment:e.substr(r),newFragment:""}}var i=r<n?r:n,a=function(e,t,n){var r=0;for(;e[r]===t[r]&&r<n;)r+=1;return r}(e,t,i),o=function(e,t,n,r,i){var a=0;for(;e[n-a-1]===t[r-a-1]&&i-a>=0;)a+=1;return a}(e,t,n,r,i);a+o>n&&(o-=a+o-n);a+o>r&&(o-=a+o-r);return{from:a,to:n-o,oldFragment:e.substr(a,n-o-a),newFragment:t.substr(a,r-o-a)}}(e,t);if(void 0===n)return null;var r=n.from,i=n.to,a=n.oldFragment,o=n.newFragment,s=1===o.length&&r>0&&e[r-1]===o,u=1===a.length&&0===o.length&&t[r-1]===a,c=r,l=o;return(s||u)&&(c=r-1),s&&(l=o+o),u&&(l=a),l.length>3?null:[e.substring(0,c),l,e.substring(i)]}n.d(t,{Re:()=>r,BE:()=>i,FD:()=>a,d5:()=>o}),function(e){e.getClass=function(e,t){return null!==(n=t)&&1===n.length&&/["']/.test(n)?e.deleteApostrophe:function(e){return null!==e&&null!==e.match(/["'][.,;]/)}(t)?e.deleteQuote:i(t)?e.deletePunctuation:function(e){return null!==e&&null!==e.match(/,,/)}(t)?e.deleteDoubleComma:function(e){return null!==e&&1===e.length&&null!==e.match(/[a-z]/i)}(t)?e.deleteLetter:function(e){return null!==e&&e.match(/[.,;:!?\\\/-]\s*[a-z]/i)}(t)?e.deletePunctuationBeforeLetter:e.deleteAll;var n}}(r||(r={}))},90600:(e,t,n)=>{"use strict";n.d(t,{d:()=>E});var r=n(59312),i=n(27378),a=n(71215),o=n(27221),s=n(64909),u=n(19962),c=n(92932),l=n(71517),d=n(73510),p=n(77176),f=n(24209),m=n(18625),h=n(66310),g=n(40151),v=n(78259),y=n(2834),b=n(49708),w=n(93508),_=n(17343),S=n(52479),C=n(76974),x=n(99391),I=n(67434),A=n(57091),E=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._log=c.C8.Logging.getLogger("CardsListConnectorView",c.zW.LogLevel.DEBUG),t._subs=new d.w.Keeper,t}return(0,r.__extends)(t,e),t.prototype.componentDidMount=function(){this.props.isMaster&&this._setMaster()},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props.name;this._log.debug("lensview did update",{wasMaster:e.isMaster,nowMaster:this.props.isMaster,name:n}),this.props.isMaster?!1===e.isMaster?(this._log.info("reuse released view",n),this.forceUpdate((function(){t._setMaster(),t._log.trace("view force update complete",n)}))):(this._log.trace("set master view",n),this._setMaster()):(this._log.trace("release master view",n),this._clearSubs())},t.prototype.componentWillUnmount=function(){this._clearSubs()},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,r=e.height;return i.createElement(a.F.div,{"data-purpose":"card-list-connector",style:r.pipe(p.U((function(e){return{height:e}}))),className:t},n)},t.prototype._setMaster=function(){this._setSubs()},t.prototype._setSubs=function(){this._clearSubs(),this._subs.push(this.props.stateSyncListener.subscribe())},t.prototype._clearSubs=function(){this._subs.dispose()},t}(i.Component);!function(e){!function(e){e.create=function(){return o.h.create({scrollProvider:s.none,scrollConsumer:s.none,viewport:s.none,title:s.none})}}(e.Elements||(e.Elements={})),e.boundedScrollListener=function(e,t){return f.T(m.P((function(){e.paddingTop.set(0)})),t.view("viewport").pipe(h.w(s.fold(g.c,(function(e){return v.YC(e).pipe(p.U((function(t){return(0,r.__assign)((0,r.__assign)({},t),{top:e.offsetTop,height:e.offsetHeight})})))}))),y.b((function(t){return e.viewport.set({top:l.r.FromWindowTop.ISO.wrap(t.top),height:t.height})}))),t.view("scrollProvider").pipe(h.w(s.fold(g.c,(function(t){return b.R(t,"scroll").pipe(p.U((function(){return t.scrollTop})),w.O(t.scrollTop),y.b((function(t){return e.scrollTop.set(t)})),_.h(S.PU))})))),t.view("title").pipe(h.w(s.fold((function(){return C.of(u.UL.empty)}),(function(e){return v.YC(e)}))),p.U((function(e){return e.height})),x.shareReplay({bufferSize:1,refCount:!0}),y.b((function(t){return e.paddingTop.set(t)}))),t.view("scrollConsumer").pipe(h.w(s.fold(g.c,(function(t){return e.scrollOffset.pipe(y.b((function(e){t.scrollTop+=e})))}))))).pipe(_.h(void 0))},e.superScrollListener=function(e,t){var n=t.view("title").pipe(h.w(s.fold((function(){return C.of(u.UL.empty)}),(function(e){return v.YC(e)}))),p.U((function(e){return e.height})),x.shareReplay({bufferSize:1,refCount:!0}));return f.T(m.P((function(){e.paddingTop.set(0)})),t.view("viewport").pipe(h.w(s.fold(g.c,(function(e){return v.YC(e).pipe(p.U((function(t){return(0,r.__assign)((0,r.__assign)({},t),{top:e.offsetTop,height:e.offsetHeight})})))}))),y.b((function(t){return e.viewport.set({top:l.r.FromWindowTop.ISO.wrap(t.top),height:t.height})}))),t.view("scrollProvider").pipe(h.w(s.fold(g.c,(function(t){return b.R(t,"scroll").pipe(p.U((function(){return t.scrollTop})),w.O(t.scrollTop),y.b((function(t){return e.scrollTop.set(t)})),_.h(S.PU))})))),t.view("scrollConsumer").pipe(h.w(s.fold(g.c,(function(t){return e.scrollOffset.pipe(I.R((function(e,t){return e-t}),0),y.b((function(e){t.style.transform="translateY("+e+"px)"})))}))),A.a(n),y.b((function(t){var n=t[0],r=t[1];return e.paddingTop.set(n+r)})))).pipe(_.h(void 0))}}(E||(E={}))},83305:(e,t,n)=>{"use strict";n.d(t,{TG:()=>Q});var r,i=n(59312),a=n(27378),o=n(45980),s=n(73805),u=n(71215),c=n(85746),l=n(27221),d=n(22232),p=n(19962),f=n(83078),m=n(64909),h=n(93583),g=n(22168),v=n(8125),y=n(92932);!function(e){e.Hidden="hidden",e.Dot="dot",e.Popup="popup",e.Passed="passed"}(r||(r={}));var b=function(){function e(){this.completionTrigger=l.h.create(!1),this._steps={},this.cpuAndAnimationOptsExperiment=!1}return e.prototype.isStepEnabled=function(e){return void 0!==this._steps[e]},e.prototype.relaunchAllSteps=function(){y.C8.Logging.getLogger("OnboardingViewModelImpl").error("Not implemented")},e.prototype.setState=function(e,t){this.subscribeForStep(e).state.set(t)},e.prototype.subscribeForStep=function(e){var t=l.h.create(r.Hidden);return this._steps[e]||(this._steps[e]={id:e,state:t,dotShown:v.ZT,dotClicked:function(){return t.set(r.Popup)},popupClosed:function(){return t.set(r.Passed)},popupIgnored:function(){return t.set(r.Hidden)},actionTaken:function(){return t.set(r.Passed)}})},e.prototype.getStepCompletionCallback=function(e){throw new Error("Method not implemented.")},e.prototype.changeState=function(e){},e}(),w=n(52479),_=n(77176),S=n(95093),C=n(85985),x=n(598),I=n(41398),A=n(90351),E=n(22823),k=n(71031),T=n(13097),L=A.Il.BackgroundTooltip,P=E.u.keyframes({"0%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, .65)"},"70%":{boxShadow:"0 0 0 "+E.u.rem(1)+" rgba(95, 139, 250, 0)"},"100%":{boxShadow:"0 0 0 0 rgba(95, 139, 250, 0)"}}),R={width:E.u.rem(1),height:E.u.rem(1),borderRadius:E.u.percent(50),background:"rgba(95, 139, 250, .65)",boxShadow:"0 0 0 rgba(95, 139, 250, .65)",animation:P+" 2s infinite",$nest:{"&:hover":{animation:"none"},"@media print":{visibility:"hidden"}}},N=E.u.keyframes({"0%":{opacity:1,transform:"scale(1)"},"100%":{opacity:0,transform:"scale(3)"}}),M={width:E.u.rem(1),height:E.u.rem(1),borderRadius:E.u.percent(50),background:"rgba(95, 139, 250, .65)",willChange:"transform",$nest:{"@media print":{visibility:"hidden"},"&:before":{position:"absolute",top:0,left:0,zIndex:-1,width:E.u.rem(1),height:E.u.rem(1),borderRadius:E.u.percent(100),backgroundColor:"rgba(95, 139, 250, .65)",content:"''",animation:N+" 2s infinite",willChange:"transform"},"&:hover:before":{animation:"none"}}},F={margin:E.u.rem(-1.5)+" 0 0 "+E.u.rem(-1.5),padding:E.u.rem(1),borderRadius:E.u.percent(50),cursor:"pointer",pointerEvents:"all"},O={margin:"0 0 "+E.u.rem(.5),color:A.Il.CoreNeutral0,fontWeight:"bold"},B={color:A.Il.CoreNeutral0,lineHeight:E.u.rem(1.25)},D={display:"flex",padding:E.u.rem(1)+" "+E.u.rem(1.5)+" "+E.u.rem(1.25)+" "+E.u.rem(2),width:E.u.rem(23),borderRadius:E.u.rem(T.fx),background:L,color:A.Il.CoreNeutral0,textAlign:"left",letterSpacing:0,pointerEvents:"all",alignItems:"flex-start"},U={marginRight:E.u.rem(2),width:E.u.rem(2),flexShrink:0,alignSelf:"center"},W={stroke:k.FW,$nest:{"&:not([data-disabled='true'])[data-hovered='true'], &:not([data-disabled='true'])[data-active='true']":{stroke:A.Il.CoreNeutral0,fill:A.Il.CoreNeutral0}}},H={position:"absolute",top:E.u.percent(50),left:E.u.percent(50),zIndex:T.I3},z={position:"relative",zIndex:T.VN},j={zIndex:T.w$},G={position:"absolute",zIndex:T.w$},q=E.u.prefixedStylesheet("onboarding",{pulse:[R],pulseWrapper:[F],header:[O],description:[B],stepWrapper:[D],content:[{display:"inline-block"}],alertIcon:[U],closeIconWrapper:[{position:"absolute",top:0,right:0}],closeIcon:[W],containerWrapper:[{position:"relative",display:"inline-block"}],onboardingSpot:[H],containerDiv:[{}],editor:[z],onboardingPopup:[j],notificationContainer:[G],pulseOptimized:[M]}),$=n(39499),V=n(41439),X=n(38206),Y=n(45836),Z=function(e){var t=e.alignment,n=e.rect,r=e.onClose,o=e.className,l=e.children,d=e.icon,p=e.pinTargetRect,f=e.hideCloseButton,h=e.onMount;return a.createElement(X.t.ByRelativeRect,(0,i.__assign)({rect:n,className:q.notificationContainer},X.t.Alignment.toSelector(t),{pinTargetRect:p,withPin:!0}),a.createElement(u.F.div,(0,i.__assign)({},(0,c.Sh)(q.stepWrapper,o),{mount:h}),(0,s.pipe)(d,m.fold((function(){return a.createElement(V.JO.Grammarly,{className:q.alertIcon})}),(function(e){return a.createElement(e,{className:q.alertIcon})}))),l,!f&&a.createElement($.zx,{name:"onboard-close",className:q.closeIconWrapper,onClick:function(){return r&&r()}},a.createElement(V.JO.Close,{className:q.closeIcon,width:12}))))},J=function(e){var t=e.title,n=e.description,r=(0,i.__rest)(e,["title","description"]);return a.createElement(Z,(0,i.__assign)({},r),a.createElement("span",{className:q.content},t&&a.createElement(Y.P1,{className:q.header},t),a.createElement(Y.XY,{className:q.description},n)))},K=function(e){var t=e.className,n=e.onClick,r=e.customStyle,o=e.enableOptimizations;return a.createElement(u.F.div,(0,i.__assign)({},(0,c.Sh)(q.pulseWrapper,t),{style:r,onClick:function(){return n&&n()}}),a.createElement("div",{className:o?q.pulseOptimized:q.pulse}))};function Q(e){var t=e.stepId,n=e.onboardingViewModel,r=(0,i.__rest)(e,["stepId","onboardingViewModel"]),o=n||a.useContext(Q.Context),u=ee(t,o),c=a.useContext(g.l.Context).pipe(_.U((function(e){return e.rect})));return(0,s.pipe)(u,m.fold((function(){return a.Children.only(e.children)}),(function(e){return a.createElement(te,(0,i.__assign)({},r,{onboardingStep:e,enableOptimizations:o.cpuAndAnimationOptsExperiment,viewportRect:c}))})))}var ee=function(e,t){return(0,d.kG)(Boolean(t),"onboardingViewModel should be set either in context or in props"),t.isStepEnabled(e)?m.some(t.subscribeForStep(e)):m.none},te=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._subs=[],t._wrapperElement=l.h.create(m.none),t._containerElement=l.h.create(m.none),t._exactTargetRect=l.h.create(m.none),t._visibilityState=l.h.create(!t.props.findFirstButton),t._spotStyle=l.h.create({}),t._onEventActionTaken=function(e,n){return void 0===n&&(n=!0),function(r){var i=e.state.get();if("popup"===i||n&&"dot"===i){var a=r.target;if(p.pK(a))return;var o=n||p.q_(a,q.containerDiv);if(t.props.findFirstButton&&!p.q2(a,"role","button"))return;o&&e.actionTaken()}else"dot"===i&&(r.preventDefault(),r.stopPropagation())}},t}return(0,i.__extends)(t,e),t.prototype.componentWillUnmount=function(){var e=this.props.onboardingStep;"popup"===e.state.get()&&e.popupIgnored(),this._subs.forEach((function(e){return e.unsubscribe()}))},t.prototype.componentDidMount=function(){var e=this;if(this.props.findFirstButton){var t=this.props.findFirstButton.dotPosition,n=this.props.findFirstButton.buttonOrder;this._subs.push(this.context.pipe(S.T(this.props.onboardingStep.state.pipe(C.h((function(e){return"dot"===e||"popup"===e})))),x.c(w.Dx(n)),I.M(this._wrapperElement,this._containerElement)).subscribe((function(n){var r=n[0],i=n[1],a=n[2];return setTimeout((function(){(0,s.pipe)(i,m.map((function(n){(0,s.pipe)(a,m.map((function(i){var a=i.querySelectorAll('[role="button"]'),s=a.length>0&&(void 0===r?a[a.length-1]:a[r]);if(s){var u=p.UL.fromEl((0,o.unsafeCoerce)(s)),c=p.UL.fromEl(n);switch(e._exactTargetRect.set(m.some(u)),t){case"rightTop":e._spotStyle.set({top:0,left:u.left-c.left+u.width});break;case"center":e._spotStyle.set({top:u.top-c.top+u.height/2,left:u.left-c.left+u.width/2});break;default:(0,d.vE)(t)}e._visibilityState.set(!0)}})))})))}),500)})))}},t.prototype.render=function(){var e=this,t=this.props.onboardingStep;return a.createElement(u.F.div,(0,i.__assign)({key:"onboarding-wrapper"},(0,c.Sh)(q.containerWrapper,this.props.themes&&this.props.themes.containerWrapperClassName),{mount:function(t){return e._wrapperElement.set(m.fromNullable(t))}}),a.createElement("div",(0,i.__assign)({key:"container",ref:function(t){return e._containerElement.set(m.fromNullable(t))}},(0,c.Sh)(q.containerDiv,this.props.themes&&this.props.themes.containerClassName),{onClickCapture:this._onEventActionTaken(t,"onclick"===this.props.eventType),onMouseEnter:function(n){return"onhover"===e.props.eventType&&e._onEventActionTaken(t,!1)(n)}}),this.props.children),l.h.combine(t.state,this._visibilityState,(function(n,r){if(!r)return null;switch(n){case"dot":var o=e.props.themes&&e.props.themes.spotClassName;return e.props.onboardingStep.dotShown(),a.createElement(K,(0,i.__assign)({customStyle:e._spotStyle,key:"spot",enableOptimizations:e.props.enableOptimizations},(0,c.Sh)(q.onboardingSpot,o),{onClick:function(){return t.dotClicked()}}));case"popup":return a.createElement(J,{key:"step",title:e.props.title,alignment:e.props.alignment,rect:e._containerElement.view(m.fold((function(){return p.UL.empty}),p.UL.fromEl)),className:e.props.themes&&e.props.themes.notificationClassName,description:e.props.message,icon:m.fromNullable(e.props.icon),onClose:function(){return t.popupClosed()},pinTargetRect:e._exactTargetRect.view(f.Fc)});default:return null}})))},t.contextType=h.u.Context,t.defaultProps={alignment:"left"},t}(a.Component);!function(e){e.Context=a.createContext(null),e.ContextMock=function(t){var n=t.children;return a.createElement(e.Context.Provider,{value:new b,children:n})}}(Q||(Q={}))},11129:(e,t,n)=>{"use strict";n.d(t,{tk:()=>r,cl:()=>m});var r,i=n(59312),a=n(65948),o=n(30347),s=n(99129),u=n(87088),c=n(22232),l=n(64909),d=n(83078);!function(e){e.extend=function(e){return u.local((function(t){return(0,i.__assign)((0,i.__assign)({},t),{requestExtender:t.requestExtender?m.Extender.compose(e,t.requestExtender):e})}))};var t=function(e){function t(t,n){var r=e.call(this,t)||this;return r.message=t,r.details=n,r.name="ParseError",r}return(0,i.__extends)(t,e),t.prototype.toString=function(){return"Ajax response parsing error\n        Message "+this.message+"\n        Details "+o.Rn(this.details)},t}(c.sH);e.ParseError=t,function(e){e.json="application/json",e.form="application/x-www-form-urlencoded",e.multipart="multipart/form-data",e.pdf="application/pdf",e.txt="text/plain",e.stream="application/octet-stream",e.vnd="application/vnd",e.zip="application/zip",e.any="*/*"}(e.MimeType||(e.MimeType={})),e.mapToHTTPErrorWithoutBody=function(t,n,r){return r.removeBody(),e.mapToHTTPError(t,n,r)},e.mapToHTTPError=function(e,t,n){return new p({request:n,code:t.status,status:t.statusText,url:t.url,body:e})}}(r||(r={}));!function(e){function t(t,n){var r=e.call(this,t)||this;return r.message=t,r.details=n,r.name="RequestError",r}(0,i.__extends)(t,e),t.prototype.toString=function(){return"Request error\n      Message: "+this.message+"\n      details: "+this.details},t.fromError=function(e,n){var r=new t(e,n.message);return r.stack=n.stack,r}}(c.sH);var p=function(e){function t(t){var n=t.code,r=t.status,i=t.url,a=t.message,o=t.body,s=t.request,u=e.call(this,a||r||o||"HTTPError")||this;return u.name="HTTPError",u.url=i,u.code=n,u.body=o,u.status=r,u.request=s,u}return(0,i.__extends)(t,e),t.prototype.toString=function(){return"Response\n      Message: "+this.message+"\n      Status: "+this.status+"\n      Code: "+this.code+"\n      Body: "+this.body+"\n      "+(void 0!==this.request?"\n"+this.request.toString():"Url: "+this.url)},t}(c.sH),f=function(){function e(e,t,n,r,i){this._url=e,this._method=t,this._headers=n,this._mime=r,this._body=i}return e.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m.get.apply(m,e).build()},e.post=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m.post.apply(m,e).build()},e.put=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m.put.apply(m,e).build()},e.del=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m.del.apply(m,e).build()},e.head=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return m.head.apply(m,e).build()},Object.defineProperty(e.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"method",{get:function(){return this._method},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this._headers},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mime",{get:function(){return this._mime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return l.fromNullable(this._body)},enumerable:!1,configurable:!0}),e.prototype.toString=function(){return"Request\n    Method: "+this.method.toUpperCase()+"\n    Url: "+this.url+"\n    Mime: "+this.mime+"\n    Headers: "+JSON.stringify(this.headers,void 0,2)+"\n    Body:"+d.dH((function(e){return t=JSON.stringify(e),n=100,t.length<=n?t:t.slice(0,n)+"....";var t,n}),"empty")(this.body)+"\n    "},e.prototype.removeBody=function(){this._body=void 0},e}();!function(e){!function(e){e.GET="get",e.POST="post",e.PUT="put",e.OPTIONS="options",e.HEAD="head",e.TRACE="trace",e.DELETE="delete",e.CONNECT="connect"}(e.Method||(e.Method={}))}(f||(f={}));var m=function(){function e(e,t,n,r,i,a,o,s){void 0===e&&(e=""),void 0===t&&(t=new URLSearchParams),void 0===n&&(n=[]),void 0===r&&(r={}),void 0===s&&(s=!1),this._url=e,this._queryParams=t,this._cookies=n,this._headers=r,this._method=i,this._mime=a,this._body=o,this._preserveUrl=s}return e.join=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=[].slice.call(t.filter((function(e){return e.length>0})),0).join("/");return e._normalize(r)},e._normalize=function(e){return e=(e=(e=e.replace(/:\//g,"://")).replace(/([^:\s])\/+/g,"$1/")).replace(/\/(\?|#)/g,"$1")},e.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(f.Method.GET)},e.post=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(f.Method.POST)},e.put=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(f.Method.PUT)},e.del=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(f.Method.DELETE)},e.head=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.url.apply(e,t).method(f.Method.HEAD)},e.url=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new e(e.join.apply(e,t))},e.prototype.url=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(""!==this._url)throw new Error("URL already set to "+this._url+", use join(string) to add additional parts to it");return this.join(e.join.apply(e,t))},e.create=function(){return new e},e.prototype.method=function(e){if(this._method&&this._method!==e)throw new Error("Method already set to "+this._method+", but was overwritten by "+e);return this._method=e,this},e.prototype.join=function(t){return this._url=e.join(this._url,t),this},e.prototype.pathParam=function(t){return this._url=e.join(this._url,encodeURIComponent(t)),this},e.prototype.body=function(e){if(this._body)throw new Error("Body already set to "+this._body+", but was overwritten by "+e);return this._body=e,this},e.prototype.formParam=function(e,t){return(this._body=this._body instanceof URLSearchParams?this._body:new URLSearchParams).append(e,t),this},e.prototype.multipartFormData=function(e,t,n){var r=this._body instanceof s?this._body:new s;return r.append(e,t,n),this._body=r,this},e.prototype.header=function(e,t){return this._headers[e]=t,this},e.prototype.queryParam=function(e,t){return this._queryParams.append(e,t),this},e.prototype.cookie=function(e,t){return this._cookies.push(e+"="+t),this},e.prototype.mime=function(e){if(this._mime&&this._mime!==e)throw new Error("MIME already set to "+this._mime+", but was overwritten by "+e);return this._mime=e,this},e.prototype.json=function(e){return e?this.body(e).mime(r.MimeType.json):this.mime(r.MimeType.json)},e.prototype.preserveUrl=function(){return this._preserveUrl=!0,this},e.prototype.build=function(){if(!this._url||0===this._url.length)throw new Error("URL cannot be empty");if(this._preserveUrl||(this._url=this._url.replace(/\/$/,"")),(""+this._queryParams).length>0&&(this._url+="?"+this._queryParams),this._body instanceof URLSearchParams){if(this._mime&&this._mime!==r.MimeType.form)throw new Error("Only application/x-www-form-urlencoded can be used for form requests, don't specify it mandatory in mime() method");this._mime=r.MimeType.form}else if(this._body instanceof s&&this._mime&&this._mime!==r.MimeType.multipart)throw new Error("Only multipart/form-data can be used for multipart form data requests, don't specify it mandatory in mime() method");if(this._mime===r.MimeType.json&&this._body&&(this._body=JSON.stringify(this._body)),!this._method)throw new Error("HTTP method was not set");if(this._method=this._method.toLocaleLowerCase(),("get"===this._method||"delete"===this._method)&&this._body)throw new Error("Body is not supported for GET, DELETE requests");if(this._mime&&(this._headers["Content-Type"]=this._mime),this._cookies.length>0){this._headers.Cookie=this._cookies.join("; ")}return new f(this._url,this._method,this._headers,this._mime||null,this._body)},e}();!function(e){!function(e){e.identity=function(e){return a.task.of(e)},e.compose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return function(n){return t.reduce(a.task.chain,e.identity(n))}}}(e.Extender||(e.Extender={}))}(m||(m={}))},5942:(e,t,n)=>{"use strict";var r,i;n.d(t,{A:()=>r,h:()=>i}),function(e){e.NotFixed="NOT_FIXED"}(r||(r={})),function(e){e.is=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return e===t.kind}))}}}(i||(i={}))},40300:(e,t,n)=>{"use strict";n.d(t,{R$:()=>L});var r=n(59312),i=n(42654),a=n(45980),o=n(73805),s=n(69243),u=n(30347),c=n(8125),l=n(65772),d=n(64909),p=n(92932),f=n(83078),m=n(22232),h=n(93283),g=n(11129),v=n(14677);function y(e){return"null"===e||"undefined"===e||null==e}function b(e){if(null===e||"null"===e||"boolean"==typeof e)return null;var t=Number(e);return Number.isNaN(t)?null:t}function w(e){return y(e)?null:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}function _(e){try{return JSON.parse(decodeURI(e))}catch(e){return null}}var S,C=function(){function e(e){this._value=e}return e.prototype.getStr=function(){return y(this._value)?null:String(this._value)},e.prototype.getNum=function(){return b(this._value)},e.prototype.getBool=function(){return w(this._value)},e.prototype.getBoolOrDefault=function(e){return function(e,t){return y(e)?t:"true"===e||"false"!==e&&"0"!==e&&Boolean(e)}(this._value,e)},e.prototype.getObject=function(){return _(this._value)},e.prototype.getArray=function(){return _(this._value)},e.prototype.getObjProp=function(e){return this._value.hasOwnProperty(e)?this._value[e]:null},e}();!function(e){e.find=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.find((function(t){return t.has(e)}));return new C(r&&r[e])},e.of=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=new I,r=0,i=e;r<i.length;r++){var a=i[r];for(var o in a){var s=a[o];n[o]="object"==typeof s?encodeURI(JSON.stringify(s)):s}}return n},e.is=function(e){return e instanceof I}}(S||(S={}));var x,I=function(){function e(){}return e.prototype.getStr=function(e){return this.hasOwnProperty(e)?String(this[e]):null},e.prototype.getNum=function(e){return this.hasOwnProperty(e)?b(this[e]):null},e.prototype.getBool=function(e){return this.hasOwnProperty(e)?w(this[e]):null},e.prototype.getObject=function(e){return this.hasOwnProperty(e)?_(this[e]):null},e.prototype.has=function(e){return this.hasOwnProperty(e)},e.prototype.ifPresent=function(e,t){this[e]&&t(this[e])},e.prototype.entries=function(){var e=this;return Object.keys(this).map((function(t){return[t,new C(e[t])]}))},e.find=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.find((function(t){return t.has(e)}));return new C(r&&r[e])},e}(),A=function(e){function t(t,n){var r=e.call(this,t)||this;return r.message=t,r.details=n,r.name="DapiPropertiesSerializationError",r}return(0,r.__extends)(t,e),t.prototype.toString=function(){return"DAPI properties serialization error\n      Message "+this.message+"\n      Details "+u.Rn(this.details)},t}(m.sH);function E(e){return x.fromProperties(e).decode(e)}function k(e){return new A("Serialization failed",e)}!function(e){var t=["{","}",";","="];e.property=new s.Dy("property",(function(e){return!0}),(function(e,n){var r=n[1].key,i=String(e);return i.length>1024?s.Rn(e,n,"Property "+r+" is too long (max length is 1024)"):t.some((function(e){return i.indexOf(e)>=0}))?s.Rn(e,n,"Property "+r+" has forbidden characters ("+t.join(", ")+")"):s.Vp(e)}),s.yR),e.fromProperties=function(t){return s.dt((0,o.pipe)(t,h.filter((function(e){return"function"!=typeof e})),h.map((function(t){return e.property}))))}}(x||(x={}));var T;!function(){function e(e,t,n){this._fingerprints=n,this._endpoints={props:"props/v2",mimic:"mimic"},this._url=g.cl.join(e,"api"),this._ajax=t({requestExtender:v.d3.toHeaderAppender(this._fingerprints)})}e.prototype.load=function(){return(0,o.pipe)(this._ajax.json(g.cl.get(this._url,this._endpoints.props)),this._ajax.map(S.of))},e.prototype.get=function(e){return(0,o.pipe)(this._ajax.text(g.cl.get(this._url,this._endpoints.props,e)),this._ajax.map((function(t){var n;return S.of(((n={})[e]=t||null,n))})))},e.prototype.save=function(e){var t=this;return(0,o.pipe)(e,E,l.mapLeft(k),l.fold(this._ajax.throwError,this._ajax.of),this._ajax.map((function(e){return g.cl.post(t._url,t._endpoints.props).json(e)})),this._ajax.chain(this._ajax.empty))},e.prototype.getMimic=function(e){return this._ajax.json(g.cl.get(this._url,this._endpoints.mimic).cookie("gnar_containerId",e))},e.prototype.getMimicWithProps=function(e){return(0,o.pipe)(this._ajax.json(g.cl.get(this._url,this._endpoints.mimic,"withProps").cookie("gnar_containerId",e)),this._ajax.map((function(e){var t=e.groups,n=e.properties;return{experiments:new Set(t),properties:S.of(n)}})))},e.targetTag="dapi"}();!function(e){function t(e){return function(t){return f.is(t)&&(0,o.pipe)(t,d.fold((function(){return!0}),e.is))}}e.set=function(e){return new s.Dy("Set<"+e.name+">",(function(e){return e instanceof Set}),(function(t,n){return l.either.map(s.IX(e).validate(t,n),(function(e){return new Set(e)}))}),(function(e){return Array.from(e)}))},e.getIsOption=t,e.option=function(e){return new s.Dy("option:"+e.name,t(e),(function(t,n){return null==t?l.right(d.none):l.either.map(e.validate(t,n),d.some)}),(0,a.flow)(d.fold((function(){}),e.encode)))},e.literalUnion=function(e,t){return s.G0(t.map((function(e){return s.i0(e)})),e+":string")},e.date=function(){return new s.Dy("Date",(function(e){return e instanceof Date}),(function(e,t){var n=Date.parse(e.toString()),r=isNaN(n)?e:n;return l.either.map(s.pk.validate(r,t),(function(e){return new Date(e)}))}),(function(e){return e.getTime()}))};var n=function(e){return s.Z_.is(e)&&!Number.isNaN(Number(e))};e.stringFromNumber=new s.Dy("stringFromNumber",n,(function(e,t){return n(e)?s.Vp(e):"number"!=typeof e||Number.isNaN(e)?s.Rn(e,t):s.Vp(e.toString())}),(function(e){return Number(e)})),e.withDefault=function(e,t){return new s.Dy("withDefault("+JSON.stringify(t)+"):"+e.name,e.is,(function(n,r){return e.validate(y(n)?t:n,r)}),e.encode)},e.fallback=function(e,t){return new s.Dy("fallback("+JSON.stringify(t)+"):"+e.name,e.is,(function(n,r){var i=e.validate(n,r);return l.isLeft(i)?l.right(t):i}),e.encode)};var i=function(e,t){Array.prototype.push.apply(e,t)},u=["boolean","string","Date","number","Array","Set","object","Dictionary","StringEnum","Partial"];function c(e,t){var n=function(e){var t=e.replace(/\w+\(.*?\):/,"");if("{"===t[0]&&"}"===t[t.length-1])return"object";var n=t.split(":").pop();return 0===n.indexOf("Date")?"Date":0===n.indexOf("Array<")?"Array":0===n.indexOf("Set<")?"Set":0===n.indexOf("StringEnum<")?"StringEnum":0===t.indexOf("Partial<")?"Partial":((0,m.kG)(u.indexOf(n)>-1,"unsupported prop type "+e),n)}(e);switch(n){case"boolean":return t.getBool();case"string":case"StringEnum":return t.getStr();case"Date":return null===t.getNum()?t.getStr():t.getNum();case"number":return t.getNum();case"Array":case"Set":return t.getArray();case"object":case"Partial":case"Dictionary":return t.getObject();default:return(0,m.vE)(n)}}e.properties=function(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=function(e){return"{ "+Object.keys(e).map((function(t){return t+": "+e[t].name})).join(", ")+" }"}(e)),new s.X1(n,(function(t){if(!S.is(t))return!1;for(var n in e)if(!e[n].is(t[n]))return!1;return!0}),(function(n,a){if(!Array.isArray(n)||n.some((function(e){return!S.is(e)})))return s.Rn(n,a);var u={},d=[],p=function(p){var f=""!==t?t+":"+p:p,m=S.find.apply(S,(0,r.__spreadArrays)([f],n)),h=e[p],g=c(h.name,m),v=h.validate(g,s.JS(a,p,h));(0,o.pipe)(v,l.fold((function(e){return i(d,e)}),(function(e){u[p]=e})))};for(var f in e)p(f);return d.length?s.mq(d):s.Vp(u)}),(function(n){var r={};for(var i in e){var a=""!==t?t+":"+i:i,o=e[i],s=n[i];o.is(s)&&(r[a]=e[i].encode(s))}return S.of(r)}),e)},e.combineProperties=function(e,t){void 0===t&&(t="("+e.map((function(e){return e.name})).join(" & ")+")");var n=e.length;return new s.Ii(t,(function(t){return e.every((function(e){return e.is(t)}))}),(function(t,r){for(var a={},u=[],c=0;c<n;c++){var d=e[c].validate(t,r);(0,o.pipe)(d,l.fold((function(e){return i(u,e)}),(function(e){return Object.assign(a,e)})))}return u.length?s.mq(u):s.Vp(a)}),(function(t){return S.of.apply(S,e.map((function(e){return e.encode(t)})))}),e)},e.createStringEnum=function(e,t){return s.mM(Object.values(e).reduce((function(e,t){return e[t]=null,e}),{}),"StringEnum<"+t+">")}}(T||(T={}));var L,P=d.getEq({equals:function(e,t){return e===t}});!function(e){e.equals=function(e,t){return d.getEq(i.eqStrict).equals(e.domain,t.domain)&&d.getEq({equals:c.As}).equals(e.goals,t.goals)&&P.equals(e.audience,t.audience)&&P.equals(e.style,t.style)&&d.getEq({equals:c.As}).equals(e.emotions,t.emotions)},e.goals=["inform","describe","convince","tellStory"],e.goalsLabels=["Inform","Describe","Convince","Tell A Story"],e.audiences=["general","knowledgeable","expert"],e.formalityLevels=["informal","neutral","formal"],e.tone=["neutral","confident","joyful","optimistic","friendly","urgent","analytical","respectful"],e.domains=["academic","business","general","mail","casual","creative"],e.dialects=["american","british","canadian","australian"],e.fromDomain=function(t){return(0,r.__assign)((0,r.__assign)({},e.unset),{domain:d.some(t)})},e.unset={goals:d.none,domain:d.none,emotions:d.none,audience:d.none,style:d.none,dialect:d.none},e.defaultContextFallback={goals:new Set,domain:"general",emotions:new Set,audience:"knowledgeable",style:"neutral",dialect:d.none},e.isStyleValidWithDomain=function(e,t){return"neutral"===t||("formal"===t?"creative"!==e&&"casual"!==e:"academic"!==e)};var t=T.literalUnion("goal",e.goals),n=T.set(t),f=T.literalUnion("audience",e.audiences),m=T.literalUnion("formality",e.formalityLevels),h=T.literalUnion("tone",e.tone),g=T.set(h),v=T.literalUnion("domain",e.domains),y=T.literalUnion("dialect",e.dialects);e.IOType=s.w3({goals:T.option(n),domain:T.option(v),audience:T.option(f),style:T.option(m),emotions:T.option(g),dialect:T.option(y)}),e.IOTypeDefault=s.w3({goals:n,domain:v,audience:f,style:m,emotions:g,dialect:T.option(y)}),e.tryParse=function(e){return function(t){return(0,o.pipe)(e(t),l.mapLeft(u.Rn),l.mapLeft((function(e){return p.C8.Logging.getLogger("coreclients.dox.context").warn("failed to parse document context",e),e})))}},e.parse=(0,a.flow)(d.fromNullable,d.chain((function(t){return(0,o.pipe)(t,e.tryParse(e.IOType.decode),d.fromEither)}))),e.parseDefault=(0,a.flow)(d.fromNullable,d.chain((0,a.flow)(e.tryParse((function(t){return e.IOTypeDefault.decode(t)})),d.fromEither))),e.serialize=function(t){return e.IOType.encode(t)},e.serializeDefault=function(t){return e.IOTypeDefault.encode(t)}}(L||(L={}))},14677:(e,t,n)=>{"use strict";n.d(t,{d3:()=>r});var r,i=n(59312);n(29042);!function(e){e.toHeaderAppender=function(e){return function(e){var t=this;return function(n){return function(){return(0,i.__awaiter)(t,void 0,void 0,(function(){var t,r,a,o,s,u,c,l;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:for(r in t=[],e)t.push(r);a=0,i.label=1;case 1:return a<t.length?(o=t[a],s=e[o],c=(u=n).header,l=[o],[4,"function"==typeof s?s():s]):[3,4];case 2:c.apply(u,l.concat([i.sent()])),i.label=3;case 3:return a++,[3,1];case 4:return[2,n]}}))}))}}}({"X-Client-Version":e.clientVersion.toString(),"X-Client-Type":function(){return e.clientName},"X-Container-Id":e.containerId,"X-CSRF-Token":e.csrfToken})}}(r||(r={}))},25781:(e,t,n)=>{"use strict";var r,i;n.d(t,{R:()=>r}),function(e){e.ESC_CODE=27}(r||(r={})),function(e){e.isLeftMouseButtom=function(e){return 1===e.which||0===e.button}}(i||(i={}))},51072:(e,t,n)=>{"use strict";n.d(t,{Vi:()=>i});var r=n(95574);function i(e){return e().then(r.MH)}},84347:(e,t,n)=>{"use strict";e.exports=n(87612)},17123:e=>{"use strict";var t={};t.create=function(e,t){var n=document.createElement(e);return n.className=t,n},t.appendTo=function(e,t){return t.appendChild(e),e},t.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var r=t[n];"number"==typeof r&&(r=r.toString()+"px"),e.style[n]=r}return e}(e,t):void 0===n?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},t.matches=function(e,t){return void 0!==e.matches?e.matches(t):e.msMatchesSelector(t)},t.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},t.queryChildren=function(e,n){return Array.prototype.filter.call(e.childNodes,(function(e){return t.matches(e,n)}))},e.exports=t},97490:e=>{"use strict";var t=function(e){this.element=e,this.events={}};t.prototype.bind=function(e,t,n){void 0===this.events[e]&&(this.events[e]=[]);var r={capture:!1};this.events[e].push(t),this.element.addEventListener(e,t,n?Object.assign({},r,n):r)},t.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter((function(r){return!(!n||r===t)||(this.element.removeEventListener(e,r,!1),!1)}),this)},t.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var n=function(){this.eventElements=[]};n.prototype.eventElement=function(e){var n=this.eventElements.filter((function(t){return t.element===e}))[0];return void 0===n&&(n=new t(e),this.eventElements.push(n)),n},n.prototype.bind=function(e,t,n,r){this.eventElement(e).bind(t,n,r)},n.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},n.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},n.prototype.once=function(e,t,n){var r=this.eventElement(e),i=function(e){r.unbind(t,i),n(e)};r.bind(t,i)},e.exports=n},48928:e=>{"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},95889:(e,t,n)=>{"use strict";var r=n(17123),i=t.toInt=function(e){return parseInt(e,10)||0};function a(e){return["ps--in-scrolling"].concat(void 0===e?["ps--x","ps--y"]:["ps--"+e])}t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=0;t<e.classList.length;t++){var n=e.classList[t];0===n.indexOf("ps-")&&e.classList.remove(n)}},t.outerWidth=function(e){return i(r.css(e,"width"))+i(r.css(e,"paddingLeft"))+i(r.css(e,"paddingRight"))+i(r.css(e,"borderLeftWidth"))+i(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){for(var n=a(t),r=0;r<n.length;r++)e.classList.add(n[r])},t.stopScrolling=function(e,t){for(var n=a(t),r=0;r<n.length;r++)e.classList.remove(n[r])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},87612:(e,t,n)=>{"use strict";var r=n(81489),i=n(41835),a=n(64114);e.exports={initialize:i,update:a,destroy:r}},48300:e=>{"use strict";e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},81489:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109);e.exports=function(e){var t=a.get(e);t&&(t.event.unbindAll(),i.remove(t.scrollbarX),i.remove(t.scrollbarY),i.remove(t.scrollbarXRail),i.remove(t.scrollbarYRail),r.removePsClasses(e),a.remove(e))}},3708:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);e.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var r=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",r),t.event.bind(t.scrollbarYRail,"click",(function(r){var o=r.pageY-window.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;a(e,"top",e.scrollTop+o*t.containerHeight),i(e),r.stopPropagation()})),t.event.bind(t.scrollbarX,"click",r),t.event.bind(t.scrollbarXRail,"click",(function(r){var o=r.pageX-window.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;a(e,"left",e.scrollLeft+o*t.containerWidth),i(e),r.stopPropagation()}))}(e,r.get(e))}},35672:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);function u(e,t){var n=null,a=null;var u=function(i){!function(i){var a=n+i*t.railXRatio,o=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=a<0?0:a>o?o:a;var u=r.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;s(e,"left",u)}(i.pageX-a),o(e),i.stopPropagation(),i.preventDefault()},c=function(){r.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",u)};t.event.bind(t.scrollbarX,"mousedown",(function(o){a=o.pageX,n=r.toInt(i.css(t.scrollbarX,"left"))*t.railXRatio,r.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",u),t.event.once(t.ownerDocument,"mouseup",c),o.stopPropagation(),o.preventDefault()}))}function c(e,t){var n=null,a=null;var u=function(i){!function(i){var a=n+i*t.railYRatio,o=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=a<0?0:a>o?o:a;var u=r.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));s(e,"top",u)}(i.pageY-a),o(e),i.stopPropagation(),i.preventDefault()},c=function(){r.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",u)};t.event.bind(t.scrollbarY,"mousedown",(function(o){a=o.pageY,n=r.toInt(i.css(t.scrollbarY,"top"))*t.railYRatio,r.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",u),t.event.once(t.ownerDocument,"mouseup",c),o.stopPropagation(),o.preventDefault()}))}e.exports=function(e){var t=a.get(e);u(e,t),c(e,t)}},94742:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);function u(e,t){var n=!1;t.event.bind(e,"mouseenter",(function(){n=!0})),t.event.bind(e,"mouseleave",(function(){n=!1}));t.event.bind(t.ownerDocument,"keydown",(function(a){if(!(a.isDefaultPrevented&&a.isDefaultPrevented()||a.defaultPrevented)){var u=i.matches(t.scrollbarX,":focus")||i.matches(t.scrollbarY,":focus");if(n||u){var c=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(c){if("IFRAME"===c.tagName)c=c.contentDocument.activeElement;else for(;c.shadowRoot;)c=c.shadowRoot.activeElement;if(r.isEditable(c))return}var l=0,d=0;switch(a.which){case 37:l=a.metaKey?-t.contentWidth:a.altKey?-t.containerWidth:-30;break;case 38:d=a.metaKey?t.contentHeight:a.altKey?t.containerHeight:30;break;case 39:l=a.metaKey?t.contentWidth:a.altKey?t.containerWidth:30;break;case 40:d=a.metaKey?-t.contentHeight:a.altKey?-t.containerHeight:-30;break;case 33:d=90;break;case 32:d=a.shiftKey?90:-90;break;case 34:d=-90;break;case 35:d=a.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:d=a.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}s(e,"top",e.scrollTop-d),s(e,"left",e.scrollLeft+l),o(e),function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(l,d)&&a.preventDefault()}}}))}e.exports=function(e){u(e,a.get(e))}},83476:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);function o(e,t){var n=!1;function r(r){var o=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(r),s=o[0],u=o[1];(function(t,n){var r=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(r){var i=window.getComputedStyle(r);if(![i.overflow,i.overflowX,i.overflowY].join("").match(/(scroll|auto)/))return!1;var a=r.scrollHeight-r.clientHeight;if(a>0&&!(0===r.scrollTop&&n>0||r.scrollTop===a&&n<0))return!0;var o=r.scrollLeft-r.clientWidth;if(o>0&&!(0===r.scrollLeft&&t<0||r.scrollLeft===o&&t>0))return!0}return!1})(s,u)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(a(e,"top",u?e.scrollTop-u*t.settings.wheelSpeed:e.scrollTop+s*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(a(e,"left",s?e.scrollLeft+s*t.settings.wheelSpeed:e.scrollLeft-u*t.settings.wheelSpeed),n=!0):(a(e,"top",e.scrollTop-u*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+s*t.settings.wheelSpeed)),i(e),(n=n||function(n,r){var i=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===i&&r>0||i>=t.contentHeight-t.containerHeight&&r<0)return!t.settings.wheelPropagation}var a=e.scrollLeft;if(0===r){if(!t.scrollbarXActive)return!1;if(0===a&&n<0||a>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(s,u))&&(r.stopPropagation(),r.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",r):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",r)}e.exports=function(e){o(e,r.get(e))}},15335:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",(function(){i(e)}))}(e,r.get(e))}},23405:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a=n(21459);e.exports=function(e){!function(e,t){function n(n){var r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),o=r[0],s=r[1];t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?a(e,"top",s?e.scrollTop-s*t.settings.wheelSpeed:e.scrollTop+o*t.settings.wheelSpeed):t.scrollbarXActive&&!t.scrollbarYActive&&a(e,"left",o?e.scrollLeft+o*t.settings.wheelSpeed:e.scrollLeft-s*t.settings.wheelSpeed):(a(e,"top",e.scrollTop-s*t.settings.wheelSpeed),a(e,"left",e.scrollLeft+o*t.settings.wheelSpeed)),i(e)}void 0!==window.onwheel?t.event.bind(e,"wheel",n,{passive:!0}):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",n,{passive:!0})}(e,r.get(e))}},19539:(e,t,n)=>{"use strict";var r=n(95889),i=n(6109),a=n(86057),o=n(21459);function s(e,t){var n=null,s={top:0,left:0};function u(){n&&(clearInterval(n),n=null),r.stopScrolling(e)}var c=!1;t.event.bind(t.ownerDocument,"selectionchange",(function(){var t;e.contains(0===(t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"").toString().length?null:t.getRangeAt(0).commonAncestorContainer)?c=!0:(c=!1,u())})),t.event.bind(window,"mouseup",(function(){c&&(c=!1,u())})),t.event.bind(window,"keyup",(function(){c&&(c=!1,u())})),t.event.bind(window,"mousemove",(function(t){if(c){var l={x:t.pageX,y:t.pageY},d={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};l.x<d.left+3?(s.left=-5,r.startScrolling(e,"x")):l.x>d.right-3?(s.left=5,r.startScrolling(e,"x")):s.left=0,l.y<d.top+3?(s.top=d.top+3-l.y<5?-5:-20,r.startScrolling(e,"y")):l.y>d.bottom-3?(s.top=l.y-d.bottom+3<5?5:20,r.startScrolling(e,"y")):s.top=0,0===s.top&&0===s.left?u():n||(n=setInterval((function(){i.get(e)?(o(e,"top",e.scrollTop+s.top),o(e,"left",e.scrollLeft+s.left),a(e)):clearInterval(n)}),50))}}))}e.exports=function(e){s(e,i.get(e))}},76905:(e,t,n)=>{"use strict";var r=n(95889),i=n(6109),a=n(86057),o=n(21459);function s(e,t,n,r){function s(t,n){o(e,"top",e.scrollTop-n),o(e,"left",e.scrollLeft-t),a(e)}var u={},c=0,l={},d=null,p=!1,f=!1;function m(){p=!0}function h(){p=!1}function g(e){return e.targetTouches?e.targetTouches[0]:e}function v(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function y(e){if(v(e)){f=!0;var t=g(e);u.pageX=t.pageX,u.pageY=t.pageY,c=(new Date).getTime(),null!==d&&clearInterval(d),e.stopPropagation()}}function b(n){if(!f&&t.settings.swipePropagation&&y(n),!p&&f&&v(n)){var r=g(n),i={pageX:r.pageX,pageY:r.pageY},a=i.pageX-u.pageX,o=i.pageY-u.pageY;s(a,o),u=i;var d=(new Date).getTime(),m=d-c;m>0&&(l.x=a/m,l.y=o/m,c=d),function(n,r){var i=e.scrollTop,a=e.scrollLeft,o=Math.abs(n),s=Math.abs(r);if(s>o){if(r<0&&i===t.contentHeight-t.containerHeight||r>0&&0===i)return!t.settings.swipePropagation}else if(o>s&&(n<0&&a===t.contentWidth-t.containerWidth||n>0&&0===a))return!t.settings.swipePropagation;return!0}(a,o)&&(n.stopPropagation(),n.preventDefault())}}function w(){!p&&f&&(f=!1,t.settings.swipeEasing&&(clearInterval(d),d=setInterval((function(){i.get(e)&&(l.x||l.y)?Math.abs(l.x)<.01&&Math.abs(l.y)<.01?clearInterval(d):(s(30*l.x,30*l.y),l.x*=.8,l.y*=.8):clearInterval(d)}),10)))}n?(t.event.bind(window,"touchstart",m),t.event.bind(window,"touchend",h),t.event.bind(e,"touchstart",y),t.event.bind(e,"touchmove",b),t.event.bind(e,"touchend",w)):r&&(window.PointerEvent?(t.event.bind(window,"pointerdown",m),t.event.bind(window,"pointerup",h),t.event.bind(e,"pointerdown",y),t.event.bind(e,"pointermove",b),t.event.bind(e,"pointerup",w)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",m),t.event.bind(window,"MSPointerUp",h),t.event.bind(e,"MSPointerDown",y),t.event.bind(e,"MSPointerMove",b),t.event.bind(e,"MSPointerUp",w)))}e.exports=function(e){(r.env.supportsTouch||r.env.supportsIePointer)&&s(e,i.get(e),r.env.supportsTouch,r.env.supportsIePointer)}},41835:(e,t,n)=>{"use strict";var r=n(6109),i=n(86057),a={"click-rail":n(3708),"drag-scrollbar":n(35672),keyboard:n(94742),wheel:n(83476),passiveWheel:n(23405),touch:n(76905),selection:n(19539)},o=n(15335);e.exports=function(e,t){e.classList.add("ps");var n=r.add(e,"object"==typeof t?t:{});e.classList.add("ps--theme_"+n.settings.theme),n.settings.handlers.forEach((function(t){a[t](e)})),o(e),i(e)}},6109:(e,t,n)=>{"use strict";var r=n(95889),i=n(48300),a=n(17123),o=n(97490),s=n(48928),u={};function c(e,t){var n,s,u=this;for(var c in u.settings=i(),t)u.settings[c]=t[c];function l(){e.classList.add("ps--focus")}function d(){e.classList.remove("ps--focus")}u.containerWidth=null,u.containerHeight=null,u.contentWidth=null,u.contentHeight=null,u.isRtl="rtl"===a.css(e,"direction"),u.isNegativeScroll=(s=e.scrollLeft,e.scrollLeft=-1,n=e.scrollLeft<0,e.scrollLeft=s,n),u.negativeScrollAdjustment=u.isNegativeScroll?e.scrollWidth-e.clientWidth:0,u.event=new o,u.ownerDocument=e.ownerDocument||document,u.scrollbarXRail=a.appendTo(a.create("div","ps__scrollbar-x-rail"),e),u.scrollbarX=a.appendTo(a.create("div","ps__scrollbar-x"),u.scrollbarXRail),u.scrollbarX.setAttribute("tabindex",0),u.event.bind(u.scrollbarX,"focus",l),u.event.bind(u.scrollbarX,"blur",d),u.scrollbarXActive=null,u.scrollbarXWidth=null,u.scrollbarXLeft=null,u.scrollbarXBottom=r.toInt(a.css(u.scrollbarXRail,"bottom")),u.isScrollbarXUsingBottom=u.scrollbarXBottom==u.scrollbarXBottom,u.scrollbarXTop=u.isScrollbarXUsingBottom?null:r.toInt(a.css(u.scrollbarXRail,"top")),u.railBorderXWidth=r.toInt(a.css(u.scrollbarXRail,"borderLeftWidth"))+r.toInt(a.css(u.scrollbarXRail,"borderRightWidth")),a.css(u.scrollbarXRail,"display","block"),u.railXMarginWidth=r.toInt(a.css(u.scrollbarXRail,"marginLeft"))+r.toInt(a.css(u.scrollbarXRail,"marginRight")),a.css(u.scrollbarXRail,"display",""),u.railXWidth=null,u.railXRatio=null,u.scrollbarYRail=a.appendTo(a.create("div","ps__scrollbar-y-rail"),e),u.scrollbarY=a.appendTo(a.create("div","ps__scrollbar-y"),u.scrollbarYRail),u.scrollbarY.setAttribute("tabindex",0),u.event.bind(u.scrollbarY,"focus",l),u.event.bind(u.scrollbarY,"blur",d),u.scrollbarYActive=null,u.scrollbarYHeight=null,u.scrollbarYTop=null,u.scrollbarYRight=r.toInt(a.css(u.scrollbarYRail,"right")),u.isScrollbarYUsingRight=u.scrollbarYRight==u.scrollbarYRight,u.scrollbarYLeft=u.isScrollbarYUsingRight?null:r.toInt(a.css(u.scrollbarYRail,"left")),u.scrollbarYOuterWidth=u.isRtl?r.outerWidth(u.scrollbarY):null,u.railBorderYWidth=r.toInt(a.css(u.scrollbarYRail,"borderTopWidth"))+r.toInt(a.css(u.scrollbarYRail,"borderBottomWidth")),a.css(u.scrollbarYRail,"display","block"),u.railYMarginHeight=r.toInt(a.css(u.scrollbarYRail,"marginTop"))+r.toInt(a.css(u.scrollbarYRail,"marginBottom")),a.css(u.scrollbarYRail,"display",""),u.railYHeight=null,u.railYRatio=null}function l(e){return e.getAttribute("data-ps-id")}t.add=function(e,t){var n=s();return function(e,t){e.setAttribute("data-ps-id",t)}(e,n),u[n]=new c(e,t),u[n]},t.remove=function(e){delete u[l(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return u[l(e)]}},86057:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(21459);function s(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,n=a.get(e);n.containerWidth=e.clientWidth,n.containerHeight=e.clientHeight,n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||((t=i.queryChildren(e,".ps__scrollbar-x-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarXRail,e)),e.contains(n.scrollbarYRail)||((t=i.queryChildren(e,".ps__scrollbar-y-rail")).length>0&&t.forEach((function(e){i.remove(e)})),i.appendTo(n.scrollbarYRail,e)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=s(n,r.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=r.toInt((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=s(n,r.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=r.toInt(e.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,i.css(t.scrollbarXRail,n);var r={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?r.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:r.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?r.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:r.left=t.scrollbarYLeft+e.scrollLeft,i.css(t.scrollbarYRail,r),i.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),i.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,n),n.scrollbarXActive?e.classList.add("ps--active-x"):(e.classList.remove("ps--active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,o(e,"left",0)),n.scrollbarYActive?e.classList.add("ps--active-y"):(e.classList.remove("ps--active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,o(e,"top",0))}},21459:(e,t,n)=>{"use strict";var r=n(6109),i=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(i("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(i("ps-x-reach-start")));var a=r.get(e);"top"===t&&n>=a.contentHeight-a.containerHeight&&((n=a.contentHeight-a.containerHeight)-e.scrollTop<=2?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(i("ps-y-reach-end"))),"left"===t&&n>=a.contentWidth-a.containerWidth&&((n=a.contentWidth-a.containerWidth)-e.scrollLeft<=2?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(i("ps-x-reach-end"))),void 0===a.lastTop&&(a.lastTop=e.scrollTop),void 0===a.lastLeft&&(a.lastLeft=e.scrollLeft),"top"===t&&n<a.lastTop&&e.dispatchEvent(i("ps-scroll-up")),"top"===t&&n>a.lastTop&&e.dispatchEvent(i("ps-scroll-down")),"left"===t&&n<a.lastLeft&&e.dispatchEvent(i("ps-scroll-left")),"left"===t&&n>a.lastLeft&&e.dispatchEvent(i("ps-scroll-right")),"top"===t&&n!==a.lastTop&&(e.scrollTop=a.lastTop=n,e.dispatchEvent(i("ps-scroll-y"))),"left"===t&&n!==a.lastLeft&&(e.scrollLeft=a.lastLeft=n,e.dispatchEvent(i("ps-scroll-x")))}},64114:(e,t,n)=>{"use strict";var r=n(95889),i=n(17123),a=n(6109),o=n(86057),s=n(21459);e.exports=function(e){var t=a.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,i.css(t.scrollbarXRail,"display","block"),i.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=r.toInt(i.css(t.scrollbarXRail,"marginLeft"))+r.toInt(i.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=r.toInt(i.css(t.scrollbarYRail,"marginTop"))+r.toInt(i.css(t.scrollbarYRail,"marginBottom")),i.css(t.scrollbarXRail,"display","none"),i.css(t.scrollbarYRail,"display","none"),o(e),s(e,"top",e.scrollTop),s(e,"left",e.scrollLeft),i.css(t.scrollbarXRail,"display",""),i.css(t.scrollbarYRail,"display",""))}},96558:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApplicativeComposition=void 0;var r=n(3025);t.getApplicativeComposition=function(e,t){return{map:r.getFunctorComposition(e,t).map,of:function(n){return e.of(t.of(n))},ap:function(n,r){return e.ap(e.map(n,(function(e){return function(n){return t.ap(e,n)}})),r)}}}},72635:(e,t,n)=>{"use strict";t.D=void 0;var r=n(96558),i=n(64909);t.D=function(e){var t=r.getApplicativeComposition(e,i.Applicative),n=e.of(i.none);return{map:t.map,ap:t.ap,of:t.of,chain:function(t,r){return e.chain(t,i.fold((function(){return n}),r))},alt:function(t,n){return e.chain(t,i.fold(n,(function(t){return e.of(i.some(t))})))},fold:function(t,n,r){return e.chain(t,i.fold(n,r))},getOrElse:function(t,n){return e.chain(t,i.fold(n,e.of))},fromM:function(t){return e.map(t,i.some)},none:function(){return n}}}},18756:(e,t,n)=>{"use strict";function r(e){return!(!e||"function"!=typeof e.equals||"function"!=typeof e.hashCode)}function i(e,t){if(e===t||e!=e&&t!=t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){const n=e.valueOf(),r=t.valueOf();if(n===r||n!=n&&r!=r)return!0;if(!n||!r)return!1}return!(!r(e)||!e.equals(t))}n.d(t,{AC:()=>o});function a(e){if("number"==typeof e)return e&e;if("function"==typeof e.valueOf){const t=e.valueOf();if(t!==e)return a(t)}return r(e)?e.hashCode():o(String(e))}function o(e){let t=0;if(null==e||0===e.length)return t;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}class s extends Error{constructor(e){let t="";for(const n of e.slice(0,2)){let e="";e=n instanceof Error?`${n.name}(${n.message})`:""+n,t+=", "+e}t=t.slice(2),e.length>2&&(t+=", ..."),super(t),this.name="CompositeError",this.errorsRef=e;this.constructor=s,this.__proto__=s.prototype}errors(){return this.errorsRef.slice()}}Error;class u extends Error{constructor(e){super(e),this.name="NoSuchElementError";this.constructor=u,this.__proto__=u.prototype}}Error;class c extends Error{constructor(e){super(e),this.name="IllegalStateError";this.constructor=c,this.__proto__=c.prototype}}class l extends Error{constructor(e){super(e),this.name="IllegalArgumentError";this.constructor=l,this.__proto__=l.prototype}}class d extends Error{constructor(e){super(e),this.name="NotImplementedError";this.constructor=d,this.__proto__=d.prototype}}class p extends Error{constructor(e){super(e),this.name="TimeoutError";this.constructor=p,this.__proto__=p.prototype}}function f(e){return function(){const t=Array.prototype.slice.call(arguments);return t.push(this),e.apply(void 0,t)}}function m(e,t,n){const r=e,i=r.prototype,a="fantasy-land/",o="equals",s=a+o,u="map",c=a+u,l="ap",d=a+l,p=a+"of",m="chain",h=a+m,g="chainRec",v=a+g;i.equals?i[s]=i.equals:n&&(i[s]=f(n.equals)),i.map?i[c]=i.map:t&&(i[c]=f(t.map)),i.ap?i[d]=i.ap:t&&(i[d]=f(t.ap)),r.pure?r[p]=r.pure:t&&(r[p]=t.of),i.chain?i[h]=i.chain:t&&(i[h]=f(t.chain)),r.chainRec?r[v]=r.chainRec:t&&(r[v]=t.chainRec)}class h{constructor(e,t){this._isRight="right"===t,this.value=e}isLeft(){return!this._isRight}isRight(){return this._isRight}contains(e){return this._isRight&&i(this.value,e)}exists(e){return this._isRight&&e(this.value)}filterOrElse(e,t){return this._isRight?e(this.value)?this:v(t()):this}flatMap(e){return this._isRight?e(this.value):this}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}fold(e,t){return this._isRight?t(this.value):e(this.value)}forAll(e){return!this._isRight||e(this.value)}get(){if(this._isRight)return this.value;throw new u("left.get()")}getOrElse(e){return this._isRight?this.value:e}getOrElseL(e){return this._isRight?this.value:e()}map(e){return this._isRight?b(e(this.value)):this}forEach(e){this._isRight&&e(this.value)}swap(){return this._isRight?v(this.value):b(this.value)}toOption(){return this._isRight?C(this.value):x}equals(e){return null!=e&&(this._isRight===e._isRight&&i(this.value,e.value))}hashCode(){return this._isRight?a(this.value)<<2:a(this.value)<<3}static pure(e){return new y(e)}static left(e){return v(e)}static right(e){return b(e)}static map2(e,t,n){return e.isLeft()?e:t.isLeft()?t:b(n(e.value,t.value))}static map3(e,t,n,r){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:b(r(e.value,t.value,n.value))}static map4(e,t,n,r,i){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:b(i(e.value,t.value,n.value,r.value))}static map5(e,t,n,r,i,a){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:b(a(e.value,t.value,n.value,r.value,i.value))}static map6(e,t,n,r,i,a,o){return e.isLeft()?e:t.isLeft()?t:n.isLeft()?n:r.isLeft()?r:i.isLeft()?i:a.isLeft()?a:b(o(e.value,t.value,n.value,r.value,i.value,a.value))}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.isRight())return e;const r=e.value;if(r.isRight())return b(r.value);n=r.value}}}class g extends h{constructor(e){super(e,"left")}}function v(e){return new g(e)}class y extends h{constructor(e){super(e,"right")}}function b(e){return new y(e)}const w={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:h.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>h.tailRecM(t,(t=>e(h.left,h.right,t)))};m(h,w,w);class _{constructor(e,t){this._isEmpty=null!=t?t:null==e,this.value=e}get(){if(!this._isEmpty)return this.value;throw new u("Option.get")}getOrElse(e){return this._isEmpty?e:this.value}orNull(){return this._isEmpty?null:this.value}orUndefined(){return this._isEmpty?void 0:this.value}getOrElseL(e){return this._isEmpty?e():this.value}orElse(e){return this._isEmpty?e:this}orElseL(e){return this._isEmpty?e():this}isEmpty(){return this._isEmpty}nonEmpty(){return!this._isEmpty}map(e){return this._isEmpty?x:C(e(this.value))}flatMap(e){return this._isEmpty?x:e(this.value)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}filter(e){return this._isEmpty||!e(this.value)?x:this}fold(e,t){return this._isEmpty?e():t(this.value)}contains(e){return!this._isEmpty&&i(this.value,e)}exists(e){return!this._isEmpty&&e(this.value)}forAll(e){return this._isEmpty||e(this.value)}forEach(e){this._isEmpty||e(this.value)}equals(e){return null!=e&&(this.nonEmpty()&&e.nonEmpty()?i(this.value,e.value):this.isEmpty()&&e.isEmpty())}hashCode(){return this._isEmpty?2433880:null==this.value?9735524:a(this.value)<<2}static of(e){return null!=e?C(e):x}static some(e){return new _(e,!1)}static none(){return x}static empty(){return x}static pure(e){return C(e)}static map2(e,t,n){return e.nonEmpty()&&t.nonEmpty()?C(n(e.value,t.value)):x}static map3(e,t,n,r){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()?C(r(e.value,t.value,n.value)):x}static map4(e,t,n,r,i){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()?C(i(e.value,t.value,n.value,r.value)):x}static map5(e,t,n,r,i,a){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()?C(a(e.value,t.value,n.value,r.value,i.value)):x}static map6(e,t,n,r,i,a,o){return e.nonEmpty()&&t.nonEmpty()&&n.nonEmpty()&&r.nonEmpty()&&i.nonEmpty()&&a.nonEmpty()?C(o(e.value,t.value,n.value,r.value,i.value,a.value)):x}static tailRecM(e,t){let n=e;for(;;){const e=t(n);if(!e.nonEmpty())return x;{const t=e.value;if(t.isRight())return C(t.value);n=t.value}}}}class S extends _{constructor(e){super(e,!1)}}function C(e){return new S(e)}const x=new class extends _{constructor(){super(void 0,!0)}},I={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:_.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>_.tailRecM(t,(t=>e(h.left,h.right,t)))};m(_,I,I);class A{constructor(e,t){this._isSuccess="success"===t,this.value=e}isSuccess(){return this._isSuccess}isFailure(){return!this._isSuccess}get(){if(!this._isSuccess)throw this.value;return this.value}getOrElse(e){return this._isSuccess?this.value:e}getOrElseL(e){return this._isSuccess?this.value:e()}orNull(){return this._isSuccess?this.value:null}orUndefined(){return this._isSuccess?this.value:void 0}orElse(e){return this._isSuccess?this:e}orElseL(e){return this._isSuccess?this:e()}failed(){return this._isSuccess?L(new u("try.failed()")):k(this.value)}fold(e,t){return this._isSuccess?t(this.value):e(this.value)}filter(e){if(!this._isSuccess)return this;try{return e(this.value)?this:L(new u("Predicate does not hold for "+this.value))}catch(e){return L(e)}}flatMap(e){if(!this._isSuccess)return this;try{return e(this.value)}catch(e){return L(e)}}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}map(e){return this._isSuccess?A.of((()=>e(this.value))):this}forEach(e){this._isSuccess&&e(this.value)}recover(e){return this._isSuccess?this:A.of((()=>e(this.value)))}recoverWith(e){try{return this._isSuccess?this:e(this.value)}catch(e){return L(e)}}toOption(){return this._isSuccess?C(this.value):x}toEither(){return this._isSuccess?b(this.value):v(this.value)}equals(e){return null!=e&&(this._isSuccess?e._isSuccess&&i(this.value,e.value):!e._isSuccess&&i(this.value,e.value))}hashCode(){return this._isSuccess,a(this.value)}static of(e){try{return k(e())}catch(e){return L(e)}}static pure(e){return A.success(e)}static unit(){return R}static success(e){return k(e)}static failure(e){return L(e)}static raise(e){return L(e)}static map2(e,t,n){if(e.isFailure())return e;if(t.isFailure())return t;try{return k(n(e.value,t.value))}catch(e){return L(e)}}static map3(e,t,n,r){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;try{return k(r(e.value,t.value,n.value))}catch(e){return L(e)}}static map4(e,t,n,r,i){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;try{return k(i(e.value,t.value,n.value,r.value))}catch(e){return L(e)}}static map5(e,t,n,r,i,a){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;try{return k(a(e.value,t.value,n.value,r.value,i.value))}catch(e){return L(e)}}static map6(e,t,n,r,i,a,o){if(e.isFailure())return e;if(t.isFailure())return t;if(n.isFailure())return n;if(r.isFailure())return r;if(i.isFailure())return i;if(a.isFailure())return a;try{return k(o(e.value,t.value,n.value,r.value,i.value,a.value))}catch(e){return L(e)}}static tailRecM(e,t){let n=e;for(;;)try{const e=t(n);if(e.isFailure())return e;const r=e.get();if(r.isRight())return k(r.value);n=r.value}catch(e){return L(e)}}}class E extends A{constructor(e){super(e,"success")}}function k(e){return new E(e)}class T extends A{constructor(e){super(e,"failure")}}function L(e){return new T(e)}const P={equals:(e,t)=>e?e.equals(t):!t,map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:A.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>A.tailRecM(t,(t=>e(h.left,h.right,t)))};m(A,P,P);const R=k(void 0);class N{static of(e){return new M(e)}static empty(){return O}static collection(...e){return new D(e)}static cancelAll(e){let t=null;for(const n of e)try{n.cancel()}catch(e){t?t.push(e):t=[e]}if(t)throw 1===t.length?t[0]:new s(t)}}class M extends N{constructor(e){super(),this.thunk=e}cancel(){if(null!==this.thunk){const e=this.thunk;this.thunk=null,e()}}}class F{constructor(){this._funIsDummy=!0}cancel(){}}const O=new F;class B{static of(e){return new U(e)}static empty(){return new W}static alreadyCanceled(){return H}static collection(...e){return new D(e)}}class D extends B{constructor(e){super(),this._refs=e}isCanceled(){return!this._refs}cancel(){if(this._refs)try{N.cancelAll(this._refs)}finally{delete this._refs}}}class U extends M{isCanceled(){return null===this.thunk}}class W extends B{constructor(){super(...arguments),this.canceled=!1}isCanceled(){return this.canceled}cancel(){this.canceled=!0}}const H=new class extends F{isCanceled(){return!0}};new class extends F{isCanceled(){return!0}cancel(){}update(e){return e.cancel(),this}};class z{constructor(e){this._underlying=e,this._canceled=!1}update(e){return this._canceled?e.cancel():this._underlying=e,this}isCanceled(){return this._canceled}cancel(){this._canceled||(this._canceled=!0,this._underlying&&(this._underlying.cancel(),delete this._underlying))}collapse(){if(this._underlying&&this._underlying instanceof z){const e=this._underlying;this._underlying=e._underlying,this._canceled=e._canceled}return this}clear(){return this._canceled||(this._underlying=void 0),this}static empty(){return new z}static of(e){return new z(N.of(e))}}class j{constructor(e){this._refs=e?e.slice(0):[]}cancel(){if(this._refs)try{N.cancelAll(this._refs)}finally{delete this._refs}}isCanceled(){return!this._refs}push(e){return this._refs?this._refs.push(e):e.cancel(),this}pop(){return this._refs&&this._refs.pop()||N.empty()}static empty(){return new j}static collection(...e){return new j(e)}}class G{constructor(e){this._underlying=e||O,this._chained=!1}update(e){if(!e)throw new l("cannot update to null value");return this._underlying?this._chained?(this._underlying.update(e),this):(this._underlying=e,this):(e.cancel(),this)}cancel(){this._underlying&&(this._underlying.cancel(),this._chained=!1,delete this._underlying)}clear(){this._underlying&&(this._underlying=O,this._chained=!1)}isCanceled(){return!this._underlying||this._chained&&this._underlying.isCanceled()}chainTo(e){if(!e)throw new l("cannot chain to null value");if(e===this)return this;if(!this._underlying)return e.cancel(),this;let t=e,n=!0;for(;t&&n;)if(t._chained){const e=t._underlying;if(e===this)return this;t=e,n=!!e}else t._underlying||(t=void 0),n=!1;if(t){const e=this._underlying;this._underlying=t,this._chained=!0,e instanceof F||t.update(e)}else this.cancel();return this}static empty(){return new G}}class q{toString(){return this.label.toUpperCase()}}const $=1e3,V=1e6,X=1e3*V,Y=60*X,Z=60*Y,J=24*Z,K=9007199254740992,Q=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};function ee(e,t,n){return e>n?K:e<-n?-9007199254740992:e*t}const te=new class extends q{constructor(){super(...arguments),this.ord=0,this.label="nanoseconds"}convert(e,t){return t.toNanos(e)}toNanos(e){return e}toMicros(e){return Q(e/1e3)}toMillis(e){return Q(e/(V/1))}toSeconds(e){return Q(e/(X/1))}toMinutes(e){return Q(e/(Y/1))}toHours(e){return Q(e/(Z/1))}toDays(e){return Q(e/(J/1))}};const ne=new class extends q{constructor(){super(...arguments),this.ord=1,this.label="microseconds"}convert(e,t){return t.toMicros(e)}toNanos(e){return ee(e,1e3,Q(K/1e3))}toMicros(e){return e}toMillis(e){return Q(e/1e3)}toSeconds(e){return Q(e/(X/$))}toMinutes(e){return Q(e/(Y/$))}toHours(e){return Q(e/(Z/$))}toDays(e){return Q(e/(J/$))}};const re=new class extends q{constructor(){super(...arguments),this.ord=2,this.label="milliseconds"}convert(e,t){return t.toMillis(e)}toNanos(e){return ee(e,V/1,Q(K/(V/1)))}toMicros(e){return ee(e,1e3,Q(K/1e3))}toMillis(e){return e}toSeconds(e){return Q(e/1e3)}toMinutes(e){return Q(e/6e4)}toHours(e){return Q(e/(Z/V))}toDays(e){return Q(e/(J/V))}};const ie=new class extends q{constructor(){super(...arguments),this.ord=3,this.label="seconds"}convert(e,t){return t.toSeconds(e)}toNanos(e){return ee(e,X/1,Q(K/(X/1)))}toMicros(e){return ee(e,X/$,Q(K/(X/$)))}toMillis(e){return ee(e,1e3,Q(K/1e3))}toSeconds(e){return e}toMinutes(e){return Q(e/60)}toHours(e){return Q(e/3600)}toDays(e){return Q(e/86400)}};const ae=new class extends q{constructor(){super(...arguments),this.ord=4,this.label="minutes"}convert(e,t){return t.toMinutes(e)}toNanos(e){return ee(e,Y/1,Q(K/(Y/1)))}toMicros(e){return ee(e,Y/$,Q(K/(Y/$)))}toMillis(e){return ee(e,6e4,Q(K/6e4))}toSeconds(e){return ee(e,60,Q(K/60))}toMinutes(e){return e}toHours(e){return Q(e/60)}toDays(e){return Q(e/1440)}};const oe=new class extends q{constructor(){super(...arguments),this.ord=5,this.label="hours"}convert(e,t){return t.toHours(e)}toNanos(e){return ee(e,Z/1,Q(K/(Z/1)))}toMicros(e){return ee(e,Z/$,Q(K/(Z/$)))}toMillis(e){return ee(e,Z/V,Q(K/(Z/V)))}toSeconds(e){return ee(e,3600,Q(K/3600))}toMinutes(e){return ee(e,60,Q(K/60))}toHours(e){return e}toDays(e){return Q(e/24)}};const se=new class extends q{constructor(){super(...arguments),this.ord=6,this.label="days"}convert(e,t){return t.toDays(e)}toNanos(e){return ee(e,J/1,Q(K/(J/1)))}toMicros(e){return ee(e,J/$,Q(K/(J/$)))}toMillis(e){return ee(e,J/V,Q(K/(J/V)))}toSeconds(e){return ee(e,86400,Q(K/86400))}toMinutes(e){return ee(e,1440,Q(K/1440))}toHours(e){return ee(e,24,Q(K/24))}toDays(e){return e}};class ue{constructor(e,t){if(isNaN(e))throw new l("NaN is not supported for a Duration");this.duration=Q(e),this.unit=t}isFinite(){return isFinite(this.duration)}toNanos(){return te.convert(this.duration,this.unit)}toMicros(){return ne.convert(this.duration,this.unit)}toMillis(){return re.convert(this.duration,this.unit)}toSeconds(){return ie.convert(this.duration,this.unit)}toMinutes(){return ae.convert(this.duration,this.unit)}toHours(){return oe.convert(this.duration,this.unit)}toDays(){return se.convert(this.duration,this.unit)}convertTo(e){return new ue(e.convert(this.duration,this.unit),e)}negate(){switch(this.duration){case 1/0:return ue.negInf();case-1/0:return ue.inf();default:return new ue(-this.duration,this.unit)}}plus(e){if(!isFinite(this.duration)){if(!isFinite(e.duration)&&this.duration!==e.duration)throw new l("cannot deal with two infinities with different signs, as that would be a NaN");return this}if(0===e.duration)return this;if(0===this.duration)return e;if(!isFinite(e.duration))return e;let t=this,n=e;return n.unit.ord<t.unit.ord&&(t=e,n=this),n=n.convertTo(t.unit),new ue(t.duration+n.duration,t.unit)}minus(e){return this.plus(e.negate())}equals(e){function t(e,t){return e.unit.convert(t.duration,t.unit)===e.duration}return isFinite(this.duration)?this.unit.ord<=e.unit.ord?t(this,e):t(e,this):!isFinite(e.duration)&&this.duration===e.duration}hashCode(){return this.isFinite()?this.toNanos():this.duration===1/0?7540833725118015:422082410550358}toString(){return this.isFinite()?`${this.duration} ${this.unit.label}`:this.duration>=0?"[end of time]":"[beginning of time]"}static of(e){return"number"==typeof e?ue.millis(e):e}static zero(){return new ue(0,se)}static inf(){return new ue(1/0,se)}static negInf(){return new ue(-1/0,se)}static nanos(e){return new ue(e,te)}static micros(e){return new ue(e,ne)}static millis(e){return new ue(e,re)}static seconds(e){return new ue(e,ie)}static minutes(e){return new ue(e,ae)}static hours(e){return new ue(e,oe)}static days(e){return new ue(e,se)}}class ce{constructor(e){this._previous=[],this.get=e}set(e){return this.setL((()=>e))}setL(e){this._previous.push(this.get),this.get=e}revert(){const e=this._previous.pop();e&&(this.get=e)}bind(e,t){return this.bindL((()=>e),t)}bindL(e,t){const n=this.get,r=this._previous.slice(0),i=this;try{return i.get=e,t()}finally{i.get=n,i._previous=r}}static of(e){return new ce(e)}}function le(e){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const t=e[Symbol.iterator](),n=[];for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)return n}}const de=Math.log(2);function pe(e){if(e<0)throw new l("nr must be positive");const t=Math.ceil(function(e){return Math.log(e)/de}(e));return 1<<(t>30?30:t&t)}class fe{constructor(e){switch(this.batchIndex=0,this.executionModel=e,e.type){case"alwaysAsync":this.executeBatched=this.executeAsync;break;case"synchronous":this.executeBatched=this.trampoline;break;case"batched":const t=e.recommendedBatchSize-1;this.executeBatched=e=>{const n=this.batchIndex+1&t;return n?(this.batchIndex=n,this.trampoline(e)):this.executeAsync(e)}}}scheduleWithFixedDelay(e,t,n){const r=(e,i,a)=>i.update(e.scheduleOnce(a,(()=>{n(),r(e,i,t)}))),i=z.empty();return r(this,i,e)}scheduleAtFixedRate(e,t,n){const r=(e,t,i,a)=>t.update(e.scheduleOnce(i,(()=>{const i=e.currentTimeMillis();n();const o=e.currentTimeMillis()-i,s=Math.max(0,a-o);r(e,t,a,s)}))),i=z.empty();return r(this,i,"number"==typeof e?e:e.toMillis(),"number"==typeof t?t:t.toMillis())}}fe.global=ce.of((()=>ve));class me{constructor(e,t){switch(this.type=e,e){case"synchronous":this.recommendedBatchSize=1073741824;break;case"alwaysAsync":this.recommendedBatchSize=1;break;case"batched":this.recommendedBatchSize=pe(t||128)}}equals(e){return this.type===e.type&&this.recommendedBatchSize===e.recommendedBatchSize}hashCode(){return 47*o(this.type)+this.recommendedBatchSize}static synchronous(){return new me("synchronous")}static alwaysAsync(){return new me("alwaysAsync")}static batched(e){return new me("batched",e)}}me.global=ce.of((()=>me.batched()));class he{constructor(e){this._isActive=!1,this._queue=[],this._reporter=e}execute(e){this._isActive?this._queue.push(e):this.runLoop(e)}runLoop(e){this._isActive=!0;try{let t=e;for(;t;){try{t()}catch(e){this._reporter(e)}t=this._queue.pop()}}finally{this._isActive=!1}}}class ge extends fe{constructor(e=!1,t=me.global.get(),n){super(t),n&&(this.reportFailure=n),this._trampoline=new he(this.reportFailure),this._useSetImmediate=!!e&&"function"==typeof setImmediate,this.executeAsync=this._useSetImmediate?e=>setImmediate(ye(e,this.reportFailure)):e=>setTimeout(ye(e,this.reportFailure))}executeAsync(e){throw new d("Constructor of GlobalScheduler wasn't executed")}trampoline(e){return this._trampoline.execute(e)}reportFailure(e){console.error(e)}currentTimeMillis(){return Date.now()}scheduleOnce(e,t){const n=Math.max(0,ue.of(e).toMillis()),r=setTimeout((()=>{this.batchIndex=0;try{t()}catch(e){this.reportFailure(e)}}),n);return N.of((()=>clearTimeout(r)))}withExecutionModel(e){return new ge(this._useSetImmediate,e)}}const ve=new ge(!0);function ye(e,t){return()=>{try{e()}catch(e){t(e)}}}class be{transform(e,t){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(t(e),this._scheduler)))}attempt(){return this.transform(v,b)}flatMap(e){return this.transformWith(be.raise,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}forEach(e){this.onComplete((t=>t.forEach(e)))}map(e){return this.transformWith(be.raise,(t=>be.pure(e(t),this._scheduler)))}recoverWith(e){return this.transformWith(e,be.pure)}recover(e){return this.transformWith((t=>be.pure(e(t),this._scheduler)),(e=>be.pure(e,this._scheduler)))}then(e,t){if(!e&&!t)return this;const n=this._scheduler;return this.transformWith(Ae(t,(e=>be.raise(e,n)),n),Ae(e,(e=>be.pure(e,n)),n))}toPromise(){return new Promise(((e,t)=>{this.onComplete((n=>n.fold(t,e)))}))}delayResult(e){return this.transformWith((t=>be.delayedTick(e,this._scheduler).flatMap((()=>be.raise(t,this._scheduler)))),(t=>be.delayedTick(e,this._scheduler).map((()=>t))))}timeout(e){const t=be.raise(new p(ue.of(e).toString()),this._scheduler);return this.timeoutTo(e,(()=>t))}timeoutTo(e,t){const n=[this,be.delayedTick(e,this._scheduler).flatMap((()=>t()))];return be.firstCompletedOf(n,this._scheduler)}static of(e,t=fe.global.get()){const n=xe.empty(t);return t.executeAsync((()=>n.tryComplete(A.of(e)))),n.future()}static pure(e,t=fe.global.get()){return new we(k(e),t)}static raise(e,t=fe.global.get()){return new we(L(e),t)}static create(e,t=fe.global.get()){const n=xe.empty(t);try{const t=e(n.complete);return n.future(t||void 0)}catch(e){return be.raise(e,t)}}static unit(e=fe.global.get()){const t=e;let n=t._funCache&&t._funCache.futureUnit;return n||(n=new we(k(void 0),e),t._funCache=t._funCache||{},t._funCache.futureUnit=n),n}static delayedTick(e,t=fe.global.get()){return be.create((n=>t.scheduleOnce(e,(()=>n(k(void 0))))),t)}static tailRecM(e,t,n=fe.global.get()){return t(e).flatMap((e=>e.isRight()?be.pure(e.get(),n):be.tailRecM(e.swap().get(),t,n)))}static fromPromise(e,t=fe.global.get()){return e instanceof be?e.withScheduler(t):be.create((t=>{e.then((e=>t(k(e))),(e=>t(L(e))))}),t)}static fromTry(e,t=fe.global.get()){return new we(e,t)}static firstCompletedOf(e,t=fe.global.get()){return function(e,t){return be.create((n=>{try{const r=ke(e,t);if(0===r.length)return n(L(new l("empty list of futures")));let i=!1;for(let e=0;e<r.length;e++){const a=e;r[e].onComplete((e=>{i?e.isFailure()&&t.reportFailure(e.failed().get()):(i=!0,Ee(r,t,a),n(e))}))}return N.of((()=>Ee(r,t)))}catch(e){n(L(e))}}),t)}(e,t)}static traverse(e,t=1/0,n=fe.global.get()){return r=>function(e,t,n,r){if(n<=0)throw new l("parallelism <= 0");return be.of((()=>le(e)),r).flatMap((e=>Te(e,t,n,r,0,[])))}(e,r,t,n)}static sequence(e,t=fe.global.get()){return function(e,t){return be.create((n=>{try{const r=ke(e,t);if(0===r.length)return n(k([]));const i=N.of((()=>Ee(r,t)));let a=!1,o=0,s=[];for(let e=0;e<r.length;e++){const u=e;r[e].onComplete((e=>{o+=1,e.isSuccess()?a||(s[u]=e.get(),a=o===r.length,a&&n(k(s))):a?t.reportFailure(e.failed().get()):(a=!0,i.cancel(),n(e))}))}return i}catch(e){n(L(e))}}),t)}(e,t)}static map2(e,t,n,r=fe.global.get()){return be.sequence([e,t],r).map((e=>n(e[0],e[1])))}static map3(e,t,n,r,i=fe.global.get()){return be.sequence([e,t,n],i).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i,a=fe.global.get()){return be.sequence([e,t,n,r],a).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a,o=fe.global.get()){return be.sequence([e,t,n,r,i],o).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o,s=fe.global.get()){return be.sequence([e,t,n,r,i,a],s).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}}class we extends be{constructor(e,t){super(),this._value=e,this._scheduler=t}cancel(){}value(){return C(this._value)}withScheduler(e){return this._scheduler===e?this:new we(this._value,e)}onComplete(e){this._scheduler.executeBatched((()=>e(this._value)))}transformWith(e,t){return Ie(this,e,t,this._scheduler)}toPromise(){return this._value.fold((e=>Promise.reject(e)),(e=>Promise.resolve(e)))}}class _e{constructor(){this.id=null,this.ref=null}compressedRoot(){let e=this;for(;"chained"===e.id;)e=e.ref,this.ref=e;return e}value(){switch(this.id){case null:return x;case"complete":return C(this.ref);case"chained":return this.compressedRoot().value()}}tryComplete(e,t){switch(this.id){case null:const n=this.ref;if(this.ref=e,this.id="complete",n)for(let r=0;r<n.length;r++)t.executeBatched((()=>n[r](e)));return!0;case"complete":return!1;case"chained":const r=this.ref.compressedRoot(),i=r.tryComplete(e,t);return this.id="complete",this.ref=i?e:r.value().get(),i}}chainTo(e,t){switch(this.id){case null:const n=this.ref;if(this.id="chained",this.ref=e.compressedRoot(),n&&n.length>0)for(let r=0;r<n.length;r++)e.onComplete(n[r],t);break;case"chained":this.compressedRoot().chainTo(e.compressedRoot(),t);break;case"complete":e.tryComplete(this.ref,t)}}onComplete(e,t){switch(this.id){case null:this.ref||(this.ref=[]),this.ref.push(e);break;case"complete":t.executeBatched((()=>e(this.ref)));break;case"chained":this.ref.onComplete(e,t)}}}const Se={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:be.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>be.tailRecM(t,(t=>e(h.left,h.right,t)))};m(be,Se);class Ce extends be{constructor(e,t,n){super(),this._state=e,this._scheduler=n,t&&(this._cancelable=t)}value(){return this._state.value()}onComplete(e){return this._state.onComplete(e,this._scheduler)}cancel(){if(this._cancelable)try{this._cancelable.cancel()}finally{delete this._cancelable}}withScheduler(e){return this._scheduler===e?this:new Ce(this._state,this._cancelable,e)}transformWith(e,t){return Ie(this,e,t,this._scheduler,this._cancelable)}}class xe{constructor(e,t){this.tryComplete=e=>this._state.tryComplete(e,this._scheduler),this.complete=e=>{if(!this.tryComplete(e))throw new c("Cannot complete a FutureMaker twice!")},this._state=e,this._scheduler=t}trySuccess(e){return this.tryComplete(k(e))}success(e){return this.complete(k(e))}tryFailure(e){return this.tryComplete(L(e))}failure(e){return this.complete(L(e))}chainTo(e){this._state.chainTo(e._state,this._scheduler)}future(e){switch(this._state.id){case"complete":return new we(this._state.ref,this._scheduler);default:return new Ce(this._state,e,this._scheduler)}}withScheduler(e){return this._scheduler===e?this:new xe(this._state,e)}static empty(e=fe.global.get()){return new xe(new _e,e)}static completed(e,t=fe.global.get()){const n=new _e;return n.id="complete",n.ref=e,new xe(n,t)}}function Ie(e,t,n,r,i){const a=xe.empty(r),o=new G(i);return e.onComplete((e=>{let i;try{i=e.fold(t,n)}catch(e){i=be.raise(e)}if(i.value().isEmpty()){const e=i._cancelable;e&&e instanceof G?e.chainTo(o):!e||e instanceof F||o.update(e)}else o.clear();i instanceof Ce?i._state.chainTo(a._state,r):i.onComplete(a.tryComplete)})),a.future(o)}function Ae(e,t,n){return r=>{if("function"!=typeof e)return t(r);const i=e(r);return i?"function"==typeof i.then?be.fromPromise(i,n):be.pure(i,n):be.pure(r,n)}}function Ee(e,t,n=-1){const r=[];for(let t=0;t<e.length;t++)if(t!==n)try{e[t].cancel()}catch(e){r.push(e)}if(r.length>0)for(const e of r)t.reportFailure(e)}function ke(e,t){if(!e)return[];if("[object Array]"===Object.prototype.toString.call(e))return e;const n=[];try{const t=e[Symbol.iterator]();for(;;){const e=t.next();if(e.value&&n.push(e.value),e.done)break}return n}catch(e){throw Ee(n,t),e}}function Te(e,t,n,r,i,a){if(i>=e.length)return be.pure(a,r);let o=[],s=0;try{for(;i<e.length&&s<n;)o.push(t(e[i++])),s+=1;const u=be.sequence(o,r).map((e=>{for(let t=0;t<e.length;t++)a.push(e[t])}));return i>=e.length?u.map((()=>a)):u.flatMap((()=>Te(e,t,n,r,i,a)))}catch(e){return Ee(o,r),be.raise(e)}}const Le={next:()=>({done:!0})};function Pe(e){if(!e)return Le;if("[object Array]"!==Object.prototype.toString.call(e))return e[Symbol.iterator]();const t=e;if(0===t.length)return Le;let n=0;return{next:()=>{const e=t[n++];return{done:n>=t.length,value:e}}}}class Re{get(){return function(e){let t=e,n=null,r=null;for(;;)switch(t._tag){case"now":const e=t,i=We(n,r);if(!i)return e.value;n=null,t=i(e.value);break;case"always":case"once":t=new Ne(t.get());break;case"suspend":t=t.thunk();break;case"flatMap":n&&(r||(r=[]),r.push(n));const a=t;n=a.f,t=a.source}}(this)}map(e){return new De(this,(t=>Re.now(e(t))))}flatMap(e){return new De(this,e)}chain(e){return this.flatMap(e)}ap(e){return e.flatMap((e=>this.map(e)))}memoize(){switch(this._tag){case"now":case"once":return this;case"always":return new Fe(this.get);default:return new Fe((()=>this.get()))}}forEachL(e){return this.map(e)}forEach(e){this.forEachL(e).get()}static of(e){return Re.always(e)}static pure(e){return Re.now(e)}static now(e){return new Ne(e)}static unit(){return Me}static always(e){return new Oe(e)}static once(e){return new Fe(e)}static suspend(e){return new Be(e)}static defer(e){return Re.suspend(e)}static tailRecM(e,t){return t(e).flatMap((e=>e.isRight()?Re.now(e.get()):Re.tailRecM(e.swap().get(),t)))}static sequence(e){return function(e){return Re.of((()=>Pe(e))).flatMap((e=>He([],e)))}(e)}static map2(e,t,n){return Re.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return Re.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return Re.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return Re.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o){return Re.sequence([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}}class Ne extends Re{constructor(e){super(),this.value=e,this._tag="now"}get(){return this.value}toString(){return`Eval.now(${JSON.stringify(this.value)})`}}const Me=new Ne(void 0);class Fe extends Re{constructor(e){super(),this._tag="once",this._thunk=e}get(){if(this._thunk){try{this._cache=this._thunk(),this._isError=!1}catch(e){this._cache=e,this._isError=!0}delete this._thunk}if(this._isError)throw this._cache;return this._cache}toString(){return"Eval.once([thunk])"}}class Oe extends Re{constructor(e){super(),this._tag="always",this.get=e}toString(){return"Eval.always([thunk])"}}class Be extends Re{constructor(e){super(),this.thunk=e,this._tag="suspend"}toString(){return"Eval.suspend([thunk])"}}class De extends Re{constructor(e,t){super(),this.source=e,this.f=t,this._tag="flatMap"}toString(){return`Eval#FlatMap(${String(this.source)}, [function])`}}const Ue={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:Re.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>Re.tailRecM(t,(t=>e(h.left,h.right,t)))};function We(e,t){return e||(t&&t.length>0?t.pop():null)}function He(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?Re.pure(e):He(e,t))))}if(r)return Re.pure(e)}}m(Re,Ue);class ze{run(e=fe.global.get()){return function(e,t){let n=e,r=null,i=null;const a=t.executionModel.recommendedBatchSize-1;let o=t.batchIndex;for(;;)if(n instanceof A){if(n.isSuccess()){const e=et(r,i);if(!e)return t.batchIndex=o,be.pure(n.get());try{n=e(n.get())}catch(e){n=new je(A.failure(e))}}else{const e=n.failed().get(),a=tt(r,i);if(!a)return t.batchIndex=o,be.raise(e);try{n=a(e)}catch(e){n=new je(A.failure(e))}}r=null;const e=o+1&a;if(!e)return ot(n,t,r,i,!0);o=e}else switch(n._tag){case"pure":n=n.value;break;case"always":n=A.of(n.thunk);break;case"once":n=n.runTry();break;case"flatMap":const e=n;r&&(i||(i=[]),i.push(r)),r=e.g?[e.f,e.g]:e.f,n=e.source;break;case"async":case"memoize":return ot(n,t,r,i,!1)}}(this,e)}runOnComplete(e,t=fe.global.get()){return at(this,t,null,e,null,null,null)||N.empty()}attempt(){return this.transform((e=>h.left(e)),h.right)}asyncBoundary(e){return this.flatMap((t=>ze.shift(e).map((()=>t))))}chain(e){return this.flatMap(e)}delayExecution(e){return ze.delayedTick(e).flatMap((()=>this))}delayResult(e){return this.transformWith((t=>ze.delayedTick(e).flatMap((()=>ze.raise(t)))),(t=>ze.delayedTick(e).map((()=>t))))}doOnFinish(e){return this.transformWith((t=>e(C(t)).flatMap((()=>ze.raise(t)))),(t=>e(x).map((()=>t))))}doOnCancel(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler;r.trampoline((()=>{const i=t.connection;i.push(N.of((()=>e.run(r)))),ze.unsafeStart(this,t,st(r,i,n))}))}))}executeForked(e){return ze.fork(this,e)}executeWithModel(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler.withExecutionModel(e),i=new Ze(r,t.connection,t.options);r.trampoline((()=>ze.unsafeStart(this,i,n)))}))}executeWithOptions(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=new Ze(r,t.connection,e);r.trampoline((()=>ze.unsafeStart(this,i,n)))}))}flatMap(e){return new Ve(this,e)}ap(e){return e.flatMap((e=>this.map(e)))}followedBy(e){return this.flatMap((()=>e))}forEach(e){return this.map(e)}forEffect(e){return this.flatMap((t=>e.map((()=>t))))}map(e){return new Ve(this,(t=>ze.now(e(t))))}memoize(){switch(this._tag){case"pure":return this;case"always":return new qe(this.thunk,!1);case"memoize":const e=this;return e.onlySuccess?new Ye(this,!1):e;default:return new Ye(this,!1)}}memoizeOnSuccess(){switch(this._tag){case"pure":case"once":case"memoize":return this;case"always":return new qe(this.thunk,!0);default:return new Ye(this,!0)}}recover(e){return this.recoverWith((t=>ze.now(e(t))))}recoverWith(e){return this.transformWith(e,ze.now)}timeout(e){const t=ze.raise(new p(ue.of(e).toString()));return this.timeoutTo(e,t)}timeoutTo(e,t){const n=[this,ze.delayedTick(e).flatMap((()=>t))];return ze.firstCompletedOf(n)}transform(e,t){return this.transformWith((t=>ze.now(e(t))),(e=>ze.now(t(e))))}transformWith(e,t){return new Ve(this,t,e)}static always(e){return new $e(e)}static async(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler,i=t.connection;r.trampoline((()=>{const t=st(r,i,n);try{const n=e(r,t);i.push(n||N.empty())}catch(e){t(L(e))}}))}))}static asyncUnsafe(e){return new Xe(e)}static defer(e){return ze.unit().flatMap((()=>e()))}static deferAction(e){return ze.asyncUnsafe(((t,n)=>{const r=t.scheduler;let i;try{i=e(r)}catch(e){i=ze.raise(e)}r.trampoline((()=>ze.unsafeStart(i,t,n)))}))}static deferFuture(e){return ze.suspend((()=>ze.fromFuture(e())))}static deferFutureAction(e){return ze.deferAction((t=>ze.fromFuture(e(t))))}static delayedTick(e){return ze.asyncUnsafe(((t,n)=>{const r=t.connection,i=t.scheduler.scheduleOnce(e,(()=>{r.pop(),n(A.unit())}));r.push(i)}))}static firstCompletedOf(e){return lt(e,be.firstCompletedOf)}static fromFuture(e){return e.value().isEmpty()?ze.asyncUnsafe(((t,n)=>{t.connection.push(e),e.onComplete((e=>{t.connection.pop(),n(e)}))})):ze.fromTry(e.value().get())}static fromTry(e){return new je(e)}static fork(e,t){return ze.shift(t).flatMap((()=>e))}static map2(e,t,n){return ze.sequence([e,t]).map((e=>n(e[0],e[1])))}static map3(e,t,n,r){return ze.sequence([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static map4(e,t,n,r,i){return ze.sequence([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static map5(e,t,n,r,i,a){return ze.sequence([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static map6(e,t,n,r,i,a,o){return ze.sequence([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}static now(e){return new je(k(e))}static of(e){return ze.always(e)}static once(e){return new qe(e,!1)}static parMap2(e,t,n){return ze.gather([e,t]).map((e=>n(e[0],e[1])))}static parMap3(e,t,n,r){return ze.gather([e,t,n]).map((e=>r(e[0],e[1],e[2])))}static parMap4(e,t,n,r,i){return ze.gather([e,t,n,r]).map((e=>i(e[0],e[1],e[2],e[3])))}static parMap5(e,t,n,r,i,a){return ze.gather([e,t,n,r,i]).map((e=>a(e[0],e[1],e[2],e[3],e[4])))}static parMap6(e,t,n,r,i,a,o){return ze.gather([e,t,n,r,i,a]).map((e=>o(e[0],e[1],e[2],e[3],e[4],e[5])))}static pure(e){return ze.now(e)}static raise(e){return new je(L(e))}static sequence(e){return function(e){return ze.of((()=>Pe(e))).flatMap((e=>ct([],e)))}(e)}static gather(e){return lt(e,be.sequence)}static shift(e){return e?Ke(e):Qe}static suspend(e){return ze.unit().flatMap((()=>e()))}static tailRecM(e,t){try{return t(e).flatMap((e=>e.isRight()?ze.now(e.get()):ze.tailRecM(e.swap().get(),t)))}catch(e){return ze.raise(e)}}static unit(){return Ge}static unsafeStart(e,t,n){return at(e,t.scheduler,t,n,null,null,null)}}class je extends ze{constructor(e){super(),this.value=e,this._tag="pure"}}const Ge=new je(A.unit());class qe extends ze{constructor(e,t){super(),this._tag="once",this._thunk=e,this.onlyOnSuccess=t}memoize(){return this.onlyOnSuccess&&this._thunk?new qe(this._thunk,!1):this}runTry(){if(this._thunk){const e=A.of(this._thunk);return!e.isSuccess()&&this.onlyOnSuccess||(delete this._thunk,delete this.onlyOnSuccess,this.cache=e),e}return this.cache}}class $e extends ze{constructor(e){super(),this.thunk=e,this._tag="always"}}class Ve extends ze{constructor(e,t,n){super(),this.source=e,this.f=t,this.g=n,this._tag="flatMap"}}class Xe extends ze{constructor(e){super(),this.register=e,this._tag="async"}}class Ye extends ze{constructor(e,t){super(),this._tag="memoize",this.source=e,this.result=null,this.onlySuccess=t}}class Ze{constructor(e,t=new j,n={autoCancelableRunLoops:!1}){this.scheduler=e,this.options=n,this.connection=t,n.autoCancelableRunLoops&&(this.shouldCancel=()=>t.isCanceled())}markAsyncBoundary(){this.scheduler.batchIndex=0}shouldCancel(){return!1}}const Je={map:(e,t)=>t.map(e),ap:(e,t)=>t.ap(e),of:ze.pure,chain:(e,t)=>t.flatMap(e),chainRec:(e,t)=>ze.tailRecM(t,(t=>e(h.left,h.right,t)))};function Ke(e){return ze.asyncUnsafe(((t,n)=>{(e||t.scheduler).executeAsync((()=>n(A.unit())))}))}m(ze,Je);const Qe=Ke();function et(e,t){let n=void 0;return e?n=e:t&&t.length>0&&(n=t.pop()),n?"function"==typeof n?n:n[0]:null}function tt(e,t){let n=e;do{if(n&&"function"!=typeof n)return n[1];n=t?t.pop():null}while(n);return null}class nt{constructor(e,t){this.context=e,this.callback=t,this.canCall=!1,this.bFirst=null,this.bRest=null,this.asFunction=this.signal.bind(this)}prepare(e,t){this.bFirst=e,this.bRest=t,this.canCall=!0}signal(e){this.canCall?(this.canCall=!1,at(new je(e),this.context.scheduler,this.context,this.callback,this,this.bFirst,this.bRest)):e.isFailure()&&this.context.scheduler.reportFailure(e.failed().get())}}function rt(e,t,n,r,i,a,o){if(!t.shouldCancel()){t.scheduler.batchIndex=o;const s=r||new nt(t,n);s.prepare(i,a),e(t,s.asFunction)}}function it(e,t,n,r,i,a){t.shouldCancel()||t.scheduler.executeAsync((()=>{at(e,t.scheduler,t,n,r,i,a)}))}function at(e,t,n,r,i,a,o){let s=e,u=a,c=o;const l=t.executionModel.recommendedBatchSize-1;let d=t.batchIndex;for(;;)if(s instanceof A){if(s.isSuccess()){const e=et(u,c);if(!e)return t.batchIndex=d,r(s);try{s=e(s.get())}catch(e){s=A.failure(e)}}else{const e=tt(u,c);if(!e)return t.batchIndex=d,r(s);try{s=e(s.failed().get())}catch(e){s=A.failure(e)}}u=null;const e=d+1&l;if(!e){const e=n||new Ze(t);return it(s instanceof A?new je(s):s,e,r,i,u,c),e.connection}d=e}else switch(s._tag){case"pure":s=s.value;break;case"always":s=A.of(s.thunk);break;case"once":s=s.runTry();break;case"flatMap":const e=s;u&&(c||(c=[]),c.push(u)),u=e.g?[e.f,e.g]:e.f,s=e.source;break;case"async":const a=s,o=n||new Ze(t);return rt(a.register,o,r,i,u,c,d),o.connection;case"memoize":return ut(s,t,n,r,u,c,d)}}function ot(e,t,n,r,i){return be.create((a=>{const o=new Ze(t);return i?it(e,o,a,null,n,r):at(e,t,o,a,null,n,r),o.connection}))}function st(e,t,n){let r=!1;return i=>{r?i.isFailure()&&e.reportFailure(i.failed().get()):(r=!0,e.trampoline((()=>{t.pop(),n(i)})))}}function ut(e,t,n,r,i,a,o){let s;if(t.batchIndex=o,e.result)s=e.result;else{const n=ot(e.source,t,null,null,!1);n.value().isEmpty()?(e.result=n,s=n,n.onComplete((t=>{t.isSuccess()||!e.onlySuccess?(e.result=t,delete e.source):e.result=null}))):(s=n.value().get(),!s.isSuccess()&&e.onlySuccess||(e.result=s))}at(s instanceof A?new je(s):ze.fromFuture(s),t,n,r,null,i,a)}function ct(e,t){for(;;){const n=t.next(),r=n.done;if(n.value){return n.value.flatMap((n=>(e.push(n),r?ze.pure(e):ct(e,t))))}if(r)return ze.pure(e)}}function lt(e,t){return ze.asyncUnsafe(((n,r)=>{n.scheduler.trampoline((()=>{let i=!0;try{const a=[],o=le(e);i=!1;for(let e=0;e<o.length;e++){const t=o[e].run(n.scheduler);a.push(t)}const s=t(a,n.scheduler);n.connection.push(s),s.onComplete(st(n.scheduler,n.connection,r))}catch(e){i?r(L(e)):n.scheduler.reportFailure(e)}}))}))}}}]);